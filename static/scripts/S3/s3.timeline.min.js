(function(){var d;S3.timeline.loadGDataCallback=function(a){a=a.feed.entry;for(var b=[],c=0;c<a.length;++c){var e=a[c];if(null!==e.gd$when){var g=e.gd$when[0],f=h(g.startTime),g=h(g.endTime);b.push({start:f,end:g,title:e.title.$t,description:e.content.$t,link:e.link[0].href})}}S3.timeline.data={dateTimeFormat:"iso8601",events:b};d.loadJSON(S3.timeline.data,".");a=S3.timeline.tl;a.hideLoadingMessage();a.layout()};var k=function(a){if(0>a)throw Error("n is negative");return 10>a?"0"+a:a},l=function(a){return a.getFullYear()+
"-"+k(a.getMonth()+1)+"-"+k(a.getDate())},h=function(a){a=a.match(/(\d{4})-(\d{2})-(\d{2})/);return new Date(parseInt(a[1],10),parseInt(a[2],10)-1,parseInt(a[3],10))};S3.timeline.onLoadCalendar=function(){d=new Timeline.DefaultEventSource;var a=document.getElementById("s3timeline"),b=Timeline.ClassicTheme.create();b.event.bubble.width=320;b.event.bubble.height=180;var c=new Date((new Date).getTime()+2592E5),b=[Timeline.createBandInfo({eventSource:d,date:c,width:"40%",intervalUnit:Timeline.DateTime.WEEK,
intervalPixels:300,theme:b}),Timeline.createBandInfo({eventSource:d,date:c,width:"60%",intervalUnit:Timeline.DateTime.MONTH,intervalPixels:550,theme:b})];b[1].syncWith=0;b[1].highlight=!0;a=Timeline.create(a,b);S3.timeline.tl=a;a.showLoadingMessage();a=S3.timeline.calendar;b=new Date((new Date).getDate());c=new Date((new Date).getTime()+7776E6);b="?start-min="+l(b)+"&start-max="+l(c)+"&alt=json-in-script&callback=S3.timeline.loadGDataCallback&max-results=5000";a+=b;b=document.createElement("script");
b.src=a;document.body.appendChild(b)};S3.timeline.onLoad=function(){d=new Timeline.DefaultEventSource;var a=document.getElementById("s3timeline"),b=Timeline.ClassicTheme.create();b.timeline_start=new Date(S3.timeline.tl_start);b.timeline_stop=new Date(S3.timeline.tl_end);b.event.bubble.width=320;b.event.bubble.height=180;var c=Timeline.DateTime.parseIso8601DateTime(S3.timeline.now),b=[Timeline.createBandInfo({width:"90%",intervalUnit:Timeline.DateTime.DAY,intervalPixels:140,eventSource:d,date:c,theme:b}),
Timeline.createBandInfo({overview:!0,width:"10%",intervalUnit:Timeline.DateTime.MONTH,intervalPixels:200,eventSource:d,date:c})];b[1].syncWith=0;b[1].highlight=!0;a=Timeline.create(a,b,Timeline.HORIZONTAL);d.loadJSON(S3.timeline.data,".");a.layout();S3.timeline.tl=a};var f=null;S3.timeline.onResize=function(){null===f&&(f=window.setTimeout(function(){f=null;S3.timeline.tl.layout()},500))}})();
$(document).ready(function(){$(window).load(function(){S3.timeline.calendar?(SimileAjax.History.enabled=!1,S3.timeline.onLoadCalendar()):S3.timeline.tl_start&&(SimileAjax.History.enabled=!1,S3.timeline.onLoad())});$(window).resize(function(){if(S3.timeline.tl)S3.timeline.onResize()})});
