/*
 2014 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires jQuery jstree 3.0.3
*/
(function(c,w){var v=0,f={},h={};c.widget("s3.locationselector",{options:{hideLx:!0,reverseLx:!1,locations:null,labels:null,minBBOX:.05,showLabels:!0,featureRequired:null,latlonMode:"decimal",latlonModeToggle:!0},_create:function(){c(this.element);this.id=v;v+=1;this.namespace=".locationselector"},_init:function(){var a=c(this.element),b=this.options,d=a.attr("id");if(!d)throw"Location selector widget: real input field without id";this.fieldname=d;this.input=a;this.data=null;this._storeHierarchyData(b.labels,
b.locations);this.refresh()},_destroy:function(){c.Widget.prototype.destroy.call(this)},refresh:function(){this._unbindEvents();var a=this._deserialize();this._renderWidget();var b="#"+this.fieldname,d=this.options;c(b+"_geocode button").length?this.useGeocoder=!0:this.useGeocoder=!1;var e=c(b+"_L0__row");if(e.length){var k=[],g,m;for(m in f)g=f[m],0===g.l&&(g.i=m,k.push(g));k.sort(function(a,b){return a.n.localeCompare(b.n)});for(var s=c(b+"_L0"),u=0,l=k.length;u<l;u++)g=k[u],m=g.i,g='<option value="'+
m+'">'+g.n+"</option>",s.append(g);e.removeClass("hide").show();e=c(b+"_L0__row1");e.length&&e.removeClass("hide").show()}e=a.L0;k=a.L1;s=a.L2;u=a.L3;l=a.L4;g=a.L5;e&&this._lxSelect(0,e,!0);(k||s)&&this._lxSelect(1,k||s,!0);(s||u)&&this._lxSelect(2,s||u,!0);(u||l)&&this._lxSelect(3,u||l,!0);(l||g)&&this._lxSelect(4,l||g,!0);g&&this._lxSelect(5,g,!0);c(b+"_address").val(a.address);c(b+"_address__row").removeClass("hide").show();c(b+"_address__row1").removeClass("hide").show();c(b+"_postcode").val(a.postcode);
c(b+"_postcode__row").removeClass("hide").show();c(b+"_postcode__row1").removeClass("hide").show();c(b+"_lat").val(a.lat).latloninput({type:"lat",mode:d.latlonMode});c(b+"_lat__row").removeClass("hide").show();c(b+"_lat__row1").removeClass("hide").show();c(b+"_lon").val(a.lon).latloninput({type:"lon",mode:d.latlonMode});c(b+"_lon__row").removeClass("hide").show();c(b+"_lon__row1").removeClass("hide").show();c(b+"_map_icon__row").removeClass("hide").show();a.lat||a.lon||a.wkt?(this.input.data("manually_geocoded",
!0),this._showMap()):d.featureRequired?this._showMap():this._hideMap();this.input.prevAll(".throbber").remove();this._bindEvents()},_renderWidget:function(){var a="#"+this.fieldname,b=this.options.reverseLx,d=c(a+"_map_icon__row .map_wrapper");d.attr("id",this.fieldname+"_map_wrapper");var e=c(a+"__row"),k=this.input.next(".error_wrapper"),g=c(a+"_map_icon__row"),m=c(a+"_L0__row"),f=c(a+"_postcode__row");if(e.is(".control-group, .form-row")){var u=c(a+"_L1__row"),l=c(a+"_L2__row"),h=c(a+"_L3__row"),
p=c(a+"_L4__row"),q=c(a+"_L5__row"),r=c(a+"_address__row"),x=c(a+"_lat__row"),y=c(a+"_lon__row"),a=c(a+"_latlon_toggle__row");b?e.hide().after(d).after(g).after(a).after(y).after(x).after(m).after(u).after(l).after(h).after(p).after(q).after(f).after(r).after(k):e.hide().after(d).after(g).after(a).after(y).after(x).after(f).after(r).after(q).after(p).after(h).after(l).after(u).after(m).after(k)}else e.parent().is(".inline-form")?e.show():(c(a+"__row1").hide(),e.hide().after(k),b?m.after(d).after(g):
f.after(d).after(g));if(k.length)k.one("click"+this.namespace,function(){var a=c(this);a.fadeOut("slow",function(){a.remove()})})},_lxSelect:function(a,b,d){var e="#"+this.fieldname,k=this.options,g=c(e+"_L"+a);b?(g.val(b),g.hasClass("multiselect")&&g.multiselect("instance")&&g.multiselect("refresh")):b=parseInt(g.val(),10);if(0===a){var m=this._readLabels(b),s=h.d,u=["1","2","3","4","5"],l,t,p,q;for(p=0;5>p;p++)g=u[p],l=m[g]||s[g],q=e+"_L"+g,g=c(q),t=k.showLabels?g.hasClass("required")?"<div>"+l+
':<span class="req"> *</span></div>':l+":":"",c(q+"__row label").html(t),c(q+"__row1 label").html(t),c(q+' option[value=""]').html(i18n.select+" "+l),g.hasClass("multiselect")&&g.multiselect("instance")&&g.multiselect("refresh")}p=k.hideLx;for(g=a+1;6>g;g++)q=e+"_L"+g,p?(c(q+"__row").hide(),c(q+"__row1").hide()):c(q+" option").remove('[value != ""]'),c(q).val("");if(b)if(q=a+1,k=c(e+"_L"+q+"__row"),k.length){var r;if(c(e+"_L"+a+' option[value="'+b+'"]').hasClass("missing"))l=f[b],l.i=b,s=[l];else{p=
!0;for(r in f)if(f[r].f==b){p=!1;break}p&&this._readHierarchy(b,q);s=[];for(r in f)l=f[r],l.f==b&&(l.i=r,s.push(l))}if(a=s.length){s.sort(function(a,b){return a.n.localeCompare(b.n)});r=e+"_L"+q;m=c(r);u=c(r+' option[value=""]').html();c(r+" option").remove('[value != ""]');r=null;for(p=0;p<a;p++)l=s[p],r=l.i,g=b==r?' selected="selected"':"",t=l.l==q?"":' class="missing"',l='<option value="'+r+'"'+g+t+">"+l.n+"</option>",m.append(l);k.removeClass("hide").show();c(e+"_L"+q+"__row1").removeClass("hide").show();
m.hasClass("multiselect")&&(b={header:"",height:300,minWidth:0,selectedList:1,noneSelectedText:u,multiple:!1},m.hasClass("search")?(m.multiselect(b).multiselectfilter({label:"",placeholder:i18n.search}),c(".ui-multiselect-header").show()):(b.header=!1,m.multiselect(b)));1==a&&r&&this._lxSelect(q,r,d)}}else this.useGeocoder&&!d&&this._geocodeDecision();d?this._serialize():this._collectData();this._zoomMap()},_collectData:function(){var a=this.data,b="#"+this.fieldname,d=this._lookupParent(),e=c(b+
"_address").val(),k=c(b+"_postcode").val();a.address=e;a.postcode=k;if(a.specific)a.id=a.specific,a.parent=d;else{var g=a.lat,m=a.lon,f=a.wkt;e||k||g||m||f?(a.id=null,a.parent=d):(a.id=d,a.parent=null)}this._serialize();c(b+"_lat").val(a.lat).trigger("setvalue");c(b+"_lon").val(a.lon).trigger("setvalue");"sub_"==this.fieldname.slice(0,4)&&this.input.change()},_collectLx:function(){var a=this.data,b="#"+this.fieldname,d,e;for(e=0;6>e;e++)d=c(b+"_L"+e),d.length&&(d=d.val(),a["L"+e]=d?parseInt(d,10):
null);this._serialize()},_lookupParent:function(){this._collectLx();var a=this.data;parent;for(var b=5;-1<b;b--)if(parent=a["L"+b])return parent;return(a=f.d)?a.i:null},_readLabels:function(a){a||(a="d");var b=h[a];if(b==w){var d=S3.Ap.concat("/gis/hdata/"+a);c.ajaxS3({async:!1,url:d,dataType:"script",success:function(d){b={};try{for(var c in n)b[c]=n[c];h[a]=b;n=null}catch(g){}},error:function(a,b,d){s3_debug("UNAUTHORIZED"==d?i18n.gis_requires_login:a.responseText)}})}return b},_readHierarchy:function(a,
b){var d="#"+this.fieldname,e=c(d+"_L"+b),k=!1;e.hide();if(e.hasClass("multiselect"))var k=!0,g=c(d+"_L"+b+"__row button").hide();var m=c(d+"_L"+b+"__throbber").removeClass("hide").show(),d=S3.Ap.concat("/gis/ldata/"+a);c.ajaxS3({async:!1,url:d,dataType:"script",success:function(a){for(var b in n)f[b]=n[b];n=null;m.hide();k?g.removeClass("hide").show():e.removeClass("hide").show()},error:function(a,b,d){a="UNAUTHORIZED"==d?i18n.gis_requires_login:a.responseText;s3_debug(a);S3.showAlert(a,"error");
m.hide();k?g.removeClass("hide").show():e.removeClass("hide").show()}})},_geocodeDecision:function(){var a="#"+this.fieldname,b=this.data;this._collectData();if(b.address){for(var b=["1","2","3","4","5"],d=0,e;5>d;d++)if(e=c(a+"_L"+b[d]),e.length&&!e.val()&&1<e[0].options.length)return;c(a+"_geocode .geocode_success,"+a+"_geocode .geocode_fail").hide();var k=this,b=this.namespace;this.input.data("manually_geocoded")?c(a+"_geocode button").removeClass("hide").show().unbind(b).bind("click"+b,function(){c(this).hide();
k._geocode()}):this._geocode()}},_geocode:function(){for(var a=this.fieldname,b=this,d="#"+a,e=c(d+"_geocode .geocode_fail").hide(),k=c(d+"_geocode .geocode_success").hide(),g=c(d+"_geocode .throbber").removeClass("hide").show(),m=this.data,d={address:m.address},f="postcode L0 L1 L2 L3 L4 L5".split(" "),h=0,l,t;7>h;h++)l=f[h],(t=m[l])&&(d[l]=t);f=S3.Ap.concat("/gis/geocode");c.ajaxS3({url:f,type:"POST",data:d,dataType:"json",success:function(d){var c=d.lat,f=d.lon;if(c||f){m.lat=parseFloat(c);m.lon=
parseFloat(f);b._collectData();c=S3.gis;if(c.maps&&(f=c.maps["location_selector_"+a])){d=f.s3.draftLayer;d.removeAllFeatures();var h=new OpenLayers.Geometry.Point(m.lon,m.lat);h.transform(c.proj4326,f.getProjectionObject());c=new OpenLayers.Feature.Vector(h);d.addFeatures([c]);b._zoomMap()}g.hide();k.html(i18n.address_mapped).removeClass("hide").show()}else g.hide(),e.html(i18n.address_not_mapped).removeClass("hide").show(),s3_debug(d)},error:function(a,b,d){a="UNAUTHORIZED"==d?i18n.gis_requires_login:
a.responseText;g.hide();e.html(i18n.address_not_mapped).removeClass("hide").show();s3_debug(a)}})},_geocodeReverse:function(){var a=this,b="#"+this.fieldname,d=c(b+"_geocode .geocode_fail").hide(),e=c(b+"_geocode .geocode_success").hide(),f=c(b+"_geocode .throbber").removeClass("hide").show(),b=this.data,b={lat:b.lat,lon:b.lon},g=S3.Ap.concat("/gis/geocode_r");c.ajaxS3({async:!1,url:g,type:"POST",data:b,dataType:"json",success:function(b){b.L0?(a.useGeocoder=!1,a._lxSelect(0,b.L0),b.L1&&a._lxSelect(1,
b.L1),b.L2&&a._lxSelect(2,b.L2),b.L3&&a._lxSelect(3,b.L3),b.L4&&a._lxSelect(4,b.L4),b.L5&&a._lxSelect(5,b.L5),a.useGeocoder=!0,f.hide(),e.html(i18n.location_found).removeClass("hide").show()):(f.hide(),d.html(i18n.location_not_found).removeClass("hide").show())},error:function(a,b,c){a="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;f.hide();d.html(i18n.location_not_found).removeClass("hide").show();s3_debug(a)}})},_latlonInput:function(){var a=this.fieldname,b=this.data,d="#"+a,e=c(d+"_lat").val(),
d=c(d+"_lon").val();e||d?(e=e?parseFloat(e):0,d=d?parseFloat(d):0,b.lat=e,b.lon=d,b.wkt=null,this.input.data("manually_geocoded",!0)):(b.lat=null,b.lon=null,b.wkt||this.input.data("manually_geocoded",!1));this._serialize();e=S3.gis;e.maps&&(a=e.maps["location_selector_"+a])&&(d=a.s3.draftLayer,d.removeAllFeatures(),null!==b.lat&&null!==b.lon&&(b=new OpenLayers.Geometry.Point(b.lon,b.lat),b.transform(e.proj4326,a.getProjectionObject()),b=new OpenLayers.Feature.Vector(b),d.addFeatures([b]),a.s3.lastDraftFeature=
b),this._zoomMap())},_showMap:function(a){var b=this.fieldname,d=this.namespace,e=this,f="#"+b;c(f+"_map_icon").unbind(d).bind("click"+d,function(){e._hideMap()});c(f+"_map_icon span").html(i18n.hide_map);d=c(f+"_map_wrapper").hide().removeClass("hide").slideDown("medium");d.length&&a&&c("html,body").animate({scrollTop:d.offset().top},250);var g=this.input;c.when(this._jsLoaded()).then(function(a){var d=S3.gis;a="location_selector_"+b;var h;h=d.maps[a]?d.maps[a]:d.show_map(a);e._zoomMap();var l=e.data;
a=l.lat;var t=l.lon,p=l.wkt;if(a||t||p)h.s3.draftLayer.removeAllFeatures(),p!=w&&p?(a={internalProjection:h.getProjectionObject(),externalProjection:d.proj4326},a=(new OpenLayers.Format.WKT(a)).read(p)):(a=new OpenLayers.Geometry.Point(parseFloat(t),parseFloat(a)),a.transform(d.proj4326,h.getProjectionObject()),a=new OpenLayers.Feature.Vector(a)),h.s3.draftLayer.addFeatures([a]),h.s3.lastDraftFeature=a;a=h.controls;for(var q,t=0,r=a.length;t<r;t++)if("OpenLayers.Control.DrawFeature"==a[t].CLASS_NAME){q=
a[t];break}q&&(h.s3.pointPlaced=function(a){c(f+"_geocode .geocode_fail").hide();c(f+"_geocode .geocode_success").hide();var b=a.geometry;"OpenLayers.Geometry.Point"==b.CLASS_NAME?(a=b.getBounds().getCenterLonLat(),a.transform(h.getProjectionObject(),d.proj4326),l.wkt=null,l.lat=a.lat,l.lon=a.lon,!l.address&&this.useGeocoder&&e._geocodeReverse()):(b={internalProjection:h.getProjectionObject(),externalProjection:d.proj4326},p=(new OpenLayers.Format.WKT(b)).write(a),l.wkt=p,l.lat=null,l.lon=null);g.data("manually_geocoded",
!0);e._collectData();e._removeErrors()})},function(a){s3_debug(a)},function(a){s3_debug(a)})},_hideMap:function(){var a=this.fieldname,b=this.namespace,d="#"+a,e=this;c(d+"_map_icon").unbind(b).bind("click"+b,function(a){e._showMap(a)});c(d+"_map_wrapper").slideUp("medium");var b=this.data,f;if(b.specific)f=i18n.show_map_view;else if(f=i18n.show_map_add,S3.gis.maps&&(a=S3.gis.maps["location_selector_"+a]))a.s3.draftLayer.removeAllFeatures(),b.lat=null,b.lon=null,b.wkt=null,this.input.data("manually_geocoded",
!1),this._collectData();c(d+"_map_icon span").html(f)},_zoomMap:function(a){var b=this.fieldname,d=S3.gis;if(d.maps&&(b=d.maps["location_selector_"+b])){var c=this.data,d=c.lat,k=c.lon,c=c.wkt;if(d&&k)d=OpenLayers.Bounds.fromArray([k,d,k,d]);else if(c)d=(new OpenLayers.Feature.Vector(OpenLayers.Geometry.fromWKT(c))).geometry.getBounds();else{a||(a=this._lookupParent()||"d");d=f[a].b;if(!d||!d.length)for(k=f[a].f,a=4;k&&a&&(a--,k=f[k],!(d=k.b)&&0!==k.l);)k=k.f;d&&(d=OpenLayers.Bounds.fromArray(d))}d&&
S3.gis.zoomBounds(b,d,this.options.minBBOX)}},_validate:function(){var a=this.fieldname;this._removeErrors();var a="#"+a,b=this.data,d=this.options.featureRequired;if(d){var e=!1;switch(d){case "latlon":e=b.lat||b.lon;break;case "wkt":e=b.wkt;break;default:e=b.lat||b.lon||b.wkt}if(!e)return S3.fieldError(a+"_map_icon",i18n.map_feature_required),!1}var k=b.id,d="address L5 L4 L3 L2 L1 L0".split(" "),g,e=function(a){return a.hasClass("multiselect")?a.next("button.ui-multiselect").is(":visible"):a.is(":visible")};
if(k){if(!f[k])return!0;for(var h=f[k].l,b=0;b<6-h;b++)if(k=a+"_"+d[b],g=c(k),g.length&&g.hasClass("required")&&e(g))return S3.fieldError(k,i18n.enter_value),!1}else{if(b.lat||b.lon||b.wkt||b.address||b.postcode)return!0;for(b=0;7>b;b++)if(k=a+"_"+d[b],g=c(k),g.length&&g.hasClass("required")&&e(g))return S3.fieldError(k,i18n.enter_value),!1}return!0},_serialize:function(){var a=JSON.stringify(this.data);this.input.val(a);return a},_deserialize:function(){var a=this.input.val();return this.data=JSON.parse(a)},
_storeHierarchyData:function(a,b){var d;if(b)for(d in b)f[d]=b[d];if(a)for(d in a)h[d]=a[d]},_jsLoaded:function(){var a=new jQuery.Deferred;setTimeout(function d(){S3.gis.maps!=w?a.resolve("loaded"):"pending"===a.state()&&(a.notify("waiting for JS to load..."),setTimeout(d,500))},1);return a.promise()},_removeErrors:function(a){a||(a="#"+this.fieldname,a=a+"_L0,"+a+"_L1,"+a+"_L2,"+a+"_L3,"+a+"_L4,"+a+"_L5,"+a+"_address,"+a+"_postcode,"+a+"_map_icon");c(a).siblings(".error").remove()},_bindEvents:function(){var a=
this.fieldname,b=this.namespace,d=this,e="#"+a;c(e+"_L0").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(0)});c(e+"_L1").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(1)});c(e+"_L2").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(2)});c(e+"_L3").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(3)});c(e+"_L4").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(4)});c(e+"_L5").bind("change"+b,function(){d._removeErrors(this);d._lxSelect(5)});
c(e+"_address,"+e+"_postcode").bind("change"+b,function(){d._removeErrors(this);d.useGeocoder?d._geocodeDecision():d._collectData()});c(e+"_lat,"+e+"_lon").bind("change"+b,function(){d._latlonInput()});c(e+"_latlon_toggle").bind("click"+b,function(){var a=c(this).data("mode")||d.options.latlonMode,b;"dms"==a?(a="decimal",b=i18n.latlon_mode.dms):(a="dms",b=i18n.latlon_mode.decimal);c(e+"_lat").latloninput("option",{mode:a});c(e+"_lon").latloninput("option",{mode:a});c(this).html(b).data("mode",a)});
if("sub_"==a.substring(0,4))this.input.closest(".inline-form").bind("validate"+b+this.id,function(a){d._validate()||a.preventDefault()});else{var f=this.input.closest("form");f.bind("submit"+b+this.id,function(a){a.preventDefault();d._validate()&&f.unbind(b+d.id).submit()})}return!0},_unbindEvents:function(){var a="#"+this.fieldname,b=this.namespace;c(a+"_L0,"+a+"_L1,"+a+"_L2,"+a+"_L3,"+a+"_L4,"+a+"_L5,"+a+"_address,"+a+"_postcode,"+a+"_map_icon,"+a+"_latlon_toggle").unbind(b);this.input.next(".error_wrapper").unbind(b);
this.input.closest("form").unbind(b+self.id);return!0}})})(jQuery);
(function(c,w){var v=0;c.widget("s3.latloninput",{options:{type:"lat",mode:"decimal",labels:{deg:"\u00b0",min:"'",sec:'"'}},_create:function(){c(this.element);this.id=v;v+=1;this.namespace=".latloninput"},_init:function(){c(this.element).hide();this.refresh()},_destroy:function(){c(this.element).show();c.Widget.prototype.destroy.call(this)},_setOption:function(c,h){this._super(c,h);"mode"==c&&this.refresh()},refresh:function(){this._unbindEvents();var f=c(this.element),h=this.options;this.defaultValue=
f.val();if(!this.input){var a=c("<div>").hide().insertAfter(f),b=c('<input type="text" class="double dms-input" size="18">').hide();this.decimalInput=b;var d=h.labels,e=c('<input type="text" class="integer dms-input" size="5">'),k=c('<span class="dms-label">'+d.deg+"</span>"),g=c('<input type="text" class="integer dms-input" size="5">'),m=c('<span class="dms-label">'+d.min+"</span>"),s=c('<input type="text" class="double dms-input" size="8">'),d=c('<span class="dms-label">'+d.sec+"</span>");this.degInput=
e;this.minInput=g;this.secInput=s;this.dmsInput=e=c("<span>").append(e).append(k).append(g).append(m).append(s).append(d).hide();this.input=a.append(b).append(e).show()}this._removeErrors();"dms"==h.mode?(f=this._getDMS(),this.degInput.val(f.d),this.minInput.val(f.m),this.secInput.val(f.s),this.decimalInput.hide(),this.dmsInput.show()):(this.decimalInput.val(f.val()),this.dmsInput.hide(),this.decimalInput.show());this._bindEvents()},_getDMS:function(){var f=c(this.element).val();if(isNaN(parseFloat(f))||
!isFinite(f))return{d:"",m:"",s:""};var h=Math.abs(f),h=60*(h-parseInt(h,10));if(1E-10>Math.abs(h-Math.round(h)))h=Math.round(h),a=0;else{var a=60*(h-parseInt(h,10));1E-10>Math.abs(a-Math.round(a))&&(a=Math.round(a))}return{d:parseInt(f,10),m:parseInt(h,10),s:a}},_showError:function(c,h){"all"==c?this.input.find("input").addClass("invalidinput"):c&&c.addClass("invalidinput");h&&this.input.append('<div class="error">'+h+"</div>")},_removeErrors:function(){this.input.find("input").removeClass("invalidinput");
this.input.find(".error").remove()},_validateDMS:function(){this._removeErrors();var c,h;"lat"==this.options.type?(c=90,h=i18n.latlon_error.lat):(c=180,h=i18n.latlon_error.lon);var a=this.degInput.val(),b=this.minInput.val(),d=this.secInput.val(),e=[];if(""===a&&""===b&&""===d)return"";a=parseInt(a,10)||0;b=parseInt(b,10)||0;d=parseFloat(d)||0;60<=Math.abs(b)&&(this._showError(this.minInput),e.push(i18n.latlon_error.min));60<=Math.abs(d)&&(this._showError(this.secInput),e.push(i18n.latlon_error.sec));
b=Math.abs(a)+b/60+d/3600;if(!e.length&&b>c||a>c)this._showError("all"),e.push(h);return e.length?(this._showError(null,e.join(", ")),null):(0>a?-1:1)*b},_validateDecimal:function(){this._removeErrors();var c,h;"lat"==this.options.type?(c=90,h=i18n.latlon_error.lat):(c=180,h=i18n.latlon_error.lon);var a=this.decimalInput.val();if(""===a)return"";a=parseFloat(a);return Math.abs(a)>c?(this._showError(this.decimalInput,h),null):a},_bindEvents:function(){var f=this,h=this.namespace;this.dmsInput.find("input").bind("change"+
h,function(){var a=f._validateDMS();null!==a?c(f.element).val(a).change():c(f.element).val(f.defaultValue).change()});this.decimalInput.bind("change"+h,function(){var a=f._validateDecimal();null!==a?c(f.element).val(a).change():c(f.element).val(f.defaultValue).change()});c(this.element).bind("setvalue"+h,function(){f.refresh()});return!0},_unbindEvents:function(){var f=this.namespace;this.input&&this.input.find("input").unbind(f);c(this.element).unbind(f);return!0}})})(jQuery);
