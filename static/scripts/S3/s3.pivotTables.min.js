/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(d){d.color={};d.color.make=function(w,a,e,c){var b={};b.r=w||0;b.g=a||0;b.b=e||0;b.a=null!=c?c:1;b.add=function(d,a){for(var e=0;e<d.length;++e)b[d.charAt(e)]+=a;return b.normalize()};b.scale=function(d,a){for(var e=0;e<d.length;++e)b[d.charAt(e)]*=a;return b.normalize()};b.toString=function(){return 1<=b.a?"rgb("+[b.r,b.g,b.b].join()+")":"rgba("+[b.r,b.g,b.b,b.a].join()+")"};b.normalize=function(){function d(a,e,b){return e<a?a:e>b?b:e}b.r=d(0,parseInt(b.r),255);b.g=d(0,parseInt(b.g),255);
b.b=d(0,parseInt(b.b),255);b.a=d(0,b.a,1);return b};b.clone=function(){return d.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};d.color.extract=function(w,a){var e;do{e=w.css(a).toLowerCase();if(""!=e&&"transparent"!=e)break;w=w.parent()}while(!d.nodeName(w.get(0),"body"));"rgba(0, 0, 0, 0)"==e&&(e="transparent");return d.color.parse(e)};d.color.parse=function(w){var a,e=d.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(w))return e(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(w))return e(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(w))return e(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(w))return e(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(w))return e(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(w))return e(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));w=d.trim(w).toLowerCase();if("transparent"==w)return e(255,255,255,0);a=B[w]||[0,0,0];return e(a[0],a[1],a[2])};var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(d){function B(a,c){var b=c.children("."+a)[0];if(null==b&&(b=document.createElement("canvas"),b.className=a,d(b).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!b.getContext))if(window.G_vmlCanvasManager)b=window.G_vmlCanvasManager.initElement(b);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
b;b=this.context=b.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);this.resize(c.width(),c.height());this.textContainer=null;this.text={};this._textCache={}}function w(a,c,b,h){function g(k,z){z=[D].concat(z);for(var f=0;f<k.length;++f)k[f].apply(this,z)}function n(k){for(var z=[],f=0;f<k.length;++f){var a=d.extend(!0,{},m.series);null!=k[f].data?
(a.data=k[f].data,delete k[f].data,d.extend(!0,a,k[f]),k[f].data=a.data):a.data=k[f];z.push(a)}E=z;f=E.length;z=-1;for(k=0;k<E.length;++k)a=E[k].color,null!=a&&(f--,"number"==typeof a&&a>z&&(z=a));f<=z&&(f=z+1);var z=[],r=m.colors,e=r.length,b=0;for(k=0;k<f;k++)a=d.color.parse(r[k%e]||"#666"),0==k%e&&k&&(b=0<=b?0.5>b?-b-0.2:0:-b),z[k]=a.scale("rgb",1+b);for(k=f=0;k<E.length;++k){a=E[k];null==a.color?(a.color=z[f].toString(),++f):"number"==typeof a.color&&(a.color=z[a.color].toString());if(null==a.lines.show){var c,
r=!0;for(c in a)if(a[c]&&a[c].show){r=!1;break}r&&(a.lines.show=!0)}null==a.lines.zero&&(a.lines.zero=!!a.lines.fill);a.xaxis=F(M,s(a,"x"));a.yaxis=F(S,s(a,"y"))}I()}function s(k,a){var f=k[a+"axis"];"object"==typeof f&&(f=f.n);"number"!=typeof f&&(f=1);return f}function v(){return d.grep(M.concat(S),function(k){return k})}function x(k){var a={},f,d;for(f=0;f<M.length;++f)(d=M[f])&&d.used&&(a["x"+d.n]=d.c2p(k.left));for(f=0;f<S.length;++f)(d=S[f])&&d.used&&(a["y"+d.n]=d.c2p(k.top));void 0!==a.x1&&
(a.x=a.x1);void 0!==a.y1&&(a.y=a.y1);return a}function F(k,a){k[a-1]||(k[a-1]={n:a,direction:k==M?"x":"y",options:d.extend(!0,{},k==M?m.xaxis:m.yaxis)});return k[a-1]}function I(){function k(k,a,f){a<k.datamin&&a!=-b&&(k.datamin=a);f>k.datamax&&f!=b&&(k.datamax=f)}var a=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE,r,e,C,c,u,m,G,l,h,p,n,L;d.each(v(),function(k,d){d.datamin=a;d.datamax=f;d.used=!1});for(r=0;r<E.length;++r)u=E[r],u.datapoints={points:[]},g(Q.processRawData,
[u,u.data,u.datapoints]);for(r=0;r<E.length;++r){u=E[r];n=u.data;L=u.datapoints.format;if(!L){L=[];L.push({x:!0,number:!0,required:!0});L.push({y:!0,number:!0,required:!0});if(u.bars.show||u.lines.show&&u.lines.fill)L.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(u.bars.show&&u.bars.zero||u.lines.show&&u.lines.zero)}),u.bars.horizontal&&(delete L[L.length-1].y,L[L.length-1].x=!0);u.datapoints.format=L}if(null==u.datapoints.pointsize){u.datapoints.pointsize=L.length;G=u.datapoints.pointsize;
m=u.datapoints.points;var da=u.lines.show&&u.lines.steps;u.xaxis.used=u.yaxis.used=!0;for(e=C=0;e<n.length;++e,C+=G){p=n[e];var la=null==p;if(!la)for(c=0;c<G;++c){l=p[c];if(h=L[c])h.number&&null!=l&&(l=+l,isNaN(l)?l=null:Infinity==l?l=b:-Infinity==l&&(l=-b)),null==l&&(h.required&&(la=!0),null!=h.defaultValue&&(l=h.defaultValue));m[C+c]=l}if(la)for(c=0;c<G;++c)l=m[C+c],null!=l&&(h=L[c],h.x&&k(u.xaxis,l,l),h.y&&k(u.yaxis,l,l)),m[C+c]=null;else if(da&&0<C&&null!=m[C-G]&&m[C-G]!=m[C]&&m[C-G+1]!=m[C+1]){for(c=
0;c<G;++c)m[C+G+c]=m[C+c];m[C+1]=m[C-G+1];C+=G}}}}for(r=0;r<E.length;++r)u=E[r],g(Q.processDatapoints,[u,u.datapoints]);for(r=0;r<E.length;++r){u=E[r];m=u.datapoints.points;G=u.datapoints.pointsize;L=u.datapoints.format;p=C=a;da=n=f;for(e=0;e<m.length;e+=G)if(null!=m[e])for(c=0;c<G;++c)l=m[e+c],(h=L[c])&&(!1!==h.autoscale&&l!=b&&l!=-b)&&(h.x&&(l<C&&(C=l),l>n&&(n=l)),h.y&&(l<p&&(p=l),l>da&&(da=l)));if(u.bars.show){switch(u.bars.align){case "left":e=0;break;case "right":e=-u.bars.barWidth;break;case "center":e=
-u.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+u.bars.align);}u.bars.horizontal?(p+=e,da+=e+u.bars.barWidth):(C+=e,n+=e+u.bars.barWidth)}k(u.xaxis,C,n);k(u.yaxis,p,da)}d.each(v(),function(k,d){d.datamin==a&&(d.datamin=null);d.datamax==f&&(d.datamax=null)})}function w(k){function a(k){return k}var f,d,r=k.options.transform||a,e=k.options.inverseTransform;"x"==k.direction?(f=k.scale=U/Math.abs(r(k.max)-r(k.min)),d=Math.min(r(k.max),r(k.min))):(f=k.scale=R/Math.abs(r(k.max)-r(k.min)),
f=-f,d=Math.max(r(k.max),r(k.min)));k.p2c=r==a?function(k){return(k-d)*f}:function(k){return(r(k)-d)*f};k.c2p=e?function(k){return e(d+k/f)}:function(k){return d+k/f}}function V(k){var a=k.labelWidth,f=k.labelHeight,e=k.options.position,r=k.options.tickLength,b=m.grid.axisMargin,c=m.grid.labelMargin,l="x"==k.direction?M:S,u,na=d.grep(l,function(k){return k&&k.options.position==e&&k.reserveSpace});d.inArray(k,na)==na.length-1&&(b=0);null==r&&(r=d.grep(l,function(k){return k&&k.reserveSpace}),r=(u=
0==d.inArray(k,r))?"full":5);isNaN(+r)||(c+=+r);"x"==k.direction?(f+=c,"bottom"==e?(t.bottom+=f+b,k.box={top:K.height-t.bottom,height:f}):(k.box={top:t.top+b,height:f},t.top+=f+b)):(a+=c,"left"==e?(k.box={left:t.left+b,width:a},t.left+=a+b):(t.right+=a+b,k.box={left:K.width-t.right,width:a}));k.position=e;k.tickLength=r;k.box.padding=c;k.innermost=u}function N(){var k=m.grid.minBorderMargin,a={x:0,y:0},f;if(null==k)for(f=k=0;f<E.length;++f)k=Math.max(k,2*(E[f].points.radius+E[f].points.lineWidth/
2));a.x=a.y=Math.ceil(k);d.each(v(),function(k,f){var d=f.direction;f.reserveSpace&&(a[d]=Math.ceil(Math.max(a[d],("x"==d?f.labelWidth:f.labelHeight)/2)))});t.left=Math.max(a.x,t.left);t.right=Math.max(a.x,t.right);t.top=Math.max(a.y,t.top);t.bottom=Math.max(a.y,t.bottom)}function q(){var k,a=v(),f=m.grid.show;for(k in t){var e=m.grid.margin||0;t[k]="number"==typeof e?e:e[k]||0}g(Q.processOffset,[t]);for(k in t)t[k]="object"==typeof m.grid.borderWidth?t[k]+(f?m.grid.borderWidth[k]:0):t[k]+(f?m.grid.borderWidth:
0);d.each(a,function(k,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var f=a.options,d=+(null!=f.min?f.min:a.datamin),e=+(null!=f.max?f.max:a.datamax),z=e-d;if(0==z){if(z=0==e?1:0.01,null==f.min&&(d-=z),null==f.max||null!=f.min)e+=z}else{var b=f.autoscaleMargin;null!=b&&(null==f.min&&(d-=z*b,0>d&&(null!=a.datamin&&0<=a.datamin)&&(d=0)),null==f.max&&(e+=z*b,0<e&&(null!=a.datamax&&0>=a.datamax)&&(e=0)))}a.min=d;a.max=e});if(f){e=d.grep(a,function(k){return k.reserveSpace});
d.each(e,function(k,a){H(a);var f=a.options.ticks,e=[];null==f||"number"==typeof f&&0<f?e=a.tickGenerator(a):f&&(e=d.isFunction(f)?f(a):f);var z;a.ticks=[];for(f=0;f<e.length;++f){var b=null,c=e[f];"object"==typeof c?(z=+c[0],1<c.length&&(b=c[1])):z=+c;null==b&&(b=a.tickFormatter(z,a));isNaN(z)||a.ticks.push({v:z,label:b})}e=a.ticks;a.options.autoscaleMargin&&0<e.length&&(null==a.options.min&&(a.min=Math.min(a.min,e[0].v)),null==a.options.max&&1<e.length&&(a.max=Math.max(a.max,e[e.length-1].v)));
e=a.options;f=a.ticks||[];z=e.labelWidth||0;for(var b=e.labelHeight||0,c="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+(a.direction+"Axis "+a.direction+a.n+"Axis"),m=e.font||"flot-tick-label tickLabel",l=0;l<f.length;++l){var ba=f[l];ba.label&&(ba=K.getTextInfo(c,ba.label,m),null==e.labelWidth&&(z=Math.max(z,ba.width)),null==e.labelHeight&&(b=Math.max(b,ba.height)))}a.labelWidth=Math.ceil(z);a.labelHeight=Math.ceil(b)});for(k=e.length-1;0<=k;--k)V(e[k]);N();d.each(e,function(k,a){"x"==
a.direction?(a.box.left=t.left-a.labelWidth/2,a.box.width=K.width-t.left-t.right+a.labelWidth):(a.box.top=t.top-a.labelHeight/2,a.box.height=K.height-t.bottom-t.top+a.labelHeight)})}U=K.width-t.left-t.right;R=K.height-t.bottom-t.top;d.each(a,function(k,a){w(a)});f&&ra();A()}function H(k){var a=k.options,f;f="number"==typeof a.ticks&&0<a.ticks?a.ticks:0.3*Math.sqrt("x"==k.direction?K.width:K.height);f=(k.max-k.min)/f;var e=-Math.floor(Math.log(f)/Math.LN10),b=a.tickDecimals;null!=b&&e>b&&(e=b);var c=
Math.pow(10,-e),m=f/c,l;1.5>m?l=1:3>m?(l=2,2.25<m&&(null==b||e+1<=b)&&(l=2.5,++e)):l=7.5>m?5:10;l*=c;null!=a.minTickSize&&l<a.minTickSize&&(l=a.minTickSize);k.delta=f;k.tickDecimals=Math.max(0,null!=b?b:e);k.tickSize=a.tickSize||l;if("time"==a.mode&&!k.tickGenerator)throw Error("Time mode requires the flot.time plugin.");k.tickGenerator||(k.tickGenerator=function(k){var a=[],f=k.tickSize*Math.floor(k.min/k.tickSize),d=0,e=Number.NaN,b;do b=e,e=f+d*k.tickSize,a.push(e),++d;while(e<k.max&&e!=b);return a},
k.tickFormatter=function(k,a){var f=a.tickDecimals?Math.pow(10,a.tickDecimals):1,d=""+Math.round(k*f)/f;if(null!=a.tickDecimals){var e=d.indexOf("."),e=-1==e?0:d.length-e-1;if(e<a.tickDecimals)return(e?d:d+".")+(""+f).substr(1,a.tickDecimals-e)}return d});d.isFunction(a.tickFormatter)&&(k.tickFormatter=function(k,f){return""+a.tickFormatter(k,f)});if(null!=a.alignTicksWithAxis){var u=("x"==k.direction?M:S)[a.alignTicksWithAxis-1];u&&(u.used&&u!=k)&&(f=k.tickGenerator(k),0<f.length&&(null==a.min&&
(k.min=Math.min(k.min,f[0])),null==a.max&&1<f.length&&(k.max=Math.max(k.max,f[f.length-1]))),k.tickGenerator=function(k){var a=[],f,d;for(d=0;d<u.ticks.length;++d)f=(u.ticks[d].v-u.min)/(u.max-u.min),f=k.min+f*(k.max-k.min),a.push(f);return a},k.mode||null!=a.tickDecimals||(f=Math.max(0,-Math.floor(Math.log(k.delta)/Math.LN10)+1),e=k.tickGenerator(k),1<e.length&&/\..*0$/.test((e[1]-e[0]).toFixed(f))||(k.tickDecimals=f)))}}function p(){K.clear();g(Q.drawBackground,[l]);var k=m.grid;k.show&&k.backgroundColor&&
(l.save(),l.translate(t.left,t.top),l.fillStyle=oa(m.grid.backgroundColor,R,0,"rgba(255, 255, 255, 0)"),l.fillRect(0,0,U,R),l.restore());k.show&&!k.aboveData&&W();for(var a=0;a<E.length;++a){g(Q.drawSeries,[l,E[a]]);var f=E[a];f.lines.show&&sa(f);f.bars.show&&ca(f);f.points.show&&$(f)}g(Q.draw,[l]);k.show&&k.aboveData&&W();K.render()}function y(k,a){for(var f,d,e,b,c=v(),m=0;m<c.length;++m)if(f=c[m],f.direction==a&&(b=a+f.n+"axis",k[b]||1!=f.n||(b=a+"axis"),k[b])){d=k[b].from;e=k[b].to;break}k[b]||
(f="x"==a?M[0]:S[0],d=k[a+"1"],e=k[a+"2"]);null!=d&&(null!=e&&d>e)&&(b=d,d=e,e=b);return{from:d,to:e,axis:f}}function W(){var a,e,f;l.save();l.translate(t.left,t.top);if(f=m.grid.markings)for(d.isFunction(f)&&(e=D.getAxes(),e.xmin=e.xaxis.min,e.xmax=e.xaxis.max,e.ymin=e.yaxis.min,e.ymax=e.yaxis.max,f=f(e)),a=0;a<f.length;++a){e=f[a];var b=y(e,"x"),c=y(e,"y");null==b.from&&(b.from=b.axis.min);null==b.to&&(b.to=b.axis.max);null==c.from&&(c.from=c.axis.min);null==c.to&&(c.to=c.axis.max);b.to<b.axis.min||
(b.from>b.axis.max||c.to<c.axis.min||c.from>c.axis.max)||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max),b.from==b.to&&c.from==c.to)||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),c.from=c.axis.p2c(c.from),c.to=c.axis.p2c(c.to),b.from==b.to||c.from==c.to?(l.beginPath(),l.strokeStyle=e.color||m.grid.markingsColor,l.lineWidth=e.lineWidth||m.grid.markingsLineWidth,l.moveTo(b.from,c.from),l.lineTo(b.to,c.to),l.stroke()):
(l.fillStyle=e.color||m.grid.markingsColor,l.fillRect(b.from,c.to,b.to-b.from,c.from-c.to)))}e=v();f=m.grid.borderWidth;for(b=0;b<e.length;++b){c=e[b];a=c.box;var g=c.tickLength,C,h,u,p;if(c.show&&0!=c.ticks.length){l.lineWidth=1;"x"==c.direction?(C=0,h="full"==g?"top"==c.position?0:R:a.top-t.top+("top"==c.position?a.height:0)):(h=0,C="full"==g?"left"==c.position?0:U:a.left-t.left+("left"==c.position?a.width:0));c.innermost||(l.strokeStyle=c.options.color,l.beginPath(),u=p=0,"x"==c.direction?u=U+
1:p=R+1,1==l.lineWidth&&("x"==c.direction?h=Math.floor(h)+0.5:C=Math.floor(C)+0.5),l.moveTo(C,h),l.lineTo(C+u,h+p),l.stroke());l.strokeStyle=c.options.tickColor;l.beginPath();for(a=0;a<c.ticks.length;++a){var G=c.ticks[a].v;u=p=0;isNaN(G)||(G<c.min||G>c.max||"full"==g&&("object"==typeof f&&0<f[c.position]||0<f)&&(G==c.min||G==c.max))||("x"==c.direction?(C=c.p2c(G),p="full"==g?-R:g,"top"==c.position&&(p=-p)):(h=c.p2c(G),u="full"==g?-U:g,"left"==c.position&&(u=-u)),1==l.lineWidth&&("x"==c.direction?
C=Math.floor(C)+0.5:h=Math.floor(h)+0.5),l.moveTo(C,h),l.lineTo(C+u,h+p))}l.stroke()}}f&&(a=m.grid.borderColor,"object"==typeof f||"object"==typeof a?("object"!==typeof f&&(f={top:f,right:f,bottom:f,left:f}),"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a}),0<f.top&&(l.strokeStyle=a.top,l.lineWidth=f.top,l.beginPath(),l.moveTo(0-f.left,0-f.top/2),l.lineTo(U,0-f.top/2),l.stroke()),0<f.right&&(l.strokeStyle=a.right,l.lineWidth=f.right,l.beginPath(),l.moveTo(U+f.right/2,0-f.top),l.lineTo(U+f.right/
2,R),l.stroke()),0<f.bottom&&(l.strokeStyle=a.bottom,l.lineWidth=f.bottom,l.beginPath(),l.moveTo(U+f.right,R+f.bottom/2),l.lineTo(0,R+f.bottom/2),l.stroke()),0<f.left&&(l.strokeStyle=a.left,l.lineWidth=f.left,l.beginPath(),l.moveTo(0-f.left/2,R+f.bottom),l.lineTo(0-f.left/2,0),l.stroke())):(l.lineWidth=f,l.strokeStyle=m.grid.borderColor,l.strokeRect(-f/2,-f/2,U+f,R+f)));l.restore()}function ra(){d.each(v(),function(a,e){if(e.show&&0!=e.ticks.length){var f=e.box,d="flot-"+e.direction+"-axis flot-"+
e.direction+e.n+"-axis "+(e.direction+"Axis "+e.direction+e.n+"Axis"),b=e.options.font||"flot-tick-label tickLabel",c,m,l,u,g;K.removeText(d);for(var h=0;h<e.ticks.length;++h)c=e.ticks[h],!c.label||(c.v<e.min||c.v>e.max)||("x"==e.direction?(u="center",m=t.left+e.p2c(c.v),"bottom"==e.position?l=f.top+f.padding:(l=f.top+f.height-f.padding,g="bottom")):(g="middle",l=t.top+e.p2c(c.v),"left"==e.position?(m=f.left+f.width-f.padding,u="right"):m=f.left+f.padding),K.addText(d,m,l,c.label,b,null,u,g))}})}
function sa(a){function e(a,k,f,d,b){var c=a.points;a=a.pointsize;var m=null,z=null;l.beginPath();for(var g=a;g<c.length;g+=a){var h=c[g-a],r=c[g-a+1],p=c[g],n=c[g+1];if(null!=h&&null!=p){if(r<=n&&r<b.min){if(n<b.min)continue;h=(b.min-r)/(n-r)*(p-h)+h;r=b.min}else if(n<=r&&n<b.min){if(r<b.min)continue;p=(b.min-r)/(n-r)*(p-h)+h;n=b.min}if(r>=n&&r>b.max){if(n>b.max)continue;h=(b.max-r)/(n-r)*(p-h)+h;r=b.max}else if(n>=r&&n>b.max){if(r>b.max)continue;p=(b.max-r)/(n-r)*(p-h)+h;n=b.max}if(h<=p&&h<d.min){if(p<
d.min)continue;r=(d.min-h)/(p-h)*(n-r)+r;h=d.min}else if(p<=h&&p<d.min){if(h<d.min)continue;n=(d.min-h)/(p-h)*(n-r)+r;p=d.min}if(h>=p&&h>d.max){if(p>d.max)continue;r=(d.max-h)/(p-h)*(n-r)+r;h=d.max}else if(p>=h&&p>d.max){if(h>d.max)continue;n=(d.max-h)/(p-h)*(n-r)+r;p=d.max}h==m&&r==z||l.moveTo(d.p2c(h)+k,b.p2c(r)+f);m=p;z=n;l.lineTo(d.p2c(p)+k,b.p2c(n)+f)}}l.stroke()}function f(a,k,f){var e=a.points;a=a.pointsize;for(var d=Math.min(Math.max(0,f.min),f.max),b=0,c=!1,m=1,z=0,h=0;!(0<a&&b>e.length+
a);){var b=b+a,r=e[b-a],g=e[b-a+m],p=e[b],n=e[b+m];if(c){if(0<a&&null!=r&&null==p){h=b;a=-a;m=2;continue}if(0>a&&b==z+a){l.fill();c=!1;a=-a;m=1;b=z=h+a;continue}}if(null!=r&&null!=p){if(r<=p&&r<k.min){if(p<k.min)continue;g=(k.min-r)/(p-r)*(n-g)+g;r=k.min}else if(p<=r&&p<k.min){if(r<k.min)continue;n=(k.min-r)/(p-r)*(n-g)+g;p=k.min}if(r>=p&&r>k.max){if(p>k.max)continue;g=(k.max-r)/(p-r)*(n-g)+g;r=k.max}else if(p>=r&&p>k.max){if(r>k.max)continue;n=(k.max-r)/(p-r)*(n-g)+g;p=k.max}c||(l.beginPath(),l.moveTo(k.p2c(r),
f.p2c(d)),c=!0);if(g>=f.max&&n>=f.max)l.lineTo(k.p2c(r),f.p2c(f.max)),l.lineTo(k.p2c(p),f.p2c(f.max));else if(g<=f.min&&n<=f.min)l.lineTo(k.p2c(r),f.p2c(f.min)),l.lineTo(k.p2c(p),f.p2c(f.min));else{var ba=r,t=p;g<=n&&g<f.min&&n>=f.min?(r=(f.min-g)/(n-g)*(p-r)+r,g=f.min):n<=g&&(n<f.min&&g>=f.min)&&(p=(f.min-g)/(n-g)*(p-r)+r,n=f.min);g>=n&&g>f.max&&n<=f.max?(r=(f.max-g)/(n-g)*(p-r)+r,g=f.max):n>=g&&(n>f.max&&g<=f.max)&&(p=(f.max-g)/(n-g)*(p-r)+r,n=f.max);r!=ba&&l.lineTo(k.p2c(ba),f.p2c(g));l.lineTo(k.p2c(r),
f.p2c(g));l.lineTo(k.p2c(p),f.p2c(n));p!=t&&(l.lineTo(k.p2c(p),f.p2c(n)),l.lineTo(k.p2c(t),f.p2c(n)))}}}}l.save();l.translate(t.left,t.top);l.lineJoin="round";var d=a.lines.lineWidth,b=a.shadowSize;if(0<d&&0<b){l.lineWidth=b;l.strokeStyle="rgba(0,0,0,0.1)";var c=Math.PI/18;e(a.datapoints,Math.sin(c)*(d/2+b/2),Math.cos(c)*(d/2+b/2),a.xaxis,a.yaxis);l.lineWidth=b/2;e(a.datapoints,Math.sin(c)*(d/2+b/4),Math.cos(c)*(d/2+b/4),a.xaxis,a.yaxis)}l.lineWidth=d;l.strokeStyle=a.color;if(b=O(a.lines,a.color,
0,R))l.fillStyle=b,f(a.datapoints,a.xaxis,a.yaxis);0<d&&e(a.datapoints,0,0,a.xaxis,a.yaxis);l.restore()}function $(a){function e(a,k,f,d,b,c,r,m){var g=a.points;a=a.pointsize;for(var z=0;z<g.length;z+=a){var h=g[z],p=g[z+1];null==h||(h<c.min||h>c.max||p<r.min||p>r.max)||(l.beginPath(),h=c.p2c(h),p=r.p2c(p)+d,"circle"==m?l.arc(h,p,k,0,b?Math.PI:2*Math.PI,!1):m(l,h,p,k,b),l.closePath(),f&&(l.fillStyle=f,l.fill()),l.stroke())}}l.save();l.translate(t.left,t.top);var f=a.points.lineWidth,d=a.shadowSize,
b=a.points.radius,c=a.points.symbol;0==f&&(f=1E-4);0<f&&0<d&&(d/=2,l.lineWidth=d,l.strokeStyle="rgba(0,0,0,0.1)",e(a.datapoints,b,null,d+d/2,!0,a.xaxis,a.yaxis,c),l.strokeStyle="rgba(0,0,0,0.2)",e(a.datapoints,b,null,d/2,!0,a.xaxis,a.yaxis,c));l.lineWidth=f;l.strokeStyle=a.color;e(a.datapoints,b,O(a.points,a.color),0,!1,a.xaxis,a.yaxis,c);l.restore()}function aa(a,e,f,d,b,c,m,g,l,h,p,n){var t,y,q,s;p?(s=y=q=!0,t=!1,p=f,f=e+d,b=e+b,a<p&&(e=a,a=p,p=e,t=!0,y=!1)):(t=y=q=!0,s=!1,p=a+d,a+=b,b=f,f=e,f<
b&&(e=f,f=b,b=e,s=!0,q=!1));a<g.min||(p>g.max||f<l.min||b>l.max)||(p<g.min&&(p=g.min,t=!1),a>g.max&&(a=g.max,y=!1),b<l.min&&(b=l.min,s=!1),f>l.max&&(f=l.max,q=!1),p=g.p2c(p),b=l.p2c(b),a=g.p2c(a),f=l.p2c(f),m&&(h.beginPath(),h.moveTo(p,b),h.lineTo(p,f),h.lineTo(a,f),h.lineTo(a,b),h.fillStyle=m(b,f),h.fill()),0<n&&(t||y||q||s)&&(h.beginPath(),h.moveTo(p,b+c),t?h.lineTo(p,f+c):h.moveTo(p,f+c),q?h.lineTo(a,f+c):h.moveTo(a,f+c),y?h.lineTo(a,b+c):h.moveTo(a,b+c),s?h.lineTo(p,b+c):h.moveTo(p,b+c),h.stroke()))}
function ca(a){l.save();l.translate(t.left,t.top);l.lineWidth=a.bars.lineWidth;l.strokeStyle=a.color;var e;switch(a.bars.align){case "left":e=0;break;case "right":e=-a.bars.barWidth;break;case "center":e=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(f,e,b,d,c,m,h){var g=f.points;f=f.pointsize;for(var p=0;p<g.length;p+=f)null!=g[p]&&aa(g[p],g[p+1],g[p+2],e,b,d,c,m,h,l,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,e,e+a.bars.barWidth,0,a.bars.fill?
function(f,e){return O(a.bars,a.color,f,e)}:null,a.xaxis,a.yaxis);l.restore()}function O(a,e,f,b){var c=a.fill;if(!c)return null;if(a.fillColor)return oa(a.fillColor,f,b,e);a=d.color.parse(e);a.a="number"==typeof c?c:0.4;a.normalize();return a.toString()}function A(){a.find(".legend").remove();if(m.legend.show){for(var b=[],c=[],f=!1,g=m.legend.labelFormatter,h,p,l=0;l<E.length;++l)h=E[l],h.label&&(p=g?g(h.label,h):h.label)&&c.push({label:p,color:h.color});if(m.legend.sorted)if(d.isFunction(m.legend.sorted))c.sort(m.legend.sorted);
else if("reverse"==m.legend.sorted)c.reverse();else{var n="descending"!=m.legend.sorted;c.sort(function(a,f){return a.label==f.label?0:a.label<f.label!=n?1:-1})}for(l=0;l<c.length;++l)g=c[l],0==l%m.legend.noColumns&&(f&&b.push("</tr>"),b.push("<tr>"),f=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+m.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+g.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g.label+"</td>");
f&&b.push("</tr>");0!=b.length&&(c='<table style="font-size:smaller;color:'+m.grid.color+'">'+b.join("")+"</table>",null!=m.legend.container?d(m.legend.container).html(c):(b="",f=m.legend.position,l=m.legend.margin,null==l[0]&&(l=[l,l]),"n"==f.charAt(0)?b+="top:"+(l[1]+t.top)+"px;":"s"==f.charAt(0)&&(b+="bottom:"+(l[1]+t.bottom)+"px;"),"e"==f.charAt(1)?b+="right:"+(l[0]+t.right)+"px;":"w"==f.charAt(1)&&(b+="left:"+(l[0]+t.left)+"px;"),c=d('<div class="legend">'+c.replace('style="','style="position:absolute;'+
b+";")+"</div>").appendTo(a),0!=m.legend.backgroundOpacity&&(f=m.legend.backgroundColor,null==f&&(f=(f=m.grid.backgroundColor)&&"string"==typeof f?d.color.parse(f):d.color.extract(c,"background-color"),f.a=1,f=f.toString()),l=c.children(),d('<div style="position:absolute;width:'+l.width()+"px;height:"+l.height()+"px;"+b+"background-color:"+f+';"> </div>').prependTo(c).css("opacity",m.legend.backgroundOpacity))))}}function pa(a){m.grid.hoverable&&X("plothover",a,function(a){return!1!=a.hoverable})}
function T(a){m.grid.hoverable&&X("plothover",a,function(a){return!1})}function qa(a){X("plotclick",a,function(a){return!1!=a.clickable})}function X(b,d,f){var c=Y.offset(),l=d.pageX-c.left-t.left,g=d.pageY-c.top-t.top,h=x({left:l,top:g});h.pageX=d.pageX;h.pageY=d.pageY;d=m.grid.mouseActiveRadius;var p=d*d+1,n=null,y,q,s;for(y=E.length-1;0<=y;--y)if(f(E[y])){var v=E[y],W=v.xaxis,A=v.yaxis,$=v.datapoints.points,aa=W.c2p(l),ca=A.c2p(g),I=d/W.scale,D=d/A.scale;s=v.datapoints.pointsize;W.options.inverseTransform&&
(I=Number.MAX_VALUE);A.options.inverseTransform&&(D=Number.MAX_VALUE);if(v.lines.show||v.points.show)for(q=0;q<$.length;q+=s){var F=$[q],w=$[q+1];null==F||(F-aa>I||F-aa<-I||w-ca>D||w-ca<-D)||(F=Math.abs(W.p2c(F)-l),w=Math.abs(A.p2c(w)-g),w=F*F+w*w,w<p&&(p=w,n=[y,q/s]))}if(v.bars.show&&!n)for(W="left"==v.bars.align?0:-v.bars.barWidth/2,v=W+v.bars.barWidth,q=0;q<$.length;q+=s)F=$[q],w=$[q+1],A=$[q+2],null!=F&&(E[y].bars.horizontal?aa<=Math.max(A,F)&&aa>=Math.min(A,F)&&ca>=w+W&&ca<=w+v:aa>=F+W&&aa<=
F+v&&ca>=Math.min(A,w)&&ca<=Math.max(A,w))&&(n=[y,q/s])}n?(y=n[0],q=n[1],s=E[y].datapoints.pointsize,f={datapoint:E[y].datapoints.points.slice(q*s,(q+1)*s),dataIndex:q,series:E[y],seriesIndex:y}):f=null;f&&(f.pageX=parseInt(f.series.xaxis.p2c(f.datapoint[0])+c.left+t.left,10),f.pageY=parseInt(f.series.yaxis.p2c(f.datapoint[1])+c.top+t.top,10));if(m.grid.autoHighlight){for(c=0;c<Z.length;++c)l=Z[c],l.auto!=b||f&&l.series==f.series&&l.point[0]==f.datapoint[0]&&l.point[1]==f.datapoint[1]||ha(l.series,
l.point);f&&ia(f.series,f.datapoint,b)}a.trigger(b,[h,f])}function ea(){var a=m.interaction.redrawOverlayInterval;-1==a?ja():ga||(ga=setTimeout(ja,a))}function ja(){ga=null;P.save();fa.clear();P.translate(t.left,t.top);var a,b;for(a=0;a<Z.length;++a)if(b=Z[a],b.series.bars.show)ma(b.series,b.point);else{var f=b.series,e=b.point;b=e[0];var e=e[1],c=f.xaxis,l=f.yaxis,h="string"===typeof f.highlightColor?f.highlightColor:d.color.parse(f.color).scale("a",0.5).toString();if(!(b<c.min||b>c.max||e<l.min||
e>l.max)){var p=f.points.radius+f.points.lineWidth/2;P.lineWidth=p;P.strokeStyle=h;h=1.5*p;b=c.p2c(b);e=l.p2c(e);P.beginPath();"circle"==f.points.symbol?P.arc(b,e,h,0,2*Math.PI,!1):f.points.symbol(P,b,e,h,!1);P.closePath();P.stroke()}}P.restore();g(Q.drawOverlay,[P])}function ia(a,b,f){"number"==typeof a&&(a=E[a]);if("number"==typeof b){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=ka(a,b);-1==e?(Z.push({series:a,point:b,auto:f}),ea()):f||(Z[e].auto=!1)}function ha(a,b){if(null==
a&&null==b)Z=[],ea();else{"number"==typeof a&&(a=E[a]);if("number"==typeof b){var f=a.datapoints.pointsize;b=a.datapoints.points.slice(f*b,f*(b+1))}f=ka(a,b);-1!=f&&(Z.splice(f,1),ea())}}function ka(a,b){for(var f=0;f<Z.length;++f){var e=Z[f];if(e.series==a&&e.point[0]==b[0]&&e.point[1]==b[1])return f}return-1}function ma(a,b){var f="string"===typeof a.highlightColor?a.highlightColor:d.color.parse(a.color).scale("a",0.5).toString(),e="left"==a.bars.align?0:-a.bars.barWidth/2;P.lineWidth=a.bars.lineWidth;
P.strokeStyle=f;aa(b[0],b[1],b[2]||0,e,e+a.bars.barWidth,0,function(){return f},a.xaxis,a.yaxis,P,a.bars.horizontal,a.bars.lineWidth)}function oa(a,b,f,e){if("string"==typeof a)return a;b=l.createLinearGradient(0,f,0,b);f=0;for(var c=a.colors.length;f<c;++f){var h=a.colors[f];if("string"!=typeof h){var g=d.color.parse(e);null!=h.brightness&&(g=g.scale("rgb",h.brightness));null!=h.opacity&&(g.a*=h.opacity);h=g.toString()}b.addColorStop(f/(c-1),h)}return b}var E=[],m={colors:["#edc240","#afd8f8","#cb4b4b",
"#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,
minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,
markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},K=null,fa=null,Y=null,l=null,P=null,M=[],S=[],t={left:0,right:0,top:0,bottom:0},U=0,R=0,Q={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},D=this;D.setData=n;D.setupGrid=q;D.draw=p;D.getPlaceholder=function(){return a};
D.getCanvas=function(){return K.element};D.getPlotOffset=function(){return t};D.width=function(){return U};D.height=function(){return R};D.offset=function(){var a=Y.offset();a.left+=t.left;a.top+=t.top;return a};D.getData=function(){return E};D.getAxes=function(){var a={};d.each(M.concat(S),function(b,e){e&&(a[e.direction+(1!=e.n?e.n:"")+"axis"]=e)});return a};D.getXAxes=function(){return M};D.getYAxes=function(){return S};D.c2p=x;D.p2c=function(a){var b={},e,d,c;for(e=0;e<M.length;++e)if((d=M[e])&&
d.used&&(c="x"+d.n,null==a[c]&&1==d.n&&(c="x"),null!=a[c])){b.left=d.p2c(a[c]);break}for(e=0;e<S.length;++e)if((d=S[e])&&d.used&&(c="y"+d.n,null==a[c]&&1==d.n&&(c="y"),null!=a[c])){b.top=d.p2c(a[c]);break}return b};D.getOptions=function(){return m};D.highlight=ia;D.unhighlight=ha;D.triggerRedrawOverlay=ea;D.pointOffset=function(a){return{left:parseInt(M[s(a,"x")-1].p2c(+a.x)+t.left,10),top:parseInt(S[s(a,"y")-1].p2c(+a.y)+t.top,10)}};D.shutdown=function(){ga&&clearTimeout(ga);Y.unbind("mousemove",
pa);Y.unbind("mouseleave",T);Y.unbind("click",qa);g(Q.shutdown,[Y])};D.resize=function(){var b=a.width(),d=a.height();K.resize(b,d);fa.resize(b,d)};D.hooks=Q;(function(){for(var a={Canvas:B},b=0;b<h.length;++b){var e=h[b];e.init(D,a);e.options&&d.extend(!0,m,e.options)}})(D);(function(b){d.extend(!0,m,b);null==m.xaxis.color&&(m.xaxis.color=d.color.parse(m.grid.color).scale("a",0.22).toString());null==m.yaxis.color&&(m.yaxis.color=d.color.parse(m.grid.color).scale("a",0.22).toString());null==m.xaxis.tickColor&&
(m.xaxis.tickColor=m.grid.tickColor||m.xaxis.color);null==m.yaxis.tickColor&&(m.yaxis.tickColor=m.grid.tickColor||m.yaxis.color);null==m.grid.borderColor&&(m.grid.borderColor=m.grid.color);null==m.grid.tickColor&&(m.grid.tickColor=d.color.parse(m.grid.color).scale("a",0.22).toString());var c,f,l={style:a.css("font-style"),size:Math.round(0.8*(+a.css("font-size").replace("px","")||13)),variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};l.lineHeight=1.15*l.size;f=
m.xaxes.length||1;for(b=0;b<f;++b)(c=m.xaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},m.xaxis,c),m.xaxes[b]=c,c.font&&(c.font=d.extend({},l,c.font),c.font.color||(c.font.color=c.color));f=m.yaxes.length||1;for(b=0;b<f;++b)(c=m.yaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},m.yaxis,c),m.yaxes[b]=c,c.font&&(c.font=d.extend({},l,c.font),c.font.color||(c.font.color=c.color));m.xaxis.noTicks&&null==m.xaxis.ticks&&(m.xaxis.ticks=m.xaxis.noTicks);m.yaxis.noTicks&&null==
m.yaxis.ticks&&(m.yaxis.ticks=m.yaxis.noTicks);m.x2axis&&(m.xaxes[1]=d.extend(!0,{},m.xaxis,m.x2axis),m.xaxes[1].position="top");m.y2axis&&(m.yaxes[1]=d.extend(!0,{},m.yaxis,m.y2axis),m.yaxes[1].position="right");m.grid.coloredAreas&&(m.grid.markings=m.grid.coloredAreas);m.grid.coloredAreasColor&&(m.grid.markingsColor=m.grid.coloredAreasColor);m.lines&&d.extend(!0,m.series.lines,m.lines);m.points&&d.extend(!0,m.series.points,m.points);m.bars&&d.extend(!0,m.series.bars,m.bars);null!=m.shadowSize&&
(m.series.shadowSize=m.shadowSize);null!=m.highlightColor&&(m.series.highlightColor=m.highlightColor);for(b=0;b<m.xaxes.length;++b)F(M,b+1).options=m.xaxes[b];for(b=0;b<m.yaxes.length;++b)F(S,b+1).options=m.yaxes[b];for(var h in Q)m.hooks[h]&&m.hooks[h].length&&(Q[h]=Q[h].concat(m.hooks[h]));g(Q.processOptions,[m])})(b);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();"static"==a.css("position")&&a.css("position","relative");K=new B("flot-base",a);fa=new B("flot-overlay",
a);l=K.context;P=fa.context;Y=d(fa.element).unbind();var b=a.data("plot");b&&(b.shutdown(),fa.clear());a.data("plot",D)})();n(c);q();p();m.grid.hoverable&&(Y.mousemove(pa),Y.bind("mouseleave",T));m.grid.clickable&&Y.click(qa);g(Q.bindEvents,[Y]);var Z=[],ga=null}var a=Object.prototype.hasOwnProperty;B.prototype.resize=function(a,c){if(0>=a||0>=c)throw Error("Invalid dimensions for plot, width = "+a+", height = "+c);var b=this.element,d=this.context,g=this.pixelRatio;this.width!=a&&(b.width=a*g,b.style.width=
a+"px",this.width=a);this.height!=c&&(b.height=c*g,b.style.height=c+"px",this.height=c);d.restore();d.save();d.scale(g,g)};B.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};B.prototype.render=function(){var e=this._textCache,c;for(c in e)if(a.call(e,c)){var b=this.getTextLayer(c),d=e[c];b.hide();for(var g in d)if(a.call(d,g)){var n=d[g],s;for(s in n)if(a.call(n,s)){var v=n[s];v.active?v.rendered||(b.append(v.element),v.rendered=!0):(delete n[s],v.rendered&&v.element.detach())}}b.show()}};
B.prototype.getTextLayer=function(a){var c=this.text[a];null==c&&(null==this.textContainer&&(this.textContainer=d("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),c=this.text[a]=d("<div></div>").addClass(a).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return c};B.prototype.getTextInfo=function(a,c,b,h){var g,n;c=""+c;h="object"===typeof b?b.style+" "+
b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;g=this._textCache[a];null==g&&(g=this._textCache[a]={});n=g[h];null==n&&(n=g[h]={});g=n[c];null==g&&(a=d("<div></div>").html(c).css({position:"absolute",top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof b?a.css({font:h,color:b.color}):"string"===typeof b&&a.addClass(b),g=n[c]={active:!1,rendered:!1,element:a,width:a.outerWidth(!0),height:a.outerHeight(!0)},a.detach());return g};B.prototype.addText=function(a,c,b,d,g,
n,s,v){a=this.getTextInfo(a,d,g,n);a.active=!0;"center"==s?c-=a.width/2:"right"==s&&(c-=a.width);"middle"==v?b-=a.height/2:"bottom"==v&&(b-=a.height);a.element.css({top:Math.round(b),left:Math.round(c)})};B.prototype.removeText=function(e,c,b,d){if(null==c){if(e=this._textCache[e],null!=e)for(var g in e)if(a.call(e,g)){c=e[g];for(var n in c)a.call(c,n)&&(c[n].active=!1)}}else this.getTextInfo(e,c,b,d).active=!1};d.plot=function(a,c,b){return new w(d(a),c,b,d.plot.plugins)};d.plot.version="0.8.0";
d.plot.plugins=[];d.fn.plot=function(a,c){return this.each(function(){d.plot(this,a,c)})}})(jQuery);
(function(d){var B=10,w=0.95,a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,c){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+c.color+";'>"+a+"<br/>"+Math.round(c.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};d.plot.plugins.push({init:function(e){function c(b){for(var c=
0,e=0,h=0,g=a.series.pie.combine.color,n=[],q=0;q<b.length;++q){var s=b[q].data;d.isArray(s)?d.isNumeric(s[1])?s[1]=+s[1]:s[1]=0:s=d.isNumeric(s)?[1,+s]:[1,0];b[q].data=[s]}for(q=0;q<b.length;++q)c+=b[q].data[0][1];for(q=0;q<b.length;++q)s=b[q].data[0][1],s/c<=a.series.pie.combine.threshold&&(e+=s,h++,g||(g=b[q].color));for(q=0;q<b.length;++q)s=b[q].data[0][1],(2>h||s/c>a.series.pie.combine.threshold)&&n.push({data:[[1,s]],color:b[q].color,label:b[q].label,angle:2*s*Math.PI/c,percent:s/(c/100)});
1<h&&n.push({data:[[1,e]],color:g,label:a.series.pie.combine.label,angle:2*e*Math.PI/c,percent:e/(c/100)});return n}function b(b,c){function e(){q.clearRect(0,0,s,v);F.children().filter(".pieLabel, .pieLabelBackground").remove()}function g(){var b=a.series.pie.shadow.left,c=a.series.pie.shadow.top,e=a.series.pie.shadow.alpha,d=1<a.series.pie.radius?a.series.pie.radius:I*a.series.pie.radius;if(!(d>=s/2-b||d*a.series.pie.tilt>=v/2-c||10>=d)){q.save();q.translate(b,c);q.globalAlpha=e;q.fillStyle="#000";
q.translate(J,V);q.scale(1,a.series.pie.tilt);for(b=1;10>=b;b++)q.beginPath(),q.arc(0,0,d,0,2*Math.PI,!1),q.fill(),d-=b;q.restore()}}function n(){function b(a,c,e){0>=a||isNaN(a)||(e?q.fillStyle=c:(q.strokeStyle=c,q.lineJoin="round"),q.beginPath(),1E-9<Math.abs(a-2*Math.PI)&&q.moveTo(0,0),q.arc(0,0,g,p,p+a/2,!1),q.arc(0,0,g,p+a/2,p+a,!1),q.closePath(),p+=a,e?q.fill():q.stroke())}function c(){for(var b=e,g=1<a.series.pie.label.radius?a.series.pie.label.radius:I*a.series.pie.label.radius,h=0;h<O.length;++h){if(O[h].percent>=
100*a.series.pie.label.threshold){var p;p=O[h];var n=b,q=h;if(0==p.data[0][1])p=!0;else{var y=a.legend.labelFormatter,m=void 0,x=a.series.pie.label.formatter,m=y?y(p.label,p):p.label;x&&(m=x(m,p));y=(n+p.angle+n)/2;n=J+Math.round(Math.cos(y)*g);y=V+Math.round(Math.sin(y)*g)*a.series.pie.tilt;F.append("<span class='pieLabel' id='pieLabel"+q+"' style='position:absolute;top:"+y+"px;left:"+n+"px;'>"+m+"</span>");q=F.children("#pieLabel"+q);m=y-q.height()/2;y=n-q.width()/2;q.css("top",m);q.css("left",
y);0<0-m||0<0-y||0>v-(m+q.height())||0>s-(y+q.width())?p=!1:(0!=a.series.pie.label.background.opacity&&(n=a.series.pie.label.background.color,null==n&&(n=p.color),p="top:"+m+"px;left:"+y+"px;",d("<div class='pieLabelBackground' style='position:absolute;width:"+q.width()+"px;height:"+q.height()+"px;"+p+"background-color:"+n+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(q)),p=!0)}if(!p)return!1}b+=O[h].angle}return!0}var e=Math.PI*a.series.pie.startAngle,g=1<a.series.pie.radius?
a.series.pie.radius:I*a.series.pie.radius;q.save();q.translate(J,V);q.scale(1,a.series.pie.tilt);q.save();for(var p=e,y=0;y<O.length;++y)O[y].startAngle=p,b(O[y].angle,O[y].color,!0);q.restore();if(0<a.series.pie.stroke.width){q.save();q.lineWidth=a.series.pie.stroke.width;p=e;for(y=0;y<O.length;++y)b(O[y].angle,a.series.pie.stroke.color,!1);q.restore()}h(q);q.restore();return a.series.pie.label.show?c():!0}if(F){var s=b.getPlaceholder().width(),v=b.getPlaceholder().height(),x=F.children().filter(".legend").children().width()||
0;q=c;N=!1;I=Math.min(s,v/a.series.pie.tilt)/2;V=v/2+a.series.pie.offset.top;J=s/2;J="auto"==a.series.pie.offset.left?a.legend.position.match("w")?J+x/2:J-x/2:J+a.series.pie.offset.left;J<I?J=I:J>s-I&&(J=s-I);var O=b.getData(),x=0;do 0<x&&(I*=w),x+=1,e(),0.8>=a.series.pie.tilt&&g();while(!n()&&x<B);x>=B&&(e(),F.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));b.setSeries&&b.insertLegend&&(b.setSeries(O),b.insertLegend())}}function h(b){if(0<a.series.pie.innerRadius){b.save();
var c=1<a.series.pie.innerRadius?a.series.pie.innerRadius:I*a.series.pie.innerRadius;b.globalCompositeOperation="destination-out";b.beginPath();b.fillStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.fill();b.closePath();b.restore();b.save();b.beginPath();b.strokeStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.stroke();b.closePath();b.restore()}}function g(a){s("plothover",a)}function n(a){s("plotclick",a)}function s(b,c){var d=e.offset(),g=parseInt(c.pageX-d.left);a:{for(var d=
parseInt(c.pageY-d.top),h=e.getData(),n=e.getOptions(),n=1<n.series.pie.radius?n.series.pie.radius:I*n.series.pie.radius,s,x,w=0;w<h.length;++w){var A=h[w];if(A.pie.show){q.save();q.beginPath();q.moveTo(0,0);q.arc(0,0,n,A.startAngle,A.startAngle+A.angle/2,!1);q.arc(0,0,n,A.startAngle+A.angle/2,A.startAngle+A.angle,!1);q.closePath();s=g-J;x=d-V;if(q.isPointInPath){if(q.isPointInPath(g-J,d-V)){q.restore();g={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:w};break a}}else{var B=n*Math.cos(A.startAngle),
T=n*Math.sin(A.startAngle),N=n*Math.cos(A.startAngle+A.angle/4),X=n*Math.sin(A.startAngle+A.angle/4),ea=n*Math.cos(A.startAngle+A.angle/2),ja=n*Math.sin(A.startAngle+A.angle/2),ia=n*Math.cos(A.startAngle+A.angle/1.5),ha=n*Math.sin(A.startAngle+A.angle/1.5),ka=n*Math.cos(A.startAngle+A.angle),ma=n*Math.sin(A.startAngle+A.angle),B=[[0,0],[B,T],[N,X],[ea,ja],[ia,ha],[ka,ma]];s=[s,x];x=!1;T=-1;N=B.length;for(X=N-1;++T<N;X=T)(B[T][1]<=s[1]&&s[1]<B[X][1]||B[X][1]<=s[1]&&s[1]<B[T][1])&&s[0]<(B[X][0]-B[T][0])*
(s[1]-B[T][1])/(B[X][1]-B[T][1])+B[T][0]&&(x=!x);if(x){q.restore();g={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:w};break a}}q.restore()}}g=null}if(a.grid.autoHighlight)for(d=0;d<H.length;++d)h=H[d],h.auto!=b||g&&h.series==g.series||(h=h.series,null==h&&(H=[],e.triggerRedrawOverlay()),h=v(h),-1!=h&&(H.splice(h,1),e.triggerRedrawOverlay()));g&&(d=g.series,h=v(d),-1==h?(H.push({series:d,auto:b}),e.triggerRedrawOverlay()):b||(H[h].auto=!1));F.trigger(b,[{pageX:c.pageX,pageY:c.pageY},
g])}function v(a){for(var b=0;b<H.length;++b)if(H[b].series==a)return b;return-1}var x=null,F=null,I=null,J=null,V=null,N=!1,q=null,H=[];e.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt?b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});e.hooks.bindEvents.push(function(a,b){var c=
a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(g),c.grid.clickable&&b.unbind("click").click(n))});e.hooks.processDatapoints.push(function(b,e,h,g){b.getOptions().series.pie.show&&!N&&(N=!0,x=b.getCanvas(),F=d(x).parent(),a=b.getOptions(),b.setData(c(b.getData())))});e.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),d=1<c.series.pie.radius?c.series.pie.radius:I*c.series.pie.radius;b.save();b.translate(J,V);b.scale(1,
c.series.pie.tilt);for(var e=0;e<H.length;++e){var g=H[e].series;0>=g.angle||isNaN(g.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(g.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,g.startAngle,g.startAngle+g.angle/2,!1),b.arc(0,0,d,g.startAngle+g.angle/2,g.startAngle+g.angle,!1),b.closePath(),b.fill())}h(b);b.restore()}});e.hooks.draw.push(function(a,c){a.getOptions().series.pie.show&&b(a,c)})},options:a,name:"pie",version:"1.1"})})(jQuery);
(function(d,B){var w=0;d.widget("s3.pivottable",{options:{showTotals:!0,collapseForm:!0,ajaxURL:null,defaultChart:null,showChart:!1},_create:function(){this.id=w;w+=1;this.chart=this.table=null},_init:function(){var a=this.element;this.table=this.data=null;this.chart_options={currentChart:null,currentDataIndex:null,currentSeriesIndex:null};this.table_options={hidden:!1};var e=d(a).find(".pt-chart");this.chart=e.length?e.first():null;this.options.collapseForm&&(a=d(a).attr("id"),d("#"+a+"-options legend").siblings().toggle(),
d("#"+a+"-options legend").children().toggle());this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=this.element,e=null;this._unbindEvents();var c=d(a).find('input[type="hidden"][name="pivotdata"]');c.length&&(e=JSON.parse(d(c).first().val()));e||(e={empty:!0},d(a).find(".pt-hide-table").hide(),d(a).find(".pt-show-table").hide(),d(a).find(".pt-empty").show());this.data=e;this._renderTable();this._renderChartOptions();this._renderChart();
this._bindEvents();d(a).find(".pt-throbber").hide()},_renderTable:function(){var a=this.element,e=d(a).find(".pt-table").first().empty();this.table=null;var c=this.data;if(!c.empty){var b=c.cells,h=c.cols,g=c.rows,n=c.total,s=c.labels,c=this._renderHeader(h,s);c.append(this._renderColumns(h,s));b=this._renderRows(g,h,s,b);h=this._renderFooter(g,h,s,n);g=d('<table class="dataTable display report"/>').append(c).append(b);null!==h&&g.append(h);this.table=d(g);d(e).append(this.table);d(a).find(".pt-empty").hide();
this.table_options.hidden?(d(a).find(".pt-show-table").show(),d(a).find(".pt-hide-table").hide()):(d(a).find(".pt-show-table").hide(),d(a).find(".pt-hide-table").show())}},_renderHeader:function(a,e){var c=d("<tr>");colspan="__other__"==a[a.length-1][0]?a.length-1:a.length;c.append(d('<th scope="col">'+e.layer+"</th>")).append(d('<th scope="col" colspan="'+colspan+'">'+e.cols+"</th>"));this.options.showTotals&&c.append(d('<th class="totals_header row_totals" scope="col" rowspan="2">'+e.total+"</th>"));
return d("<thead>").append(c)},_renderColumns:function(a,e){var c=d("<tr>");c.append(d('<th scope="col">'+e.rows+"</th>"));for(var b=0;b<a.length;b++)"__other__"!=a[b][0]&&c.append(d('<th scope="col">'+a[b][4]+"</th>"));return c},_renderRows:function(a,e,c,b){for(var h=d("<tbody>"),g=this.options.showTotals,n,s,v=0;v<b.length;v++)n=a[v],"__other__"!=n[0]&&(s=d('<tr class="'+(v%2?"odd":"even")+'"><td>'+n[4]+"</td></tr>").append(this._renderCells(b[v],e,c)),g&&s.append(d("<td>"+n[2]+"</td>")),h.append(s));
return h},_renderCells:function(a,e,c){for(var b,h=c.none,g=[],n,s,v=0;v<a.length;v++)if("__other__"!=e[v][0]){b=a[v];c=b.items;n=d("<td>");if(null===c)s=d('<div class="pt-cell-value">'+h+"</div>");else if(d.isArray(c)){s=d('<div class="pt-cell-value">');list=d("<ul>");for(var x=0;x<c.length;x++)list.append(d("<li>"+c[x]+"</li>"));s.append(list)}else s=d('<div class="pt-cell-value">'+c+"</div>");n.append(s);b=b.keys;c&&(b&&b.length)&&n.data("records",b).append(d('<div class="pt-cell-zoom"></div>'));
g.push(n)}return g},_renderFooter:function(a,e,c,b){if(this.options.showTotals){var h,g;g=h=0;for(len=a.length;h<len;h++)"__other__"!=a[h][0]&&g++;a=d('<tr class="'+(g%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+c.total+"</th></tr>");for(h=0;h<e.length;h++)"__other__"!=e[h][0]&&a.append(d("<td>"+e[h][2]+"</td>"));a.append(d("<td>"+b+"</td>"));return d("<tfoot>").append(a)}return null},_renderChartOptions:function(){var a=this.element,e=d(a).find(".pt-chart-controls").first().empty(),
c=this.data;if(!c.empty){var b=c.labels,c=d(a).attr("id"),a=b.rows,b=b.cols,h=d('<div class="pt-chart-opts">'),g=c+"-pchart-rows",n=c+"-vchart-rows",s=c+"-hchart-rows",v=c+"-pchart-cols",x=c+"-vchart-cols",c=c+"-hchart-cols";a&&d(h).append(d('<div id="'+g+'" class="pt-chart-icon pt-pchart"/><div id="'+n+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+a+"</span>"));b&&d(h).append(d('<div id="'+v+'" class="pt-chart-icon pt-pchart"/><div id="'+x+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+
b+"</span>"));a&&b&&d(h).append(d('<div id="'+s+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+a+'</span><div id="'+c+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+b+"</span>"));d(e).append(h)}},_renderChart:function(a){var e=this.data;d(this.element).find(".pt-chart-contents").hide();var c=this.chart;if(c&&(d(c).unbind("plothover"),d(c).unbind("plotclick"),d(c).empty(),!e.empty))if(!1===a)this.options.showChart=!1;else{c=this.options.showChart;if("undefined"==
typeof a||!a){if(!c)return;a=this.chart_options.currentChart}if("undefined"==typeof a||!a){if(!c)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.showChart=!0;this.chart_options.currentChart=a;c=a.type;a=a.axis;var b=e.labels,h=b.per,g=b.layer+" "+h+" "+b.rows,b=b.layer+" "+h+" "+b.cols;"piechart"==c?"rows"==a?this._renderPieChart(e.rows,g):this._renderPieChart(e.cols,b):"barchart"==c?"rows"==a?this._renderBarChart(e.rows,g):this._renderBarChart(e.cols,b):"breakdown"==
c&&("rows"==a?this._renderBreakDown(e,0,g):this._renderBreakDown(e,1,b))}}},_renderPieChart:function(a,e){var c=this.chart;if(c){d(c).closest(".pt-chart-contents").show().css({width:"800px"});d(c).css({height:"360px"});for(var b=[],h=0;h<a.length;h++){var g=a[h];g[1]||b.push({label:g[4],data:g[2]})}e?d(c).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):d(c).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(c),b,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,
clickable:!0}});var n=this;this.chart_options.currentDataIndex=null;d(c).bind("plothover",function(a,b,c){if(c){if(n.chart_options.currentDataIndex!=c.seriesIndex){n._removeChartTooltip();n.chart_options.currentDataIndex=c.seriesIndex;a=c.series.data[0][1];var e=c.series.percent.toFixed(1),g='<div class="pt-tooltip-label">'+c.series.label+"</div>";n._renderChartTooltip(b.pageX,b.pageY,g+('<div class="pt-tooltip-text">'+a+" ("+e+"%)</div>"));d(".pt-tooltip-label").css({color:c.series.color})}}else n._removeChartTooltip()})}},
_renderBarChart:function(a,e){var c=this.chart;if(c){d(c).closest(".pt-chart-contents").show().css({width:"96%"});d(c).css({height:"360px"});for(var b=[],h=[],g=0,n=0;n<a.length;n++){var s=a[n];s[1]||(b.push({label:s[4],data:[[g+1,s[2]]]}),h.push([g+1,s[4]]),g++)}e?d(c).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):d(c).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(c),b,{series:{bars:{show:!0,barWidth:0.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},
xaxis:{ticks:h,min:0,max:b.length+1,tickLength:0}});var v=this;this.chart_options.currentDataIndex=null;d(c).bind("plothover",function(a,b,c){c?v.chart_options.currentDataIndex!=c.seriesIndex&&(v._removeChartTooltip(),v.chart_options.currentDataIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+c.series.label+"</div>",a+='<div class="pt-tooltip-text">'+c.series.data[0][1]+"</div>",v._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({color:c.series.color})):v._removeChartTooltip()})}},
_renderBreakDown:function(a,e,c){var b=this.chart;if(b){d(b).closest(".pt-chart-contents").show().css({width:"96%"});var h=a.cells,g,n,s=[],v=[];0===e?(g=a.rows,n=a.cols,e=function(a,b){return h[s[a]][v[b]].value}):(g=a.cols,n=a.rows,e=function(a,b){return h[v[b]][s[a]].value});var x,w=[];a=[];x=0;for(len=g.length;x<len;x++)g[x][1]||(w.push(g[x]),s.push(x));x=0;for(len=n.length;x<len;x++)n[x][1]||(a.push(n[x]),v.push(x));g=Math.max(w.length*Math.max(16*(a.length+1),50)+70,360);d(b).css({height:g+
"px"});g=[];for(var B=n=0;B<a.length;B++){for(var J={label:a[B][4]},V=[],N,q=0;q<w.length;q++)x=(w.length-q)*(a.length+1)-B,N=e(q,B),N>n&&(n=N),V.push([N,x]);J.data=V;g.push(J)}e=[];for(q=0;q<w.length;q++)B=w[q][4],x=(w.length-q)*(a.length+1)+1,e.push([x,B]);c?d(b).siblings(".pt-chart-title").html("<h4>"+c+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),g,{series:{bars:{show:!0,barWidth:0.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},yaxis:{ticks:e,
labelWidth:120,max:w.length*(a.length+1)+1},xaxis:{max:1.1*n},grid:{hoverable:!0,clickable:!0}});d(".yAxis .tickLabel").css({"padding-top":"20px"});var H=this;this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;d(b).bind("plothover",function(a,b,c){if(c){if(H.chart_options.currentDataIndex!=c.dataIndex||H.chart_options.currentSeriesIndex!=c.seriesIndex)H._removeChartTooltip(),H.chart_options.currentDataIndex=c.dataIndex,H.chart_options.currentSeriesIndex=c.seriesIndex,
a='<div class="pt-tooltip-label">'+w[c.dataIndex][4]+"</div>",a+='<div class="pt-tooltip-text">'+c.series.label+' : <span class="pt-tooltip-value">'+c.datapoint[0]+"</span></div>",H._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({"padding-bottom":"8px"}),d(".pt-tooltip-text").css({color:c.series.color}),d(".pt-tooltip-value").css({"font-weight":"bold"})}else H._removeChartTooltip()})}},_renderChartTooltip:function(a,e,c){d('<div class="pt-chart-tooltip">'+c+"</div>").css({position:"absolute",
display:"none",top:e-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:0.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){d(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var a="#"+d(this.element).attr("id");return{rows:d(a+"-rows").val(),cols:d(a+"-cols").val(),fact:d(a+"-fact").val(),
totals:d(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+d(this.element).attr("id"),e=d(a+"-filters"),a=[];try{if(e.length)a=S3.search.getCurrentFilters(e.first());else return null}catch(c){}for(var e={},b=0,h=a.length,g;b<h;b++)g=a[b].split("="),1<g.length&&(e[g[0]]=g[1]);return e},_updateAjaxURL:function(a,d){var c=this.options.ajaxURL.split("?"),b={};if(1<c.length){var h=c[1].split("&"),g,n,s;n=0;for(s=h.length;n<s;n++)g=h[n].split("="),1<g.length&&"aggregate"!=g[0]&&(b[decodeURIComponent(g[0])]=
decodeURIComponent(g[1]))}h=!1;if(a)for(option in a)g=a[option],"totals"==option?this.options.showTotals=g?!0:!1:b[option]!=g&&(h=!0),b[option]=g?g:null;if(d){for(option in d)g=d[option],b[option]!=g&&(h=!0),b[option]=g?g:null;for(option in b)a.hasOwnProperty(option)||(g=d[option],b[option]!=g&&(h=!0),b[option]=g?g:null)}g=[];for(option in b)null!==b[option]&&g.push(option+"="+b[option]);b=g.join("&");c=c[0];b&&(c=c+"?"+b);this.options.ajaxURL=c;return h},reload:function(a,e,c){c="undefined"!=typeof c?
c:!0;"undefined"==typeof e&&(e=this._getFilters());var b=this,h=this.element,g,n=d(h).find('input[type="hidden"][name="pivotdata"]');if(n.length){if(a||e)g=this._updateAjaxURL(a,e);g||c?(a=this.options.ajaxURL,d(h).find(".pt-throbber").show(),d.ajax({url:a,dataType:"json"}).done(function(a){n.first().val(JSON.stringify(a));b.refresh()}).fail(function(a,b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):(d(h).find(".pt-throbber").show(),b.refresh())}},_bindEvents:function(a){var e=
this,c=this.element;a=this.data;var b=d(c).attr("id");d("#"+b+"-options legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d("#"+b+"-filters legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d(c).find(".pt-hide-table").click(function(){e.table_options.hidden=!0;d(c).find(".pt-table").hide();d(this).siblings(".pt-show-table").show();d(this).hide()});d(c).find(".pt-show-table").click(function(){e.table_options.hidden=!1;d(c).find(".pt-table").show();
d(this).siblings(".pt-hide-table").show();d(this).hide()});d("#"+b+"-totals").click(function(){var a=d(this).is(":checked");e.options.showTotals!=a&&e.reload({totals:a},null,!1)});d(c).find("input.pt-submit").click(function(){var a=e._getOptions(),b=e._getFilters();e.reload(a,b,!1)});d("#"+b+" div.pt-table div.pt-cell-zoom").click(function(b){b=d(b.currentTarget);var c=b.closest("td"),e=c.find(".pt-cell-records");if(0<e.length)e.remove(),b.removeClass("opened");else{for(var s=c.data("records"),e=
d("<div/>").addClass("pt-cell-records"),v=d("<ul/>"),w=0;w<s.length;w++)v.append("<li>"+a.lookup[s[w]]+"</li>");e.append(v);c.append(e);b.addClass("opened")}});d("#"+b+"-pchart-rows").click(function(){e._renderChart({type:"piechart",axis:"rows"})});d("#"+b+"-vchart-rows").click(function(){e._renderChart({type:"barchart",axis:"rows"})});d("#"+b+"-pchart-cols").click(function(){e._renderChart({type:"piechart",axis:"cols"})});d("#"+b+"-vchart-cols").click(function(){e._renderChart({type:"barchart",axis:"cols"})});
d("#"+b+"-hchart-rows").click(function(){e._renderChart({type:"breakdown",axis:"rows"})});d("#"+b+"-hchart-cols").click(function(){e._renderChart({type:"breakdown",axis:"cols"})});d(c).find(".pt-hide-chart").click(function(){e._renderChart(!1)})},_unbindEvents:function(){var a=this.element,e=d(a).attr("id");d(a).find("input.pt-submit").unbind("click");d("#"+e+" div.pt-table div.pt-cell-zoom").unbind("click");d("#"+e+"-options legend").unbind("click");d("#"+e+"-filters legend").unbind("click");d(e+
"-totals").unbind("click");d("#"+e+"-pchart-rows").unbind("click");d("#"+e+"-vchart-rows").unbind("click");d("#"+e+"-pchart-cols").unbind("click");d("#"+e+"-vchart-cols").unbind("click");d(a).find(".pt-hide-table").unbind("click");d(a).find(".pt-show-table").unbind("click");d(a).find(".pt-hide-chart").unbind("click")}})})(jQuery);
