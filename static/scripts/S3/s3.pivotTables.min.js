/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(d){d.color={};d.color.make=function(x,a,f,b){var c={};c.r=x||0;c.g=a||0;c.b=f||0;c.a=null!=b?b:1;c.add=function(a,d){for(var f=0;f<a.length;++f)c[a.charAt(f)]+=d;return c.normalize()};c.scale=function(a,d){for(var f=0;f<a.length;++f)c[a.charAt(f)]*=d;return c.normalize()};c.toString=function(){return 1<=c.a?"rgb("+[c.r,c.g,c.b].join()+")":"rgba("+[c.r,c.g,c.b,c.a].join()+")"};c.normalize=function(){function a(d,f,c){return f<d?d:f>c?c:f}c.r=a(0,parseInt(c.r),255);c.g=a(0,parseInt(c.g),255);
c.b=a(0,parseInt(c.b),255);c.a=a(0,c.a,1);return c};c.clone=function(){return d.color.make(c.r,c.b,c.g,c.a)};return c.normalize()};d.color.extract=function(x,a){var f;do{f=x.css(a).toLowerCase();if(""!=f&&"transparent"!=f)break;x=x.parent()}while(!d.nodeName(x.get(0),"body"));"rgba(0, 0, 0, 0)"==f&&(f="transparent");return d.color.parse(f)};d.color.parse=function(x){var a,f=d.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(x))return f(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(x))return f(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(x))return f(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(x))return f(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(x))return f(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(x))return f(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));x=d.trim(x).toLowerCase();if("transparent"==x)return f(255,255,255,0);a=C[x]||[0,0,0];return f(a[0],a[1],a[2])};var C={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(d){function C(a,b){var c=b.children("."+a)[0];if(null==c&&(c=document.createElement("canvas"),c.className=a,d(c).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(b),!c.getContext))if(window.G_vmlCanvasManager)c=window.G_vmlCanvasManager.initElement(c);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
c;c=this.context=c.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(c.webkitBackingStorePixelRatio||c.mozBackingStorePixelRatio||c.msBackingStorePixelRatio||c.oBackingStorePixelRatio||c.backingStorePixelRatio||1);this.resize(b.width(),b.height());this.textContainer=null;this.text={};this._textCache={}}function x(a,b,c,h){function g(k,z){z=[B].concat(z);for(var e=0;e<k.length;++e)k[e].apply(this,z)}function p(k){for(var z=[],e=0;e<k.length;++e){var a=d.extend(!0,{},l.series);null!=k[e].data?
(a.data=k[e].data,delete k[e].data,d.extend(!0,a,k[e]),k[e].data=a.data):a.data=k[e];z.push(a)}E=z;e=E.length;z=-1;for(k=0;k<E.length;++k)a=E[k].color,null!=a&&(e--,"number"==typeof a&&a>z&&(z=a));e<=z&&(e=z+1);var z=[],s=l.colors,f=s.length,c=0;for(k=0;k<e;k++)a=d.color.parse(s[k%f]||"#666"),0==k%f&&k&&(c=0<=c?0.5>c?-c-0.2:0:-c),z[k]=a.scale("rgb",1+c);for(k=e=0;k<E.length;++k){a=E[k];null==a.color?(a.color=z[e].toString(),++e):"number"==typeof a.color&&(a.color=z[a.color].toString());if(null==a.lines.show){var b,
s=!0;for(b in a)if(a[b]&&a[b].show){s=!1;break}s&&(a.lines.show=!0)}null==a.lines.zero&&(a.lines.zero=!!a.lines.fill);a.xaxis=J(M,w(a,"x"));a.yaxis=J(S,w(a,"y"))}H()}function w(k,a){var e=k[a+"axis"];"object"==typeof e&&(e=e.n);"number"!=typeof e&&(e=1);return e}function r(){return d.grep(M.concat(S),function(k){return k})}function u(k){var a={},e,d;for(e=0;e<M.length;++e)(d=M[e])&&d.used&&(a["x"+d.n]=d.c2p(k.left));for(e=0;e<S.length;++e)(d=S[e])&&d.used&&(a["y"+d.n]=d.c2p(k.top));void 0!==a.x1&&
(a.x=a.x1);void 0!==a.y1&&(a.y=a.y1);return a}function J(k,a){k[a-1]||(k[a-1]={n:a,direction:k==M?"x":"y",options:d.extend(!0,{},k==M?l.xaxis:l.yaxis)});return k[a-1]}function H(){function k(k,a,e){a<k.datamin&&a!=-f&&(k.datamin=a);e>k.datamax&&e!=f&&(k.datamax=e)}var a=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,f=Number.MAX_VALUE,s,c,D,b,v,l,F,m,h,n,p,L;d.each(r(),function(k,d){d.datamin=a;d.datamax=e;d.used=!1});for(s=0;s<E.length;++s)v=E[s],v.datapoints={points:[]},g(Q.processRawData,
[v,v.data,v.datapoints]);for(s=0;s<E.length;++s){v=E[s];p=v.data;L=v.datapoints.format;if(!L){L=[];L.push({x:!0,number:!0,required:!0});L.push({y:!0,number:!0,required:!0});if(v.bars.show||v.lines.show&&v.lines.fill)L.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(v.bars.show&&v.bars.zero||v.lines.show&&v.lines.zero)}),v.bars.horizontal&&(delete L[L.length-1].y,L[L.length-1].x=!0);v.datapoints.format=L}if(null==v.datapoints.pointsize){v.datapoints.pointsize=L.length;F=v.datapoints.pointsize;
l=v.datapoints.points;var da=v.lines.show&&v.lines.steps;v.xaxis.used=v.yaxis.used=!0;for(c=D=0;c<p.length;++c,D+=F){n=p[c];var la=null==n;if(!la)for(b=0;b<F;++b){m=n[b];if(h=L[b])h.number&&null!=m&&(m=+m,isNaN(m)?m=null:Infinity==m?m=f:-Infinity==m&&(m=-f)),null==m&&(h.required&&(la=!0),null!=h.defaultValue&&(m=h.defaultValue));l[D+b]=m}if(la)for(b=0;b<F;++b)m=l[D+b],null!=m&&(h=L[b],h.x&&k(v.xaxis,m,m),h.y&&k(v.yaxis,m,m)),l[D+b]=null;else if(da&&0<D&&null!=l[D-F]&&l[D-F]!=l[D]&&l[D-F+1]!=l[D+1]){for(b=
0;b<F;++b)l[D+F+b]=l[D+b];l[D+1]=l[D-F+1];D+=F}}}}for(s=0;s<E.length;++s)v=E[s],g(Q.processDatapoints,[v,v.datapoints]);for(s=0;s<E.length;++s){v=E[s];l=v.datapoints.points;F=v.datapoints.pointsize;L=v.datapoints.format;n=D=a;da=p=e;for(c=0;c<l.length;c+=F)if(null!=l[c])for(b=0;b<F;++b)m=l[c+b],(h=L[b])&&(!1!==h.autoscale&&m!=f&&m!=-f)&&(h.x&&(m<D&&(D=m),m>p&&(p=m)),h.y&&(m<n&&(n=m),m>da&&(da=m)));if(v.bars.show){switch(v.bars.align){case "left":c=0;break;case "right":c=-v.bars.barWidth;break;case "center":c=
-v.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+v.bars.align);}v.bars.horizontal?(n+=c,da+=c+v.bars.barWidth):(D+=c,p+=c+v.bars.barWidth)}k(v.xaxis,D,p);k(v.yaxis,n,da)}d.each(r(),function(k,d){d.datamin==a&&(d.datamin=null);d.datamax==e&&(d.datamax=null)})}function x(k){function a(k){return k}var e,d,s=k.options.transform||a,c=k.options.inverseTransform;"x"==k.direction?(e=k.scale=U/Math.abs(s(k.max)-s(k.min)),d=Math.min(s(k.max),s(k.min))):(e=k.scale=R/Math.abs(s(k.max)-s(k.min)),
e=-e,d=Math.max(s(k.max),s(k.min)));k.p2c=s==a?function(k){return(k-d)*e}:function(k){return(s(k)-d)*e};k.c2p=c?function(k){return c(d+k/e)}:function(k){return d+k/e}}function V(k){var a=k.labelWidth,e=k.labelHeight,c=k.options.position,s=k.options.tickLength,f=l.grid.axisMargin,b=l.grid.labelMargin,m="x"==k.direction?M:S,v,g=d.grep(m,function(k){return k&&k.options.position==c&&k.reserveSpace});d.inArray(k,g)==g.length-1&&(f=0);null==s&&(s=d.grep(m,function(k){return k&&k.reserveSpace}),s=(v=0==
d.inArray(k,s))?"full":5);isNaN(+s)||(b+=+s);"x"==k.direction?(e+=b,"bottom"==c?(t.bottom+=e+f,k.box={top:K.height-t.bottom,height:e}):(k.box={top:t.top+f,height:e},t.top+=e+f)):(a+=b,"left"==c?(k.box={left:t.left+f,width:a},t.left+=a+f):(t.right+=a+f,k.box={left:K.width-t.right,width:a}));k.position=c;k.tickLength=s;k.box.padding=b;k.innermost=v}function N(){var k=l.grid.minBorderMargin,a={x:0,y:0},e;if(null==k)for(e=k=0;e<E.length;++e)k=Math.max(k,2*(E[e].points.radius+E[e].points.lineWidth/2));
a.x=a.y=Math.ceil(k);d.each(r(),function(k,e){var d=e.direction;e.reserveSpace&&(a[d]=Math.ceil(Math.max(a[d],("x"==d?e.labelWidth:e.labelHeight)/2)))});t.left=Math.max(a.x,t.left);t.right=Math.max(a.x,t.right);t.top=Math.max(a.y,t.top);t.bottom=Math.max(a.y,t.bottom)}function q(){var k,a=r(),e=l.grid.show;for(k in t){var c=l.grid.margin||0;t[k]="number"==typeof c?c:c[k]||0}g(Q.processOffset,[t]);for(k in t)t[k]="object"==typeof l.grid.borderWidth?t[k]+(e?l.grid.borderWidth[k]:0):t[k]+(e?l.grid.borderWidth:
0);d.each(a,function(k,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var e=a.options,d=+(null!=e.min?e.min:a.datamin),c=+(null!=e.max?e.max:a.datamax),z=c-d;if(0==z){if(z=0==c?1:0.01,null==e.min&&(d-=z),null==e.max||null!=e.min)c+=z}else{var f=e.autoscaleMargin;null!=f&&(null==e.min&&(d-=z*f,0>d&&(null!=a.datamin&&0<=a.datamin)&&(d=0)),null==e.max&&(c+=z*f,0<c&&(null!=a.datamax&&0>=a.datamax)&&(c=0)))}a.min=d;a.max=c});if(e){c=d.grep(a,function(k){return k.reserveSpace});
d.each(c,function(k,a){G(a);var e=a.options.ticks,c=[];null==e||"number"==typeof e&&0<e?c=a.tickGenerator(a):e&&(c=d.isFunction(e)?e(a):e);var z;a.ticks=[];for(e=0;e<c.length;++e){var f=null,b=c[e];"object"==typeof b?(z=+b[0],1<b.length&&(f=b[1])):z=+b;null==f&&(f=a.tickFormatter(z,a));isNaN(z)||a.ticks.push({v:z,label:f})}c=a.ticks;a.options.autoscaleMargin&&0<c.length&&(null==a.options.min&&(a.min=Math.min(a.min,c[0].v)),null==a.options.max&&1<c.length&&(a.max=Math.max(a.max,c[c.length-1].v)));
c=a.options;e=a.ticks||[];z=c.labelWidth||0;for(var f=c.labelHeight||0,b="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+(a.direction+"Axis "+a.direction+a.n+"Axis"),l=c.font||"flot-tick-label tickLabel",m=0;m<e.length;++m){var ba=e[m];ba.label&&(ba=K.getTextInfo(b,ba.label,l),null==c.labelWidth&&(z=Math.max(z,ba.width)),null==c.labelHeight&&(f=Math.max(f,ba.height)))}a.labelWidth=Math.ceil(z);a.labelHeight=Math.ceil(f)});for(k=c.length-1;0<=k;--k)V(c[k]);N();d.each(c,function(k,a){"x"==
a.direction?(a.box.left=t.left-a.labelWidth/2,a.box.width=K.width-t.left-t.right+a.labelWidth):(a.box.top=t.top-a.labelHeight/2,a.box.height=K.height-t.bottom-t.top+a.labelHeight)})}U=K.width-t.left-t.right;R=K.height-t.bottom-t.top;d.each(a,function(k,a){x(a)});e&&qa();A()}function G(k){var a=k.options,e;e="number"==typeof a.ticks&&0<a.ticks?a.ticks:0.3*Math.sqrt("x"==k.direction?K.width:K.height);e=(k.max-k.min)/e;var c=-Math.floor(Math.log(e)/Math.LN10),f=a.tickDecimals;null!=f&&c>f&&(c=f);var b=
Math.pow(10,-c),l=e/b,m;1.5>l?m=1:3>l?(m=2,2.25<l&&(null==f||c+1<=f)&&(m=2.5,++c)):m=7.5>l?5:10;m*=b;null!=a.minTickSize&&m<a.minTickSize&&(m=a.minTickSize);k.delta=e;k.tickDecimals=Math.max(0,null!=f?f:c);k.tickSize=a.tickSize||m;if("time"==a.mode&&!k.tickGenerator)throw Error("Time mode requires the flot.time plugin.");k.tickGenerator||(k.tickGenerator=function(a){var k=[],e=a.tickSize*Math.floor(a.min/a.tickSize),d=0,c=Number.NaN,f;do f=c,c=e+d*a.tickSize,k.push(c),++d;while(c<a.max&&c!=f);return k},
k.tickFormatter=function(a,k){var e=k.tickDecimals?Math.pow(10,k.tickDecimals):1,d=""+Math.round(a*e)/e;if(null!=k.tickDecimals){var c=d.indexOf("."),c=-1==c?0:d.length-c-1;if(c<k.tickDecimals)return(c?d:d+".")+(""+e).substr(1,k.tickDecimals-c)}return d});d.isFunction(a.tickFormatter)&&(k.tickFormatter=function(k,e){return""+a.tickFormatter(k,e)});if(null!=a.alignTicksWithAxis){var v=("x"==k.direction?M:S)[a.alignTicksWithAxis-1];v&&(v.used&&v!=k)&&(e=k.tickGenerator(k),0<e.length&&(null==a.min&&
(k.min=Math.min(k.min,e[0])),null==a.max&&1<e.length&&(k.max=Math.max(k.max,e[e.length-1]))),k.tickGenerator=function(a){var k=[],e,d;for(d=0;d<v.ticks.length;++d)e=(v.ticks[d].v-v.min)/(v.max-v.min),e=a.min+e*(a.max-a.min),k.push(e);return k},k.mode||null!=a.tickDecimals||(e=Math.max(0,-Math.floor(Math.log(k.delta)/Math.LN10)+1),c=k.tickGenerator(k),1<c.length&&/\..*0$/.test((c[1]-c[0]).toFixed(e))||(k.tickDecimals=e)))}}function n(){K.clear();g(Q.drawBackground,[m]);var a=l.grid;a.show&&a.backgroundColor&&
(m.save(),m.translate(t.left,t.top),m.fillStyle=na(l.grid.backgroundColor,R,0,"rgba(255, 255, 255, 0)"),m.fillRect(0,0,U,R),m.restore());a.show&&!a.aboveData&&W();for(var d=0;d<E.length;++d){g(Q.drawSeries,[m,E[d]]);var e=E[d];e.lines.show&&ra(e);e.bars.show&&ca(e);e.points.show&&$(e)}g(Q.draw,[m]);a.show&&a.aboveData&&W();K.render()}function y(a,d){for(var e,c,f,b,l=r(),m=0;m<l.length;++m)if(e=l[m],e.direction==d&&(b=d+e.n+"axis",a[b]||1!=e.n||(b=d+"axis"),a[b])){c=a[b].from;f=a[b].to;break}a[b]||
(e="x"==d?M[0]:S[0],c=a[d+"1"],f=a[d+"2"]);null!=c&&(null!=f&&c>f)&&(b=c,c=f,f=b);return{from:c,to:f,axis:e}}function W(){var a,c,e;m.save();m.translate(t.left,t.top);if(e=l.grid.markings)for(d.isFunction(e)&&(c=B.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,e=e(c)),a=0;a<e.length;++a){c=e[a];var f=y(c,"x"),b=y(c,"y");null==f.from&&(f.from=f.axis.min);null==f.to&&(f.to=f.axis.max);null==b.from&&(b.from=b.axis.min);null==b.to&&(b.to=b.axis.max);f.to<f.axis.min||
(f.from>f.axis.max||b.to<b.axis.min||b.from>b.axis.max)||(f.from=Math.max(f.from,f.axis.min),f.to=Math.min(f.to,f.axis.max),b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),f.from==f.to&&b.from==b.to)||(f.from=f.axis.p2c(f.from),f.to=f.axis.p2c(f.to),b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),f.from==f.to||b.from==b.to?(m.beginPath(),m.strokeStyle=c.color||l.grid.markingsColor,m.lineWidth=c.lineWidth||l.grid.markingsLineWidth,m.moveTo(f.from,b.from),m.lineTo(f.to,b.to),m.stroke()):
(m.fillStyle=c.color||l.grid.markingsColor,m.fillRect(f.from,b.to,f.to-f.from,b.from-b.to)))}c=r();e=l.grid.borderWidth;for(f=0;f<c.length;++f){b=c[f];a=b.box;var g=b.tickLength,D,h,v,n;if(b.show&&0!=b.ticks.length){m.lineWidth=1;"x"==b.direction?(D=0,h="full"==g?"top"==b.position?0:R:a.top-t.top+("top"==b.position?a.height:0)):(h=0,D="full"==g?"left"==b.position?0:U:a.left-t.left+("left"==b.position?a.width:0));b.innermost||(m.strokeStyle=b.options.color,m.beginPath(),v=n=0,"x"==b.direction?v=U+
1:n=R+1,1==m.lineWidth&&("x"==b.direction?h=Math.floor(h)+0.5:D=Math.floor(D)+0.5),m.moveTo(D,h),m.lineTo(D+v,h+n),m.stroke());m.strokeStyle=b.options.tickColor;m.beginPath();for(a=0;a<b.ticks.length;++a){var F=b.ticks[a].v;v=n=0;isNaN(F)||(F<b.min||F>b.max||"full"==g&&("object"==typeof e&&0<e[b.position]||0<e)&&(F==b.min||F==b.max))||("x"==b.direction?(D=b.p2c(F),n="full"==g?-R:g,"top"==b.position&&(n=-n)):(h=b.p2c(F),v="full"==g?-U:g,"left"==b.position&&(v=-v)),1==m.lineWidth&&("x"==b.direction?
D=Math.floor(D)+0.5:h=Math.floor(h)+0.5),m.moveTo(D,h),m.lineTo(D+v,h+n))}m.stroke()}}e&&(a=l.grid.borderColor,"object"==typeof e||"object"==typeof a?("object"!==typeof e&&(e={top:e,right:e,bottom:e,left:e}),"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a}),0<e.top&&(m.strokeStyle=a.top,m.lineWidth=e.top,m.beginPath(),m.moveTo(0-e.left,0-e.top/2),m.lineTo(U,0-e.top/2),m.stroke()),0<e.right&&(m.strokeStyle=a.right,m.lineWidth=e.right,m.beginPath(),m.moveTo(U+e.right/2,0-e.top),m.lineTo(U+e.right/
2,R),m.stroke()),0<e.bottom&&(m.strokeStyle=a.bottom,m.lineWidth=e.bottom,m.beginPath(),m.moveTo(U+e.right,R+e.bottom/2),m.lineTo(0,R+e.bottom/2),m.stroke()),0<e.left&&(m.strokeStyle=a.left,m.lineWidth=e.left,m.beginPath(),m.moveTo(0-e.left/2,R+e.bottom),m.lineTo(0-e.left/2,0),m.stroke())):(m.lineWidth=e,m.strokeStyle=l.grid.borderColor,m.strokeRect(-e/2,-e/2,U+e,R+e)));m.restore()}function qa(){d.each(r(),function(a,c){if(c.show&&0!=c.ticks.length){var e=c.box,d="flot-"+c.direction+"-axis flot-"+
c.direction+c.n+"-axis "+(c.direction+"Axis "+c.direction+c.n+"Axis"),f=c.options.font||"flot-tick-label tickLabel",b,l,m,v,g;K.removeText(d);for(var h=0;h<c.ticks.length;++h)b=c.ticks[h],!b.label||(b.v<c.min||b.v>c.max)||("x"==c.direction?(v="center",l=t.left+c.p2c(b.v),"bottom"==c.position?m=e.top+e.padding:(m=e.top+e.height-e.padding,g="bottom")):(g="middle",m=t.top+c.p2c(b.v),"left"==c.position?(l=e.left+e.width-e.padding,v="right"):l=e.left+e.padding),K.addText(d,l,m,b.label,f,null,v,g))}})}
function ra(a){function c(a,k,e,d,b){var f=a.points;a=a.pointsize;var l=null,z=null;m.beginPath();for(var g=a;g<f.length;g+=a){var s=f[g-a],h=f[g-a+1],n=f[g],p=f[g+1];if(null!=s&&null!=n){if(h<=p&&h<b.min){if(p<b.min)continue;s=(b.min-h)/(p-h)*(n-s)+s;h=b.min}else if(p<=h&&p<b.min){if(h<b.min)continue;n=(b.min-h)/(p-h)*(n-s)+s;p=b.min}if(h>=p&&h>b.max){if(p>b.max)continue;s=(b.max-h)/(p-h)*(n-s)+s;h=b.max}else if(p>=h&&p>b.max){if(h>b.max)continue;n=(b.max-h)/(p-h)*(n-s)+s;p=b.max}if(s<=n&&s<d.min){if(n<
d.min)continue;h=(d.min-s)/(n-s)*(p-h)+h;s=d.min}else if(n<=s&&n<d.min){if(s<d.min)continue;p=(d.min-s)/(n-s)*(p-h)+h;n=d.min}if(s>=n&&s>d.max){if(n>d.max)continue;h=(d.max-s)/(n-s)*(p-h)+h;s=d.max}else if(n>=s&&n>d.max){if(s>d.max)continue;p=(d.max-s)/(n-s)*(p-h)+h;n=d.max}s==l&&h==z||m.moveTo(d.p2c(s)+k,b.p2c(h)+e);l=n;z=p;m.lineTo(d.p2c(n)+k,b.p2c(p)+e)}}m.stroke()}function e(a,k,e){var c=a.points;a=a.pointsize;for(var d=Math.min(Math.max(0,e.min),e.max),b=0,f=!1,l=1,z=0,s=0;!(0<a&&b>c.length+
a);){var b=b+a,g=c[b-a],h=c[b-a+l],n=c[b],p=c[b+l];if(f){if(0<a&&null!=g&&null==n){s=b;a=-a;l=2;continue}if(0>a&&b==z+a){m.fill();f=!1;a=-a;l=1;b=z=s+a;continue}}if(null!=g&&null!=n){if(g<=n&&g<k.min){if(n<k.min)continue;h=(k.min-g)/(n-g)*(p-h)+h;g=k.min}else if(n<=g&&n<k.min){if(g<k.min)continue;p=(k.min-g)/(n-g)*(p-h)+h;n=k.min}if(g>=n&&g>k.max){if(n>k.max)continue;h=(k.max-g)/(n-g)*(p-h)+h;g=k.max}else if(n>=g&&n>k.max){if(g>k.max)continue;p=(k.max-g)/(n-g)*(p-h)+h;n=k.max}f||(m.beginPath(),m.moveTo(k.p2c(g),
e.p2c(d)),f=!0);if(h>=e.max&&p>=e.max)m.lineTo(k.p2c(g),e.p2c(e.max)),m.lineTo(k.p2c(n),e.p2c(e.max));else if(h<=e.min&&p<=e.min)m.lineTo(k.p2c(g),e.p2c(e.min)),m.lineTo(k.p2c(n),e.p2c(e.min));else{var ba=g,t=n;h<=p&&h<e.min&&p>=e.min?(g=(e.min-h)/(p-h)*(n-g)+g,h=e.min):p<=h&&(p<e.min&&h>=e.min)&&(n=(e.min-h)/(p-h)*(n-g)+g,p=e.min);h>=p&&h>e.max&&p<=e.max?(g=(e.max-h)/(p-h)*(n-g)+g,h=e.max):p>=h&&(p>e.max&&h<=e.max)&&(n=(e.max-h)/(p-h)*(n-g)+g,p=e.max);g!=ba&&m.lineTo(k.p2c(ba),e.p2c(h));m.lineTo(k.p2c(g),
e.p2c(h));m.lineTo(k.p2c(n),e.p2c(p));n!=t&&(m.lineTo(k.p2c(n),e.p2c(p)),m.lineTo(k.p2c(t),e.p2c(p)))}}}}m.save();m.translate(t.left,t.top);m.lineJoin="round";var d=a.lines.lineWidth,b=a.shadowSize;if(0<d&&0<b){m.lineWidth=b;m.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;c(a.datapoints,Math.sin(f)*(d/2+b/2),Math.cos(f)*(d/2+b/2),a.xaxis,a.yaxis);m.lineWidth=b/2;c(a.datapoints,Math.sin(f)*(d/2+b/4),Math.cos(f)*(d/2+b/4),a.xaxis,a.yaxis)}m.lineWidth=d;m.strokeStyle=a.color;if(b=O(a.lines,a.color,
0,R))m.fillStyle=b,e(a.datapoints,a.xaxis,a.yaxis);0<d&&c(a.datapoints,0,0,a.xaxis,a.yaxis);m.restore()}function $(a){function c(a,e,k,d,b,f,g,h){var l=a.points;a=a.pointsize;for(var z=0;z<l.length;z+=a){var n=l[z],s=l[z+1];null==n||(n<f.min||n>f.max||s<g.min||s>g.max)||(m.beginPath(),n=f.p2c(n),s=g.p2c(s)+d,"circle"==h?m.arc(n,s,e,0,b?Math.PI:2*Math.PI,!1):h(m,n,s,e,b),m.closePath(),k&&(m.fillStyle=k,m.fill()),m.stroke())}}m.save();m.translate(t.left,t.top);var e=a.points.lineWidth,d=a.shadowSize,
b=a.points.radius,f=a.points.symbol;0==e&&(e=1E-4);0<e&&0<d&&(d/=2,m.lineWidth=d,m.strokeStyle="rgba(0,0,0,0.1)",c(a.datapoints,b,null,d+d/2,!0,a.xaxis,a.yaxis,f),m.strokeStyle="rgba(0,0,0,0.2)",c(a.datapoints,b,null,d/2,!0,a.xaxis,a.yaxis,f));m.lineWidth=e;m.strokeStyle=a.color;c(a.datapoints,b,O(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);m.restore()}function aa(a,c,e,d,b,f,g,h,l,m,n,p){var t,y,q,u;n?(u=y=q=!0,t=!1,n=e,e=c+d,b=c+b,a<n&&(c=a,a=n,n=c,t=!0,y=!1)):(t=y=q=!0,u=!1,n=a+d,a+=b,b=e,e=c,e<
b&&(c=e,e=b,b=c,u=!0,q=!1));a<h.min||(n>h.max||e<l.min||b>l.max)||(n<h.min&&(n=h.min,t=!1),a>h.max&&(a=h.max,y=!1),b<l.min&&(b=l.min,u=!1),e>l.max&&(e=l.max,q=!1),n=h.p2c(n),b=l.p2c(b),a=h.p2c(a),e=l.p2c(e),g&&(m.beginPath(),m.moveTo(n,b),m.lineTo(n,e),m.lineTo(a,e),m.lineTo(a,b),m.fillStyle=g(b,e),m.fill()),0<p&&(t||y||q||u)&&(m.beginPath(),m.moveTo(n,b+f),t?m.lineTo(n,e+f):m.moveTo(n,e+f),q?m.lineTo(a,e+f):m.moveTo(a,e+f),y?m.lineTo(a,b+f):m.moveTo(a,b+f),u?m.lineTo(n,b+f):m.moveTo(n,b+f),m.stroke()))}
function ca(a){m.save();m.translate(t.left,t.top);m.lineWidth=a.bars.lineWidth;m.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;case "center":b=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(e,b,c,d,f,h,g){var l=e.points;e=e.pointsize;for(var n=0;n<l.length;n+=e)null!=l[n]&&aa(l[n],l[n+1],l[n+2],b,c,d,f,h,g,m,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?
function(e,b){return O(a.bars,a.color,e,b)}:null,a.xaxis,a.yaxis);m.restore()}function O(a,b,e,c){var f=a.fill;if(!f)return null;if(a.fillColor)return na(a.fillColor,e,c,b);a=d.color.parse(b);a.a="number"==typeof f?f:0.4;a.normalize();return a.toString()}function A(){a.find(".legend").remove();if(l.legend.show){for(var b=[],c=[],e=!1,h=l.legend.labelFormatter,g,m,n=0;n<E.length;++n)g=E[n],g.label&&(m=h?h(g.label,g):g.label)&&c.push({label:m,color:g.color});if(l.legend.sorted)if(d.isFunction(l.legend.sorted))c.sort(l.legend.sorted);
else if("reverse"==l.legend.sorted)c.reverse();else{var p="descending"!=l.legend.sorted;c.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=p?1:-1})}for(n=0;n<c.length;++n)h=c[n],0==n%l.legend.noColumns&&(e&&b.push("</tr>"),b.push("<tr>"),e=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+h.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+h.label+"</td>");
e&&b.push("</tr>");0!=b.length&&(c='<table style="font-size:smaller;color:'+l.grid.color+'">'+b.join("")+"</table>",null!=l.legend.container?d(l.legend.container).html(c):(b="",e=l.legend.position,n=l.legend.margin,null==n[0]&&(n=[n,n]),"n"==e.charAt(0)?b+="top:"+(n[1]+t.top)+"px;":"s"==e.charAt(0)&&(b+="bottom:"+(n[1]+t.bottom)+"px;"),"e"==e.charAt(1)?b+="right:"+(n[0]+t.right)+"px;":"w"==e.charAt(1)&&(b+="left:"+(n[0]+t.left)+"px;"),c=d('<div class="legend">'+c.replace('style="','style="position:absolute;'+
b+";")+"</div>").appendTo(a),0!=l.legend.backgroundOpacity&&(e=l.legend.backgroundColor,null==e&&(e=(e=l.grid.backgroundColor)&&"string"==typeof e?d.color.parse(e):d.color.extract(c,"background-color"),e.a=1,e=e.toString()),n=c.children(),d('<div style="position:absolute;width:'+n.width()+"px;height:"+n.height()+"px;"+b+"background-color:"+e+';"> </div>').prependTo(c).css("opacity",l.legend.backgroundOpacity))))}}function oa(a){l.grid.hoverable&&X("plothover",a,function(a){return!1!=a.hoverable})}
function T(a){l.grid.hoverable&&X("plothover",a,function(a){return!1})}function pa(a){X("plotclick",a,function(a){return!1!=a.clickable})}function X(b,c,e){var d=Y.offset(),n=c.pageX-d.left-t.left,g=c.pageY-d.top-t.top,h=u({left:n,top:g});h.pageX=c.pageX;h.pageY=c.pageY;c=l.grid.mouseActiveRadius;var m=c*c+1,p=null,y,q,w;for(y=E.length-1;0<=y;--y)if(e(E[y])){var r=E[y],W=r.xaxis,A=r.yaxis,$=r.datapoints.points,aa=W.c2p(n),ca=A.c2p(g),J=c/W.scale,H=c/A.scale;w=r.datapoints.pointsize;W.options.inverseTransform&&
(J=Number.MAX_VALUE);A.options.inverseTransform&&(H=Number.MAX_VALUE);if(r.lines.show||r.points.show)for(q=0;q<$.length;q+=w){var B=$[q],x=$[q+1];null==B||(B-aa>J||B-aa<-J||x-ca>H||x-ca<-H)||(B=Math.abs(W.p2c(B)-n),x=Math.abs(A.p2c(x)-g),x=B*B+x*x,x<m&&(m=x,p=[y,q/w]))}if(r.bars.show&&!p)for(W="left"==r.bars.align?0:-r.bars.barWidth/2,r=W+r.bars.barWidth,q=0;q<$.length;q+=w)B=$[q],x=$[q+1],A=$[q+2],null!=B&&(E[y].bars.horizontal?aa<=Math.max(A,B)&&aa>=Math.min(A,B)&&ca>=x+W&&ca<=x+r:aa>=B+W&&aa<=
B+r&&ca>=Math.min(A,x)&&ca<=Math.max(A,x))&&(p=[y,q/w])}p?(y=p[0],q=p[1],w=E[y].datapoints.pointsize,e={datapoint:E[y].datapoints.points.slice(q*w,(q+1)*w),dataIndex:q,series:E[y],seriesIndex:y}):e=null;e&&(e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+d.left+t.left,10),e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+d.top+t.top,10));if(l.grid.autoHighlight){for(d=0;d<Z.length;++d)n=Z[d],n.auto!=b||e&&n.series==e.series&&n.point[0]==e.datapoint[0]&&n.point[1]==e.datapoint[1]||ha(n.series,
n.point);e&&ia(e.series,e.datapoint,b)}a.trigger(b,[h,e])}function ea(){var a=l.interaction.redrawOverlayInterval;-1==a?ja():ga||(ga=setTimeout(ja,a))}function ja(){ga=null;P.save();fa.clear();P.translate(t.left,t.top);var a,b;for(a=0;a<Z.length;++a)if(b=Z[a],b.series.bars.show)ma(b.series,b.point);else{var e=b.series,c=b.point;b=c[0];var c=c[1],f=e.xaxis,n=e.yaxis,h="string"===typeof e.highlightColor?e.highlightColor:d.color.parse(e.color).scale("a",0.5).toString();if(!(b<f.min||b>f.max||c<n.min||
c>n.max)){var l=e.points.radius+e.points.lineWidth/2;P.lineWidth=l;P.strokeStyle=h;h=1.5*l;b=f.p2c(b);c=n.p2c(c);P.beginPath();"circle"==e.points.symbol?P.arc(b,c,h,0,2*Math.PI,!1):e.points.symbol(P,b,c,h,!1);P.closePath();P.stroke()}}P.restore();g(Q.drawOverlay,[P])}function ia(a,b,c){"number"==typeof a&&(a=E[a]);if("number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}d=ka(a,b);-1==d?(Z.push({series:a,point:b,auto:c}),ea()):c||(Z[d].auto=!1)}function ha(a,b){if(null==
a&&null==b)Z=[],ea();else{"number"==typeof a&&(a=E[a]);if("number"==typeof b){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}c=ka(a,b);-1!=c&&(Z.splice(c,1),ea())}}function ka(a,b){for(var c=0;c<Z.length;++c){var d=Z[c];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return c}return-1}function ma(a,b){var c="string"===typeof a.highlightColor?a.highlightColor:d.color.parse(a.color).scale("a",0.5).toString(),f="left"==a.bars.align?0:-a.bars.barWidth/2;P.lineWidth=a.bars.lineWidth;
P.strokeStyle=c;aa(b[0],b[1],b[2]||0,f,f+a.bars.barWidth,0,function(){return c},a.xaxis,a.yaxis,P,a.bars.horizontal,a.bars.lineWidth)}function na(a,b,c,f){if("string"==typeof a)return a;b=m.createLinearGradient(0,c,0,b);c=0;for(var n=a.colors.length;c<n;++c){var h=a.colors[c];if("string"!=typeof h){var g=d.color.parse(f);null!=h.brightness&&(g=g.scale("rgb",h.brightness));null!=h.opacity&&(g.a*=h.opacity);h=g.toString()}b.addColorStop(c/(n-1),h)}return b}var E=[],l={colors:["#edc240","#afd8f8","#cb4b4b",
"#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,
minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,
markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},K=null,fa=null,Y=null,m=null,P=null,M=[],S=[],t={left:0,right:0,top:0,bottom:0},U=0,R=0,Q={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},B=this;B.setData=p;B.setupGrid=q;B.draw=n;B.getPlaceholder=function(){return a};
B.getCanvas=function(){return K.element};B.getPlotOffset=function(){return t};B.width=function(){return U};B.height=function(){return R};B.offset=function(){var a=Y.offset();a.left+=t.left;a.top+=t.top;return a};B.getData=function(){return E};B.getAxes=function(){var a={};d.each(M.concat(S),function(b,c){c&&(a[c.direction+(1!=c.n?c.n:"")+"axis"]=c)});return a};B.getXAxes=function(){return M};B.getYAxes=function(){return S};B.c2p=u;B.p2c=function(a){var b={},c,d,f;for(c=0;c<M.length;++c)if((d=M[c])&&
d.used&&(f="x"+d.n,null==a[f]&&1==d.n&&(f="x"),null!=a[f])){b.left=d.p2c(a[f]);break}for(c=0;c<S.length;++c)if((d=S[c])&&d.used&&(f="y"+d.n,null==a[f]&&1==d.n&&(f="y"),null!=a[f])){b.top=d.p2c(a[f]);break}return b};B.getOptions=function(){return l};B.highlight=ia;B.unhighlight=ha;B.triggerRedrawOverlay=ea;B.pointOffset=function(a){return{left:parseInt(M[w(a,"x")-1].p2c(+a.x)+t.left,10),top:parseInt(S[w(a,"y")-1].p2c(+a.y)+t.top,10)}};B.shutdown=function(){ga&&clearTimeout(ga);Y.unbind("mousemove",
oa);Y.unbind("mouseleave",T);Y.unbind("click",pa);g(Q.shutdown,[Y])};B.resize=function(){var b=a.width(),c=a.height();K.resize(b,c);fa.resize(b,c)};B.hooks=Q;(function(){for(var a={Canvas:C},b=0;b<h.length;++b){var c=h[b];c.init(B,a);c.options&&d.extend(!0,l,c.options)}})(B);(function(b){d.extend(!0,l,b);null==l.xaxis.color&&(l.xaxis.color=d.color.parse(l.grid.color).scale("a",0.22).toString());null==l.yaxis.color&&(l.yaxis.color=d.color.parse(l.grid.color).scale("a",0.22).toString());null==l.xaxis.tickColor&&
(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color);null==l.yaxis.tickColor&&(l.yaxis.tickColor=l.grid.tickColor||l.yaxis.color);null==l.grid.borderColor&&(l.grid.borderColor=l.grid.color);null==l.grid.tickColor&&(l.grid.tickColor=d.color.parse(l.grid.color).scale("a",0.22).toString());var c,e,n={style:a.css("font-style"),size:Math.round(0.8*(+a.css("font-size").replace("px","")||13)),variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};n.lineHeight=1.15*n.size;e=
l.xaxes.length||1;for(b=0;b<e;++b)(c=l.xaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},l.xaxis,c),l.xaxes[b]=c,c.font&&(c.font=d.extend({},n,c.font),c.font.color||(c.font.color=c.color));e=l.yaxes.length||1;for(b=0;b<e;++b)(c=l.yaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},l.yaxis,c),l.yaxes[b]=c,c.font&&(c.font=d.extend({},n,c.font),c.font.color||(c.font.color=c.color));l.xaxis.noTicks&&null==l.xaxis.ticks&&(l.xaxis.ticks=l.xaxis.noTicks);l.yaxis.noTicks&&null==
l.yaxis.ticks&&(l.yaxis.ticks=l.yaxis.noTicks);l.x2axis&&(l.xaxes[1]=d.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position="top");l.y2axis&&(l.yaxes[1]=d.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right");l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas);l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor);l.lines&&d.extend(!0,l.series.lines,l.lines);l.points&&d.extend(!0,l.series.points,l.points);l.bars&&d.extend(!0,l.series.bars,l.bars);null!=l.shadowSize&&
(l.series.shadowSize=l.shadowSize);null!=l.highlightColor&&(l.series.highlightColor=l.highlightColor);for(b=0;b<l.xaxes.length;++b)J(M,b+1).options=l.xaxes[b];for(b=0;b<l.yaxes.length;++b)J(S,b+1).options=l.yaxes[b];for(var h in Q)l.hooks[h]&&l.hooks[h].length&&(Q[h]=Q[h].concat(l.hooks[h]));g(Q.processOptions,[l])})(c);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();"static"==a.css("position")&&a.css("position","relative");K=new C("flot-base",a);fa=new C("flot-overlay",
a);m=K.context;P=fa.context;Y=d(fa.element).unbind();var b=a.data("plot");b&&(b.shutdown(),fa.clear());a.data("plot",B)})();p(b);q();n();l.grid.hoverable&&(Y.mousemove(oa),Y.bind("mouseleave",T));l.grid.clickable&&Y.click(pa);g(Q.bindEvents,[Y]);var Z=[],ga=null}var a=Object.prototype.hasOwnProperty;C.prototype.resize=function(a,b){if(0>=a||0>=b)throw Error("Invalid dimensions for plot, width = "+a+", height = "+b);var c=this.element,d=this.context,g=this.pixelRatio;this.width!=a&&(c.width=a*g,c.style.width=
a+"px",this.width=a);this.height!=b&&(c.height=b*g,c.style.height=b+"px",this.height=b);d.restore();d.save();d.scale(g,g)};C.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};C.prototype.render=function(){var d=this._textCache,b;for(b in d)if(a.call(d,b)){var c=this.getTextLayer(b),h=d[b];c.hide();for(var g in h)if(a.call(h,g)){var p=h[g],w;for(w in p)if(a.call(p,w)){var r=p[w];r.active?r.rendered||(c.append(r.element),r.rendered=!0):(delete p[w],r.rendered&&r.element.detach())}}c.show()}};
C.prototype.getTextLayer=function(a){var b=this.text[a];null==b&&(null==this.textContainer&&(this.textContainer=d("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),b=this.text[a]=d("<div></div>").addClass(a).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return b};C.prototype.getTextInfo=function(a,b,c,h){var g,p;b=""+b;h="object"===typeof c?c.style+" "+
c.variant+" "+c.weight+" "+c.size+"px/"+c.lineHeight+"px "+c.family:c;g=this._textCache[a];null==g&&(g=this._textCache[a]={});p=g[h];null==p&&(p=g[h]={});g=p[b];null==g&&(a=d("<div></div>").html(b).css({position:"absolute",top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof c?a.css({font:h,color:c.color}):"string"===typeof c&&a.addClass(c),g=p[b]={active:!1,rendered:!1,element:a,width:a.outerWidth(!0),height:a.outerHeight(!0)},a.detach());return g};C.prototype.addText=function(a,b,c,d,g,
p,w,r){a=this.getTextInfo(a,d,g,p);a.active=!0;"center"==w?b-=a.width/2:"right"==w&&(b-=a.width);"middle"==r?c-=a.height/2:"bottom"==r&&(c-=a.height);a.element.css({top:Math.round(c),left:Math.round(b)})};C.prototype.removeText=function(d,b,c,h){if(null==b){if(d=this._textCache[d],null!=d)for(var g in d)if(a.call(d,g)){b=d[g];for(var p in b)a.call(b,p)&&(b[p].active=!1)}}else this.getTextInfo(d,b,c,h).active=!1};d.plot=function(a,b,c){return new x(d(a),b,c,d.plot.plugins)};d.plot.version="0.8.0";
d.plot.plugins=[];d.fn.plot=function(a,b){return this.each(function(){d.plot(this,a,b)})}})(jQuery);
(function(d){var C=10,x=0.95,a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,b){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+b.color+";'>"+a+"<br/>"+Math.round(b.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};d.plot.plugins.push({init:function(f){function b(b){for(var c=
0,f=0,h=0,g=a.series.pie.combine.color,p=[],q=0;q<b.length;++q){var r=b[q].data;d.isArray(r)?d.isNumeric(r[1])?r[1]=+r[1]:r[1]=0:r=d.isNumeric(r)?[1,+r]:[1,0];b[q].data=[r]}for(q=0;q<b.length;++q)c+=b[q].data[0][1];for(q=0;q<b.length;++q)r=b[q].data[0][1],r/c<=a.series.pie.combine.threshold&&(f+=r,h++,g||(g=b[q].color));for(q=0;q<b.length;++q)r=b[q].data[0][1],(2>h||r/c>a.series.pie.combine.threshold)&&p.push({data:[[1,r]],color:b[q].color,label:b[q].label,angle:2*r*Math.PI/c,percent:r/(c/100)});
1<h&&p.push({data:[[1,f]],color:g,label:a.series.pie.combine.label,angle:2*f*Math.PI/c,percent:f/(c/100)});return p}function c(b,c){function f(){q.clearRect(0,0,r,w);J.children().filter(".pieLabel, .pieLabelBackground").remove()}function g(){var b=a.series.pie.shadow.left,c=a.series.pie.shadow.top,d=a.series.pie.shadow.alpha,f=1<a.series.pie.radius?a.series.pie.radius:H*a.series.pie.radius;if(!(f>=r/2-b||f*a.series.pie.tilt>=w/2-c||10>=f)){q.save();q.translate(b,c);q.globalAlpha=d;q.fillStyle="#000";
q.translate(I,V);q.scale(1,a.series.pie.tilt);for(b=1;10>=b;b++)q.beginPath(),q.arc(0,0,f,0,2*Math.PI,!1),q.fill(),f-=b;q.restore()}}function p(){function b(a,c,d){0>=a||isNaN(a)||(d?q.fillStyle=c:(q.strokeStyle=c,q.lineJoin="round"),q.beginPath(),1E-9<Math.abs(a-2*Math.PI)&&q.moveTo(0,0),q.arc(0,0,g,n,n+a/2,!1),q.arc(0,0,g,n+a/2,n+a,!1),q.closePath(),n+=a,d?q.fill():q.stroke())}function c(){for(var b=f,h=1<a.series.pie.label.radius?a.series.pie.label.radius:H*a.series.pie.label.radius,g=0;g<O.length;++g){if(O[g].percent>=
100*a.series.pie.label.threshold){var n;n=O[g];var p=b,q=g;if(0==n.data[0][1])n=!0;else{var y=a.legend.labelFormatter,l=void 0,u=a.series.pie.label.formatter,l=y?y(n.label,n):n.label;u&&(l=u(l,n));y=(p+n.angle+p)/2;p=I+Math.round(Math.cos(y)*h);y=V+Math.round(Math.sin(y)*h)*a.series.pie.tilt;J.append("<span class='pieLabel' id='pieLabel"+q+"' style='position:absolute;top:"+y+"px;left:"+p+"px;'>"+l+"</span>");q=J.children("#pieLabel"+q);l=y-q.height()/2;y=p-q.width()/2;q.css("top",l);q.css("left",
y);0<0-l||0<0-y||0>w-(l+q.height())||0>r-(y+q.width())?n=!1:(0!=a.series.pie.label.background.opacity&&(p=a.series.pie.label.background.color,null==p&&(p=n.color),n="top:"+l+"px;left:"+y+"px;",d("<div class='pieLabelBackground' style='position:absolute;width:"+q.width()+"px;height:"+q.height()+"px;"+n+"background-color:"+p+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(q)),n=!0)}if(!n)return!1}b+=O[g].angle}return!0}var f=Math.PI*a.series.pie.startAngle,g=1<a.series.pie.radius?
a.series.pie.radius:H*a.series.pie.radius;q.save();q.translate(I,V);q.scale(1,a.series.pie.tilt);q.save();for(var n=f,y=0;y<O.length;++y)O[y].startAngle=n,b(O[y].angle,O[y].color,!0);q.restore();if(0<a.series.pie.stroke.width){q.save();q.lineWidth=a.series.pie.stroke.width;n=f;for(y=0;y<O.length;++y)b(O[y].angle,a.series.pie.stroke.color,!1);q.restore()}h(q);q.restore();return a.series.pie.label.show?c():!0}if(J){var r=b.getPlaceholder().width(),w=b.getPlaceholder().height(),u=J.children().filter(".legend").children().width()||
0;q=c;N=!1;H=Math.min(r,w/a.series.pie.tilt)/2;V=w/2+a.series.pie.offset.top;I=r/2;I="auto"==a.series.pie.offset.left?a.legend.position.match("w")?I+u/2:I-u/2:I+a.series.pie.offset.left;I<H?I=H:I>r-H&&(I=r-H);var O=b.getData(),u=0;do 0<u&&(H*=x),u+=1,f(),0.8>=a.series.pie.tilt&&g();while(!p()&&u<C);u>=C&&(f(),J.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));b.setSeries&&b.insertLegend&&(b.setSeries(O),b.insertLegend())}}function h(b){if(0<a.series.pie.innerRadius){b.save();
var c=1<a.series.pie.innerRadius?a.series.pie.innerRadius:H*a.series.pie.innerRadius;b.globalCompositeOperation="destination-out";b.beginPath();b.fillStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.fill();b.closePath();b.restore();b.save();b.beginPath();b.strokeStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.stroke();b.closePath();b.restore()}}function g(a){w("plothover",a)}function p(a){w("plotclick",a)}function w(b,c){var d=f.offset(),g=parseInt(c.pageX-d.left);a:{for(var d=
parseInt(c.pageY-d.top),h=f.getData(),p=f.getOptions(),p=1<p.series.pie.radius?p.series.pie.radius:H*p.series.pie.radius,u,w,x=0;x<h.length;++x){var A=h[x];if(A.pie.show){q.save();q.beginPath();q.moveTo(0,0);q.arc(0,0,p,A.startAngle,A.startAngle+A.angle/2,!1);q.arc(0,0,p,A.startAngle+A.angle/2,A.startAngle+A.angle,!1);q.closePath();u=g-I;w=d-V;if(q.isPointInPath){if(q.isPointInPath(g-I,d-V)){q.restore();g={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:x};break a}}else{var C=p*Math.cos(A.startAngle),
T=p*Math.sin(A.startAngle),N=p*Math.cos(A.startAngle+A.angle/4),X=p*Math.sin(A.startAngle+A.angle/4),ea=p*Math.cos(A.startAngle+A.angle/2),ja=p*Math.sin(A.startAngle+A.angle/2),ia=p*Math.cos(A.startAngle+A.angle/1.5),ha=p*Math.sin(A.startAngle+A.angle/1.5),ka=p*Math.cos(A.startAngle+A.angle),ma=p*Math.sin(A.startAngle+A.angle),C=[[0,0],[C,T],[N,X],[ea,ja],[ia,ha],[ka,ma]];u=[u,w];w=!1;T=-1;N=C.length;for(X=N-1;++T<N;X=T)(C[T][1]<=u[1]&&u[1]<C[X][1]||C[X][1]<=u[1]&&u[1]<C[T][1])&&u[0]<(C[X][0]-C[T][0])*
(u[1]-C[T][1])/(C[X][1]-C[T][1])+C[T][0]&&(w=!w);if(w){q.restore();g={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:x};break a}}q.restore()}}g=null}if(a.grid.autoHighlight)for(d=0;d<G.length;++d)h=G[d],h.auto!=b||g&&h.series==g.series||(h=h.series,null==h&&(G=[],f.triggerRedrawOverlay()),h=r(h),-1!=h&&(G.splice(h,1),f.triggerRedrawOverlay()));g&&(d=g.series,h=r(d),-1==h?(G.push({series:d,auto:b}),f.triggerRedrawOverlay()):b||(G[h].auto=!1));J.trigger(b,[{pageX:c.pageX,pageY:c.pageY},
g])}function r(a){for(var b=0;b<G.length;++b)if(G[b].series==a)return b;return-1}var u=null,J=null,H=null,I=null,V=null,N=!1,q=null,G=[];f.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt?b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});f.hooks.bindEvents.push(function(a,b){var c=
a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(g),c.grid.clickable&&b.unbind("click").click(p))});f.hooks.processDatapoints.push(function(c,f,h,g){c.getOptions().series.pie.show&&!N&&(N=!0,u=c.getCanvas(),J=d(u).parent(),a=c.getOptions(),c.setData(b(c.getData())))});f.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),d=1<c.series.pie.radius?c.series.pie.radius:H*c.series.pie.radius;b.save();b.translate(I,V);b.scale(1,
c.series.pie.tilt);for(var f=0;f<G.length;++f){var g=G[f].series;0>=g.angle||isNaN(g.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(g.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,g.startAngle,g.startAngle+g.angle/2,!1),b.arc(0,0,d,g.startAngle+g.angle/2,g.startAngle+g.angle,!1),b.closePath(),b.fill())}h(b);b.restore()}});f.hooks.draw.push(function(a,b){a.getOptions().series.pie.show&&c(a,b)})},options:a,name:"pie",version:"1.1"})})(jQuery);
(function(d,C){var x=0;d.widget("s3.pivottable",{options:{showTotals:!0,collapseForm:!0,ajaxURL:null,defaultChart:null,showChart:!1},_create:function(){this.id=x;x+=1;this.chart=this.table=null},_init:function(){var a=this.element;this.table=this.data=null;this.chart_options={currentChart:null,currentDataIndex:null,currentSeriesIndex:null};this.table_options={hidden:!1};var f=d(a).find(".pt-chart");this.chart=f.length?f.first():null;this.options.collapseForm&&(a=d(a).attr("id"),d("#"+a+"-options legend").siblings().toggle(),
d("#"+a+"-options legend").children().toggle());this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=this.element,f=null;this._unbindEvents();var b=d(a).find('input[type="hidden"][name="pivotdata"]');b.length&&(f=JSON.parse(d(b).first().val()));f||(f={empty:!0},d(a).find(".pt-hide-table").hide(),d(a).find(".pt-show-table").hide(),d(a).find(".pt-empty").show());this.data=f;f.nodata?(d(a).find(".pt-table").first().empty().append(d('<div class="pt-no-data">'+
f.nodata+"</div>")),d(a).find(".pt-hide-table").hide(),d(a).find(".pt-show-table").hide(),d(a).find(".pt-empty").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();this._bindEvents();d(a).find(".pt-throbber").hide()},_renderTable:function(){var a=this.element,f=d(a).find(".pt-table").first().empty();this.table=null;var b=this.data;if(!b.empty){var c=b.cells,h=b.cols,g=b.rows,p=b.total,w=b.labels,b=this._renderHeader(h,w);b.append(this._renderColumns(h,w));c=this._renderRows(g,
h,w,c);h=this._renderFooter(g,h,w,p);g=d('<table class="dataTable display report"/>').append(b).append(c);null!==h&&g.append(h);this.table=d(g);d(f).append(this.table);d(a).find(".pt-empty").hide();this.table_options.hidden?(d(a).find(".pt-show-table").show(),d(a).find(".pt-hide-table").hide()):(d(a).find(".pt-show-table").hide(),d(a).find(".pt-hide-table").show())}},_renderHeader:function(a,f){var b=d("<tr>");colspan="__other__"==a[a.length-1][0]?a.length-1:a.length;b.append(d('<th scope="col">'+
f.layer+"</th>"));(1<a.length||a[0][4])&&b.append(d('<th scope="col" colspan="'+colspan+'">'+f.cols+"</th>"));this.options.showTotals&&b.append(d('<th class="totals_header row_totals" scope="col" rowspan="2">'+f.total+"</th>"));return d("<thead>").append(b)},_renderColumns:function(a,f){var b=d("<tr>"),c;b.append(d('<th scope="col">'+f.rows+"</th>"));for(var h=1==a.length&&null===a[0][4]?!0:!1,g=0;g<a.length;g++)"__other__"==a[g][0]||h&&this.options.showTotals||(c=h?"":a[g][4],b.append(d('<th scope="col">'+
c+"</th>")));return b},_renderRows:function(a,f,b,c){for(var h=d("<tbody>"),g=this.options.showTotals,p=1==a.length&&null===a[0][4]?!0:!1,w,r,u=0;u<c.length;u++)w=a[u],"__other__"==w[0]||p&&this.options.showTotals||(r=p?"":a[u][4],r=d('<tr class="'+(u%2?"odd":"even")+'"><td>'+r+"</td></tr>").append(this._renderCells(c[u],f,b)),g&&r.append(d("<td>"+w[2]+"</td>")),h.append(r));return h},_renderCells:function(a,f,b){for(var c,h=b.none,g=1==f.length&&null===f[0][4]?!0:!1,p=[],w,r,u=0;u<a.length;u++)if(!("__other__"==
f[u][0]||g&&this.options.showTotals)){c=a[u];b=c.items;w=d("<td>");if(null===b)r=d('<div class="pt-cell-value">'+h+"</div>");else if(d.isArray(b)){r=d('<div class="pt-cell-value">');list=d("<ul>");for(var x=0;x<b.length;x++)list.append(d("<li>"+b[x]+"</li>"));r.append(list)}else r=d('<div class="pt-cell-value">'+b+"</div>");w.append(r);c=c.keys;b&&(c&&c.length)&&w.data("records",c).append(d('<div class="pt-cell-zoom"></div>'));p.push(w)}return p},_renderFooter:function(a,f,b,c){var h=1==f.length&&
null===f[0][4]?!0:!1;if(this.options.showTotals){var g,p;p=g=0;for(len=a.length;g<len;g++)"__other__"!=a[g][0]&&p++;a=d('<tr class="'+(p%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+b.total+"</th></tr>");for(g=0;g<f.length;g++)"__other__"==f[g][0]||h||a.append(d("<td>"+f[g][2]+"</td>"));a.append(d("<td>"+c+"</td>"));return d("<tfoot>").append(a)}return null},_renderChartOptions:function(){var a=this.element,f=d(a).find(".pt-chart-controls").first().empty(),b=this.data;if(!b.empty){var c=
b.labels,b=d(a).attr("id"),a=c.rows,c=c.cols,h=d('<div class="pt-chart-opts">'),g=b+"-pchart-rows",p=b+"-vchart-rows",w=b+"-hchart-rows",r=b+"-pchart-cols",u=b+"-vchart-cols",b=b+"-hchart-cols";a&&d(h).append(d('<div id="'+g+'" class="pt-chart-icon pt-pchart"/><div id="'+p+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+a+"</span>"));c&&d(h).append(d('<div id="'+r+'" class="pt-chart-icon pt-pchart"/><div id="'+u+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+
c+"</span>"));a&&c&&d(h).append(d('<div id="'+w+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+a+'</span><div id="'+b+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+c+"</span>"));d(f).append(h)}},_renderChart:function(a){var f=this.data;d(this.element).find(".pt-chart-contents").hide();var b=this.chart;if(b&&(d(b).unbind("plothover"),d(b).unbind("plotclick"),d(b).empty(),!f.empty))if(!1===a)this.options.showChart=!1;else{b=this.options.showChart;if("undefined"==
typeof a||!a){if(!b)return;a=this.chart_options.currentChart}if("undefined"==typeof a||!a){if(!b)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.showChart=!0;this.chart_options.currentChart=a;b=a.type;a=a.axis;var c=f.labels,h=c.per,g=c.layer+" "+h+" "+c.rows,c=c.layer+" "+h+" "+c.cols;"piechart"==b?"rows"==a?this._renderPieChart(f.rows,g):this._renderPieChart(f.cols,c):"barchart"==b?"rows"==a?this._renderBarChart(f.rows,g):this._renderBarChart(f.cols,c):"breakdown"==
b&&("rows"==a?this._renderBreakDown(f,0,g):this._renderBreakDown(f,1,c))}}},_renderPieChart:function(a,f){var b=this.chart;if(b){d(b).closest(".pt-chart-contents").show().css({width:"800px"});d(b).css({height:"360px"});for(var c=[],h=0;h<a.length;h++){var g=a[h];g[1]||c.push({label:g[4],data:g[2]})}f?d(b).siblings(".pt-chart-title").html("<h4>"+f+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),c,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,
clickable:!0}});var p=this;this.chart_options.currentDataIndex=null;d(b).bind("plothover",function(a,b,c){if(c){if(p.chart_options.currentDataIndex!=c.seriesIndex){p._removeChartTooltip();p.chart_options.currentDataIndex=c.seriesIndex;a=c.series.data[0][1];var f=c.series.percent.toFixed(1),g='<div class="pt-tooltip-label">'+c.series.label+"</div>";p._renderChartTooltip(b.pageX,b.pageY,g+('<div class="pt-tooltip-text">'+a+" ("+f+"%)</div>"));d(".pt-tooltip-label").css({color:c.series.color})}}else p._removeChartTooltip()})}},
_renderBarChart:function(a,f){var b=this.chart;if(b){d(b).closest(".pt-chart-contents").show().css({width:"96%"});d(b).css({height:"360px"});for(var c=[],h=[],g=0,p=0;p<a.length;p++){var w=a[p];w[1]||(c.push({label:w[4],data:[[g+1,w[2]]]}),h.push([g+1,w[4]]),g++)}f?d(b).siblings(".pt-chart-title").html("<h4>"+f+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),c,{series:{bars:{show:!0,barWidth:0.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},
xaxis:{ticks:h,min:0,max:c.length+1,tickLength:0}});var r=this;this.chart_options.currentDataIndex=null;d(b).bind("plothover",function(a,b,c){c?r.chart_options.currentDataIndex!=c.seriesIndex&&(r._removeChartTooltip(),r.chart_options.currentDataIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+c.series.label+"</div>",a+='<div class="pt-tooltip-text">'+c.series.data[0][1]+"</div>",r._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({color:c.series.color})):r._removeChartTooltip()})}},
_renderBreakDown:function(a,f,b){var c=this.chart;if(c){d(c).closest(".pt-chart-contents").show().css({width:"96%"});var h=a.cells,g,p,w=[],r=[];0===f?(g=a.rows,p=a.cols,f=function(a,b){return h[w[a]][r[b]].value}):(g=a.cols,p=a.rows,f=function(a,b){return h[r[b]][w[a]].value});var u,x=[];a=[];u=0;for(len=g.length;u<len;u++)g[u][1]||(x.push(g[u]),w.push(u));u=0;for(len=p.length;u<len;u++)p[u][1]||(a.push(p[u]),r.push(u));g=Math.max(x.length*Math.max(16*(a.length+1),50)+70,360);d(c).css({height:g+
"px"});g=[];for(var C=p=0;C<a.length;C++){for(var I={label:a[C][4]},V=[],N,q=0;q<x.length;q++)u=(x.length-q)*(a.length+1)-C,N=f(q,C),N>p&&(p=N),V.push([N,u]);I.data=V;g.push(I)}f=[];for(q=0;q<x.length;q++)C=x[q][4],u=(x.length-q)*(a.length+1)+1,f.push([u,C]);b?d(c).siblings(".pt-chart-title").html("<h4>"+b+"</h4>"):d(c).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(c),g,{series:{bars:{show:!0,barWidth:0.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},yaxis:{ticks:f,
labelWidth:120,max:x.length*(a.length+1)+1},xaxis:{max:1.1*p},grid:{hoverable:!0,clickable:!0}});d(".yAxis .tickLabel").css({"padding-top":"20px"});var G=this;this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;d(c).bind("plothover",function(a,b,c){if(c){if(G.chart_options.currentDataIndex!=c.dataIndex||G.chart_options.currentSeriesIndex!=c.seriesIndex)G._removeChartTooltip(),G.chart_options.currentDataIndex=c.dataIndex,G.chart_options.currentSeriesIndex=c.seriesIndex,
a='<div class="pt-tooltip-label">'+x[c.dataIndex][4]+"</div>",a+='<div class="pt-tooltip-text">'+c.series.label+' : <span class="pt-tooltip-value">'+c.datapoint[0]+"</span></div>",G._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({"padding-bottom":"8px"}),d(".pt-tooltip-text").css({color:c.series.color}),d(".pt-tooltip-value").css({"font-weight":"bold"})}else G._removeChartTooltip()})}},_renderChartTooltip:function(a,f,b){d('<div class="pt-chart-tooltip">'+b+"</div>").css({position:"absolute",
display:"none",top:f-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:0.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){d(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var a="#"+d(this.element).attr("id");return{rows:d(a+"-rows").val(),cols:d(a+"-cols").val(),fact:d(a+"-fact").val(),
totals:d(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+d(this.element).attr("id"),f=d(a+"-filters"),a=[];try{if(f.length)a=S3.search.getCurrentFilters(f.first());else return null}catch(b){}for(var f={},c=0,h=a.length,g;c<h;c++)g=a[c].split("="),1<g.length&&(f[g[0]]=g[1]);return f},_updateAjaxURL:function(a,d){var b=this.options.ajaxURL.split("?"),c={};if(1<b.length){var h=b[1].split("&"),g,p,w;p=0;for(w=h.length;p<w;p++)g=h[p].split("="),1<g.length&&"aggregate"!=g[0]&&(c[decodeURIComponent(g[0])]=
decodeURIComponent(g[1]))}h=!1;if(a)for(option in a)g=a[option],"totals"==option?this.options.showTotals=g?!0:!1:c[option]!=g&&(h=!0),c[option]=g?g:null;if(d){for(option in d)g=d[option],c[option]!=g&&(h=!0),c[option]=g?g:null;for(option in c)a.hasOwnProperty(option)||(g=d[option],c[option]!=g&&(h=!0),c[option]=g?g:null)}g=[];for(option in c)null!==c[option]&&g.push(option+"="+c[option]);c=g.join("&");b=b[0];c&&(b=b+"?"+c);this.options.ajaxURL=b;return h},reload:function(a,f,b){b="undefined"!=typeof b?
b:!0;"undefined"==typeof f&&(f=this._getFilters());var c=this,h=this.element,g,p=d(h).find('input[type="hidden"][name="pivotdata"]');if(p.length){if(a||f)g=this._updateAjaxURL(a,f);g||b?(a=this.options.ajaxURL,d(h).find(".pt-throbber").show(),d.ajax({url:a,dataType:"json"}).done(function(a){p.first().val(JSON.stringify(a));c.refresh()}).fail(function(a,b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):(d(h).find(".pt-throbber").show(),c.refresh())}},_bindEvents:function(a){var f=
this,b=this.element;a=this.data;var c=d(b).attr("id");d("#"+c+"-options legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d("#"+c+"-filters legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d(b).find(".pt-hide-table").click(function(){f.table_options.hidden=!0;d(b).find(".pt-table").hide();d(this).siblings(".pt-show-table").show();d(this).hide()});d(b).find(".pt-show-table").click(function(){f.table_options.hidden=!1;d(b).find(".pt-table").show();
d(this).siblings(".pt-hide-table").show();d(this).hide()});d("#"+c+"-totals").click(function(){var a=d(this).is(":checked");f.options.showTotals!=a&&f.reload({totals:a},null,!1)});d(b).find("input.pt-submit").click(function(){var a=f._getOptions(),b=f._getFilters();f.reload(a,b,!1)});d("#"+c+" div.pt-table div.pt-cell-zoom").click(function(b){b=d(b.currentTarget);var c=b.closest("td"),f=c.find(".pt-cell-records");if(0<f.length)f.remove(),b.removeClass("opened");else{for(var w=c.data("records"),f=
d("<div/>").addClass("pt-cell-records"),r=d("<ul/>"),u=0;u<w.length;u++)r.append("<li>"+a.lookup[w[u]]+"</li>");f.append(r);c.append(f);b.addClass("opened")}});d("#"+c+"-pchart-rows").click(function(){f._renderChart({type:"piechart",axis:"rows"})});d("#"+c+"-vchart-rows").click(function(){f._renderChart({type:"barchart",axis:"rows"})});d("#"+c+"-pchart-cols").click(function(){f._renderChart({type:"piechart",axis:"cols"})});d("#"+c+"-vchart-cols").click(function(){f._renderChart({type:"barchart",axis:"cols"})});
d("#"+c+"-hchart-rows").click(function(){f._renderChart({type:"breakdown",axis:"rows"})});d("#"+c+"-hchart-cols").click(function(){f._renderChart({type:"breakdown",axis:"cols"})});d(b).find(".pt-hide-chart").click(function(){f._renderChart(!1)})},_unbindEvents:function(){var a=this.element,f=d(a).attr("id");d(a).find("input.pt-submit").unbind("click");d("#"+f+" div.pt-table div.pt-cell-zoom").unbind("click");d("#"+f+"-options legend").unbind("click");d("#"+f+"-filters legend").unbind("click");d(f+
"-totals").unbind("click");d("#"+f+"-pchart-rows").unbind("click");d("#"+f+"-vchart-rows").unbind("click");d("#"+f+"-pchart-cols").unbind("click");d("#"+f+"-vchart-cols").unbind("click");d(a).find(".pt-hide-table").unbind("click");d(a).find(".pt-show-table").unbind("click");d(a).find(".pt-hide-chart").unbind("click")}})})(jQuery);
