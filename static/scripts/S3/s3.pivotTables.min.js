/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(c){c.color={};c.color.make=function(y,a,d,f){var b={};b.r=y||0;b.g=a||0;b.b=d||0;b.a=null!=f?f:1;b.add=function(c,a){for(var d=0;d<c.length;++d)b[c.charAt(d)]+=a;return b.normalize()};b.scale=function(c,d){for(var a=0;a<c.length;++a)b[c.charAt(a)]*=d;return b.normalize()};b.toString=function(){return 1<=b.a?"rgb("+[b.r,b.g,b.b].join()+")":"rgba("+[b.r,b.g,b.b,b.a].join()+")"};b.normalize=function(){function c(a,d,b){return d<a?a:d>b?b:d}b.r=c(0,parseInt(b.r),255);b.g=c(0,parseInt(b.g),255);
b.b=c(0,parseInt(b.b),255);b.a=c(0,b.a,1);return b};b.clone=function(){return c.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};c.color.extract=function(y,a){var d;do{d=y.css(a).toLowerCase();if(""!=d&&"transparent"!=d)break;y=y.parent()}while(!c.nodeName(y.get(0),"body"));"rgba(0, 0, 0, 0)"==d&&(d="transparent");return c.color.parse(d)};c.color.parse=function(y){var a,d=c.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(y))return d(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(y))return d(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(y))return d(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(y))return d(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(y))return d(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(y))return d(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));y=c.trim(y).toLowerCase();if("transparent"==y)return d(255,255,255,0);a=D[y]||[0,0,0];return d(a[0],a[1],a[2])};var D={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(c){function D(a,f){var b=f.children("."+a)[0];if(null==b&&(b=document.createElement("canvas"),b.className=a,c(b).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(f),!b.getContext))if(window.G_vmlCanvasManager)b=window.G_vmlCanvasManager.initElement(b);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
b;b=this.context=b.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);this.resize(f.width(),f.height());this.textContainer=null;this.text={};this._textCache={}}function y(a,f,b,k){function g(h,u){u=[E].concat(u);for(var e=0;e<h.length;++e)h[e].apply(this,u)}function q(h){for(var u=[],e=0;e<h.length;++e){var a=c.extend(!0,{},l.series);null!=h[e].data?
(a.data=h[e].data,delete h[e].data,c.extend(!0,a,h[e]),h[e].data=a.data):a.data=h[e];u.push(a)}F=u;e=F.length;u=-1;for(h=0;h<F.length;++h)a=F[h].color,null!=a&&(e--,"number"==typeof a&&a>u&&(u=a));e<=u&&(e=u+1);var u=[],r=l.colors,d=r.length,b=0;for(h=0;h<e;h++)a=c.color.parse(r[h%d]||"#666"),0==h%d&&h&&(b=0<=b?0.5>b?-b-0.2:0:-b),u[h]=a.scale("rgb",1+b);for(h=e=0;h<F.length;++h){a=F[h];null==a.color?(a.color=u[e].toString(),++e):"number"==typeof a.color&&(a.color=u[a.color].toString());if(null==a.lines.show){var f,
r=!0;for(f in a)if(a[f]&&a[f].show){r=!1;break}r&&(a.lines.show=!0)}null==a.lines.zero&&(a.lines.zero=!!a.lines.fill);a.xaxis=y(N,p(a,"x"));a.yaxis=y(T,p(a,"y"))}C()}function p(h,u){var e=h[u+"axis"];"object"==typeof e&&(e=e.n);"number"!=typeof e&&(e=1);return e}function w(){return c.grep(N.concat(T),function(h){return h})}function G(h){var u={},e,a;for(e=0;e<N.length;++e)(a=N[e])&&a.used&&(u["x"+a.n]=a.c2p(h.left));for(e=0;e<T.length;++e)(a=T[e])&&a.used&&(u["y"+a.n]=a.c2p(h.top));void 0!==u.x1&&
(u.x=u.x1);void 0!==u.y1&&(u.y=u.y1);return u}function y(h,a){h[a-1]||(h[a-1]={n:a,direction:h==N?"x":"y",options:c.extend(!0,{},h==N?l.xaxis:l.yaxis)});return h[a-1]}function C(){function h(h,e,a){e<h.datamin&&e!=-d&&(h.datamin=e);a>h.datamax&&a!=d&&(h.datamax=a)}var a=Number.POSITIVE_INFINITY,e=Number.NEGATIVE_INFINITY,d=Number.MAX_VALUE,r,b,B,f,v,l,I,m,k,n,t,M;c.each(w(),function(h,r){r.datamin=a;r.datamax=e;r.used=!1});for(r=0;r<F.length;++r)v=F[r],v.datapoints={points:[]},g(R.processRawData,
[v,v.data,v.datapoints]);for(r=0;r<F.length;++r){v=F[r];t=v.data;M=v.datapoints.format;if(!M){M=[];M.push({x:!0,number:!0,required:!0});M.push({y:!0,number:!0,required:!0});if(v.bars.show||v.lines.show&&v.lines.fill)M.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(v.bars.show&&v.bars.zero||v.lines.show&&v.lines.zero)}),v.bars.horizontal&&(delete M[M.length-1].y,M[M.length-1].x=!0);v.datapoints.format=M}if(null==v.datapoints.pointsize){v.datapoints.pointsize=M.length;I=v.datapoints.pointsize;
l=v.datapoints.points;var da=v.lines.show&&v.lines.steps;v.xaxis.used=v.yaxis.used=!0;for(b=B=0;b<t.length;++b,B+=I){n=t[b];var ma=null==n;if(!ma)for(f=0;f<I;++f){m=n[f];if(k=M[f])k.number&&null!=m&&(m=+m,isNaN(m)?m=null:Infinity==m?m=d:-Infinity==m&&(m=-d)),null==m&&(k.required&&(ma=!0),null!=k.defaultValue&&(m=k.defaultValue));l[B+f]=m}if(ma)for(f=0;f<I;++f)m=l[B+f],null!=m&&(k=M[f],k.x&&h(v.xaxis,m,m),k.y&&h(v.yaxis,m,m)),l[B+f]=null;else if(da&&0<B&&null!=l[B-I]&&l[B-I]!=l[B]&&l[B-I+1]!=l[B+1]){for(f=
0;f<I;++f)l[B+I+f]=l[B+f];l[B+1]=l[B-I+1];B+=I}}}}for(r=0;r<F.length;++r)v=F[r],g(R.processDatapoints,[v,v.datapoints]);for(r=0;r<F.length;++r){v=F[r];l=v.datapoints.points;I=v.datapoints.pointsize;M=v.datapoints.format;n=B=a;da=t=e;for(b=0;b<l.length;b+=I)if(null!=l[b])for(f=0;f<I;++f)m=l[b+f],(k=M[f])&&(!1!==k.autoscale&&m!=d&&m!=-d)&&(k.x&&(m<B&&(B=m),m>t&&(t=m)),k.y&&(m<n&&(n=m),m>da&&(da=m)));if(v.bars.show){switch(v.bars.align){case "left":b=0;break;case "right":b=-v.bars.barWidth;break;case "center":b=
-v.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+v.bars.align);}v.bars.horizontal?(n+=b,da+=b+v.bars.barWidth):(B+=b,t+=b+v.bars.barWidth)}h(v.xaxis,B,t);h(v.yaxis,n,da)}c.each(w(),function(h,r){r.datamin==a&&(r.datamin=null);r.datamax==e&&(r.datamax=null)})}function J(h){function a(h){return h}var e,c,r=h.options.transform||a,b=h.options.inverseTransform;"x"==h.direction?(e=h.scale=U/Math.abs(r(h.max)-r(h.min)),c=Math.min(r(h.max),r(h.min))):(e=h.scale=S/Math.abs(r(h.max)-r(h.min)),
e=-e,c=Math.max(r(h.max),r(h.min)));h.p2c=r==a?function(h){return(h-c)*e}:function(h){return(r(h)-c)*e};h.c2p=b?function(h){return b(c+h/e)}:function(h){return c+h/e}}function K(h){var a=h.labelWidth,e=h.labelHeight,b=h.options.position,r=h.options.tickLength,d=l.grid.axisMargin,f=l.grid.labelMargin,m="x"==h.direction?N:T,v,oa=c.grep(m,function(h){return h&&h.options.position==b&&h.reserveSpace});c.inArray(h,oa)==oa.length-1&&(d=0);null==r&&(r=c.grep(m,function(h){return h&&h.reserveSpace}),r=(v=
0==c.inArray(h,r))?"full":5);isNaN(+r)||(f+=+r);"x"==h.direction?(e+=f,"bottom"==b?(t.bottom+=e+d,h.box={top:L.height-t.bottom,height:e}):(h.box={top:t.top+d,height:e},t.top+=e+d)):(a+=f,"left"==b?(h.box={left:t.left+d,width:a},t.left+=a+d):(t.right+=a+d,h.box={left:L.width-t.right,width:a}));h.position=b;h.tickLength=r;h.box.padding=f;h.innermost=v}function H(){var h=l.grid.minBorderMargin,a={x:0,y:0},e;if(null==h)for(e=h=0;e<F.length;++e)h=Math.max(h,2*(F[e].points.radius+F[e].points.lineWidth/
2));a.x=a.y=Math.ceil(h);c.each(w(),function(h,e){var c=e.direction;e.reserveSpace&&(a[c]=Math.ceil(Math.max(a[c],("x"==c?e.labelWidth:e.labelHeight)/2)))});t.left=Math.max(a.x,t.left);t.right=Math.max(a.x,t.right);t.top=Math.max(a.y,t.top);t.bottom=Math.max(a.y,t.bottom)}function s(){var h,a=w(),e=l.grid.show;for(h in t){var b=l.grid.margin||0;t[h]="number"==typeof b?b:b[h]||0}g(R.processOffset,[t]);for(h in t)t[h]="object"==typeof l.grid.borderWidth?t[h]+(e?l.grid.borderWidth[h]:0):t[h]+(e?l.grid.borderWidth:
0);c.each(a,function(h,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var e=a.options,u=+(null!=e.min?e.min:a.datamin),b=+(null!=e.max?e.max:a.datamax),c=b-u;if(0==c){if(c=0==b?1:0.01,null==e.min&&(u-=c),null==e.max||null!=e.min)b+=c}else{var d=e.autoscaleMargin;null!=d&&(null==e.min&&(u-=c*d,0>u&&(null!=a.datamin&&0<=a.datamin)&&(u=0)),null==e.max&&(b+=c*d,0<b&&(null!=a.datamax&&0>=a.datamax)&&(b=0)))}a.min=u;a.max=b});if(e){b=c.grep(a,function(h){return h.reserveSpace});
c.each(b,function(h,a){V(a);var e=a.options.ticks,u=[];null==e||"number"==typeof e&&0<e?u=a.tickGenerator(a):e&&(u=c.isFunction(e)?e(a):e);var b;a.ticks=[];for(e=0;e<u.length;++e){var d=null,f=u[e];"object"==typeof f?(b=+f[0],1<f.length&&(d=f[1])):b=+f;null==d&&(d=a.tickFormatter(b,a));isNaN(b)||a.ticks.push({v:b,label:d})}u=a.ticks;a.options.autoscaleMargin&&0<u.length&&(null==a.options.min&&(a.min=Math.min(a.min,u[0].v)),null==a.options.max&&1<u.length&&(a.max=Math.max(a.max,u[u.length-1].v)));
u=a.options;e=a.ticks||[];b=u.labelWidth||0;for(var d=u.labelHeight||0,f="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+(a.direction+"Axis "+a.direction+a.n+"Axis"),l=u.font||"flot-tick-label tickLabel",m=0;m<e.length;++m){var x=e[m];x.label&&(x=L.getTextInfo(f,x.label,l),null==u.labelWidth&&(b=Math.max(b,x.width)),null==u.labelHeight&&(d=Math.max(d,x.height)))}a.labelWidth=Math.ceil(b);a.labelHeight=Math.ceil(d)});for(h=b.length-1;0<=h;--h)K(b[h]);H();c.each(b,function(h,a){"x"==a.direction?
(a.box.left=t.left-a.labelWidth/2,a.box.width=L.width-t.left-t.right+a.labelWidth):(a.box.top=t.top-a.labelHeight/2,a.box.height=L.height-t.bottom-t.top+a.labelHeight)})}U=L.width-t.left-t.right;S=L.height-t.bottom-t.top;c.each(a,function(h,a){J(a)});e&&sa();A()}function V(h){var a=h.options,e;e="number"==typeof a.ticks&&0<a.ticks?a.ticks:0.3*Math.sqrt("x"==h.direction?L.width:L.height);e=(h.max-h.min)/e;var b=-Math.floor(Math.log(e)/Math.LN10),d=a.tickDecimals;null!=d&&b>d&&(b=d);var f=Math.pow(10,
-b),l=e/f,m;1.5>l?m=1:3>l?(m=2,2.25<l&&(null==d||b+1<=d)&&(m=2.5,++b)):m=7.5>l?5:10;m*=f;null!=a.minTickSize&&m<a.minTickSize&&(m=a.minTickSize);h.delta=e;h.tickDecimals=Math.max(0,null!=d?d:b);h.tickSize=a.tickSize||m;if("time"==a.mode&&!h.tickGenerator)throw Error("Time mode requires the flot.time plugin.");h.tickGenerator||(h.tickGenerator=function(h){var a=[],e=h.tickSize*Math.floor(h.min/h.tickSize),b=0,u=Number.NaN,c;do c=u,u=e+b*h.tickSize,a.push(u),++b;while(u<h.max&&u!=c);return a},h.tickFormatter=
function(h,a){var e=a.tickDecimals?Math.pow(10,a.tickDecimals):1,b=""+Math.round(h*e)/e;if(null!=a.tickDecimals){var u=b.indexOf("."),u=-1==u?0:b.length-u-1;if(u<a.tickDecimals)return(u?b:b+".")+(""+e).substr(1,a.tickDecimals-u)}return b});c.isFunction(a.tickFormatter)&&(h.tickFormatter=function(h,e){return""+a.tickFormatter(h,e)});if(null!=a.alignTicksWithAxis){var v=("x"==h.direction?N:T)[a.alignTicksWithAxis-1];v&&(v.used&&v!=h)&&(e=h.tickGenerator(h),0<e.length&&(null==a.min&&(h.min=Math.min(h.min,
e[0])),null==a.max&&1<e.length&&(h.max=Math.max(h.max,e[e.length-1]))),h.tickGenerator=function(h){var a=[],e,b;for(b=0;b<v.ticks.length;++b)e=(v.ticks[b].v-v.min)/(v.max-v.min),e=h.min+e*(h.max-h.min),a.push(e);return a},h.mode||null!=a.tickDecimals||(e=Math.max(0,-Math.floor(Math.log(h.delta)/Math.LN10)+1),b=h.tickGenerator(h),1<b.length&&/\..*0$/.test((b[1]-b[0]).toFixed(e))||(h.tickDecimals=e)))}}function n(){L.clear();g(R.drawBackground,[m]);var h=l.grid;h.show&&h.backgroundColor&&(m.save(),
m.translate(t.left,t.top),m.fillStyle=pa(l.grid.backgroundColor,S,0,"rgba(255, 255, 255, 0)"),m.fillRect(0,0,U,S),m.restore());h.show&&!h.aboveData&&aa();for(var a=0;a<F.length;++a){g(R.drawSeries,[m,F[a]]);var e=F[a];e.lines.show&&O(e);e.bars.show&&ca(e);e.points.show&&W(e)}g(R.draw,[m]);h.show&&h.aboveData&&aa();L.render()}function z(h,a){for(var e,b,c,d,f=w(),l=0;l<f.length;++l)if(e=f[l],e.direction==a&&(d=a+e.n+"axis",h[d]||1!=e.n||(d=a+"axis"),h[d])){b=h[d].from;c=h[d].to;break}h[d]||(e="x"==
a?N[0]:T[0],b=h[a+"1"],c=h[a+"2"]);null!=b&&(null!=c&&b>c)&&(d=b,b=c,c=d);return{from:b,to:c,axis:e}}function aa(){var h,a,e;m.save();m.translate(t.left,t.top);if(e=l.grid.markings)for(c.isFunction(e)&&(a=E.getAxes(),a.xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,e=e(a)),h=0;h<e.length;++h){a=e[h];var b=z(a,"x"),d=z(a,"y");null==b.from&&(b.from=b.axis.min);null==b.to&&(b.to=b.axis.max);null==d.from&&(d.from=d.axis.min);null==d.to&&(d.to=d.axis.max);b.to<b.axis.min||(b.from>
b.axis.max||d.to<d.axis.min||d.from>d.axis.max)||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),b.from==b.to&&d.from==d.to)||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),b.from==b.to||d.from==d.to?(m.beginPath(),m.strokeStyle=a.color||l.grid.markingsColor,m.lineWidth=a.lineWidth||l.grid.markingsLineWidth,m.moveTo(b.from,d.from),m.lineTo(b.to,d.to),m.stroke()):(m.fillStyle=
a.color||l.grid.markingsColor,m.fillRect(b.from,d.to,b.to-b.from,d.from-d.to)))}a=w();e=l.grid.borderWidth;for(b=0;b<a.length;++b){d=a[b];h=d.box;var f=d.tickLength,B,g,v,k;if(d.show&&0!=d.ticks.length){m.lineWidth=1;"x"==d.direction?(B=0,g="full"==f?"top"==d.position?0:S:h.top-t.top+("top"==d.position?h.height:0)):(g=0,B="full"==f?"left"==d.position?0:U:h.left-t.left+("left"==d.position?h.width:0));d.innermost||(m.strokeStyle=d.options.color,m.beginPath(),v=k=0,"x"==d.direction?v=U+1:k=S+1,1==m.lineWidth&&
("x"==d.direction?g=Math.floor(g)+0.5:B=Math.floor(B)+0.5),m.moveTo(B,g),m.lineTo(B+v,g+k),m.stroke());m.strokeStyle=d.options.tickColor;m.beginPath();for(h=0;h<d.ticks.length;++h){var I=d.ticks[h].v;v=k=0;isNaN(I)||(I<d.min||I>d.max||"full"==f&&("object"==typeof e&&0<e[d.position]||0<e)&&(I==d.min||I==d.max))||("x"==d.direction?(B=d.p2c(I),k="full"==f?-S:f,"top"==d.position&&(k=-k)):(g=d.p2c(I),v="full"==f?-U:f,"left"==d.position&&(v=-v)),1==m.lineWidth&&("x"==d.direction?B=Math.floor(B)+0.5:g=Math.floor(g)+
0.5),m.moveTo(B,g),m.lineTo(B+v,g+k))}m.stroke()}}e&&(h=l.grid.borderColor,"object"==typeof e||"object"==typeof h?("object"!==typeof e&&(e={top:e,right:e,bottom:e,left:e}),"object"!==typeof h&&(h={top:h,right:h,bottom:h,left:h}),0<e.top&&(m.strokeStyle=h.top,m.lineWidth=e.top,m.beginPath(),m.moveTo(0-e.left,0-e.top/2),m.lineTo(U,0-e.top/2),m.stroke()),0<e.right&&(m.strokeStyle=h.right,m.lineWidth=e.right,m.beginPath(),m.moveTo(U+e.right/2,0-e.top),m.lineTo(U+e.right/2,S),m.stroke()),0<e.bottom&&(m.strokeStyle=
h.bottom,m.lineWidth=e.bottom,m.beginPath(),m.moveTo(U+e.right,S+e.bottom/2),m.lineTo(0,S+e.bottom/2),m.stroke()),0<e.left&&(m.strokeStyle=h.left,m.lineWidth=e.left,m.beginPath(),m.moveTo(0-e.left/2,S+e.bottom),m.lineTo(0-e.left/2,0),m.stroke())):(m.lineWidth=e,m.strokeStyle=l.grid.borderColor,m.strokeRect(-e/2,-e/2,U+e,S+e)));m.restore()}function sa(){c.each(w(),function(a,b){if(b.show&&0!=b.ticks.length){var e=b.box,d="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+(b.direction+"Axis "+
b.direction+b.n+"Axis"),c=b.options.font||"flot-tick-label tickLabel",f,l,m,v,g;L.removeText(d);for(var k=0;k<b.ticks.length;++k)f=b.ticks[k],!f.label||(f.v<b.min||f.v>b.max)||("x"==b.direction?(v="center",l=t.left+b.p2c(f.v),"bottom"==b.position?m=e.top+e.padding:(m=e.top+e.height-e.padding,g="bottom")):(g="middle",m=t.top+b.p2c(f.v),"left"==b.position?(l=e.left+e.width-e.padding,v="right"):l=e.left+e.padding),L.addText(d,l,m,f.label,c,null,v,g))}})}function O(a){function b(a,h,e,d,c){var f=a.points;
a=a.pointsize;var u=null,l=null;m.beginPath();for(var g=a;g<f.length;g+=a){var r=f[g-a],k=f[g-a+1],n=f[g],x=f[g+1];if(null!=r&&null!=n){if(k<=x&&k<c.min){if(x<c.min)continue;r=(c.min-k)/(x-k)*(n-r)+r;k=c.min}else if(x<=k&&x<c.min){if(k<c.min)continue;n=(c.min-k)/(x-k)*(n-r)+r;x=c.min}if(k>=x&&k>c.max){if(x>c.max)continue;r=(c.max-k)/(x-k)*(n-r)+r;k=c.max}else if(x>=k&&x>c.max){if(k>c.max)continue;n=(c.max-k)/(x-k)*(n-r)+r;x=c.max}if(r<=n&&r<d.min){if(n<d.min)continue;k=(d.min-r)/(n-r)*(x-k)+k;r=d.min}else if(n<=
r&&n<d.min){if(r<d.min)continue;x=(d.min-r)/(n-r)*(x-k)+k;n=d.min}if(r>=n&&r>d.max){if(n>d.max)continue;k=(d.max-r)/(n-r)*(x-k)+k;r=d.max}else if(n>=r&&n>d.max){if(r>d.max)continue;x=(d.max-r)/(n-r)*(x-k)+k;n=d.max}r==u&&k==l||m.moveTo(d.p2c(r)+h,c.p2c(k)+e);u=n;l=x;m.lineTo(d.p2c(n)+h,c.p2c(x)+e)}}m.stroke()}function e(a,h,e){var b=a.points;a=a.pointsize;for(var d=Math.min(Math.max(0,e.min),e.max),c=0,f=!1,u=1,l=0,r=0;!(0<a&&c>b.length+a);){var c=c+a,k=b[c-a],g=b[c-a+u],n=b[c],x=b[c+u];if(f){if(0<
a&&null!=k&&null==n){r=c;a=-a;u=2;continue}if(0>a&&c==l+a){m.fill();f=!1;a=-a;u=1;c=l=r+a;continue}}if(null!=k&&null!=n){if(k<=n&&k<h.min){if(n<h.min)continue;g=(h.min-k)/(n-k)*(x-g)+g;k=h.min}else if(n<=k&&n<h.min){if(k<h.min)continue;x=(h.min-k)/(n-k)*(x-g)+g;n=h.min}if(k>=n&&k>h.max){if(n>h.max)continue;g=(h.max-k)/(n-k)*(x-g)+g;k=h.max}else if(n>=k&&n>h.max){if(k>h.max)continue;x=(h.max-k)/(n-k)*(x-g)+g;n=h.max}f||(m.beginPath(),m.moveTo(h.p2c(k),e.p2c(d)),f=!0);if(g>=e.max&&x>=e.max)m.lineTo(h.p2c(k),
e.p2c(e.max)),m.lineTo(h.p2c(n),e.p2c(e.max));else if(g<=e.min&&x<=e.min)m.lineTo(h.p2c(k),e.p2c(e.min)),m.lineTo(h.p2c(n),e.p2c(e.min));else{var t=k,q=n;g<=x&&g<e.min&&x>=e.min?(k=(e.min-g)/(x-g)*(n-k)+k,g=e.min):x<=g&&(x<e.min&&g>=e.min)&&(n=(e.min-g)/(x-g)*(n-k)+k,x=e.min);g>=x&&g>e.max&&x<=e.max?(k=(e.max-g)/(x-g)*(n-k)+k,g=e.max):x>=g&&(x>e.max&&g<=e.max)&&(n=(e.max-g)/(x-g)*(n-k)+k,x=e.max);k!=t&&m.lineTo(h.p2c(t),e.p2c(g));m.lineTo(h.p2c(k),e.p2c(g));m.lineTo(h.p2c(n),e.p2c(x));n!=q&&(m.lineTo(h.p2c(n),
e.p2c(x)),m.lineTo(h.p2c(q),e.p2c(x)))}}}}m.save();m.translate(t.left,t.top);m.lineJoin="round";var d=a.lines.lineWidth,c=a.shadowSize;if(0<d&&0<c){m.lineWidth=c;m.strokeStyle="rgba(0,0,0,0.1)";var f=Math.PI/18;b(a.datapoints,Math.sin(f)*(d/2+c/2),Math.cos(f)*(d/2+c/2),a.xaxis,a.yaxis);m.lineWidth=c/2;b(a.datapoints,Math.sin(f)*(d/2+c/4),Math.cos(f)*(d/2+c/4),a.xaxis,a.yaxis)}m.lineWidth=d;m.strokeStyle=a.color;if(c=P(a.lines,a.color,0,S))m.fillStyle=c,e(a.datapoints,a.xaxis,a.yaxis);0<d&&b(a.datapoints,
0,0,a.xaxis,a.yaxis);m.restore()}function W(a){function b(a,h,e,d,c,f,u,l){var k=a.points;a=a.pointsize;for(var g=0;g<k.length;g+=a){var r=k[g],n=k[g+1];null==r||(r<f.min||r>f.max||n<u.min||n>u.max)||(m.beginPath(),r=f.p2c(r),n=u.p2c(n)+d,"circle"==l?m.arc(r,n,h,0,c?Math.PI:2*Math.PI,!1):l(m,r,n,h,c),m.closePath(),e&&(m.fillStyle=e,m.fill()),m.stroke())}}m.save();m.translate(t.left,t.top);var e=a.points.lineWidth,d=a.shadowSize,c=a.points.radius,f=a.points.symbol;0==e&&(e=1E-4);0<e&&0<d&&(d/=2,m.lineWidth=
d,m.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,c,null,d+d/2,!0,a.xaxis,a.yaxis,f),m.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,c,null,d/2,!0,a.xaxis,a.yaxis,f));m.lineWidth=e;m.strokeStyle=a.color;b(a.datapoints,c,P(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);m.restore()}function Z(a,b,e,d,c,f,l,k,g,m,n,t){var q,z,p,s;n?(s=z=p=!0,q=!1,n=e,e=b+d,c=b+c,a<n&&(b=a,a=n,n=b,q=!0,z=!1)):(q=z=p=!0,s=!1,n=a+d,a+=c,c=e,e=b,e<c&&(b=e,e=c,c=b,s=!0,p=!1));a<k.min||(n>k.max||e<g.min||c>g.max)||(n<k.min&&(n=k.min,
q=!1),a>k.max&&(a=k.max,z=!1),c<g.min&&(c=g.min,s=!1),e>g.max&&(e=g.max,p=!1),n=k.p2c(n),c=g.p2c(c),a=k.p2c(a),e=g.p2c(e),l&&(m.beginPath(),m.moveTo(n,c),m.lineTo(n,e),m.lineTo(a,e),m.lineTo(a,c),m.fillStyle=l(c,e),m.fill()),0<t&&(q||z||p||s)&&(m.beginPath(),m.moveTo(n,c+f),q?m.lineTo(n,e+f):m.moveTo(n,e+f),p?m.lineTo(a,e+f):m.moveTo(a,e+f),z?m.lineTo(a,c+f):m.moveTo(a,c+f),s?m.lineTo(n,c+f):m.moveTo(n,c+f),m.stroke()))}function ca(a){m.save();m.translate(t.left,t.top);m.lineWidth=a.bars.lineWidth;
m.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;case "center":b=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(e,b,d,c,f,u,k){var g=e.points;e=e.pointsize;for(var l=0;l<g.length;l+=e)null!=g[l]&&Z(g[l],g[l+1],g[l+2],b,d,c,f,u,k,m,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?function(e,b){return P(a.bars,a.color,e,b)}:null,a.xaxis,a.yaxis);m.restore()}
function P(a,b,e,d){var f=a.fill;if(!f)return null;if(a.fillColor)return pa(a.fillColor,e,d,b);a=c.color.parse(b);a.a="number"==typeof f?f:0.4;a.normalize();return a.toString()}function A(){a.find(".legend").remove();if(l.legend.show){for(var b=[],f=[],e=!1,k=l.legend.labelFormatter,g,m,n=0;n<F.length;++n)g=F[n],g.label&&(m=k?k(g.label,g):g.label)&&f.push({label:m,color:g.color});if(l.legend.sorted)if(c.isFunction(l.legend.sorted))f.sort(l.legend.sorted);else if("reverse"==l.legend.sorted)f.reverse();
else{var q="descending"!=l.legend.sorted;f.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=q?1:-1})}for(n=0;n<f.length;++n)k=f[n],0==n%l.legend.noColumns&&(e&&b.push("</tr>"),b.push("<tr>"),e=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+k.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+k.label+"</td>");e&&b.push("</tr>");0!=b.length&&(f='<table style="font-size:smaller;color:'+
l.grid.color+'">'+b.join("")+"</table>",null!=l.legend.container?c(l.legend.container).html(f):(b="",e=l.legend.position,n=l.legend.margin,null==n[0]&&(n=[n,n]),"n"==e.charAt(0)?b+="top:"+(n[1]+t.top)+"px;":"s"==e.charAt(0)&&(b+="bottom:"+(n[1]+t.bottom)+"px;"),"e"==e.charAt(1)?b+="right:"+(n[0]+t.right)+"px;":"w"==e.charAt(1)&&(b+="left:"+(n[0]+t.left)+"px;"),f=c('<div class="legend">'+f.replace('style="','style="position:absolute;'+b+";")+"</div>").appendTo(a),0!=l.legend.backgroundOpacity&&(e=
l.legend.backgroundColor,null==e&&(e=(e=l.grid.backgroundColor)&&"string"==typeof e?c.color.parse(e):c.color.extract(f,"background-color"),e.a=1,e=e.toString()),n=f.children(),c('<div style="position:absolute;width:'+n.width()+"px;height:"+n.height()+"px;"+b+"background-color:"+e+';"> </div>').prependTo(f).css("opacity",l.legend.backgroundOpacity))))}}function qa(a){l.grid.hoverable&&X("plothover",a,function(a){return!1!=a.hoverable})}function ra(a){l.grid.hoverable&&X("plothover",a,function(a){return!1})}
function ea(a){X("plotclick",a,function(a){return!1!=a.clickable})}function X(b,c,e){var f=Y.offset(),k=c.pageX-f.left-t.left,g=c.pageY-f.top-t.top,n=G({left:k,top:g});n.pageX=c.pageX;n.pageY=c.pageY;c=l.grid.mouseActiveRadius;var m=c*c+1,q=null,z,p,s;for(z=F.length-1;0<=z;--z)if(e(F[z])){var w=F[z],A=w.xaxis,W=w.yaxis,Z=w.datapoints.points,aa=A.c2p(k),ca=W.c2p(g),y=c/A.scale,E=c/W.scale;s=w.datapoints.pointsize;A.options.inverseTransform&&(y=Number.MAX_VALUE);W.options.inverseTransform&&(E=Number.MAX_VALUE);
if(w.lines.show||w.points.show)for(p=0;p<Z.length;p+=s){var O=Z[p],C=Z[p+1];null==O||(O-aa>y||O-aa<-y||C-ca>E||C-ca<-E)||(O=Math.abs(A.p2c(O)-k),C=Math.abs(W.p2c(C)-g),C=O*O+C*C,C<m&&(m=C,q=[z,p/s]))}if(w.bars.show&&!q)for(A="left"==w.bars.align?0:-w.bars.barWidth/2,w=A+w.bars.barWidth,p=0;p<Z.length;p+=s)O=Z[p],C=Z[p+1],W=Z[p+2],null!=O&&(F[z].bars.horizontal?aa<=Math.max(W,O)&&aa>=Math.min(W,O)&&ca>=C+A&&ca<=C+w:aa>=O+A&&aa<=O+w&&ca>=Math.min(W,C)&&ca<=Math.max(W,C))&&(q=[z,p/s])}q?(z=q[0],p=q[1],
s=F[z].datapoints.pointsize,e={datapoint:F[z].datapoints.points.slice(p*s,(p+1)*s),dataIndex:p,series:F[z],seriesIndex:z}):e=null;e&&(e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+f.left+t.left,10),e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+f.top+t.top,10));if(l.grid.autoHighlight){for(f=0;f<$.length;++f)k=$[f],k.auto!=b||e&&k.series==e.series&&k.point[0]==e.datapoint[0]&&k.point[1]==e.datapoint[1]||ia(k.series,k.point);e&&ja(e.series,e.datapoint,b)}a.trigger(b,[n,e])}function fa(){var a=
l.interaction.redrawOverlayInterval;-1==a?ka():ha||(ha=setTimeout(ka,a))}function ka(){ha=null;Q.save();ga.clear();Q.translate(t.left,t.top);var a,b;for(a=0;a<$.length;++a)if(b=$[a],b.series.bars.show)na(b.series,b.point);else{var e=b.series,d=b.point;b=d[0];var d=d[1],f=e.xaxis,k=e.yaxis,n="string"===typeof e.highlightColor?e.highlightColor:c.color.parse(e.color).scale("a",0.5).toString();if(!(b<f.min||b>f.max||d<k.min||d>k.max)){var l=e.points.radius+e.points.lineWidth/2;Q.lineWidth=l;Q.strokeStyle=
n;n=1.5*l;b=f.p2c(b);d=k.p2c(d);Q.beginPath();"circle"==e.points.symbol?Q.arc(b,d,n,0,2*Math.PI,!1):e.points.symbol(Q,b,d,n,!1);Q.closePath();Q.stroke()}}Q.restore();g(R.drawOverlay,[Q])}function ja(a,b,e){"number"==typeof a&&(a=F[a]);if("number"==typeof b){var d=a.datapoints.pointsize;b=a.datapoints.points.slice(d*b,d*(b+1))}d=la(a,b);-1==d?($.push({series:a,point:b,auto:e}),fa()):e||($[d].auto=!1)}function ia(a,b){if(null==a&&null==b)$=[],fa();else{"number"==typeof a&&(a=F[a]);if("number"==typeof b){var e=
a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=la(a,b);-1!=e&&($.splice(e,1),fa())}}function la(a,b){for(var e=0;e<$.length;++e){var d=$[e];if(d.series==a&&d.point[0]==b[0]&&d.point[1]==b[1])return e}return-1}function na(a,b){var e="string"===typeof a.highlightColor?a.highlightColor:c.color.parse(a.color).scale("a",0.5).toString(),d="left"==a.bars.align?0:-a.bars.barWidth/2;Q.lineWidth=a.bars.lineWidth;Q.strokeStyle=e;Z(b[0],b[1],b[2]||0,d,d+a.bars.barWidth,0,function(){return e},
a.xaxis,a.yaxis,Q,a.bars.horizontal,a.bars.lineWidth)}function pa(a,b,e,d){if("string"==typeof a)return a;b=m.createLinearGradient(0,e,0,b);e=0;for(var f=a.colors.length;e<f;++e){var k=a.colors[e];if("string"!=typeof k){var g=c.color.parse(d);null!=k.brightness&&(g=g.scale("rgb",k.brightness));null!=k.opacity&&(g.a*=k.opacity);k=g.toString()}b.addColorStop(e/(f-1),k)}return b}var F=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",
container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,
radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,
mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},L=null,ga=null,Y=null,m=null,Q=null,N=[],T=[],t={left:0,right:0,top:0,bottom:0},U=0,S=0,R={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},E=this;E.setData=q;E.setupGrid=s;E.draw=n;E.getPlaceholder=function(){return a};E.getCanvas=function(){return L.element};E.getPlotOffset=function(){return t};E.width=function(){return U};
E.height=function(){return S};E.offset=function(){var a=Y.offset();a.left+=t.left;a.top+=t.top;return a};E.getData=function(){return F};E.getAxes=function(){var a={};c.each(N.concat(T),function(b,e){e&&(a[e.direction+(1!=e.n?e.n:"")+"axis"]=e)});return a};E.getXAxes=function(){return N};E.getYAxes=function(){return T};E.c2p=G;E.p2c=function(a){var b={},e,d,c;for(e=0;e<N.length;++e)if((d=N[e])&&d.used&&(c="x"+d.n,null==a[c]&&1==d.n&&(c="x"),null!=a[c])){b.left=d.p2c(a[c]);break}for(e=0;e<T.length;++e)if((d=
T[e])&&d.used&&(c="y"+d.n,null==a[c]&&1==d.n&&(c="y"),null!=a[c])){b.top=d.p2c(a[c]);break}return b};E.getOptions=function(){return l};E.highlight=ja;E.unhighlight=ia;E.triggerRedrawOverlay=fa;E.pointOffset=function(a){return{left:parseInt(N[p(a,"x")-1].p2c(+a.x)+t.left,10),top:parseInt(T[p(a,"y")-1].p2c(+a.y)+t.top,10)}};E.shutdown=function(){ha&&clearTimeout(ha);Y.unbind("mousemove",qa);Y.unbind("mouseleave",ra);Y.unbind("click",ea);g(R.shutdown,[Y])};E.resize=function(){var b=a.width(),c=a.height();
L.resize(b,c);ga.resize(b,c)};E.hooks=R;(function(){for(var a={Canvas:D},b=0;b<k.length;++b){var d=k[b];d.init(E,a);d.options&&c.extend(!0,l,d.options)}})(E);(function(b){c.extend(!0,l,b);null==l.xaxis.color&&(l.xaxis.color=c.color.parse(l.grid.color).scale("a",0.22).toString());null==l.yaxis.color&&(l.yaxis.color=c.color.parse(l.grid.color).scale("a",0.22).toString());null==l.xaxis.tickColor&&(l.xaxis.tickColor=l.grid.tickColor||l.xaxis.color);null==l.yaxis.tickColor&&(l.yaxis.tickColor=l.grid.tickColor||
l.yaxis.color);null==l.grid.borderColor&&(l.grid.borderColor=l.grid.color);null==l.grid.tickColor&&(l.grid.tickColor=c.color.parse(l.grid.color).scale("a",0.22).toString());var f,e,k={style:a.css("font-style"),size:Math.round(0.8*(+a.css("font-size").replace("px","")||13)),variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};k.lineHeight=1.15*k.size;e=l.xaxes.length||1;for(b=0;b<e;++b)(f=l.xaxes[b])&&!f.tickColor&&(f.tickColor=f.color),f=c.extend(!0,{},l.xaxis,f),
l.xaxes[b]=f,f.font&&(f.font=c.extend({},k,f.font),f.font.color||(f.font.color=f.color));e=l.yaxes.length||1;for(b=0;b<e;++b)(f=l.yaxes[b])&&!f.tickColor&&(f.tickColor=f.color),f=c.extend(!0,{},l.yaxis,f),l.yaxes[b]=f,f.font&&(f.font=c.extend({},k,f.font),f.font.color||(f.font.color=f.color));l.xaxis.noTicks&&null==l.xaxis.ticks&&(l.xaxis.ticks=l.xaxis.noTicks);l.yaxis.noTicks&&null==l.yaxis.ticks&&(l.yaxis.ticks=l.yaxis.noTicks);l.x2axis&&(l.xaxes[1]=c.extend(!0,{},l.xaxis,l.x2axis),l.xaxes[1].position=
"top");l.y2axis&&(l.yaxes[1]=c.extend(!0,{},l.yaxis,l.y2axis),l.yaxes[1].position="right");l.grid.coloredAreas&&(l.grid.markings=l.grid.coloredAreas);l.grid.coloredAreasColor&&(l.grid.markingsColor=l.grid.coloredAreasColor);l.lines&&c.extend(!0,l.series.lines,l.lines);l.points&&c.extend(!0,l.series.points,l.points);l.bars&&c.extend(!0,l.series.bars,l.bars);null!=l.shadowSize&&(l.series.shadowSize=l.shadowSize);null!=l.highlightColor&&(l.series.highlightColor=l.highlightColor);for(b=0;b<l.xaxes.length;++b)y(N,
b+1).options=l.xaxes[b];for(b=0;b<l.yaxes.length;++b)y(T,b+1).options=l.yaxes[b];for(var n in R)l.hooks[n]&&l.hooks[n].length&&(R[n]=R[n].concat(l.hooks[n]));g(R.processOptions,[l])})(b);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();"static"==a.css("position")&&a.css("position","relative");L=new D("flot-base",a);ga=new D("flot-overlay",a);m=L.context;Q=ga.context;Y=c(ga.element).unbind();var b=a.data("plot");b&&(b.shutdown(),ga.clear());a.data("plot",E)})();q(f);
s();n();l.grid.hoverable&&(Y.mousemove(qa),Y.bind("mouseleave",ra));l.grid.clickable&&Y.click(ea);g(R.bindEvents,[Y]);var $=[],ha=null}var a=Object.prototype.hasOwnProperty;D.prototype.resize=function(a,c){if(0>=a||0>=c)throw Error("Invalid dimensions for plot, width = "+a+", height = "+c);var b=this.element,k=this.context,g=this.pixelRatio;this.width!=a&&(b.width=a*g,b.style.width=a+"px",this.width=a);this.height!=c&&(b.height=c*g,b.style.height=c+"px",this.height=c);k.restore();k.save();k.scale(g,
g)};D.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};D.prototype.render=function(){var d=this._textCache,c;for(c in d)if(a.call(d,c)){var b=this.getTextLayer(c),k=d[c];b.hide();for(var g in k)if(a.call(k,g)){var q=k[g],p;for(p in q)if(a.call(q,p)){var w=q[p];w.active?w.rendered||(b.append(w.element),w.rendered=!0):(delete q[p],w.rendered&&w.element.detach())}}b.show()}};D.prototype.getTextLayer=function(a){var f=this.text[a];null==f&&(null==this.textContainer&&(this.textContainer=
c("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),f=this.text[a]=c("<div></div>").addClass(a).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return f};D.prototype.getTextInfo=function(a,f,b,k){var g,q;f=""+f;k="object"===typeof b?b.style+" "+b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;g=this._textCache[a];null==g&&(g=this._textCache[a]=
{});q=g[k];null==q&&(q=g[k]={});g=q[f];null==g&&(a=c("<div></div>").html(f).css({position:"absolute",top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof b?a.css({font:k,color:b.color}):"string"===typeof b&&a.addClass(b),g=q[f]={active:!1,rendered:!1,element:a,width:a.outerWidth(!0),height:a.outerHeight(!0)},a.detach());return g};D.prototype.addText=function(a,c,b,k,g,q,p,w){a=this.getTextInfo(a,k,g,q);a.active=!0;"center"==p?c-=a.width/2:"right"==p&&(c-=a.width);"middle"==w?b-=a.height/2:
"bottom"==w&&(b-=a.height);a.element.css({top:Math.round(b),left:Math.round(c)})};D.prototype.removeText=function(c,f,b,k){if(null==f){if(c=this._textCache[c],null!=c)for(var g in c)if(a.call(c,g)){f=c[g];for(var q in f)a.call(f,q)&&(f[q].active=!1)}}else this.getTextInfo(c,f,b,k).active=!1};c.plot=function(a,f,b){return new y(c(a),f,b,c.plot.plugins)};c.plot.version="0.8.0";c.plot.plugins=[];c.fn.plot=function(a,f){return this.each(function(){c.plot(this,a,f)})}})(jQuery);
(function(c){var D=10,y=0.95,a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,c){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+c.color+";'>"+a+"<br/>"+Math.round(c.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};c.plot.plugins.push({init:function(d){function f(b){for(var d=
0,f=0,k=0,g=a.series.pie.combine.color,q=[],p=0;p<b.length;++p){var s=b[p].data;c.isArray(s)?c.isNumeric(s[1])?s[1]=+s[1]:s[1]=0:s=c.isNumeric(s)?[1,+s]:[1,0];b[p].data=[s]}for(p=0;p<b.length;++p)d+=b[p].data[0][1];for(p=0;p<b.length;++p)s=b[p].data[0][1],s/d<=a.series.pie.combine.threshold&&(f+=s,k++,g||(g=b[p].color));for(p=0;p<b.length;++p)s=b[p].data[0][1],(2>k||s/d>a.series.pie.combine.threshold)&&q.push({data:[[1,s]],color:b[p].color,label:b[p].label,angle:2*s*Math.PI/d,percent:s/(d/100)});
1<k&&q.push({data:[[1,f]],color:g,label:a.series.pie.combine.label,angle:2*f*Math.PI/d,percent:f/(d/100)});return q}function b(b,d){function f(){s.clearRect(0,0,q,w);ba.children().filter(".pieLabel, .pieLabelBackground").remove()}function g(){var b=a.series.pie.shadow.left,c=a.series.pie.shadow.top,d=a.series.pie.shadow.alpha,f=1<a.series.pie.radius?a.series.pie.radius:C*a.series.pie.radius;if(!(f>=q/2-b||f*a.series.pie.tilt>=w/2-c||10>=f)){s.save();s.translate(b,c);s.globalAlpha=d;s.fillStyle="#000";
s.translate(J,K);s.scale(1,a.series.pie.tilt);for(b=1;10>=b;b++)s.beginPath(),s.arc(0,0,f,0,2*Math.PI,!1),s.fill(),f-=b;s.restore()}}function p(){function b(a,c,d){0>=a||isNaN(a)||(d?s.fillStyle=c:(s.strokeStyle=c,s.lineJoin="round"),s.beginPath(),1E-9<Math.abs(a-2*Math.PI)&&s.moveTo(0,0),s.arc(0,0,g,n,n+a/2,!1),s.arc(0,0,g,n+a/2,n+a,!1),s.closePath(),n+=a,d?s.fill():s.stroke())}function d(){for(var b=f,k=1<a.series.pie.label.radius?a.series.pie.label.radius:C*a.series.pie.label.radius,g=0;g<P.length;++g){if(P[g].percent>=
100*a.series.pie.label.threshold){var n;n=P[g];var p=b,s=g;if(0==n.data[0][1])n=!0;else{var z=a.legend.labelFormatter,l=void 0,A=a.series.pie.label.formatter,l=z?z(n.label,n):n.label;A&&(l=A(l,n));z=(p+n.angle+p)/2;p=J+Math.round(Math.cos(z)*k);z=K+Math.round(Math.sin(z)*k)*a.series.pie.tilt;ba.append("<span class='pieLabel' id='pieLabel"+s+"' style='position:absolute;top:"+z+"px;left:"+p+"px;'>"+l+"</span>");s=ba.children("#pieLabel"+s);l=z-s.height()/2;z=p-s.width()/2;s.css("top",l);s.css("left",
z);0<0-l||0<0-z||0>w-(l+s.height())||0>q-(z+s.width())?n=!1:(0!=a.series.pie.label.background.opacity&&(p=a.series.pie.label.background.color,null==p&&(p=n.color),n="top:"+l+"px;left:"+z+"px;",c("<div class='pieLabelBackground' style='position:absolute;width:"+s.width()+"px;height:"+s.height()+"px;"+n+"background-color:"+p+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(s)),n=!0)}if(!n)return!1}b+=P[g].angle}return!0}var f=Math.PI*a.series.pie.startAngle,g=1<a.series.pie.radius?
a.series.pie.radius:C*a.series.pie.radius;s.save();s.translate(J,K);s.scale(1,a.series.pie.tilt);s.save();for(var n=f,z=0;z<P.length;++z)P[z].startAngle=n,b(P[z].angle,P[z].color,!0);s.restore();if(0<a.series.pie.stroke.width){s.save();s.lineWidth=a.series.pie.stroke.width;n=f;for(z=0;z<P.length;++z)b(P[z].angle,a.series.pie.stroke.color,!1);s.restore()}k(s);s.restore();return a.series.pie.label.show?d():!0}if(ba){var q=b.getPlaceholder().width(),w=b.getPlaceholder().height(),G=ba.children().filter(".legend").children().width()||
0;s=d;H=!1;C=Math.min(q,w/a.series.pie.tilt)/2;K=w/2+a.series.pie.offset.top;J=q/2;J="auto"==a.series.pie.offset.left?a.legend.position.match("w")?J+G/2:J-G/2:J+a.series.pie.offset.left;J<C?J=C:J>q-C&&(J=q-C);var P=b.getData(),G=0;do 0<G&&(C*=y),G+=1,f(),0.8>=a.series.pie.tilt&&g();while(!p()&&G<D);G>=D&&(f(),ba.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));b.setSeries&&b.insertLegend&&(b.setSeries(P),b.insertLegend())}}function k(b){if(0<a.series.pie.innerRadius){b.save();
var c=1<a.series.pie.innerRadius?a.series.pie.innerRadius:C*a.series.pie.innerRadius;b.globalCompositeOperation="destination-out";b.beginPath();b.fillStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.fill();b.closePath();b.restore();b.save();b.beginPath();b.strokeStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.stroke();b.closePath();b.restore()}}function g(a){p("plothover",a)}function q(a){p("plotclick",a)}function p(b,c){var f=d.offset(),k=parseInt(c.pageX-f.left);a:{for(var f=
parseInt(c.pageY-f.top),g=d.getData(),p=d.getOptions(),p=1<p.series.pie.radius?p.series.pie.radius:C*p.series.pie.radius,q,G,y=0;y<g.length;++y){var A=g[y];if(A.pie.show){s.save();s.beginPath();s.moveTo(0,0);s.arc(0,0,p,A.startAngle,A.startAngle+A.angle/2,!1);s.arc(0,0,p,A.startAngle+A.angle/2,A.startAngle+A.angle,!1);s.closePath();q=k-J;G=f-K;if(s.isPointInPath){if(s.isPointInPath(k-J,f-K)){s.restore();k={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:y};break a}}else{var D=p*Math.cos(A.startAngle),
H=p*Math.sin(A.startAngle),ea=p*Math.cos(A.startAngle+A.angle/4),X=p*Math.sin(A.startAngle+A.angle/4),fa=p*Math.cos(A.startAngle+A.angle/2),ka=p*Math.sin(A.startAngle+A.angle/2),ja=p*Math.cos(A.startAngle+A.angle/1.5),ia=p*Math.sin(A.startAngle+A.angle/1.5),la=p*Math.cos(A.startAngle+A.angle),na=p*Math.sin(A.startAngle+A.angle),D=[[0,0],[D,H],[ea,X],[fa,ka],[ja,ia],[la,na]];q=[q,G];G=!1;H=-1;ea=D.length;for(X=ea-1;++H<ea;X=H)(D[H][1]<=q[1]&&q[1]<D[X][1]||D[X][1]<=q[1]&&q[1]<D[H][1])&&q[0]<(D[X][0]-
D[H][0])*(q[1]-D[H][1])/(D[X][1]-D[H][1])+D[H][0]&&(G=!G);if(G){s.restore();k={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:y};break a}}s.restore()}}k=null}if(a.grid.autoHighlight)for(f=0;f<V.length;++f)g=V[f],g.auto!=b||k&&g.series==k.series||(g=g.series,null==g&&(V=[],d.triggerRedrawOverlay()),g=w(g),-1!=g&&(V.splice(g,1),d.triggerRedrawOverlay()));k&&(f=k.series,g=w(f),-1==g?(V.push({series:f,auto:b}),d.triggerRedrawOverlay()):b||(V[g].auto=!1));ba.trigger(b,[{pageX:c.pageX,pageY:c.pageY},
k])}function w(a){for(var b=0;b<V.length;++b)if(V[b].series==a)return b;return-1}var G=null,ba=null,C=null,J=null,K=null,H=!1,s=null,V=[];d.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt?b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});d.hooks.bindEvents.push(function(a,b){var c=
a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(g),c.grid.clickable&&b.unbind("click").click(q))});d.hooks.processDatapoints.push(function(b,d,k,g){b.getOptions().series.pie.show&&!H&&(H=!0,G=b.getCanvas(),ba=c(G).parent(),a=b.getOptions(),b.setData(f(b.getData())))});d.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),d=1<c.series.pie.radius?c.series.pie.radius:C*c.series.pie.radius;b.save();b.translate(J,K);b.scale(1,
c.series.pie.tilt);for(var f=0;f<V.length;++f){var g=V[f].series;0>=g.angle||isNaN(g.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(g.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,g.startAngle,g.startAngle+g.angle/2,!1),b.arc(0,0,d,g.startAngle+g.angle/2,g.startAngle+g.angle,!1),b.closePath(),b.fill())}k(b);b.restore()}});d.hooks.draw.push(function(a,c){a.getOptions().series.pie.show&&b(a,c)})},options:a,name:"pie",version:"1.1"})})(jQuery);
(function(c,D){var y=0;c.widget("s3.pivottable",{options:{showTotals:!0,collapseForm:!0,ajaxURL:null,defaultChart:null,showChart:!1},_create:function(){this.id=y;y+=1;this.chart=this.table=null},_init:function(){var a=this.element;this.table=this.data=null;this.chart_options={currentChart:null,currentDataIndex:null,currentSeriesIndex:null};var d=c(a).find(".pt-chart");this.chart=d.length?d.first():null;this.options.collapseForm&&(a=c(a).attr("id"),c("#"+a+"-options legend").siblings().toggle(),c("#"+
a+"-options legend").children().toggle());this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=this.element,d=null;this._unbindEvents();var f=c(a).find('input[type="hidden"][name="pivotdata"]');f.length&&(d=JSON.parse(c(f).first().val()));d||(d={empty:!0},c(a).find(".pt-empty").show());this.data=d;this._renderTable();this._renderChartOptions();this._renderChart();this._bindEvents();c(a).find(".pt-throbber").hide()},_renderTable:function(){var a=
this.element,d=c(a).find(".pt-table").first().empty();this.table=null;var f=this.data;if(!f.empty){var b=f.cells,k=f.cols,g=f.rows,q=f.total,p=f.labels,f=this._renderHeader(k,p);f.append(this._renderColumns(k,p));b=this._renderRows(g,k,p,b);k=this._renderFooter(g,k,p,q);g=c('<table class="dataTable display report"/>').append(f).append(b);null!==k&&g.append(k);this.table=c(g);c(d).append(this.table);c(a).find(".pt-empty").hide()}},_renderHeader:function(a,d){var f=c("<tr>");colspan="__other__"==a[a.length-
1][0]?a.length-1:a.length;f.append(c('<th scope="col">'+d.layer+"</th>")).append(c('<th scope="col" colspan="'+colspan+'">'+d.cols+"</th>"));this.options.showTotals&&f.append(c('<th class="totals_header row_totals" scope="col" rowspan="2">'+d.total+"</th>"));return c("<thead>").append(f)},_renderColumns:function(a,d){var f=c("<tr>");f.append(c('<th scope="col">'+d.rows+"</th>"));for(var b=0;b<a.length;b++)"__other__"!=a[b][0]&&f.append(c('<th scope="col">'+a[b][2]+"</th>"));return f},_renderRows:function(a,
d,f,b){for(var k=c("<tbody>"),g=this.options.showTotals,q,p,w=0;w<b.length;w++)q=a[w],"__other__"!=q[0]&&(p=c('<tr class="'+(w%2?"odd":"even")+'"><td>'+q[2]+"</td></tr>").append(this._renderCells(b[w],d,f)),g&&p.append(c("<td>"+q[3]+"</td>")),k.append(p));return k},_renderCells:function(a,d,f){for(var b,k=f.none,g=[],q,p,w=0;w<a.length;w++)if("__other__"!=d[w][0]){b=a[w];f=b.items;q=c("<td>");if(null===f)p=c('<div class="pt-cell-value">'+k+"</div>");else if(c.isArray(f)){p=c('<div class="pt-cell-value">');
list=c("<ul>");for(var G=0;G<f.length;G++)list.append(c("<li>"+f[G]+"</li>"));p.append(list)}else p=c('<div class="pt-cell-value">'+f+"</div>");q.append(p);b=b.keys;f&&(b&&b.length)&&q.data("records",b).append(c('<div class="pt-cell-zoom"></div>'));g.push(q)}return g},_renderFooter:function(a,d,f,b){if(this.options.showTotals){a=c('<tr class="'+(a.length%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+f.total+"</th></tr>");for(f=0;f<d.length;f++)"__other__"!=d[f][0]&&a.append(c("<td>"+
d[f][3]+"</td>"));a.append(c("<td>"+b+"</td>"));return c("<tfoot>").append(a)}return null},_renderChartOptions:function(){var a=this.element;c(a).find(".pt-chart-controls").first().empty();var d=this.data;if(!d.empty){var f=d.labels,b=c(a).attr("id"),d=f.rows,f=f.cols,k=c('<div class="pt-chart-opts">'),g=b+"-pchart-rows",q=b+"-vchart-rows",p=b+"-hchart-rows",w=b+"-pchart-cols",G=b+"-vchart-cols",b=b+"-hchart-cols";d&&c(k).append(c('<div id="'+g+'" class="pt-chart-icon pt-pchart"/><div id="'+q+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+
d+"</span>"));f&&c(k).append(c('<div id="'+w+'" class="pt-chart-icon pt-pchart"/><div id="'+G+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+f+"</span>"));d&&f&&c(k).append(c('<div id="'+p+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+d+'</span><div id="'+b+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+f+"</span>"));c(a).find(".pt-chart-controls").first().empty().append(k)}},_renderChart:function(a){var d=this.data;c(this.element).find(".pt-chart-contents").hide();
var f=this.chart;if(f&&(c(f).unbind("plothover"),c(f).unbind("plotclick"),c(f).empty(),!d.empty))if(!1===a)this.options.showChart=!1;else{f=this.options.showChart;if("undefined"==typeof a||!a){if(!f)return;a=this.chart_options.currentChart}if("undefined"==typeof a||!a){if(!f)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.showChart=!0;this.chart_options.currentChart=a;f=a.type;a=a.axis;var b=d.labels,k=b.per,g=b.layer+" "+k+" "+b.rows,b=b.layer+" "+k+" "+b.cols;"piechart"==
f?"rows"==a?this._renderPieChart(d.rows,g):this._renderPieChart(d.cols,b):"barchart"==f?"rows"==a?this._renderBarChart(d.rows,g):this._renderBarChart(d.cols,b):"breakdown"==f&&("rows"==a?this._renderBreakDown(d,0,g):this._renderBreakDown(d,1,b))}}},_renderPieChart:function(a,d){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"800px"});c(f).css({height:"360px"});for(var b=[],k=0;k<a.length;k++){var g=a[k];b.push({label:g[2],data:g[3]})}d?c(f).siblings(".pt-chart-title").html("<h4>"+
d+"</h4>"):c(f).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(c(f),b,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,clickable:!0}});var q=this;this.chart_options.currentDataIndex=null;c(f).bind("plothover",function(a,b,d){if(d){if(q.chart_options.currentDataIndex!=d.seriesIndex){q._removeChartTooltip();q.chart_options.currentDataIndex=d.seriesIndex;a=d.series.data[0][1];var f=d.series.percent.toFixed(1),g='<div class="pt-tooltip-label">'+d.series.label+
"</div>";q._renderChartTooltip(b.pageX,b.pageY,g+('<div class="pt-tooltip-text">'+a+" ("+f+"%)</div>"));c(".pt-tooltip-label").css({color:d.series.color})}}else q._removeChartTooltip()})}},_renderBarChart:function(a,d){var f=this.chart;if(f){c(f).closest(".pt-chart-contents").show().css({width:"96%"});c(f).css({height:"360px"});for(var b=[],k=[],g=0;g<a.length;g++){var q=a[g];b.push({label:q[2],data:[[g+1,q[3]]]});k.push([g+1,q[2]])}d?c(f).siblings(".pt-chart-title").html("<h4>"+d+"</h4>"):c(f).siblings(".pt-chart-title").empty();
reportChart=jQuery.plot(c(f),b,{series:{bars:{show:!0,barWidth:0.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},xaxis:{ticks:k,min:0,max:a.length+1,tickLength:0}});var p=this;this.chart_options.currentDataIndex=null;c(f).bind("plothover",function(a,b,d){d?p.chart_options.currentDataIndex!=d.seriesIndex&&(p._removeChartTooltip(),p.chart_options.currentDataIndex=d.seriesIndex,a='<div class="pt-tooltip-label">'+d.series.label+"</div>",a+='<div class="pt-tooltip-text">'+
d.series.data[0][1]+"</div>",p._renderChartTooltip(b.pageX,b.pageY,a),c(".pt-tooltip-label").css({color:d.series.color})):p._removeChartTooltip()})}},_renderBreakDown:function(a,d,f){var b=this.chart;if(b){c(b).closest(".pt-chart-contents").show().css({width:"96%"});var k=a.cells,g,q;0===d?(g=a.rows,a=a.cols,q=function(a,b){return k[a][b].value}):(g=a.cols,a=a.rows,q=function(a,b){return k[b][a].value});d=Math.max(g.length*Math.max(16*(a.length+1),50)+70,360);c(b).css({height:d+"px"});d=[];for(var p=
0,w=0;w<a.length;w++){for(var y={label:a[w][2]},D=[],C,J,K=0;K<g.length;K++)C=(g.length-K)*(a.length+1)-w,J=q(K,w),J>p&&(p=J),D.push([J,C]);y.data=D;d.push(y)}q=[];for(K=0;K<g.length;K++)w=g[K][2],C=(g.length-K)*(a.length+1)+1,q.push([C,w]);f?c(b).siblings(".pt-chart-title").html("<h4>"+f+"</h4>"):c(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(c(b),d,{series:{bars:{show:!0,barWidth:0.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},yaxis:{ticks:q,labelWidth:120,max:g.length*
(a.length+1)+1},xaxis:{max:1.1*p},grid:{hoverable:!0,clickable:!0}});c(".yAxis .tickLabel").css({"padding-top":"20px"});var H=this;this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;c(b).bind("plothover",function(a,b,d){if(d){if(H.chart_options.currentDataIndex!=d.dataIndex||H.chart_options.currentSeriesIndex!=d.seriesIndex)H._removeChartTooltip(),H.chart_options.currentDataIndex=d.dataIndex,H.chart_options.currentSeriesIndex=d.seriesIndex,a='<div class="pt-tooltip-label">'+
g[d.dataIndex][2]+"</div>",a+='<div class="pt-tooltip-text">'+d.series.label+' : <span class="pt-tooltip-value">'+d.datapoint[0]+"</span></div>",H._renderChartTooltip(b.pageX,b.pageY,a),c(".pt-tooltip-label").css({"padding-bottom":"8px"}),c(".pt-tooltip-text").css({color:d.series.color}),c(".pt-tooltip-value").css({"font-weight":"bold"})}else H._removeChartTooltip()})}},_renderChartTooltip:function(a,d,f){c('<div class="pt-chart-tooltip">'+f+"</div>").css({position:"absolute",display:"none",top:d-
50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:0.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){c(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var a="#"+c(this.element).attr("id");return{rows:c(a+"-rows").val(),cols:c(a+"-cols").val(),fact:c(a+"-fact").val(),totals:c(a+"-totals").is(":checked")?
1:0}},_getFilters:function(){var a="#"+c(this.element).attr("id"),d=c(a+"-filters"),a=[];try{if(d.length)a=S3.search.getCurrentFilters(d.first());else return null}catch(f){}for(var d={},b=0,k=a.length,g;b<k;b++)g=a[b].split("="),1<g.length&&(d[g[0]]=g[1]);return d},_updateAjaxURL:function(a,c){var f=this.options.ajaxURL.split("?"),b={};if(1<f.length){var k=f[1].split("&"),g,q,p;q=0;for(p=k.length;q<p;q++)g=k[q].split("="),1<g.length&&"aggregate"!=g[0]&&(b[decodeURIComponent(g[0])]=decodeURIComponent(g[1]))}k=
!1;if(a)for(option in a)g=a[option],"totals"==option?this.options.showTotals=g?!0:!1:b[option]!=g&&(k=!0),b[option]=g?g:null;if(c){for(option in c)g=c[option],b[option]!=g&&(k=!0),b[option]=g?g:null;for(option in b)a.hasOwnProperty(option)||(g=c[option],b[option]!=g&&(k=!0),b[option]=g?g:null)}g=[];for(option in b)null!==b[option]&&g.push(option+"="+b[option]);b=g.join("&");f=f[0];b&&(f=f+"?"+b);this.options.ajaxURL=f;return k},reload:function(a,d,f){f="undefined"!=typeof f?f:!0;"undefined"==typeof d&&
(d=this._getFilters());var b=this,k=this.element,g,q=c(k).find('input[type="hidden"][name="pivotdata"]');if(q.length){if(a||d)g=this._updateAjaxURL(a,d);g||f?(a=this.options.ajaxURL,c(k).find(".pt-throbber").show(),c.ajax({url:a,dataType:"json"}).done(function(a){q.first().val(JSON.stringify(a));b.refresh()}).fail(function(a,b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):(c(k).find(".pt-throbber").show(),b.refresh())}},_bindEvents:function(a){var d=this,f=this.element;
a=this.data;var b=c(f).attr("id");c("#"+b+"-options legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c("#"+b+"-filters legend").click(function(){c(this).siblings().toggle();c(this).children().toggle()});c("#"+b+"-totals").click(function(){var a=c(this).is(":checked");d.options.showTotals!=a&&d.reload({totals:a},null,!1)});c(f).find("input.pt-submit").click(function(){var a=d._getOptions(),b=d._getFilters();d.reload(a,b,!1)});c("#"+b+" div.pt-table div.pt-cell-zoom").click(function(b){b=
c(b.currentTarget);var d=b.closest("td"),f=d.find(".pt-cell-records");if(0<f.length)f.remove(),b.removeClass("opened");else{for(var p=d.data("records"),f=c("<div/>").addClass("pt-cell-records"),w=c("<ul/>"),y=0;y<p.length;y++)w.append("<li>"+a.lookup[p[y]]+"</li>");f.append(w);d.append(f);b.addClass("opened")}});c("#"+b+"-pchart-rows").click(function(){d._renderChart({type:"piechart",axis:"rows"})});c("#"+b+"-vchart-rows").click(function(){d._renderChart({type:"barchart",axis:"rows"})});c("#"+b+"-pchart-cols").click(function(){d._renderChart({type:"piechart",
axis:"cols"})});c("#"+b+"-vchart-cols").click(function(){d._renderChart({type:"barchart",axis:"cols"})});c("#"+b+"-hchart-rows").click(function(){d._renderChart({type:"breakdown",axis:"rows"})});c("#"+b+"-hchart-cols").click(function(){d._renderChart({type:"breakdown",axis:"cols"})});c(f).find(".pt-hide-chart").click(function(){d._renderChart(!1)})},_unbindEvents:function(){var a=this.element,d=c(a).attr("id");c(a).find("input.pt-submit").unbind("click");c("#"+d+" div.pt-table div.pt-cell-zoom").unbind("click");
c("#"+d+"-options legend").unbind("click");c("#"+d+"-filters legend").unbind("click");c(d+"-totals").unbind("click");c("#"+d+"-pchart-rows").unbind("click");c("#"+d+"-vchart-rows").unbind("click");c("#"+d+"-pchart-cols").unbind("click");c("#"+d+"-vchart-cols").unbind("click");c(a).find(".pt-hide-chart").unbind("click")}})})(jQuery);
