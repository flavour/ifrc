/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(e){e.color={};e.color.make=function(C,a,c,d){var b={};b.r=C||0;b.g=a||0;b.b=c||0;b.a=null!=d?d:1;b.add=function(e,a){for(var c=0;c<e.length;++c)b[e.charAt(c)]+=a;return b.normalize()};b.scale=function(e,c){for(var a=0;a<e.length;++a)b[e.charAt(a)]*=c;return b.normalize()};b.toString=function(){return 1<=b.a?"rgb("+[b.r,b.g,b.b].join()+")":"rgba("+[b.r,b.g,b.b,b.a].join()+")"};b.normalize=function(){function e(a,c,b){return c<a?a:c>b?b:c}b.r=e(0,parseInt(b.r),255);b.g=e(0,parseInt(b.g),255);
b.b=e(0,parseInt(b.b),255);b.a=e(0,b.a,1);return b};b.clone=function(){return e.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};e.color.extract=function(C,a){var c;do{c=C.css(a).toLowerCase();if(""!=c&&"transparent"!=c)break;C=C.parent()}while(!e.nodeName(C.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return e.color.parse(c)};e.color.parse=function(C){var a,c=e.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(C))return c(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(C))return c(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(C))return c(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(C))return c(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(C))return c(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(C))return c(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));C=e.trim(C).toLowerCase();if("transparent"==C)return c(255,255,255,0);a=B[C]||[0,0,0];return c(a[0],a[1],a[2])};var B={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(e){function B(a,d){var b=d.children("."+a)[0];if(null==b&&(b=document.createElement("canvas"),b.className=a,e(b).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(d),!b.getContext))if(window.G_vmlCanvasManager)b=window.G_vmlCanvasManager.initElement(b);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
b;b=this.context=b.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);this.resize(d.width(),d.height());this.textContainer=null;this.text={};this._textCache={}}function C(a,d,b,k){function f(l,t){t=[G].concat(t);for(var g=0;g<l.length;++g)l[g].apply(this,t)}function h(l){for(var t=[],g=0;g<l.length;++g){var a=e.extend(!0,{},m.series);null!=l[g].data?
(a.data=l[g].data,delete l[g].data,e.extend(!0,a,l[g]),l[g].data=a.data):a.data=l[g];t.push(a)}E=t;g=E.length;t=-1;for(l=0;l<E.length;++l)a=E[l].color,null!=a&&(g--,"number"==typeof a&&a>t&&(t=a));g<=t&&(g=t+1);var t=[],s=m.colors,c=s.length,b=0;for(l=0;l<g;l++)a=e.color.parse(s[l%c]||"#666"),0==l%c&&l&&(b=0<=b?0.5>b?-b-0.2:0:-b),t[l]=a.scale("rgb",1+b);for(l=g=0;l<E.length;++l){a=E[l];null==a.color?(a.color=t[g].toString(),++g):"number"==typeof a.color&&(a.color=t[a.color].toString());if(null==a.lines.show){var d,
s=!0;for(d in a)if(a[d]&&a[d].show){s=!1;break}s&&(a.lines.show=!0)}null==a.lines.zero&&(a.lines.zero=!!a.lines.fill);a.xaxis=z(O,q(a,"x"));a.yaxis=z(V,q(a,"y"))}J()}function q(l,a){var g=l[a+"axis"];"object"==typeof g&&(g=g.n);"number"!=typeof g&&(g=1);return g}function r(){return e.grep(O.concat(V),function(l){return l})}function x(l){var a={},g,e;for(g=0;g<O.length;++g)(e=O[g])&&e.used&&(a["x"+e.n]=e.c2p(l.left));for(g=0;g<V.length;++g)(e=V[g])&&e.used&&(a["y"+e.n]=e.c2p(l.top));void 0!==a.x1&&
(a.x=a.x1);void 0!==a.y1&&(a.y=a.y1);return a}function z(l,a){l[a-1]||(l[a-1]={n:a,direction:l==O?"x":"y",options:e.extend(!0,{},l==O?m.xaxis:m.yaxis)});return l[a-1]}function J(){function l(l,a,g){a<l.datamin&&a!=-b&&(l.datamin=a);g>l.datamax&&g!=b&&(l.datamax=g)}var a=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE,s,c,F,d,w,m,I,k,n,h,p,M;e.each(r(),function(l,e){e.datamin=a;e.datamax=g;e.used=!1});for(s=0;s<E.length;++s)w=E[s],w.datapoints={points:[]},f(T.processRawData,
[w,w.data,w.datapoints]);for(s=0;s<E.length;++s){w=E[s];p=w.data;M=w.datapoints.format;if(!M){M=[];M.push({x:!0,number:!0,required:!0});M.push({y:!0,number:!0,required:!0});if(w.bars.show||w.lines.show&&w.lines.fill)M.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(w.bars.show&&w.bars.zero||w.lines.show&&w.lines.zero)}),w.bars.horizontal&&(delete M[M.length-1].y,M[M.length-1].x=!0);w.datapoints.format=M}if(null==w.datapoints.pointsize){w.datapoints.pointsize=M.length;I=w.datapoints.pointsize;
m=w.datapoints.points;var ea=w.lines.show&&w.lines.steps;w.xaxis.used=w.yaxis.used=!0;for(c=F=0;c<p.length;++c,F+=I){h=p[c];var oa=null==h;if(!oa)for(d=0;d<I;++d){k=h[d];if(n=M[d])n.number&&null!=k&&(k=+k,isNaN(k)?k=null:Infinity==k?k=b:-Infinity==k&&(k=-b)),null==k&&(n.required&&(oa=!0),null!=n.defaultValue&&(k=n.defaultValue));m[F+d]=k}if(oa)for(d=0;d<I;++d)k=m[F+d],null!=k&&(n=M[d],n.x&&l(w.xaxis,k,k),n.y&&l(w.yaxis,k,k)),m[F+d]=null;else if(ea&&0<F&&null!=m[F-I]&&m[F-I]!=m[F]&&m[F-I+1]!=m[F+1]){for(d=
0;d<I;++d)m[F+I+d]=m[F+d];m[F+1]=m[F-I+1];F+=I}}}}for(s=0;s<E.length;++s)w=E[s],f(T.processDatapoints,[w,w.datapoints]);for(s=0;s<E.length;++s){w=E[s];m=w.datapoints.points;I=w.datapoints.pointsize;M=w.datapoints.format;h=F=a;ea=p=g;for(c=0;c<m.length;c+=I)if(null!=m[c])for(d=0;d<I;++d)k=m[c+d],(n=M[d])&&(!1!==n.autoscale&&k!=b&&k!=-b)&&(n.x&&(k<F&&(F=k),k>p&&(p=k)),n.y&&(k<h&&(h=k),k>ea&&(ea=k)));if(w.bars.show){switch(w.bars.align){case "left":c=0;break;case "right":c=-w.bars.barWidth;break;case "center":c=
-w.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+w.bars.align);}w.bars.horizontal?(h+=c,ea+=c+w.bars.barWidth):(F+=c,p+=c+w.bars.barWidth)}l(w.xaxis,F,p);l(w.yaxis,h,ea)}e.each(r(),function(l,e){e.datamin==a&&(e.datamin=null);e.datamax==g&&(e.datamax=null)})}function D(l){function a(l){return l}var g,e,c=l.options.transform||a,b=l.options.inverseTransform;"x"==l.direction?(g=l.scale=X/Math.abs(c(l.max)-c(l.min)),e=Math.min(c(l.max),c(l.min))):(g=l.scale=U/Math.abs(c(l.max)-c(l.min)),
g=-g,e=Math.max(c(l.max),c(l.min)));l.p2c=c==a?function(l){return(l-e)*g}:function(l){return(c(l)-e)*g};l.c2p=b?function(l){return b(e+l/g)}:function(l){return e+l/g}}function aa(l){var a=l.labelWidth,g=l.labelHeight,c=l.options.position,b=l.options.tickLength,d=m.grid.axisMargin,F=m.grid.labelMargin,k="x"==l.direction?O:V,w,f=e.grep(k,function(l){return l&&l.options.position==c&&l.reserveSpace});e.inArray(l,f)==f.length-1&&(d=0);null==b&&(b=e.grep(k,function(l){return l&&l.reserveSpace}),b=(w=0==
e.inArray(l,b))?"full":5);isNaN(+b)||(F+=+b);"x"==l.direction?(g+=F,"bottom"==c?(v.bottom+=g+d,l.box={top:L.height-v.bottom,height:g}):(l.box={top:v.top+d,height:g},v.top+=g+d)):(a+=F,"left"==c?(l.box={left:v.left+d,width:a},v.left+=a+d):(v.right+=a+d,l.box={left:L.width-v.right,width:a}));l.position=c;l.tickLength=b;l.box.padding=F;l.innermost=w}function C(){var l=m.grid.minBorderMargin,a={x:0,y:0},g;if(null==l)for(g=l=0;g<E.length;++g)l=Math.max(l,2*(E[g].points.radius+E[g].points.lineWidth/2));
a.x=a.y=Math.ceil(l);e.each(r(),function(l,g){var e=g.direction;g.reserveSpace&&(a[e]=Math.ceil(Math.max(a[e],("x"==e?g.labelWidth:g.labelHeight)/2)))});v.left=Math.max(a.x,v.left);v.right=Math.max(a.x,v.right);v.top=Math.max(a.y,v.top);v.bottom=Math.max(a.y,v.bottom)}function u(){var l,a=r(),g=m.grid.show;for(l in v){var c=m.grid.margin||0;v[l]="number"==typeof c?c:c[l]||0}f(T.processOffset,[v]);for(l in v)v[l]="object"==typeof m.grid.borderWidth?v[l]+(g?m.grid.borderWidth[l]:0):v[l]+(g?m.grid.borderWidth:
0);e.each(a,function(l,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var g=a.options,e=+(null!=g.min?g.min:a.datamin),c=+(null!=g.max?g.max:a.datamax),b=c-e;if(0==b){if(b=0==c?1:0.01,null==g.min&&(e-=b),null==g.max||null!=g.min)c+=b}else{var t=g.autoscaleMargin;null!=t&&(null==g.min&&(e-=b*t,0>e&&(null!=a.datamin&&0<=a.datamin)&&(e=0)),null==g.max&&(c+=b*t,0<c&&(null!=a.datamax&&0>=a.datamax)&&(c=0)))}a.min=e;a.max=c});if(g){c=e.grep(a,function(l){return l.reserveSpace});
e.each(c,function(l,a){P(a);var g=a.options.ticks,c=[];null==g||"number"==typeof g&&0<g?c=a.tickGenerator(a):g&&(c=e.isFunction(g)?g(a):g);var b;a.ticks=[];for(g=0;g<c.length;++g){var t=null,d=c[g];"object"==typeof d?(b=+d[0],1<d.length&&(t=d[1])):b=+d;null==t&&(t=a.tickFormatter(b,a));isNaN(b)||a.ticks.push({v:b,label:t})}c=a.ticks;a.options.autoscaleMargin&&0<c.length&&(null==a.options.min&&(a.min=Math.min(a.min,c[0].v)),null==a.options.max&&1<c.length&&(a.max=Math.max(a.max,c[c.length-1].v)));
c=a.options;g=a.ticks||[];b=c.labelWidth||0;for(var t=c.labelHeight||0,d="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+(a.direction+"Axis "+a.direction+a.n+"Axis"),m=c.font||"flot-tick-label tickLabel",k=0;k<g.length;++k){var ca=g[k];ca.label&&(ca=L.getTextInfo(d,ca.label,m),null==c.labelWidth&&(b=Math.max(b,ca.width)),null==c.labelHeight&&(t=Math.max(t,ca.height)))}a.labelWidth=Math.ceil(b);a.labelHeight=Math.ceil(t)});for(l=c.length-1;0<=l;--l)aa(c[l]);C();e.each(c,function(l,a){"x"==
a.direction?(a.box.left=v.left-a.labelWidth/2,a.box.width=L.width-v.left-v.right+a.labelWidth):(a.box.top=v.top-a.labelHeight/2,a.box.height=L.height-v.bottom-v.top+a.labelHeight)})}X=L.width-v.left-v.right;U=L.height-v.bottom-v.top;e.each(a,function(l,a){D(a)});g&&ha();A()}function P(l){var a=l.options,g;g="number"==typeof a.ticks&&0<a.ticks?a.ticks:0.3*Math.sqrt("x"==l.direction?L.width:L.height);g=(l.max-l.min)/g;var c=-Math.floor(Math.log(g)/Math.LN10),b=a.tickDecimals;null!=b&&c>b&&(c=b);var d=
Math.pow(10,-c),m=g/d,k;1.5>m?k=1:3>m?(k=2,2.25<m&&(null==b||c+1<=b)&&(k=2.5,++c)):k=7.5>m?5:10;k*=d;null!=a.minTickSize&&k<a.minTickSize&&(k=a.minTickSize);l.delta=g;l.tickDecimals=Math.max(0,null!=b?b:c);l.tickSize=a.tickSize||k;if("time"==a.mode&&!l.tickGenerator)throw Error("Time mode requires the flot.time plugin.");l.tickGenerator||(l.tickGenerator=function(a){var l=[],g=a.tickSize*Math.floor(a.min/a.tickSize),c=0,e=Number.NaN,b;do b=e,e=g+c*a.tickSize,l.push(e),++c;while(e<a.max&&e!=b);return l},
l.tickFormatter=function(a,l){var g=l.tickDecimals?Math.pow(10,l.tickDecimals):1,c=""+Math.round(a*g)/g;if(null!=l.tickDecimals){var e=c.indexOf("."),e=-1==e?0:c.length-e-1;if(e<l.tickDecimals)return(e?c:c+".")+(""+g).substr(1,l.tickDecimals-e)}return c});e.isFunction(a.tickFormatter)&&(l.tickFormatter=function(l,g){return""+a.tickFormatter(l,g)});if(null!=a.alignTicksWithAxis){var w=("x"==l.direction?O:V)[a.alignTicksWithAxis-1];w&&(w.used&&w!=l)&&(g=l.tickGenerator(l),0<g.length&&(null==a.min&&
(l.min=Math.min(l.min,g[0])),null==a.max&&1<g.length&&(l.max=Math.max(l.max,g[g.length-1]))),l.tickGenerator=function(a){var l=[],g,c;for(c=0;c<w.ticks.length;++c)g=(w.ticks[c].v-w.min)/(w.max-w.min),g=a.min+g*(a.max-a.min),l.push(g);return l},l.mode||null!=a.tickDecimals||(g=Math.max(0,-Math.floor(Math.log(l.delta)/Math.LN10)+1),c=l.tickGenerator(l),1<c.length&&/\..*0$/.test((c[1]-c[0]).toFixed(g))||(l.tickDecimals=g)))}}function p(){L.clear();f(T.drawBackground,[n]);var a=m.grid;a.show&&a.backgroundColor&&
(n.save(),n.translate(v.left,v.top),n.fillStyle=qa(m.grid.backgroundColor,U,0,"rgba(255, 255, 255, 0)"),n.fillRect(0,0,X,U),n.restore());a.show&&!a.aboveData&&K();for(var c=0;c<E.length;++c){f(T.drawSeries,[n,E[c]]);var g=E[c];g.lines.show&&ia(g);g.bars.show&&Q(g);g.points.show&&H(g)}f(T.draw,[n]);a.show&&a.aboveData&&K();L.render()}function y(a,c){for(var g,e,b,d,k=r(),m=0;m<k.length;++m)if(g=k[m],g.direction==c&&(d=c+g.n+"axis",a[d]||1!=g.n||(d=c+"axis"),a[d])){e=a[d].from;b=a[d].to;break}a[d]||
(g="x"==c?O[0]:V[0],e=a[c+"1"],b=a[c+"2"]);null!=e&&(null!=b&&e>b)&&(d=e,e=b,b=d);return{from:e,to:b,axis:g}}function K(){var a,c,g;n.save();n.translate(v.left,v.top);if(g=m.grid.markings)for(e.isFunction(g)&&(c=G.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,g=g(c)),a=0;a<g.length;++a){c=g[a];var b=y(c,"x"),d=y(c,"y");null==b.from&&(b.from=b.axis.min);null==b.to&&(b.to=b.axis.max);null==d.from&&(d.from=d.axis.min);null==d.to&&(d.to=d.axis.max);b.to<b.axis.min||
(b.from>b.axis.max||d.to<d.axis.min||d.from>d.axis.max)||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),d.from=Math.max(d.from,d.axis.min),d.to=Math.min(d.to,d.axis.max),b.from==b.to&&d.from==d.to)||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),d.from=d.axis.p2c(d.from),d.to=d.axis.p2c(d.to),b.from==b.to||d.from==d.to?(n.beginPath(),n.strokeStyle=c.color||m.grid.markingsColor,n.lineWidth=c.lineWidth||m.grid.markingsLineWidth,n.moveTo(b.from,d.from),n.lineTo(b.to,d.to),n.stroke()):
(n.fillStyle=c.color||m.grid.markingsColor,n.fillRect(b.from,d.to,b.to-b.from,d.from-d.to)))}c=r();g=m.grid.borderWidth;for(b=0;b<c.length;++b){d=c[b];a=d.box;var k=d.tickLength,f,h,w,da;if(d.show&&0!=d.ticks.length){n.lineWidth=1;"x"==d.direction?(f=0,h="full"==k?"top"==d.position?0:U:a.top-v.top+("top"==d.position?a.height:0)):(h=0,f="full"==k?"left"==d.position?0:X:a.left-v.left+("left"==d.position?a.width:0));d.innermost||(n.strokeStyle=d.options.color,n.beginPath(),w=da=0,"x"==d.direction?w=
X+1:da=U+1,1==n.lineWidth&&("x"==d.direction?h=Math.floor(h)+0.5:f=Math.floor(f)+0.5),n.moveTo(f,h),n.lineTo(f+w,h+da),n.stroke());n.strokeStyle=d.options.tickColor;n.beginPath();for(a=0;a<d.ticks.length;++a){var I=d.ticks[a].v;w=da=0;isNaN(I)||(I<d.min||I>d.max||"full"==k&&("object"==typeof g&&0<g[d.position]||0<g)&&(I==d.min||I==d.max))||("x"==d.direction?(f=d.p2c(I),da="full"==k?-U:k,"top"==d.position&&(da=-da)):(h=d.p2c(I),w="full"==k?-X:k,"left"==d.position&&(w=-w)),1==n.lineWidth&&("x"==d.direction?
f=Math.floor(f)+0.5:h=Math.floor(h)+0.5),n.moveTo(f,h),n.lineTo(f+w,h+da))}n.stroke()}}g&&(a=m.grid.borderColor,"object"==typeof g||"object"==typeof a?("object"!==typeof g&&(g={top:g,right:g,bottom:g,left:g}),"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a}),0<g.top&&(n.strokeStyle=a.top,n.lineWidth=g.top,n.beginPath(),n.moveTo(0-g.left,0-g.top/2),n.lineTo(X,0-g.top/2),n.stroke()),0<g.right&&(n.strokeStyle=a.right,n.lineWidth=g.right,n.beginPath(),n.moveTo(X+g.right/2,0-g.top),n.lineTo(X+g.right/
2,U),n.stroke()),0<g.bottom&&(n.strokeStyle=a.bottom,n.lineWidth=g.bottom,n.beginPath(),n.moveTo(X+g.right,U+g.bottom/2),n.lineTo(0,U+g.bottom/2),n.stroke()),0<g.left&&(n.strokeStyle=a.left,n.lineWidth=g.left,n.beginPath(),n.moveTo(0-g.left/2,U+g.bottom),n.lineTo(0-g.left/2,0),n.stroke())):(n.lineWidth=g,n.strokeStyle=m.grid.borderColor,n.strokeRect(-g/2,-g/2,X+g,U+g)));n.restore()}function ha(){e.each(r(),function(a,c){if(c.show&&0!=c.ticks.length){var g=c.box,e="flot-"+c.direction+"-axis flot-"+
c.direction+c.n+"-axis "+(c.direction+"Axis "+c.direction+c.n+"Axis"),b=c.options.font||"flot-tick-label tickLabel",d,k,m,f,n;L.removeText(e);for(var I=0;I<c.ticks.length;++I)d=c.ticks[I],!d.label||(d.v<c.min||d.v>c.max)||("x"==c.direction?(f="center",k=v.left+c.p2c(d.v),"bottom"==c.position?m=g.top+g.padding:(m=g.top+g.height-g.padding,n="bottom")):(n="middle",m=v.top+c.p2c(d.v),"left"==c.position?(k=g.left+g.width-g.padding,f="right"):k=g.left+g.padding),L.addText(e,k,m,d.label,b,null,f,n))}})}
function ia(a){function c(a,l,g,e,b){var d=a.points;a=a.pointsize;var k=null,m=null;n.beginPath();for(var t=a;t<d.length;t+=a){var f=d[t-a],h=d[t-a+1],s=d[t],p=d[t+1];if(null!=f&&null!=s){if(h<=p&&h<b.min){if(p<b.min)continue;f=(b.min-h)/(p-h)*(s-f)+f;h=b.min}else if(p<=h&&p<b.min){if(h<b.min)continue;s=(b.min-h)/(p-h)*(s-f)+f;p=b.min}if(h>=p&&h>b.max){if(p>b.max)continue;f=(b.max-h)/(p-h)*(s-f)+f;h=b.max}else if(p>=h&&p>b.max){if(h>b.max)continue;s=(b.max-h)/(p-h)*(s-f)+f;p=b.max}if(f<=s&&f<e.min){if(s<
e.min)continue;h=(e.min-f)/(s-f)*(p-h)+h;f=e.min}else if(s<=f&&s<e.min){if(f<e.min)continue;p=(e.min-f)/(s-f)*(p-h)+h;s=e.min}if(f>=s&&f>e.max){if(s>e.max)continue;h=(e.max-f)/(s-f)*(p-h)+h;f=e.max}else if(s>=f&&s>e.max){if(f>e.max)continue;p=(e.max-f)/(s-f)*(p-h)+h;s=e.max}f==k&&h==m||n.moveTo(e.p2c(f)+l,b.p2c(h)+g);k=s;m=p;n.lineTo(e.p2c(s)+l,b.p2c(p)+g)}}n.stroke()}function g(a,c,l){var g=a.points;a=a.pointsize;for(var e=Math.min(Math.max(0,l.min),l.max),b=0,d=!1,k=1,f=0,m=0;!(0<a&&b>g.length+
a);){var b=b+a,t=g[b-a],h=g[b-a+k],s=g[b],p=g[b+k];if(d){if(0<a&&null!=t&&null==s){m=b;a=-a;k=2;continue}if(0>a&&b==f+a){n.fill();d=!1;a=-a;k=1;b=f=m+a;continue}}if(null!=t&&null!=s){if(t<=s&&t<c.min){if(s<c.min)continue;h=(c.min-t)/(s-t)*(p-h)+h;t=c.min}else if(s<=t&&s<c.min){if(t<c.min)continue;p=(c.min-t)/(s-t)*(p-h)+h;s=c.min}if(t>=s&&t>c.max){if(s>c.max)continue;h=(c.max-t)/(s-t)*(p-h)+h;t=c.max}else if(s>=t&&s>c.max){if(t>c.max)continue;p=(c.max-t)/(s-t)*(p-h)+h;s=c.max}d||(n.beginPath(),n.moveTo(c.p2c(t),
l.p2c(e)),d=!0);if(h>=l.max&&p>=l.max)n.lineTo(c.p2c(t),l.p2c(l.max)),n.lineTo(c.p2c(s),l.p2c(l.max));else if(h<=l.min&&p<=l.min)n.lineTo(c.p2c(t),l.p2c(l.min)),n.lineTo(c.p2c(s),l.p2c(l.min));else{var ca=t,y=s;h<=p&&h<l.min&&p>=l.min?(t=(l.min-h)/(p-h)*(s-t)+t,h=l.min):p<=h&&(p<l.min&&h>=l.min)&&(s=(l.min-h)/(p-h)*(s-t)+t,p=l.min);h>=p&&h>l.max&&p<=l.max?(t=(l.max-h)/(p-h)*(s-t)+t,h=l.max):p>=h&&(p>l.max&&h<=l.max)&&(s=(l.max-h)/(p-h)*(s-t)+t,p=l.max);t!=ca&&n.lineTo(c.p2c(ca),l.p2c(h));n.lineTo(c.p2c(t),
l.p2c(h));n.lineTo(c.p2c(s),l.p2c(p));s!=y&&(n.lineTo(c.p2c(s),l.p2c(p)),n.lineTo(c.p2c(y),l.p2c(p)))}}}}n.save();n.translate(v.left,v.top);n.lineJoin="round";var e=a.lines.lineWidth,b=a.shadowSize;if(0<e&&0<b){n.lineWidth=b;n.strokeStyle="rgba(0,0,0,0.1)";var d=Math.PI/18;c(a.datapoints,Math.sin(d)*(e/2+b/2),Math.cos(d)*(e/2+b/2),a.xaxis,a.yaxis);n.lineWidth=b/2;c(a.datapoints,Math.sin(d)*(e/2+b/4),Math.cos(d)*(e/2+b/4),a.xaxis,a.yaxis)}n.lineWidth=e;n.strokeStyle=a.color;if(b=R(a.lines,a.color,
0,U))n.fillStyle=b,g(a.datapoints,a.xaxis,a.yaxis);0<e&&c(a.datapoints,0,0,a.xaxis,a.yaxis);n.restore()}function H(a){function c(a,l,b,g,e,d,t,k){var f=a.points;a=a.pointsize;for(var m=0;m<f.length;m+=a){var h=f[m],s=f[m+1];null==h||(h<d.min||h>d.max||s<t.min||s>t.max)||(n.beginPath(),h=d.p2c(h),s=t.p2c(s)+g,"circle"==k?n.arc(h,s,l,0,e?Math.PI:2*Math.PI,!1):k(n,h,s,l,e),n.closePath(),b&&(n.fillStyle=b,n.fill()),n.stroke())}}n.save();n.translate(v.left,v.top);var g=a.points.lineWidth,b=a.shadowSize,
e=a.points.radius,d=a.points.symbol;0==g&&(g=1E-4);0<g&&0<b&&(b/=2,n.lineWidth=b,n.strokeStyle="rgba(0,0,0,0.1)",c(a.datapoints,e,null,b+b/2,!0,a.xaxis,a.yaxis,d),n.strokeStyle="rgba(0,0,0,0.2)",c(a.datapoints,e,null,b/2,!0,a.xaxis,a.yaxis,d));n.lineWidth=g;n.strokeStyle=a.color;c(a.datapoints,e,R(a.points,a.color),0,!1,a.xaxis,a.yaxis,d);n.restore()}function ba(a,c,b,e,d,k,f,m,h,p,n,y){var v,q,H,r;n?(r=q=H=!0,v=!1,n=b,b=c+e,d=c+d,a<n&&(c=a,a=n,n=c,v=!0,q=!1)):(v=q=H=!0,r=!1,n=a+e,a+=d,d=b,b=c,b<
d&&(c=b,b=d,d=c,r=!0,H=!1));a<m.min||(n>m.max||b<h.min||d>h.max)||(n<m.min&&(n=m.min,v=!1),a>m.max&&(a=m.max,q=!1),d<h.min&&(d=h.min,r=!1),b>h.max&&(b=h.max,H=!1),n=m.p2c(n),d=h.p2c(d),a=m.p2c(a),b=h.p2c(b),f&&(p.beginPath(),p.moveTo(n,d),p.lineTo(n,b),p.lineTo(a,b),p.lineTo(a,d),p.fillStyle=f(d,b),p.fill()),0<y&&(v||q||H||r)&&(p.beginPath(),p.moveTo(n,d+k),v?p.lineTo(n,b+k):p.moveTo(n,b+k),H?p.lineTo(a,b+k):p.moveTo(a,b+k),q?p.lineTo(a,d+k):p.moveTo(a,d+k),r?p.lineTo(n,d+k):p.moveTo(n,d+k),p.stroke()))}
function Q(a){n.save();n.translate(v.left,v.top);n.lineWidth=a.bars.lineWidth;n.strokeStyle=a.color;var c;switch(a.bars.align){case "left":c=0;break;case "right":c=-a.bars.barWidth;break;case "center":c=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(c,b,e,d,k,m,t){var f=c.points;c=c.pointsize;for(var h=0;h<f.length;h+=c)null!=f[h]&&ba(f[h],f[h+1],f[h+2],b,e,d,k,m,t,n,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,c,c+a.bars.barWidth,0,a.bars.fill?
function(c,b){return R(a.bars,a.color,c,b)}:null,a.xaxis,a.yaxis);n.restore()}function R(a,c,b,d){var k=a.fill;if(!k)return null;if(a.fillColor)return qa(a.fillColor,b,d,c);a=e.color.parse(c);a.a="number"==typeof k?k:0.4;a.normalize();return a.toString()}function A(){a.find(".legend").remove();if(m.legend.show){for(var b=[],d=[],g=!1,k=m.legend.labelFormatter,f,h,p=0;p<E.length;++p)f=E[p],f.label&&(h=k?k(f.label,f):f.label)&&d.push({label:h,color:f.color});if(m.legend.sorted)if(e.isFunction(m.legend.sorted))d.sort(m.legend.sorted);
else if("reverse"==m.legend.sorted)d.reverse();else{var n="descending"!=m.legend.sorted;d.sort(function(a,c){return a.label==c.label?0:a.label<c.label!=n?1:-1})}for(p=0;p<d.length;++p)k=d[p],0==p%m.legend.noColumns&&(g&&b.push("</tr>"),b.push("<tr>"),g=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+m.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+k.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+k.label+"</td>");
g&&b.push("</tr>");0!=b.length&&(d='<table style="font-size:smaller;color:'+m.grid.color+'">'+b.join("")+"</table>",null!=m.legend.container?e(m.legend.container).html(d):(b="",g=m.legend.position,p=m.legend.margin,null==p[0]&&(p=[p,p]),"n"==g.charAt(0)?b+="top:"+(p[1]+v.top)+"px;":"s"==g.charAt(0)&&(b+="bottom:"+(p[1]+v.bottom)+"px;"),"e"==g.charAt(1)?b+="right:"+(p[0]+v.right)+"px;":"w"==g.charAt(1)&&(b+="left:"+(p[0]+v.left)+"px;"),d=e('<div class="legend">'+d.replace('style="','style="position:absolute;'+
b+";")+"</div>").appendTo(a),0!=m.legend.backgroundOpacity&&(g=m.legend.backgroundColor,null==g&&(g=(g=m.grid.backgroundColor)&&"string"==typeof g?e.color.parse(g):e.color.extract(d,"background-color"),g.a=1,g=g.toString()),p=d.children(),e('<div style="position:absolute;width:'+p.width()+"px;height:"+p.height()+"px;"+b+"background-color:"+g+';"> </div>').prependTo(d).css("opacity",m.legend.backgroundOpacity))))}}function ra(a){m.grid.hoverable&&Y("plothover",a,function(a){return!1!=a.hoverable})}
function W(a){m.grid.hoverable&&Y("plothover",a,function(a){return!1})}function sa(a){Y("plotclick",a,function(a){return!1!=a.clickable})}function Y(b,e,d){var k=Z.offset(),f=e.pageX-k.left-v.left,h=e.pageY-k.top-v.top,p=x({left:f,top:h});p.pageX=e.pageX;p.pageY=e.pageY;e=m.grid.mouseActiveRadius;var n=e*e+1,y=null,q,H,r;for(q=E.length-1;0<=q;--q)if(d(E[q])){var u=E[q],A=u.xaxis,K=u.yaxis,J=u.datapoints.points,ba=A.c2p(f),D=K.c2p(h),ha=e/A.scale,ia=e/K.scale;r=u.datapoints.pointsize;A.options.inverseTransform&&
(ha=Number.MAX_VALUE);K.options.inverseTransform&&(ia=Number.MAX_VALUE);if(u.lines.show||u.points.show)for(H=0;H<J.length;H+=r){var Q=J[H],z=J[H+1];null==Q||(Q-ba>ha||Q-ba<-ha||z-D>ia||z-D<-ia)||(Q=Math.abs(A.p2c(Q)-f),z=Math.abs(K.p2c(z)-h),z=Q*Q+z*z,z<n&&(n=z,y=[q,H/r]))}if(u.bars.show&&!y)for(A="left"==u.bars.align?0:-u.bars.barWidth/2,u=A+u.bars.barWidth,H=0;H<J.length;H+=r)Q=J[H],z=J[H+1],K=J[H+2],null!=Q&&(E[q].bars.horizontal?ba<=Math.max(K,Q)&&ba>=Math.min(K,Q)&&D>=z+A&&D<=z+u:ba>=Q+A&&ba<=
Q+u&&D>=Math.min(K,z)&&D<=Math.max(K,z))&&(y=[q,H/r])}y?(q=y[0],H=y[1],r=E[q].datapoints.pointsize,d={datapoint:E[q].datapoints.points.slice(H*r,(H+1)*r),dataIndex:H,series:E[q],seriesIndex:q}):d=null;d&&(d.pageX=parseInt(d.series.xaxis.p2c(d.datapoint[0])+k.left+v.left,10),d.pageY=parseInt(d.series.yaxis.p2c(d.datapoint[1])+k.top+v.top,10));if(m.grid.autoHighlight){for(k=0;k<$.length;++k)f=$[k],f.auto!=b||d&&f.series==d.series&&f.point[0]==d.datapoint[0]&&f.point[1]==d.datapoint[1]||ka(f.series,
f.point);d&&la(d.series,d.datapoint,b)}a.trigger(b,[p,d])}function fa(){var a=m.interaction.redrawOverlayInterval;-1==a?ma():ja||(ja=setTimeout(ma,a))}function ma(){ja=null;S.save();ga.clear();S.translate(v.left,v.top);var a,c;for(a=0;a<$.length;++a)if(c=$[a],c.series.bars.show)pa(c.series,c.point);else{var b=c.series,d=c.point;c=d[0];var d=d[1],k=b.xaxis,h=b.yaxis,m="string"===typeof b.highlightColor?b.highlightColor:e.color.parse(b.color).scale("a",0.5).toString();if(!(c<k.min||c>k.max||d<h.min||
d>h.max)){var p=b.points.radius+b.points.lineWidth/2;S.lineWidth=p;S.strokeStyle=m;m=1.5*p;c=k.p2c(c);d=h.p2c(d);S.beginPath();"circle"==b.points.symbol?S.arc(c,d,m,0,2*Math.PI,!1):b.points.symbol(S,c,d,m,!1);S.closePath();S.stroke()}}S.restore();f(T.drawOverlay,[S])}function la(a,c,b){"number"==typeof a&&(a=E[a]);if("number"==typeof c){var d=a.datapoints.pointsize;c=a.datapoints.points.slice(d*c,d*(c+1))}d=na(a,c);-1==d?($.push({series:a,point:c,auto:b}),fa()):b||($[d].auto=!1)}function ka(a,c){if(null==
a&&null==c)$=[],fa();else{"number"==typeof a&&(a=E[a]);if("number"==typeof c){var b=a.datapoints.pointsize;c=a.datapoints.points.slice(b*c,b*(c+1))}b=na(a,c);-1!=b&&($.splice(b,1),fa())}}function na(a,c){for(var b=0;b<$.length;++b){var d=$[b];if(d.series==a&&d.point[0]==c[0]&&d.point[1]==c[1])return b}return-1}function pa(a,c){var b="string"===typeof a.highlightColor?a.highlightColor:e.color.parse(a.color).scale("a",0.5).toString(),d="left"==a.bars.align?0:-a.bars.barWidth/2;S.lineWidth=a.bars.lineWidth;
S.strokeStyle=b;ba(c[0],c[1],c[2]||0,d,d+a.bars.barWidth,0,function(){return b},a.xaxis,a.yaxis,S,a.bars.horizontal,a.bars.lineWidth)}function qa(a,c,b,d){if("string"==typeof a)return a;c=n.createLinearGradient(0,b,0,c);b=0;for(var k=a.colors.length;b<k;++b){var f=a.colors[b];if("string"!=typeof f){var m=e.color.parse(d);null!=f.brightness&&(m=m.scale("rgb",f.brightness));null!=f.opacity&&(m.a*=f.opacity);f=m.toString()}c.addColorStop(b/(k-1),f)}return c}var E=[],m={colors:["#edc240","#afd8f8","#cb4b4b",
"#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,
minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,
markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},L=null,ga=null,Z=null,n=null,S=null,O=[],V=[],v={left:0,right:0,top:0,bottom:0},X=0,U=0,T={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},G=this;G.setData=h;G.setupGrid=u;G.draw=p;G.getPlaceholder=function(){return a};
G.getCanvas=function(){return L.element};G.getPlotOffset=function(){return v};G.width=function(){return X};G.height=function(){return U};G.offset=function(){var a=Z.offset();a.left+=v.left;a.top+=v.top;return a};G.getData=function(){return E};G.getAxes=function(){var a={};e.each(O.concat(V),function(c,b){b&&(a[b.direction+(1!=b.n?b.n:"")+"axis"]=b)});return a};G.getXAxes=function(){return O};G.getYAxes=function(){return V};G.c2p=x;G.p2c=function(a){var c={},b,d,e;for(b=0;b<O.length;++b)if((d=O[b])&&
d.used&&(e="x"+d.n,null==a[e]&&1==d.n&&(e="x"),null!=a[e])){c.left=d.p2c(a[e]);break}for(b=0;b<V.length;++b)if((d=V[b])&&d.used&&(e="y"+d.n,null==a[e]&&1==d.n&&(e="y"),null!=a[e])){c.top=d.p2c(a[e]);break}return c};G.getOptions=function(){return m};G.highlight=la;G.unhighlight=ka;G.triggerRedrawOverlay=fa;G.pointOffset=function(a){return{left:parseInt(O[q(a,"x")-1].p2c(+a.x)+v.left,10),top:parseInt(V[q(a,"y")-1].p2c(+a.y)+v.top,10)}};G.shutdown=function(){ja&&clearTimeout(ja);Z.unbind("mousemove",
ra);Z.unbind("mouseleave",W);Z.unbind("click",sa);f(T.shutdown,[Z])};G.resize=function(){var b=a.width(),d=a.height();L.resize(b,d);ga.resize(b,d)};G.hooks=T;(function(){for(var a={Canvas:B},c=0;c<k.length;++c){var b=k[c];b.init(G,a);b.options&&e.extend(!0,m,b.options)}})(G);(function(b){e.extend(!0,m,b);null==m.xaxis.color&&(m.xaxis.color=e.color.parse(m.grid.color).scale("a",0.22).toString());null==m.yaxis.color&&(m.yaxis.color=e.color.parse(m.grid.color).scale("a",0.22).toString());null==m.xaxis.tickColor&&
(m.xaxis.tickColor=m.grid.tickColor||m.xaxis.color);null==m.yaxis.tickColor&&(m.yaxis.tickColor=m.grid.tickColor||m.yaxis.color);null==m.grid.borderColor&&(m.grid.borderColor=m.grid.color);null==m.grid.tickColor&&(m.grid.tickColor=e.color.parse(m.grid.color).scale("a",0.22).toString());var d,g,k={style:a.css("font-style"),size:Math.round(0.8*(+a.css("font-size").replace("px","")||13)),variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};k.lineHeight=1.15*k.size;g=
m.xaxes.length||1;for(b=0;b<g;++b)(d=m.xaxes[b])&&!d.tickColor&&(d.tickColor=d.color),d=e.extend(!0,{},m.xaxis,d),m.xaxes[b]=d,d.font&&(d.font=e.extend({},k,d.font),d.font.color||(d.font.color=d.color));g=m.yaxes.length||1;for(b=0;b<g;++b)(d=m.yaxes[b])&&!d.tickColor&&(d.tickColor=d.color),d=e.extend(!0,{},m.yaxis,d),m.yaxes[b]=d,d.font&&(d.font=e.extend({},k,d.font),d.font.color||(d.font.color=d.color));m.xaxis.noTicks&&null==m.xaxis.ticks&&(m.xaxis.ticks=m.xaxis.noTicks);m.yaxis.noTicks&&null==
m.yaxis.ticks&&(m.yaxis.ticks=m.yaxis.noTicks);m.x2axis&&(m.xaxes[1]=e.extend(!0,{},m.xaxis,m.x2axis),m.xaxes[1].position="top");m.y2axis&&(m.yaxes[1]=e.extend(!0,{},m.yaxis,m.y2axis),m.yaxes[1].position="right");m.grid.coloredAreas&&(m.grid.markings=m.grid.coloredAreas);m.grid.coloredAreasColor&&(m.grid.markingsColor=m.grid.coloredAreasColor);m.lines&&e.extend(!0,m.series.lines,m.lines);m.points&&e.extend(!0,m.series.points,m.points);m.bars&&e.extend(!0,m.series.bars,m.bars);null!=m.shadowSize&&
(m.series.shadowSize=m.shadowSize);null!=m.highlightColor&&(m.series.highlightColor=m.highlightColor);for(b=0;b<m.xaxes.length;++b)z(O,b+1).options=m.xaxes[b];for(b=0;b<m.yaxes.length;++b)z(V,b+1).options=m.yaxes[b];for(var h in T)m.hooks[h]&&m.hooks[h].length&&(T[h]=T[h].concat(m.hooks[h]));f(T.processOptions,[m])})(b);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();"static"==a.css("position")&&a.css("position","relative");L=new B("flot-base",a);ga=new B("flot-overlay",
a);n=L.context;S=ga.context;Z=e(ga.element).unbind();var b=a.data("plot");b&&(b.shutdown(),ga.clear());a.data("plot",G)})();h(d);u();p();m.grid.hoverable&&(Z.mousemove(ra),Z.bind("mouseleave",W));m.grid.clickable&&Z.click(sa);f(T.bindEvents,[Z]);var $=[],ja=null}var a=Object.prototype.hasOwnProperty;B.prototype.resize=function(a,d){if(0>=a||0>=d)throw Error("Invalid dimensions for plot, width = "+a+", height = "+d);var b=this.element,e=this.context,f=this.pixelRatio;this.width!=a&&(b.width=a*f,b.style.width=
a+"px",this.width=a);this.height!=d&&(b.height=d*f,b.style.height=d+"px",this.height=d);e.restore();e.save();e.scale(f,f)};B.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};B.prototype.render=function(){var c=this._textCache,d;for(d in c)if(a.call(c,d)){var b=this.getTextLayer(d),e=c[d];b.hide();for(var f in e)if(a.call(e,f)){var h=e[f],q;for(q in h)if(a.call(h,q)){var r=h[q];r.active?r.rendered||(b.append(r.element),r.rendered=!0):(delete h[q],r.rendered&&r.element.detach())}}b.show()}};
B.prototype.getTextLayer=function(a){var d=this.text[a];null==d&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),d=this.text[a]=e("<div></div>").addClass(a).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return d};B.prototype.getTextInfo=function(a,d,b,k){var f,h;d=""+d;k="object"===typeof b?b.style+" "+
b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;f=this._textCache[a];null==f&&(f=this._textCache[a]={});h=f[k];null==h&&(h=f[k]={});f=h[d];null==f&&(a=e("<div></div>").html(d).css({position:"absolute",top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof b?a.css({font:k,color:b.color}):"string"===typeof b&&a.addClass(b),f=h[d]={active:!1,rendered:!1,element:a,width:a.outerWidth(!0),height:a.outerHeight(!0)},a.detach());return f};B.prototype.addText=function(a,d,b,e,f,
h,q,r){a=this.getTextInfo(a,e,f,h);a.active=!0;"center"==q?d-=a.width/2:"right"==q&&(d-=a.width);"middle"==r?b-=a.height/2:"bottom"==r&&(b-=a.height);a.element.css({top:Math.round(b),left:Math.round(d)})};B.prototype.removeText=function(c,d,b,e){if(null==d){if(c=this._textCache[c],null!=c)for(var f in c)if(a.call(c,f)){d=c[f];for(var h in d)a.call(d,h)&&(d[h].active=!1)}}else this.getTextInfo(c,d,b,e).active=!1};e.plot=function(a,d,b){return new C(e(a),d,b,e.plot.plugins)};e.plot.version="0.8.0";
e.plot.plugins=[];e.fn.plot=function(a,d){return this.each(function(){e.plot(this,a,d)})}})(jQuery);
(function(e){var B=10,C=0.95,a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,d){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+d.color+";'>"+a+"<br/>"+Math.round(d.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};e.plot.plugins.push({init:function(c){function d(b){for(var c=
0,d=0,k=0,f=a.series.pie.combine.color,h=[],q=0;q<b.length;++q){var r=b[q].data;e.isArray(r)?e.isNumeric(r[1])?r[1]=+r[1]:r[1]=0:r=e.isNumeric(r)?[1,+r]:[1,0];b[q].data=[r]}for(q=0;q<b.length;++q)c+=b[q].data[0][1];for(q=0;q<b.length;++q)r=b[q].data[0][1],r/c<=a.series.pie.combine.threshold&&(d+=r,k++,f||(f=b[q].color));for(q=0;q<b.length;++q)r=b[q].data[0][1],(2>k||r/c>a.series.pie.combine.threshold)&&h.push({data:[[1,r]],color:b[q].color,label:b[q].label,angle:2*r*Math.PI/c,percent:r/(c/100)});
1<k&&h.push({data:[[1,d]],color:f,label:a.series.pie.combine.label,angle:2*d*Math.PI/c,percent:d/(c/100)});return h}function b(b,c){function d(){u.clearRect(0,0,q,r);z.children().filter(".pieLabel, .pieLabelBackground").remove()}function f(){var b=a.series.pie.shadow.left,c=a.series.pie.shadow.top,d=a.series.pie.shadow.alpha,e=1<a.series.pie.radius?a.series.pie.radius:J*a.series.pie.radius;if(!(e>=q/2-b||e*a.series.pie.tilt>=r/2-c||10>=e)){u.save();u.translate(b,c);u.globalAlpha=d;u.fillStyle="#000";
u.translate(D,aa);u.scale(1,a.series.pie.tilt);for(b=1;10>=b;b++)u.beginPath(),u.arc(0,0,e,0,2*Math.PI,!1),u.fill(),e-=b;u.restore()}}function h(){function b(a,c,d){0>=a||isNaN(a)||(d?u.fillStyle=c:(u.strokeStyle=c,u.lineJoin="round"),u.beginPath(),1E-9<Math.abs(a-2*Math.PI)&&u.moveTo(0,0),u.arc(0,0,f,p,p+a/2,!1),u.arc(0,0,f,p+a/2,p+a,!1),u.closePath(),p+=a,d?u.fill():u.stroke())}function c(){for(var b=d,f=1<a.series.pie.label.radius?a.series.pie.label.radius:J*a.series.pie.label.radius,k=0;k<R.length;++k){if(R[k].percent>=
100*a.series.pie.label.threshold){var h;h=R[k];var p=b,y=k;if(0==h.data[0][1])h=!0;else{var u=a.legend.labelFormatter,m=void 0,x=a.series.pie.label.formatter,m=u?u(h.label,h):h.label;x&&(m=x(m,h));u=(p+h.angle+p)/2;p=D+Math.round(Math.cos(u)*f);u=aa+Math.round(Math.sin(u)*f)*a.series.pie.tilt;z.append("<span class='pieLabel' id='pieLabel"+y+"' style='position:absolute;top:"+u+"px;left:"+p+"px;'>"+m+"</span>");y=z.children("#pieLabel"+y);m=u-y.height()/2;u=p-y.width()/2;y.css("top",m);y.css("left",
u);0<0-m||0<0-u||0>r-(m+y.height())||0>q-(u+y.width())?h=!1:(0!=a.series.pie.label.background.opacity&&(p=a.series.pie.label.background.color,null==p&&(p=h.color),h="top:"+m+"px;left:"+u+"px;",e("<div class='pieLabelBackground' style='position:absolute;width:"+y.width()+"px;height:"+y.height()+"px;"+h+"background-color:"+p+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(y)),h=!0)}if(!h)return!1}b+=R[k].angle}return!0}var d=Math.PI*a.series.pie.startAngle,f=1<a.series.pie.radius?
a.series.pie.radius:J*a.series.pie.radius;u.save();u.translate(D,aa);u.scale(1,a.series.pie.tilt);u.save();for(var p=d,y=0;y<R.length;++y)R[y].startAngle=p,b(R[y].angle,R[y].color,!0);u.restore();if(0<a.series.pie.stroke.width){u.save();u.lineWidth=a.series.pie.stroke.width;p=d;for(y=0;y<R.length;++y)b(R[y].angle,a.series.pie.stroke.color,!1);u.restore()}k(u);u.restore();return a.series.pie.label.show?c():!0}if(z){var q=b.getPlaceholder().width(),r=b.getPlaceholder().height(),x=z.children().filter(".legend").children().width()||
0;u=c;N=!1;J=Math.min(q,r/a.series.pie.tilt)/2;aa=r/2+a.series.pie.offset.top;D=q/2;D="auto"==a.series.pie.offset.left?a.legend.position.match("w")?D+x/2:D-x/2:D+a.series.pie.offset.left;D<J?D=J:D>q-J&&(D=q-J);var R=b.getData(),x=0;do 0<x&&(J*=C),x+=1,d(),0.8>=a.series.pie.tilt&&f();while(!h()&&x<B);x>=B&&(d(),z.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));b.setSeries&&b.insertLegend&&(b.setSeries(R),b.insertLegend())}}function k(b){if(0<a.series.pie.innerRadius){b.save();
var c=1<a.series.pie.innerRadius?a.series.pie.innerRadius:J*a.series.pie.innerRadius;b.globalCompositeOperation="destination-out";b.beginPath();b.fillStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.fill();b.closePath();b.restore();b.save();b.beginPath();b.strokeStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.stroke();b.closePath();b.restore()}}function f(a){q("plothover",a)}function h(a){q("plotclick",a)}function q(b,d){var e=c.offset(),k=parseInt(d.pageX-e.left);a:{for(var e=
parseInt(d.pageY-e.top),f=c.getData(),h=c.getOptions(),h=1<h.series.pie.radius?h.series.pie.radius:J*h.series.pie.radius,q,x,C=0;C<f.length;++C){var A=f[C];if(A.pie.show){u.save();u.beginPath();u.moveTo(0,0);u.arc(0,0,h,A.startAngle,A.startAngle+A.angle/2,!1);u.arc(0,0,h,A.startAngle+A.angle/2,A.startAngle+A.angle,!1);u.closePath();q=k-D;x=e-aa;if(u.isPointInPath){if(u.isPointInPath(k-D,e-aa)){u.restore();k={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:C};break a}}else{var B=h*Math.cos(A.startAngle),
W=h*Math.sin(A.startAngle),N=h*Math.cos(A.startAngle+A.angle/4),Y=h*Math.sin(A.startAngle+A.angle/4),fa=h*Math.cos(A.startAngle+A.angle/2),ma=h*Math.sin(A.startAngle+A.angle/2),la=h*Math.cos(A.startAngle+A.angle/1.5),ka=h*Math.sin(A.startAngle+A.angle/1.5),na=h*Math.cos(A.startAngle+A.angle),pa=h*Math.sin(A.startAngle+A.angle),B=[[0,0],[B,W],[N,Y],[fa,ma],[la,ka],[na,pa]];q=[q,x];x=!1;W=-1;N=B.length;for(Y=N-1;++W<N;Y=W)(B[W][1]<=q[1]&&q[1]<B[Y][1]||B[Y][1]<=q[1]&&q[1]<B[W][1])&&q[0]<(B[Y][0]-B[W][0])*
(q[1]-B[W][1])/(B[Y][1]-B[W][1])+B[W][0]&&(x=!x);if(x){u.restore();k={datapoint:[A.percent,A.data],dataIndex:0,series:A,seriesIndex:C};break a}}u.restore()}}k=null}if(a.grid.autoHighlight)for(e=0;e<P.length;++e)f=P[e],f.auto!=b||k&&f.series==k.series||(f=f.series,null==f&&(P=[],c.triggerRedrawOverlay()),f=r(f),-1!=f&&(P.splice(f,1),c.triggerRedrawOverlay()));k&&(e=k.series,f=r(e),-1==f?(P.push({series:e,auto:b}),c.triggerRedrawOverlay()):b||(P[f].auto=!1));z.trigger(b,[{pageX:d.pageX,pageY:d.pageY},
k])}function r(a){for(var b=0;b<P.length;++b)if(P[b].series==a)return b;return-1}var x=null,z=null,J=null,D=null,aa=null,N=!1,u=null,P=[];c.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt?b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});c.hooks.bindEvents.push(function(a,b){var c=
a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(f),c.grid.clickable&&b.unbind("click").click(h))});c.hooks.processDatapoints.push(function(b,c,f,k){b.getOptions().series.pie.show&&!N&&(N=!0,x=b.getCanvas(),z=e(x).parent(),a=b.getOptions(),b.setData(d(b.getData())))});c.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),d=1<c.series.pie.radius?c.series.pie.radius:J*c.series.pie.radius;b.save();b.translate(D,aa);b.scale(1,
c.series.pie.tilt);for(var e=0;e<P.length;++e){var f=P[e].series;0>=f.angle||isNaN(f.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(f.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,f.startAngle,f.startAngle+f.angle/2,!1),b.arc(0,0,d,f.startAngle+f.angle/2,f.startAngle+f.angle,!1),b.closePath(),b.fill())}k(b);b.restore()}});c.hooks.draw.push(function(a,c){a.getOptions().series.pie.show&&b(a,c)})},options:a,name:"pie",version:"1.1"})})(jQuery);
(function(e,B){var C=0;e.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1},_create:function(){this.id=C;C+=1;this.chart=this.table=null},_init:function(){var a=this.element;this.table=this.data=null;this.chart_options={currentChart:null,currentDataIndex:null,currentSeriesIndex:null};this.table_options={hidden:!1};
var c=e(a).find(".pt-chart");this.chart=c.length?c.first():null;this.options.renderFilter||this.options.renderOptions?(c=e(a).attr("id"),this.options.renderOptions?(e("#"+c+"-options").show(),this.options.collapseOptions&&(e("#"+c+"-options legend").siblings().toggle(),e("#"+c+"-options legend").children().toggle())):e("#"+c+"-options").hide(),this.options.renderFilter?(e("#"+c+"-filters").show(),this.options.collapseFilter&&(e("#"+c+"-filters legend").siblings().toggle(),e("#"+c+"-filters legend").children().toggle())):
e("#"+c+"-options").hide()):e(a).find(".pt-form-container").hide();this.options.collapseTable&&(this.table_options.hidden=!0,e(a).find(".pt-table").hide(),e(a).find(".pt-show-table").show(),e(a).find(".pt-hide-table").hide());this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=this.element,c=null;this._unbindEvents();var d=e(a).find('input[type="hidden"][name="pivotdata"]');d.length&&(c=JSON.parse(e(d).first().val()));c||(c=
{empty:!0},e(a).find(".pt-hide-table").hide(),e(a).find(".pt-show-table").hide());this.data=c;c.nodata?(e(a).find(".pt-table").first().empty().append(e('<div class="pt-no-data">'+c.nodata+"</div>")),e(a).find(".pt-hide-table").hide(),e(a).find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();c.empty?e(a).find(".pt-empty").show():e(a).find(".pt-empty").hide();this._bindEvents();e(a).find(".pt-throbber").hide()},_renderTable:function(){var a=this.element,
c=e(a).find(".pt-table").first().empty();this.table=null;var d=this.data;if(!d.empty&&this.options.renderTable){var b=d.cells,k=d.cols,f=d.rows,h=d.total,q=d.labels,d=this._renderHeader(k,q);d.append(this._renderColumns(k,q));b=this._renderRows(f,k,q,b);k=this._renderFooter(f,k,q,h);f=e('<table class="dataTable display report"/>').append(d).append(b);null!==k&&f.append(k);this.table=e(f);e(c).append(this.table);this.table_options.hidden?(e(a).find(".pt-show-table").show(),e(a).find(".pt-hide-table").hide()):
(e(a).find(".pt-show-table").hide(),e(a).find(".pt-hide-table").show())}},_renderHeader:function(a,c){var d=e("<tr>");colspan="__other__"==a[a.length-1][0]?a.length-1:a.length;d.append(e('<th scope="col">'+c.layer+"</th>"));(1<a.length||a[0][4])&&d.append(e('<th scope="col" colspan="'+colspan+'">'+c.cols+"</th>"));this.options.showTotals&&d.append(e('<th class="totals_header row_totals" scope="col" rowspan="2">'+c.total+"</th>"));return e("<thead>").append(d)},_renderColumns:function(a,c){var d=e("<tr>"),
b;d.append(e('<th scope="col">'+c.rows+"</th>"));for(var k=1==a.length&&null===a[0][4]?!0:!1,f=0;f<a.length;f++)"__other__"==a[f][0]||k&&this.options.showTotals||(b=k?"":a[f][4],d.append(e('<th scope="col">'+b+"</th>")));return d},_renderRows:function(a,c,d,b){for(var k=e("<tbody>"),f=this.options.showTotals,h=1==a.length&&null===a[0][4]?!0:!1,q,r,x=0;x<b.length;x++)q=a[x],"__other__"==q[0]||h&&this.options.showTotals||(r=h?"":a[x][4],r=e('<tr class="'+(x%2?"odd":"even")+'"><td>'+r+"</td></tr>").append(this._renderCells(b[x],
c,d)),f&&r.append(e("<td>"+q[2]+"</td>")),k.append(r));return k},_renderCells:function(a,c,d){for(var b,k=d.none,f=1==c.length&&null===c[0][4]?!0:!1,h=[],q,r,x=0;x<a.length;x++)if(!("__other__"==c[x][0]||f&&this.options.showTotals)){b=a[x];d=b.items;q=e("<td>");if(null===d)r=e('<div class="pt-cell-value">'+k+"</div>");else if(e.isArray(d)){r=e('<div class="pt-cell-value">');list=e("<ul>");for(var z=0;z<d.length;z++)list.append(e("<li>"+d[z]+"</li>"));r.append(list)}else r=e('<div class="pt-cell-value">'+
d+"</div>");q.append(r);b=b.keys;d&&(b&&b.length)&&q.data("records",b).append(e('<div class="pt-cell-zoom"></div>'));h.push(q)}return h},_renderFooter:function(a,c,d,b){var k=1==c.length&&null===c[0][4]?!0:!1;if(this.options.showTotals){var f,h;h=f=0;for(len=a.length;f<len;f++)"__other__"!=a[f][0]&&h++;a=e('<tr class="'+(h%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+d.total+"</th></tr>");for(f=0;f<c.length;f++)"__other__"==c[f][0]||k||a.append(e("<td>"+c[f][2]+"</td>"));
a.append(e("<td>"+b+"</td>"));return e("<tfoot>").append(a)}return null},_renderChartOptions:function(){var a=this.element,c=e(a).find(".pt-chart-controls").first().empty(),d=this.data;if(!d.empty&&this.options.renderChart){var d=d.labels,b=e(a).attr("id"),a=d.layer,k=d.rows,f=d.cols,h=d.per,q=e('<div class="pt-chart-opts">'),r=b+"-pchart-rows",x=b+"-vchart-rows",z=b+"-hchart-rows",J=b+"-pchart-cols",D=b+"-vchart-cols",b=b+"-hchart-cols";a&&e(q).append(e('<span class="pt-chart-label">'+a+"</span>"));
k&&e(q).append(e('<div id="'+r+'" class="pt-chart-icon pt-pchart"/><div id="'+x+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+h+" "+k+"</span>"));f&&e(q).append(e('<div id="'+J+'" class="pt-chart-icon pt-pchart"/><div id="'+D+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+h+" "+f+"</span>"));k&&f&&e(q).append(e('<span class="pt-chart-label">| '+d.breakdown+'</span><div id="'+z+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+[h,k,"&amp;",
f].join(" ")+'</span><div id="'+b+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+[h,f,"&amp;",k].join(" ")+"</span>"));e(c).append(q)}},_renderChart:function(a){var c=this.data;e(this.element).find(".pt-chart-contents").hide();var d=this.chart;if(d&&(e(d).unbind("plothover").unbind("plotclick").empty(),!c.empty&&this.options.renderChart))if(!1===a)this.options.collapseChart=!0;else{d=this.options.collapseChart;if("undefined"==typeof a||!a){if(d)return;a=this.chart_options.currentChart}if("undefined"==
typeof a||!a){if(d)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chart_options.currentChart=a;d=a.type;a=a.axis;var b=c.labels,k=b.per,f=b.layer+" "+k+" "+b.rows,b=b.layer+" "+k+" "+b.cols,k=c.filter,h=k[0],q=k[1],r=k[2];"piechart"==d?"rows"==a?this._renderPieChart(c.rows,f,h,q):this._renderPieChart(c.cols,b,h,r):"barchart"==d?"rows"==a?this._renderBarChart(c.rows,f,h,q):this._renderBarChart(c.cols,b,h,r):"breakdown"==d&&("rows"==a?this._renderBreakDown(c,
0,f,k):this._renderBreakDown(c,1,b,k))}}},_renderPieChart:function(a,c,d,b){var k=this.chart;if(k){e(k).closest(".pt-chart-contents").show().css({width:"800px"});e(k).css({height:"360px"});for(var f=[],h=0;h<a.length;h++){var q=a[h];q[1]||f.push({label:q[4],data:q[2],key:q[3]})}c?e(k).siblings(".pt-chart-title").html("<h4>"+c+"</h4>"):e(k).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(e(k),f,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,clickable:!0}});
var r=this;this.chart_options.currentDataIndex=null;e(k).bind("plothover",function(a,b,c){if(c){if(r.chart_options.currentDataIndex!=c.seriesIndex){r._removeChartTooltip();r.chart_options.currentDataIndex=c.seriesIndex;a=c.series.data[0][1];var d=c.series.percent.toFixed(1),f='<div class="pt-tooltip-label">'+c.series.label+"</div>";r._renderChartTooltip(b.pageX,b.pageY,f+('<div class="pt-tooltip-text">'+a+" ("+d+"%)</div>"));e(".pt-tooltip-label").css({color:c.series.color})}}else r._removeChartTooltip()});
d&&b&&e(k).bind("plotclick",function(a,c,e){if(e){a={};try{a[b]=f[e.seriesIndex].key}catch(k){return}e=r._updateURL(d,a);window.open(e,"_blank")}})}},_renderBarChart:function(a,c,d,b){var k=this.chart;if(k){e(k).closest(".pt-chart-contents").show().css({width:"96%"});e(k).css({height:"360px"});for(var f=[],h=[],q=0,r=0;r<a.length;r++){var x=a[r];x[1]||(f.push({label:x[4],data:[[q+1,x[2]]],key:x[3]}),h.push([q+1,x[4]]),q++)}c?e(k).siblings(".pt-chart-title").html("<h4>"+c+"</h4>"):e(k).siblings(".pt-chart-title").empty();
reportChart=jQuery.plot(e(k),f,{series:{bars:{show:!0,barWidth:0.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},xaxis:{ticks:h,min:0,max:f.length+1,tickLength:0}});var z=this;this.chart_options.currentDataIndex=null;e(k).bind("plothover",function(a,b,c){c?z.chart_options.currentDataIndex!=c.seriesIndex&&(z._removeChartTooltip(),z.chart_options.currentDataIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+c.series.label+"</div>",a+='<div class="pt-tooltip-text">'+
c.series.data[0][1]+"</div>",z._renderChartTooltip(b.pageX,b.pageY,a),e(".pt-tooltip-label").css({color:c.series.color})):z._removeChartTooltip()});d&&b&&e(k).bind("plotclick",function(a,c,e){if(e){a={};try{a[b]=f[e.seriesIndex].key}catch(k){return}e=z._updateURL(d,a);window.open(e,"_blank")}})}},_renderBreakDown:function(a,c,d,b){var k=this.chart;if(k){e(k).closest(".pt-chart-contents").show().css({width:"96%"});var f=b[0],h,q,r=a.cells,x,z=[],C=[];0===c?(c=a.rows,x=a.cols,a=function(a,b){return r[z[a]][C[b]].value},
h=b[1],q=b[2]):(c=a.cols,x=a.rows,a=function(a,b){return r[C[b]][z[a]].value},h=b[2],q=b[1]);var D=[],B=[];b=0;for(len=c.length;b<len;b++)c[b][1]||(D.push(c[b]),z.push(b));b=0;for(len=x.length;b<len;b++)x[b][1]||(B.push(x[b]),C.push(b));b=Math.max(D.length*Math.max(16*(B.length+1),50)+70,360);e(k).css({height:b+"px"});b=[];for(var N=c=0;N<B.length;N++){for(var u={label:B[N][4]},P=[],p,y=0;y<D.length;y++)x=(D.length-y)*(B.length+1)-N,p=a(y,N),p>c&&(c=p),P.push([p,x]);u.data=P;b.push(u)}a=[];for(y=
0;y<D.length;y++)N=D[y][4],x=(D.length-y)*(B.length+1)+1,a.push([x,N]);d?e(k).siblings(".pt-chart-title").html("<h4>"+d+"</h4>"):e(k).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(e(k),b,{series:{bars:{show:!0,barWidth:0.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},yaxis:{ticks:a,labelWidth:120,max:D.length*(B.length+1)+1},xaxis:{max:1.1*c},grid:{hoverable:!0,clickable:!0}});e(".flot-y-axis .tickLabel").css({"padding-top":"20px",left:"0px",width:"120px"});var K=this;
this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;e(k).bind("plothover",function(a,b,c){if(c){if(K.chart_options.currentDataIndex!=c.dataIndex||K.chart_options.currentSeriesIndex!=c.seriesIndex)K._removeChartTooltip(),K.chart_options.currentDataIndex=c.dataIndex,K.chart_options.currentSeriesIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+D[c.dataIndex][4]+"</div>",a+='<div class="pt-tooltip-text">'+c.series.label+' : <span class="pt-tooltip-value">'+c.datapoint[0]+
"</span></div>",K._renderChartTooltip(b.pageX,b.pageY,a),e(".pt-tooltip-label").css({"padding-bottom":"8px"}),e(".pt-tooltip-text").css({color:c.series.color}),e(".pt-tooltip-value").css({"font-weight":"bold"})}else K._removeChartTooltip()});f&&(h&&q)&&e(k).bind("plotclick",function(a,b,c){if(c){a={};try{a[h]=D[c.dataIndex][3],a[q]=B[c.seriesIndex][3]}catch(d){return}c=K._updateURL(f,a);window.open(c,"_blank")}})}},_renderChartTooltip:function(a,c,d){e('<div class="pt-chart-tooltip">'+d+"</div>").css({position:"absolute",
display:"none",top:c-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:0.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){e(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var a="#"+e(this.element).attr("id");return{rows:e(a+"-rows").val(),cols:e(a+"-cols").val(),fact:e(a+"-fact").val(),
totals:e(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+e(this.element).attr("id"),c=e(a+"-filters"),a=[];try{if(c.length)a=S3.search.getCurrentFilters(c.first());else return null}catch(d){}for(var c={},b=0,k=a.length,f;b<k;b++)f=a[b].split("="),1<f.length&&(c[f[0]]=f[1]);return c},_updateURL:function(a,c){var d=a.split("?"),b={};if(1<d.length){var e=d[1].split("&"),f,h,q;h=0;for(q=e.length;h<q;h++)f=e[h].split("="),1<f.length&&(b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]))}if(c)for(option in c)newopt=
c[option],b[option]=newopt?newopt:null;e=[];for(option in b)null!==b[option]&&e.push(option+"="+b[option]);b=e.join("&");d=d[0];b&&(d=d+"?"+b);return d},_updateAjaxURL:function(a,c){var d=this.options.ajaxURL.split("?"),b={};if(1<d.length){var e=d[1].split("&"),f,h,q;h=0;for(q=e.length;h<q;h++)f=e[h].split("="),1<f.length&&"aggregate"!=f[0]&&(b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]))}e=!1;if(a)for(option in a)f=a[option],"totals"==option?this.options.showTotals=f?!0:!1:b[option]!=f&&(e=
!0),b[option]=f?f:null;if(c){for(option in c)f=c[option],b[option]!=f&&(e=!0),b[option]=f?f:null;for(option in b)a.hasOwnProperty(option)||(f=c[option],b[option]!=f&&(e=!0),b[option]=f?f:null)}f=[];for(option in b)null!==b[option]&&f.push(option+"="+b[option]);b=f.join("&");d=d[0];b&&(d=d+"?"+b);this.options.ajaxURL=d;return e},reload:function(a,c,d){d="undefined"!=typeof d?d:!0;"undefined"==typeof c&&(c=this._getFilters());var b=this,k=this.element,f,h=e(k).find('input[type="hidden"][name="pivotdata"]');
if(h.length){if(a||c)f=this._updateAjaxURL(a,c);f||d?(a=this.options.ajaxURL,e(k).find(".pt-throbber").show(),e.ajax({url:a,dataType:"json"}).done(function(a){h.first().val(JSON.stringify(a));b.refresh()}).fail(function(a,b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):(e(k).find(".pt-throbber").show(),b.refresh())}},_bindEvents:function(a){var c=this,d=this.element;a=this.data;var b=e(d).attr("id");e("#"+b+"-options legend").click(function(){e(this).siblings().toggle();
e(this).children().toggle()});e("#"+b+"-filters legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(d).find(".pt-hide-table").click(function(){c.table_options.hidden=!0;e(d).find(".pt-table").hide();e(this).siblings(".pt-show-table").show();e(this).hide()});e(d).find(".pt-show-table").click(function(){c.table_options.hidden=!1;e(d).find(".pt-table").show();e(this).siblings(".pt-hide-table").show();e(this).hide()});e("#"+b+"-totals").click(function(){var a=e(this).is(":checked");
c.options.showTotals!=a&&c.reload({totals:a},null,!1)});e(d).find("input.pt-submit").click(function(){var a=c._getOptions(),b=c._getFilters();c.reload(a,b,!1)});e("#"+b+" div.pt-table div.pt-cell-zoom").click(function(b){b=e(b.currentTarget);var c=b.closest("td"),d=c.find(".pt-cell-records");if(0<d.length)d.remove(),b.removeClass("opened");else{for(var q=c.data("records"),d=e("<div/>").addClass("pt-cell-records"),r=e("<ul/>"),x=0;x<q.length;x++)r.append("<li>"+a.lookup[q[x]]+"</li>");d.append(r);
c.append(d);b.addClass("opened")}});e("#"+b+"-pchart-rows").click(function(){c._renderChart({type:"piechart",axis:"rows"})});e("#"+b+"-vchart-rows").click(function(){c._renderChart({type:"barchart",axis:"rows"})});e("#"+b+"-pchart-cols").click(function(){c._renderChart({type:"piechart",axis:"cols"})});e("#"+b+"-vchart-cols").click(function(){c._renderChart({type:"barchart",axis:"cols"})});e("#"+b+"-hchart-rows").click(function(){c._renderChart({type:"breakdown",axis:"rows"})});e("#"+b+"-hchart-cols").click(function(){c._renderChart({type:"breakdown",
axis:"cols"})});e(d).find(".pt-hide-chart").click(function(){c._renderChart(!1)})},_unbindEvents:function(){var a=this.element,c=e(a).attr("id");e(a).find("input.pt-submit").unbind("click");e("#"+c+" div.pt-table div.pt-cell-zoom").unbind("click");e("#"+c+"-options legend").unbind("click");e("#"+c+"-filters legend").unbind("click");e(c+"-totals").unbind("click");e("#"+c+"-pchart-rows").unbind("click");e("#"+c+"-vchart-rows").unbind("click");e("#"+c+"-pchart-cols").unbind("click");e("#"+c+"-vchart-cols").unbind("click");
e(a).find(".pt-hide-table").unbind("click");e(a).find(".pt-show-table").unbind("click");e(a).find(".pt-hide-chart").unbind("click")}})})(jQuery);
