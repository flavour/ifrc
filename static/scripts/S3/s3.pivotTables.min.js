/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(d){d.color={};d.color.make=function(D,a,c,e){var b={};b.r=D||0;b.g=a||0;b.b=c||0;b.a=null!=e?e:1;b.add=function(d,a){for(var c=0;c<d.length;++c)b[d.charAt(c)]+=a;return b.normalize()};b.scale=function(d,a){for(var c=0;c<d.length;++c)b[d.charAt(c)]*=a;return b.normalize()};b.toString=function(){return 1<=b.a?"rgb("+[b.r,b.g,b.b].join()+")":"rgba("+[b.r,b.g,b.b,b.a].join()+")"};b.normalize=function(){function d(a,c,b){return c<a?a:c>b?b:c}b.r=d(0,parseInt(b.r),255);b.g=d(0,parseInt(b.g),255);
b.b=d(0,parseInt(b.b),255);b.a=d(0,b.a,1);return b};b.clone=function(){return d.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};d.color.extract=function(D,a){var c;do{c=D.css(a).toLowerCase();if(""!=c&&"transparent"!=c)break;D=D.parent()}while(!d.nodeName(D.get(0),"body"));"rgba(0, 0, 0, 0)"==c&&(c="transparent");return d.color.parse(c)};d.color.parse=function(D){var a,c=d.color.make;if(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(D))return c(parseInt(a[1],10),parseInt(a[2],
10),parseInt(a[3],10));if(a=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(D))return c(parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10),parseFloat(a[4]));if(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(D))return c(2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]));if(a=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(D))return c(2.55*
parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3]),parseFloat(a[4]));if(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(D))return c(parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16));if(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(D))return c(parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16));D=d.trim(D).toLowerCase();if("transparent"==D)return c(255,255,255,0);a=E[D]||[0,0,0];return c(a[0],a[1],a[2])};var E={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(d){function E(c,a){var b=a.children("."+c)[0];if(null==b&&(b=document.createElement("canvas"),b.className=c,d(b).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!b.getContext))if(window.G_vmlCanvasManager)b=window.G_vmlCanvasManager.initElement(b);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
b;b=this.context=b.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);this.resize(a.width(),a.height());this.textContainer=null;this.text={};this._textCache={}}function D(a,e,b,g){function l(n,a){a=[G].concat(a);for(var h=0;h<n.length;++h)n[h].apply(this,a)}function k(n){for(var a=[],h=0;h<n.length;++h){var c=d.extend(!0,{},m.series);null!=n[h].data?
(c.data=n[h].data,delete n[h].data,d.extend(!0,c,n[h]),n[h].data=c.data):c.data=n[h];a.push(c)}F=a;h=F.length;a=-1;for(n=0;n<F.length;++n)c=F[n].color,null!=c&&(h--,"number"==typeof c&&c>a&&(a=c));h<=a&&(h=a+1);var a=[],Z=m.colors,b=Z.length,A=0;for(n=0;n<h;n++)c=d.color.parse(Z[n%b]||"#666"),0==n%b&&n&&(A=0<=A?0.5>A?-A-0.2:0:-A),a[n]=c.scale("rgb",1+A);for(n=h=0;n<F.length;++n){c=F[n];null==c.color?(c.color=a[h].toString(),++h):"number"==typeof c.color&&(c.color=a[c.color].toString());if(null==c.lines.show){var e,
Z=!0;for(e in c)if(c[e]&&c[e].show){Z=!1;break}Z&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill);c.xaxis=y(L,f(c,"x"));c.yaxis=y(R,f(c,"y"))}v()}function f(n,a){var h=n[a+"axis"];"object"==typeof h&&(h=h.n);"number"!=typeof h&&(h=1);return h}function q(){return d.grep(L.concat(R),function(n){return n})}function s(n){var a={},h,d;for(h=0;h<L.length;++h)(d=L[h])&&d.used&&(a["x"+d.n]=d.c2p(n.left));for(h=0;h<R.length;++h)(d=R[h])&&d.used&&(a["y"+d.n]=d.c2p(n.top));void 0!==a.x1&&
(a.x=a.x1);void 0!==a.y1&&(a.y=a.y1);return a}function y(n,a){n[a-1]||(n[a-1]={n:a,direction:n==L?"x":"y",options:d.extend(!0,{},n==L?m.xaxis:m.yaxis)});return n[a-1]}function v(){function n(n,a,h){a<n.datamin&&a!=-c&&(n.datamin=a);h>n.datamax&&h!=c&&(n.datamax=h)}var a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,c=Number.MAX_VALUE,b,e,A,m,u,H,O,p,g,k,f,r;d.each(q(),function(n,d){d.datamin=a;d.datamax=h;d.used=!1});for(b=0;b<F.length;++b)u=F[b],u.datapoints={points:[]},l(P.processRawData,
[u,u.data,u.datapoints]);for(b=0;b<F.length;++b){u=F[b];f=u.data;r=u.datapoints.format;if(!r){r=[];r.push({x:!0,number:!0,required:!0});r.push({y:!0,number:!0,required:!0});if(u.bars.show||u.lines.show&&u.lines.fill)r.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(u.bars.show&&u.bars.zero||u.lines.show&&u.lines.zero)}),u.bars.horizontal&&(delete r[r.length-1].y,r[r.length-1].x=!0);u.datapoints.format=r}if(null==u.datapoints.pointsize){u.datapoints.pointsize=r.length;O=u.datapoints.pointsize;
H=u.datapoints.points;var ca=u.lines.show&&u.lines.steps;u.xaxis.used=u.yaxis.used=!0;for(e=A=0;e<f.length;++e,A+=O){k=f[e];var ma=null==k;if(!ma)for(m=0;m<O;++m){p=k[m];if(g=r[m])g.number&&null!=p&&(p=+p,isNaN(p)?p=null:Infinity==p?p=c:-Infinity==p&&(p=-c)),null==p&&(g.required&&(ma=!0),null!=g.defaultValue&&(p=g.defaultValue));H[A+m]=p}if(ma)for(m=0;m<O;++m)p=H[A+m],null!=p&&(g=r[m],g.autoscale&&(g.x&&n(u.xaxis,p,p),g.y&&n(u.yaxis,p,p))),H[A+m]=null;else if(ca&&0<A&&null!=H[A-O]&&H[A-O]!=H[A]&&
H[A-O+1]!=H[A+1]){for(m=0;m<O;++m)H[A+O+m]=H[A+m];H[A+1]=H[A-O+1];A+=O}}}}for(b=0;b<F.length;++b)u=F[b],l(P.processDatapoints,[u,u.datapoints]);for(b=0;b<F.length;++b){u=F[b];H=u.datapoints.points;O=u.datapoints.pointsize;r=u.datapoints.format;k=A=a;ca=f=h;for(e=0;e<H.length;e+=O)if(null!=H[e])for(m=0;m<O;++m)p=H[e+m],(g=r[m])&&(!1!==g.autoscale&&p!=c&&p!=-c)&&(g.x&&(p<A&&(A=p),p>f&&(f=p)),g.y&&(p<k&&(k=p),p>ca&&(ca=p)));if(u.bars.show){switch(u.bars.align){case "left":e=0;break;case "right":e=-u.bars.barWidth;
break;case "center":e=-u.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+u.bars.align);}u.bars.horizontal?(k+=e,ca+=e+u.bars.barWidth):(A+=e,f+=e+u.bars.barWidth)}n(u.xaxis,A,f);n(u.yaxis,k,ca)}d.each(q(),function(n,d){d.datamin==a&&(d.datamin=null);d.datamax==h&&(d.datamax=null)})}function B(n){function a(n){return n}var h,d,c=n.options.transform||a,b=n.options.inverseTransform;"x"==n.direction?(h=n.scale=T/Math.abs(c(n.max)-c(n.min)),d=Math.min(c(n.max),c(n.min))):(h=n.scale=
Q/Math.abs(c(n.max)-c(n.min)),h=-h,d=Math.max(c(n.max),c(n.min)));n.p2c=c==a?function(n){return(n-d)*h}:function(n){return(c(n)-d)*h};n.c2p=b?function(n){return b(d+n/h)}:function(n){return d+n/h}}function Y(n){var a=n.labelWidth,h=n.labelHeight,c=n.options.position,b=n.options.tickLength,e=m.grid.axisMargin,A=m.grid.labelMargin,p="x"==n.direction?L:R,u,H=d.grep(p,function(n){return n&&n.options.position==c&&n.reserveSpace});d.inArray(n,H)==H.length-1&&(e=0);null==b&&(b=d.grep(p,function(n){return n&&
n.reserveSpace}),b=(u=0==d.inArray(n,b))?"full":5);isNaN(+b)||(A+=+b);"x"==n.direction?(h+=A,"bottom"==c?(t.bottom+=h+e,n.box={top:I.height-t.bottom,height:h}):(n.box={top:t.top+e,height:h},t.top+=h+e)):(a+=A,"left"==c?(n.box={left:t.left+e,width:a},t.left+=a+e):(t.right+=a+e,n.box={left:I.width-t.right,width:a}));n.position=c;n.tickLength=b;n.box.padding=A;n.innermost=u}function D(){var n=m.grid.minBorderMargin,a={x:0,y:0},h;if(null==n)for(h=n=0;h<F.length;++h)n=Math.max(n,2*(F[h].points.radius+
F[h].points.lineWidth/2));a.x=a.y=Math.ceil(n);d.each(q(),function(n,h){var d=h.direction;h.reserveSpace&&(a[d]=Math.ceil(Math.max(a[d],("x"==d?h.labelWidth:h.labelHeight)/2)))});t.left=Math.max(a.x,t.left);t.right=Math.max(a.x,t.right);t.top=Math.max(a.y,t.top);t.bottom=Math.max(a.y,t.bottom)}function w(){var n,a=q(),h=m.grid.show;for(n in t){var c=m.grid.margin||0;t[n]="number"==typeof c?c:c[n]||0}l(P.processOffset,[t]);for(n in t)t[n]="object"==typeof m.grid.borderWidth?t[n]+(h?m.grid.borderWidth[n]:
0):t[n]+(h?m.grid.borderWidth:0);d.each(a,function(n,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var h=a.options,d=+(null!=h.min?h.min:a.datamin),c=+(null!=h.max?h.max:a.datamax),b=c-d;if(0==b){if(b=0==c?1:0.01,null==h.min&&(d-=b),null==h.max||null!=h.min)c+=b}else{var z=h.autoscaleMargin;null!=z&&(null==h.min&&(d-=b*z,0>d&&(null!=a.datamin&&0<=a.datamin)&&(d=0)),null==h.max&&(c+=b*z,0<c&&(null!=a.datamax&&0>=a.datamax)&&(c=0)))}a.min=d;a.max=
c});if(h){c=d.grep(a,function(n){return n.reserveSpace});d.each(c,function(n,a){J(a);var h=a.options.ticks,c=[];null==h||"number"==typeof h&&0<h?c=a.tickGenerator(a):h&&(c=d.isFunction(h)?h(a):h);var b;a.ticks=[];for(h=0;h<c.length;++h){var z=null,e=c[h];"object"==typeof e?(b=+e[0],1<e.length&&(z=e[1])):b=+e;null==z&&(z=a.tickFormatter(b,a));isNaN(b)||a.ticks.push({v:b,label:z})}c=a.ticks;a.options.autoscaleMargin&&0<c.length&&(null==a.options.min&&(a.min=Math.min(a.min,c[0].v)),null==a.options.max&&
1<c.length&&(a.max=Math.max(a.max,c[c.length-1].v)));c=a.options;h=a.ticks||[];b=c.labelWidth||0;z=c.labelHeight||0;e=b||"x"==a.direction?Math.floor(I.width/(h.length||1)):null;legacyStyles=a.direction+"Axis "+a.direction+a.n+"Axis";layer="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+legacyStyles;font=c.font||"flot-tick-label tickLabel";for(var m=0;m<h.length;++m){var p=h[m];p.label&&(p=I.getTextInfo(layer,p.label,font,null,e),b=Math.max(b,p.width),z=Math.max(z,p.height))}a.labelWidth=
c.labelWidth||b;a.labelHeight=c.labelHeight||z});for(n=c.length-1;0<=n;--n)Y(c[n]);D();d.each(c,function(n,a){"x"==a.direction?(a.box.left=t.left-a.labelWidth/2,a.box.width=I.width-t.left-t.right+a.labelWidth):(a.box.top=t.top-a.labelHeight/2,a.box.height=I.height-t.bottom-t.top+a.labelHeight)})}T=I.width-t.left-t.right;Q=I.height-t.bottom-t.top;d.each(a,function(n,a){B(a)});h&&K();C()}function J(n){var a=n.options,h;h="number"==typeof a.ticks&&0<a.ticks?a.ticks:0.3*Math.sqrt("x"==n.direction?I.width:
I.height);h=(n.max-n.min)/h;var c=-Math.floor(Math.log(h)/Math.LN10),b=a.tickDecimals;null!=b&&c>b&&(c=b);var e=Math.pow(10,-c),m=h/e,p;1.5>m?p=1:3>m?(p=2,2.25<m&&(null==b||c+1<=b)&&(p=2.5,++c)):p=7.5>m?5:10;p*=e;null!=a.minTickSize&&p<a.minTickSize&&(p=a.minTickSize);n.delta=h;n.tickDecimals=Math.max(0,null!=b?b:c);n.tickSize=a.tickSize||p;if("time"==a.mode&&!n.tickGenerator)throw Error("Time mode requires the flot.time plugin.");n.tickGenerator||(n.tickGenerator=function(a){var n=[],c=a.tickSize*
Math.floor(a.min/a.tickSize),h=0,d=Number.NaN,b;do b=d,d=c+h*a.tickSize,n.push(d),++h;while(d<a.max&&d!=b);return n},n.tickFormatter=function(a,n){var h=n.tickDecimals?Math.pow(10,n.tickDecimals):1,c=""+Math.round(a*h)/h;if(null!=n.tickDecimals){var d=c.indexOf("."),d=-1==d?0:c.length-d-1;if(d<n.tickDecimals)return(d?c:c+".")+(""+h).substr(1,n.tickDecimals-d)}return c});d.isFunction(a.tickFormatter)&&(n.tickFormatter=function(n,c){return""+a.tickFormatter(n,c)});if(null!=a.alignTicksWithAxis){var u=
("x"==n.direction?L:R)[a.alignTicksWithAxis-1];u&&(u.used&&u!=n)&&(h=n.tickGenerator(n),0<h.length&&(null==a.min&&(n.min=Math.min(n.min,h[0])),null==a.max&&1<h.length&&(n.max=Math.max(n.max,h[h.length-1]))),n.tickGenerator=function(a){var n=[],c,h;for(h=0;h<u.ticks.length;++h)c=(u.ticks[h].v-u.min)/(u.max-u.min),c=a.min+c*(a.max-a.min),n.push(c);return n},n.mode||null!=a.tickDecimals||(h=Math.max(0,-Math.floor(Math.log(n.delta)/Math.LN10)+1),c=n.tickGenerator(n),1<c.length&&/\..*0$/.test((c[1]-c[0]).toFixed(h))||
(n.tickDecimals=h)))}}function r(){I.clear();l(P.drawBackground,[p]);var a=m.grid;a.show&&a.backgroundColor&&(p.save(),p.translate(t.left,t.top),p.fillStyle=oa(m.grid.backgroundColor,Q,0,"rgba(255, 255, 255, 0)"),p.fillRect(0,0,T,Q),p.restore());a.show&&!a.aboveData&&U();for(var c=0;c<F.length;++c){l(P.drawSeries,[p,F[c]]);var h=F[c];h.lines.show&&aa(h);h.bars.show&&ga(h);h.points.show&&ba(h)}l(P.draw,[p]);a.show&&a.aboveData&&U();I.render();da()}function x(a,c){for(var h,d,b,e,m=q(),p=0;p<m.length;++p)if(h=
m[p],h.direction==c&&(e=c+h.n+"axis",a[e]||1!=h.n||(e=c+"axis"),a[e])){d=a[e].from;b=a[e].to;break}a[e]||(h="x"==c?L[0]:R[0],d=a[c+"1"],b=a[c+"2"]);null!=d&&(null!=b&&d>b)&&(e=d,d=b,b=e);return{from:d,to:b,axis:h}}function U(){var a,c,h;p.save();p.translate(t.left,t.top);if(h=m.grid.markings)for(d.isFunction(h)&&(c=G.getAxes(),c.xmin=c.xaxis.min,c.xmax=c.xaxis.max,c.ymin=c.yaxis.min,c.ymax=c.yaxis.max,h=h(c)),a=0;a<h.length;++a){c=h[a];var b=x(c,"x"),e=x(c,"y");null==b.from&&(b.from=b.axis.min);null==
b.to&&(b.to=b.axis.max);null==e.from&&(e.from=e.axis.min);null==e.to&&(e.to=e.axis.max);b.to<b.axis.min||(b.from>b.axis.max||e.to<e.axis.min||e.from>e.axis.max)||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),e.from=Math.max(e.from,e.axis.min),e.to=Math.min(e.to,e.axis.max),b.from==b.to&&e.from==e.to)||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),e.from=e.axis.p2c(e.from),e.to=e.axis.p2c(e.to),b.from==b.to||e.from==e.to?(p.beginPath(),p.strokeStyle=c.color||m.grid.markingsColor,
p.lineWidth=c.lineWidth||m.grid.markingsLineWidth,p.moveTo(b.from,e.from),p.lineTo(b.to,e.to),p.stroke()):(p.fillStyle=c.color||m.grid.markingsColor,p.fillRect(b.from,e.to,b.to-b.from,e.from-e.to)))}c=q();h=m.grid.borderWidth;for(b=0;b<c.length;++b){e=c[b];a=e.box;var l=e.tickLength,A,g,u,k;if(e.show&&0!=e.ticks.length){p.lineWidth=1;"x"==e.direction?(A=0,g="full"==l?"top"==e.position?0:Q:a.top-t.top+("top"==e.position?a.height:0)):(g=0,A="full"==l?"left"==e.position?0:T:a.left-t.left+("left"==e.position?
a.width:0));e.innermost||(p.strokeStyle=e.options.color,p.beginPath(),u=k=0,"x"==e.direction?u=T+1:k=Q+1,1==p.lineWidth&&("x"==e.direction?g=Math.floor(g)+0.5:A=Math.floor(A)+0.5),p.moveTo(A,g),p.lineTo(A+u,g+k),p.stroke());p.strokeStyle=e.options.tickColor;p.beginPath();for(a=0;a<e.ticks.length;++a){var f=e.ticks[a].v;u=k=0;isNaN(f)||(f<e.min||f>e.max||"full"==l&&("object"==typeof h&&0<h[e.position]||0<h)&&(f==e.min||f==e.max))||("x"==e.direction?(A=e.p2c(f),k="full"==l?-Q:l,"top"==e.position&&(k=
-k)):(g=e.p2c(f),u="full"==l?-T:l,"left"==e.position&&(u=-u)),1==p.lineWidth&&("x"==e.direction?A=Math.floor(A)+0.5:g=Math.floor(g)+0.5),p.moveTo(A,g),p.lineTo(A+u,g+k))}p.stroke()}}h&&(a=m.grid.borderColor,"object"==typeof h||"object"==typeof a?("object"!==typeof h&&(h={top:h,right:h,bottom:h,left:h}),"object"!==typeof a&&(a={top:a,right:a,bottom:a,left:a}),0<h.top&&(p.strokeStyle=a.top,p.lineWidth=h.top,p.beginPath(),p.moveTo(0-h.left,0-h.top/2),p.lineTo(T,0-h.top/2),p.stroke()),0<h.right&&(p.strokeStyle=
a.right,p.lineWidth=h.right,p.beginPath(),p.moveTo(T+h.right/2,0-h.top),p.lineTo(T+h.right/2,Q),p.stroke()),0<h.bottom&&(p.strokeStyle=a.bottom,p.lineWidth=h.bottom,p.beginPath(),p.moveTo(T+h.right,Q+h.bottom/2),p.lineTo(0,Q+h.bottom/2),p.stroke()),0<h.left&&(p.strokeStyle=a.left,p.lineWidth=h.left,p.beginPath(),p.moveTo(0-h.left/2,Q+h.bottom),p.lineTo(0-h.left/2,0),p.stroke())):(p.lineWidth=h,p.strokeStyle=m.grid.borderColor,p.strokeRect(-h/2,-h/2,T+h,Q+h)));p.restore()}function K(){d.each(q(),function(a,
c){if(c.show&&0!=c.ticks.length){var h=c.box,b="flot-"+c.direction+"-axis flot-"+c.direction+c.n+"-axis "+(c.direction+"Axis "+c.direction+c.n+"Axis"),d=c.options.font||"flot-tick-label tickLabel",e,m,p,l,g;I.removeText(b);for(var k=0;k<c.ticks.length;++k)e=c.ticks[k],!e.label||(e.v<c.min||e.v>c.max)||("x"==c.direction?(l="center",m=t.left+c.p2c(e.v),"bottom"==c.position?p=h.top+h.padding:(p=h.top+h.height-h.padding,g="bottom")):(g="middle",p=t.top+c.p2c(e.v),"left"==c.position?(m=h.left+h.width-
h.padding,l="right"):m=h.left+h.padding),I.addText(b,m,p,e.label,d,null,null,l,g))}})}function aa(a){function c(a,n,h,d,b){var e=a.points;a=a.pointsize;var m=null,z=null;p.beginPath();for(var l=a;l<e.length;l+=a){var g=e[l-a],k=e[l-a+1],f=e[l],r=e[l+1];if(null!=g&&null!=f){if(k<=r&&k<b.min){if(r<b.min)continue;g=(b.min-k)/(r-k)*(f-g)+g;k=b.min}else if(r<=k&&r<b.min){if(k<b.min)continue;f=(b.min-k)/(r-k)*(f-g)+g;r=b.min}if(k>=r&&k>b.max){if(r>b.max)continue;g=(b.max-k)/(r-k)*(f-g)+g;k=b.max}else if(r>=
k&&r>b.max){if(k>b.max)continue;f=(b.max-k)/(r-k)*(f-g)+g;r=b.max}if(g<=f&&g<d.min){if(f<d.min)continue;k=(d.min-g)/(f-g)*(r-k)+k;g=d.min}else if(f<=g&&f<d.min){if(g<d.min)continue;r=(d.min-g)/(f-g)*(r-k)+k;f=d.min}if(g>=f&&g>d.max){if(f>d.max)continue;k=(d.max-g)/(f-g)*(r-k)+k;g=d.max}else if(f>=g&&f>d.max){if(g>d.max)continue;r=(d.max-g)/(f-g)*(r-k)+k;f=d.max}g==m&&k==z||p.moveTo(d.p2c(g)+n,b.p2c(k)+h);m=f;z=r;p.lineTo(d.p2c(f)+n,b.p2c(r)+h)}}p.stroke()}function h(a,c,n){var d=a.points;a=a.pointsize;
for(var b=Math.min(Math.max(0,n.min),n.max),h=0,e=!1,m=1,g=0,k=0;!(0<a&&h>d.length+a);){var h=h+a,l=d[h-a],z=d[h-a+m],f=d[h],r=d[h+m];if(e){if(0<a&&null!=l&&null==f){k=h;a=-a;m=2;continue}if(0>a&&h==g+a){p.fill();e=!1;a=-a;m=1;h=g=k+a;continue}}if(null!=l&&null!=f){if(l<=f&&l<c.min){if(f<c.min)continue;z=(c.min-l)/(f-l)*(r-z)+z;l=c.min}else if(f<=l&&f<c.min){if(l<c.min)continue;r=(c.min-l)/(f-l)*(r-z)+z;f=c.min}if(l>=f&&l>c.max){if(f>c.max)continue;z=(c.max-l)/(f-l)*(r-z)+z;l=c.max}else if(f>=l&&
f>c.max){if(l>c.max)continue;r=(c.max-l)/(f-l)*(r-z)+z;f=c.max}e||(p.beginPath(),p.moveTo(c.p2c(l),n.p2c(b)),e=!0);if(z>=n.max&&r>=n.max)p.lineTo(c.p2c(l),n.p2c(n.max)),p.lineTo(c.p2c(f),n.p2c(n.max));else if(z<=n.min&&r<=n.min)p.lineTo(c.p2c(l),n.p2c(n.min)),p.lineTo(c.p2c(f),n.p2c(n.min));else{var Z=l,q=f;z<=r&&z<n.min&&r>=n.min?(l=(n.min-z)/(r-z)*(f-l)+l,z=n.min):r<=z&&(r<n.min&&z>=n.min)&&(f=(n.min-z)/(r-z)*(f-l)+l,r=n.min);z>=r&&z>n.max&&r<=n.max?(l=(n.max-z)/(r-z)*(f-l)+l,z=n.max):r>=z&&(r>
n.max&&z<=n.max)&&(f=(n.max-z)/(r-z)*(f-l)+l,r=n.max);l!=Z&&p.lineTo(c.p2c(Z),n.p2c(z));p.lineTo(c.p2c(l),n.p2c(z));p.lineTo(c.p2c(f),n.p2c(r));f!=q&&(p.lineTo(c.p2c(f),n.p2c(r)),p.lineTo(c.p2c(q),n.p2c(r)))}}}}p.save();p.translate(t.left,t.top);p.lineJoin="round";var b=a.lines.lineWidth,d=a.shadowSize;if(0<b&&0<d){p.lineWidth=d;p.strokeStyle="rgba(0,0,0,0.1)";var e=Math.PI/18;c(a.datapoints,Math.sin(e)*(b/2+d/2),Math.cos(e)*(b/2+d/2),a.xaxis,a.yaxis);p.lineWidth=d/2;c(a.datapoints,Math.sin(e)*(b/
2+d/4),Math.cos(e)*(b/2+d/4),a.xaxis,a.yaxis)}p.lineWidth=b;p.strokeStyle=a.color;if(d=M(a.lines,a.color,0,Q))p.fillStyle=d,h(a.datapoints,a.xaxis,a.yaxis);0<b&&c(a.datapoints,0,0,a.xaxis,a.yaxis);p.restore()}function ba(a){function c(a,n,d,b,h,e,m,l){var z=a.points;a=a.pointsize;for(var g=0;g<z.length;g+=a){var f=z[g],k=z[g+1];null==f||(f<e.min||f>e.max||k<m.min||k>m.max)||(p.beginPath(),f=e.p2c(f),k=m.p2c(k)+b,"circle"==l?p.arc(f,k,n,0,h?Math.PI:2*Math.PI,!1):l(p,f,k,n,h),p.closePath(),d&&(p.fillStyle=
d,p.fill()),p.stroke())}}p.save();p.translate(t.left,t.top);var d=a.points.lineWidth,b=a.shadowSize,e=a.points.radius,m=a.points.symbol;0==d&&(d=1E-4);0<d&&0<b&&(b/=2,p.lineWidth=b,p.strokeStyle="rgba(0,0,0,0.1)",c(a.datapoints,e,null,b+b/2,!0,a.xaxis,a.yaxis,m),p.strokeStyle="rgba(0,0,0,0.2)",c(a.datapoints,e,null,b/2,!0,a.xaxis,a.yaxis,m));p.lineWidth=d;p.strokeStyle=a.color;c(a.datapoints,e,M(a.points,a.color),0,!1,a.xaxis,a.yaxis,m);p.restore()}function ea(a,c,d,b,e,m,l,f,g,p,k,r){var q,x,t,s;
k?(s=x=t=!0,q=!1,k=d,d=c+b,e=c+e,a<k&&(c=a,a=k,k=c,q=!0,x=!1)):(q=x=t=!0,s=!1,k=a+b,a+=e,e=d,d=c,d<e&&(c=d,d=e,e=c,s=!0,t=!1));a<f.min||(k>f.max||d<g.min||e>g.max)||(k<f.min&&(k=f.min,q=!1),a>f.max&&(a=f.max,x=!1),e<g.min&&(e=g.min,s=!1),d>g.max&&(d=g.max,t=!1),k=f.p2c(k),e=g.p2c(e),a=f.p2c(a),d=g.p2c(d),l&&(p.beginPath(),p.moveTo(k,e),p.lineTo(k,d),p.lineTo(a,d),p.lineTo(a,e),p.fillStyle=l(e,d),p.fill()),0<r&&(q||x||t||s)&&(p.beginPath(),p.moveTo(k,e+m),q?p.lineTo(k,d+m):p.moveTo(k,d+m),t?p.lineTo(a,
d+m):p.moveTo(a,d+m),x?p.lineTo(a,e+m):p.moveTo(a,e+m),s?p.lineTo(k,e+m):p.moveTo(k,e+m),p.stroke()))}function ga(a){p.save();p.translate(t.left,t.top);p.lineWidth=a.bars.lineWidth;p.strokeStyle=a.color;var c;switch(a.bars.align){case "left":c=0;break;case "right":c=-a.bars.barWidth;break;case "center":c=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(c,d,b,e,m,l,f){var g=c.points;c=c.pointsize;for(var k=0;k<g.length;k+=c)null!=g[k]&&ea(g[k],g[k+1],
g[k+2],d,b,e,m,l,f,p,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,c,c+a.bars.barWidth,0,a.bars.fill?function(c,d){return M(a.bars,a.color,c,d)}:null,a.xaxis,a.yaxis);p.restore()}function M(a,c,b,e){var m=a.fill;if(!m)return null;if(a.fillColor)return oa(a.fillColor,b,e,c);a=d.color.parse(c);a.a="number"==typeof m?m:0.4;a.normalize();return a.toString()}function C(){a.find(".legend").remove();if(m.legend.show){for(var b=[],e=[],h=!1,g=m.legend.labelFormatter,l,k,f=0;f<F.length;++f)l=F[f],l.label&&
(k=g?g(l.label,l):l.label)&&e.push({label:k,color:l.color});if(m.legend.sorted)if(d.isFunction(m.legend.sorted))e.sort(m.legend.sorted);else if("reverse"==m.legend.sorted)e.reverse();else{var p="descending"!=m.legend.sorted;e.sort(function(a,c){return a.label==c.label?0:a.label<c.label!=p?1:-1})}for(f=0;f<e.length;++f)g=e[f],0==f%m.legend.noColumns&&(h&&b.push("</tr>"),b.push("<tr>"),h=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+m.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
g.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+g.label+"</td>");h&&b.push("</tr>");0!=b.length&&(e='<table style="font-size:smaller;color:'+m.grid.color+'">'+b.join("")+"</table>",null!=m.legend.container?d(m.legend.container).html(e):(b="",h=m.legend.position,f=m.legend.margin,null==f[0]&&(f=[f,f]),"n"==h.charAt(0)?b+="top:"+(f[1]+t.top)+"px;":"s"==h.charAt(0)&&(b+="bottom:"+(f[1]+t.bottom)+"px;"),"e"==h.charAt(1)?b+="right:"+(f[0]+t.right)+"px;":"w"==h.charAt(1)&&(b+="left:"+
(f[0]+t.left)+"px;"),e=d('<div class="legend">'+e.replace('style="','style="position:absolute;'+b+";")+"</div>").appendTo(a),0!=m.legend.backgroundOpacity&&(h=m.legend.backgroundColor,null==h&&(h=(h=m.grid.backgroundColor)&&"string"==typeof h?d.color.parse(h):d.color.extract(e,"background-color"),h.a=1,h=h.toString()),f=e.children(),d('<div style="position:absolute;width:'+f.width()+"px;height:"+f.height()+"px;"+b+"background-color:"+h+';"> </div>').prependTo(e).css("opacity",m.legend.backgroundOpacity))))}}
function pa(a){m.grid.hoverable&&V("plothover",a,function(a){return!1!=a.hoverable})}function S(a){m.grid.hoverable&&V("plothover",a,function(a){return!1})}function qa(a){V("plotclick",a,function(a){return!1!=a.clickable})}function V(d,b,e){var f=W.offset(),l=b.pageX-f.left-t.left,g=b.pageY-f.top-t.top,k=s({left:l,top:g});k.pageX=b.pageX;k.pageY=b.pageY;b=m.grid.mouseActiveRadius;var p=b*b+1,r=null,q,x,y;for(q=F.length-1;0<=q;--q)if(e(F[q])){var v=F[q],w=v.xaxis,U=v.yaxis,C=v.datapoints.points,ba=
w.c2p(l),aa=U.c2p(g),ga=b/w.scale,ea=b/U.scale;y=v.datapoints.pointsize;w.options.inverseTransform&&(ga=Number.MAX_VALUE);U.options.inverseTransform&&(ea=Number.MAX_VALUE);if(v.lines.show||v.points.show)for(x=0;x<C.length;x+=y){var B=C[x],K=C[x+1];null==B||(B-ba>ga||B-ba<-ga||K-aa>ea||K-aa<-ea)||(B=Math.abs(w.p2c(B)-l),K=Math.abs(U.p2c(K)-g),K=B*B+K*K,K<p&&(p=K,r=[q,x/y]))}if(v.bars.show&&!r)for(w="left"==v.bars.align?0:-v.bars.barWidth/2,v=w+v.bars.barWidth,x=0;x<C.length;x+=y)B=C[x],K=C[x+1],U=
C[x+2],null!=B&&(F[q].bars.horizontal?ba<=Math.max(U,B)&&ba>=Math.min(U,B)&&aa>=K+w&&aa<=K+v:ba>=B+w&&ba<=B+v&&aa>=Math.min(U,K)&&aa<=Math.max(U,K))&&(r=[q,x/y])}r?(q=r[0],x=r[1],y=F[q].datapoints.pointsize,e={datapoint:F[q].datapoints.points.slice(x*y,(x+1)*y),dataIndex:x,series:F[q],seriesIndex:q}):e=null;e&&(e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+f.left+t.left,10),e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+f.top+t.top,10));if(m.grid.autoHighlight){for(f=0;f<X.length;++f)l=
X[f],l.auto!=d||e&&l.series==e.series&&l.point[0]==e.datapoint[0]&&l.point[1]==e.datapoint[1]||ia(l.series,l.point);e&&ja(e.series,e.datapoint,d)}a.trigger(d,[k,e])}function da(){var a=m.interaction.redrawOverlayInterval;-1==a?ka():ha||(ha=setTimeout(ka,a))}function ka(){ha=null;N.save();fa.clear();N.translate(t.left,t.top);var a,c;for(a=0;a<X.length;++a)if(c=X[a],c.series.bars.show)na(c.series,c.point);else{var b=c.series,e=c.point;c=e[0];var e=e[1],f=b.xaxis,m=b.yaxis,g="string"===typeof b.highlightColor?
b.highlightColor:d.color.parse(b.color).scale("a",0.5).toString();if(!(c<f.min||c>f.max||e<m.min||e>m.max)){var k=b.points.radius+b.points.lineWidth/2;N.lineWidth=k;N.strokeStyle=g;g=1.5*k;c=f.p2c(c);e=m.p2c(e);N.beginPath();"circle"==b.points.symbol?N.arc(c,e,g,0,2*Math.PI,!1):b.points.symbol(N,c,e,g,!1);N.closePath();N.stroke()}}N.restore();l(P.drawOverlay,[N])}function ja(a,c,b){"number"==typeof a&&(a=F[a]);if("number"==typeof c){var d=a.datapoints.pointsize;c=a.datapoints.points.slice(d*c,d*(c+
1))}d=la(a,c);-1==d?(X.push({series:a,point:c,auto:b}),da()):b||(X[d].auto=!1)}function ia(a,c){if(null==a&&null==c)X=[],da();else{"number"==typeof a&&(a=F[a]);if("number"==typeof c){var b=a.datapoints.pointsize;c=a.datapoints.points.slice(b*c,b*(c+1))}b=la(a,c);-1!=b&&(X.splice(b,1),da())}}function la(a,c){for(var b=0;b<X.length;++b){var d=X[b];if(d.series==a&&d.point[0]==c[0]&&d.point[1]==c[1])return b}return-1}function na(a,c){var b="string"===typeof a.highlightColor?a.highlightColor:d.color.parse(a.color).scale("a",
0.5).toString(),e="left"==a.bars.align?0:-a.bars.barWidth/2;N.lineWidth=a.bars.lineWidth;N.strokeStyle=b;ea(c[0],c[1],c[2]||0,e,e+a.bars.barWidth,0,function(){return b},a.xaxis,a.yaxis,N,a.bars.horizontal,a.bars.lineWidth)}function oa(a,c,b,e){if("string"==typeof a)return a;c=p.createLinearGradient(0,b,0,c);b=0;for(var f=a.colors.length;b<f;++b){var m=a.colors[b];if("string"!=typeof m){var l=d.color.parse(e);null!=m.brightness&&(l=l.scale("rgb",m.brightness));null!=m.opacity&&(l.a*=m.opacity);m=l.toString()}c.addColorStop(b/
(f-1),m)}return c}var F=[],m={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,
alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,
margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},I=null,fa=null,W=null,p=null,N=null,L=[],R=[],t={left:0,right:0,top:0,bottom:0},T=0,Q=0,P={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},G=this;
G.setData=k;G.setupGrid=w;G.draw=r;G.getPlaceholder=function(){return a};G.getCanvas=function(){return I.element};G.getPlotOffset=function(){return t};G.width=function(){return T};G.height=function(){return Q};G.offset=function(){var a=W.offset();a.left+=t.left;a.top+=t.top;return a};G.getData=function(){return F};G.getAxes=function(){var a={};d.each(L.concat(R),function(c,b){b&&(a[b.direction+(1!=b.n?b.n:"")+"axis"]=b)});return a};G.getXAxes=function(){return L};G.getYAxes=function(){return R};G.c2p=
s;G.p2c=function(a){var c={},b,d,e;for(b=0;b<L.length;++b)if((d=L[b])&&d.used&&(e="x"+d.n,null==a[e]&&1==d.n&&(e="x"),null!=a[e])){c.left=d.p2c(a[e]);break}for(b=0;b<R.length;++b)if((d=R[b])&&d.used&&(e="y"+d.n,null==a[e]&&1==d.n&&(e="y"),null!=a[e])){c.top=d.p2c(a[e]);break}return c};G.getOptions=function(){return m};G.highlight=ja;G.unhighlight=ia;G.triggerRedrawOverlay=da;G.pointOffset=function(a){return{left:parseInt(L[f(a,"x")-1].p2c(+a.x)+t.left,10),top:parseInt(R[f(a,"y")-1].p2c(+a.y)+t.top,
10)}};G.shutdown=function(){ha&&clearTimeout(ha);W.unbind("mousemove",pa);W.unbind("mouseleave",S);W.unbind("click",qa);l(P.shutdown,[W])};G.resize=function(){var b=a.width(),d=a.height();I.resize(b,d);fa.resize(b,d)};G.hooks=P;(function(){for(var a={Canvas:E},c=0;c<g.length;++c){var b=g[c];b.init(G,a);b.options&&d.extend(!0,m,b.options)}})(G);(function(b){d.extend(!0,m,b);b&&b.colors&&(m.colors=b.colors);null==m.xaxis.color&&(m.xaxis.color=d.color.parse(m.grid.color).scale("a",0.22).toString());
null==m.yaxis.color&&(m.yaxis.color=d.color.parse(m.grid.color).scale("a",0.22).toString());null==m.xaxis.tickColor&&(m.xaxis.tickColor=m.grid.tickColor||m.xaxis.color);null==m.yaxis.tickColor&&(m.yaxis.tickColor=m.grid.tickColor||m.yaxis.color);null==m.grid.borderColor&&(m.grid.borderColor=m.grid.color);null==m.grid.tickColor&&(m.grid.tickColor=d.color.parse(m.grid.color).scale("a",0.22).toString());var e,h,f={style:a.css("font-style"),size:Math.round(0.8*(+a.css("font-size").replace("px","")||13)),
variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};f.lineHeight=1.15*f.size;h=m.xaxes.length||1;for(b=0;b<h;++b)(e=m.xaxes[b])&&!e.tickColor&&(e.tickColor=e.color),e=d.extend(!0,{},m.xaxis,e),m.xaxes[b]=e,e.font&&(e.font=d.extend({},f,e.font),e.font.color||(e.font.color=e.color));h=m.yaxes.length||1;for(b=0;b<h;++b)(e=m.yaxes[b])&&!e.tickColor&&(e.tickColor=e.color),e=d.extend(!0,{},m.yaxis,e),m.yaxes[b]=e,e.font&&(e.font=d.extend({},f,e.font),e.font.color||(e.font.color=
e.color));m.xaxis.noTicks&&null==m.xaxis.ticks&&(m.xaxis.ticks=m.xaxis.noTicks);m.yaxis.noTicks&&null==m.yaxis.ticks&&(m.yaxis.ticks=m.yaxis.noTicks);m.x2axis&&(m.xaxes[1]=d.extend(!0,{},m.xaxis,m.x2axis),m.xaxes[1].position="top");m.y2axis&&(m.yaxes[1]=d.extend(!0,{},m.yaxis,m.y2axis),m.yaxes[1].position="right");m.grid.coloredAreas&&(m.grid.markings=m.grid.coloredAreas);m.grid.coloredAreasColor&&(m.grid.markingsColor=m.grid.coloredAreasColor);m.lines&&d.extend(!0,m.series.lines,m.lines);m.points&&
d.extend(!0,m.series.points,m.points);m.bars&&d.extend(!0,m.series.bars,m.bars);null!=m.shadowSize&&(m.series.shadowSize=m.shadowSize);null!=m.highlightColor&&(m.series.highlightColor=m.highlightColor);for(b=0;b<m.xaxes.length;++b)y(L,b+1).options=m.xaxes[b];for(b=0;b<m.yaxes.length;++b)y(R,b+1).options=m.yaxes[b];for(var g in P)m.hooks[g]&&m.hooks[g].length&&(P[g]=P[g].concat(m.hooks[g]));l(P.processOptions,[m])})(b);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();
"static"==a.css("position")&&a.css("position","relative");I=new E("flot-base",a);fa=new E("flot-overlay",a);p=I.context;N=fa.context;W=d(fa.element).unbind();var b=a.data("plot");b&&(b.shutdown(),fa.clear());a.data("plot",G)})();k(e);w();r();m.grid.hoverable&&(W.mousemove(pa),W.bind("mouseleave",S));m.grid.clickable&&W.click(qa);l(P.bindEvents,[W]);var X=[],ha=null}var a=Object.prototype.hasOwnProperty;E.prototype.resize=function(a,d){if(0>=a||0>=d)throw Error("Invalid dimensions for plot, width = "+
a+", height = "+d);var b=this.element,g=this.context,l=this.pixelRatio;this.width!=a&&(b.width=a*l,b.style.width=a+"px",this.width=a);this.height!=d&&(b.height=d*l,b.style.height=d+"px",this.height=d);g.restore();g.save();g.scale(l,l)};E.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};E.prototype.render=function(){var c=this._textCache,d;for(d in c)if(a.call(c,d)){var b=this.getTextLayer(d),g=c[d];b.hide();for(var l in g)if(a.call(g,l)){var k=g[l],f;for(f in k)if(a.call(k,
f)){for(var q=k[f].positions,s=0,y;y=q[s];s++)y.active?y.rendered||(b.append(y.element),y.rendered=!0):(q.splice(s--,1),y.rendered&&y.element.detach());0==q.length&&delete k[f]}}b.show()}};E.prototype.getTextLayer=function(a){var e=this.text[a];null==e&&(null==this.textContainer&&(this.textContainer=d("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),e=this.text[a]=d("<div></div>").addClass(a).css({position:"absolute",
top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer));return e};E.prototype.getTextInfo=function(a,e,b,g,l){var k,f;e=""+e;g="object"===typeof b?b.style+" "+b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;k=this._textCache[a];null==k&&(k=this._textCache[a]={});f=k[g];null==f&&(f=k[g]={});k=f[e];null==k&&(a=d("<div></div>").html(e).css({position:"absolute","max-width":l,top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof b?a.css({font:g,color:b.color}):"string"===
typeof b&&a.addClass(b),k=f[e]={width:a.outerWidth(!0),height:a.outerHeight(!0),element:a,positions:[]},a.detach());return k};E.prototype.addText=function(a,d,b,g,l,k,f,q,s){a=this.getTextInfo(a,g,l,k,f);g=a.positions;"center"==q?d-=a.width/2:"right"==q&&(d-=a.width);"middle"==s?b-=a.height/2:"bottom"==s&&(b-=a.height);for(s=0;l=g[s];s++)if(l.x==d&&l.y==b){l.active=!0;return}l={active:!0,rendered:!1,element:g.length?a.element.clone():a.element,x:d,y:b};g.push(l);l.element.css({top:Math.round(b),left:Math.round(d),
"text-align":q})};E.prototype.removeText=function(c,d,b,g,l,k){if(null==g){if(d=this._textCache[c],null!=d)for(var f in d)if(a.call(d,f)){b=d[f];for(var q in b)if(a.call(b,q))for(c=b[q].positions,g=0;l=c[g];g++)l.active=!1}}else for(c=this.getTextInfo(c,g,l,k).positions,g=0;l=c[g];g++)l.x==d&&l.y==b&&(l.active=!1)};d.plot=function(a,e,b){return new D(d(a),e,b,d.plot.plugins)};d.plot.version="0.8.1";d.plot.plugins=[];d.fn.plot=function(a,e){return this.each(function(){d.plot(this,a,e)})}})(jQuery);
(function(d){var E=10,D=0.95,a={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:0.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(a,d){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+d.color+";'>"+a+"<br/>"+Math.round(d.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};d.plot.plugins.push({init:function(c){function e(b){for(var c=
0,e=0,f=0,l=a.series.pie.combine.color,g=[],k=0;k<b.length;++k){var q=b[k].data;d.isArray(q)&&1==q.length&&(q=q[0]);d.isArray(q)?!isNaN(parseFloat(q[1]))&&isFinite(q[1])?q[1]=+q[1]:q[1]=0:q=!isNaN(parseFloat(q))&&isFinite(q)?[1,+q]:[1,0];b[k].data=[q]}for(k=0;k<b.length;++k)c+=b[k].data[0][1];for(k=0;k<b.length;++k)q=b[k].data[0][1],q/c<=a.series.pie.combine.threshold&&(e+=q,f++,l||(l=b[k].color));for(k=0;k<b.length;++k)q=b[k].data[0][1],(2>f||q/c>a.series.pie.combine.threshold)&&g.push({data:[[1,
q]],color:b[k].color,label:b[k].label,angle:2*q*Math.PI/c,percent:q/(c/100)});1<f&&g.push({data:[[1,e]],color:l,label:a.series.pie.combine.label,angle:2*e*Math.PI/c,percent:e/(c/100)});return g}function b(b,c){function e(){w.clearRect(0,0,l,q);y.children().filter(".pieLabel, .pieLabelBackground").remove()}function f(){var b=a.series.pie.shadow.left,c=a.series.pie.shadow.top,d=a.series.pie.shadow.alpha,e=1<a.series.pie.radius?a.series.pie.radius:v*a.series.pie.radius;if(!(e>=l/2-b||e*a.series.pie.tilt>=
q/2-c||10>=e)){w.save();w.translate(b,c);w.globalAlpha=d;w.fillStyle="#000";w.translate(B,Y);w.scale(1,a.series.pie.tilt);for(b=1;10>=b;b++)w.beginPath(),w.arc(0,0,e,0,2*Math.PI,!1),w.fill(),e-=b;w.restore()}}function k(){function b(a,c,d){0>=a||isNaN(a)||(d?w.fillStyle=c:(w.strokeStyle=c,w.lineJoin="round"),w.beginPath(),1E-9<Math.abs(a-2*Math.PI)&&w.moveTo(0,0),w.arc(0,0,f,r,r+a/2,!1),w.arc(0,0,f,r+a/2,r+a,!1),w.closePath(),r+=a,d?w.fill():w.stroke())}function c(){for(var b=e,f=1<a.series.pie.label.radius?
a.series.pie.label.radius:v*a.series.pie.label.radius,k=0;k<M.length;++k){if(M[k].percent>=100*a.series.pie.label.threshold){var g;g=M[k];var r=b,x=k;if(0==g.data[0][1])g=!0;else{var s=a.legend.labelFormatter,m=void 0,w=a.series.pie.label.formatter,m=s?s(g.label,g):g.label;w&&(m=w(m,g));s=(r+g.angle+r)/2;r=B+Math.round(Math.cos(s)*f);s=Y+Math.round(Math.sin(s)*f)*a.series.pie.tilt;y.append("<span class='pieLabel' id='pieLabel"+x+"' style='position:absolute;top:"+s+"px;left:"+r+"px;'>"+m+"</span>");
x=y.children("#pieLabel"+x);m=s-x.height()/2;s=r-x.width()/2;x.css("top",m);x.css("left",s);0<0-m||0<0-s||0>q-(m+x.height())||0>l-(s+x.width())?g=!1:(0!=a.series.pie.label.background.opacity&&(r=a.series.pie.label.background.color,null==r&&(r=g.color),g="top:"+m+"px;left:"+s+"px;",d("<div class='pieLabelBackground' style='position:absolute;width:"+x.width()+"px;height:"+x.height()+"px;"+g+"background-color:"+r+";'></div>").css("opacity",a.series.pie.label.background.opacity).insertBefore(x)),g=!0)}if(!g)return!1}b+=
M[k].angle}return!0}var e=Math.PI*a.series.pie.startAngle,f=1<a.series.pie.radius?a.series.pie.radius:v*a.series.pie.radius;w.save();w.translate(B,Y);w.scale(1,a.series.pie.tilt);w.save();for(var r=e,x=0;x<M.length;++x)M[x].startAngle=r,b(M[x].angle,M[x].color,!0);w.restore();if(0<a.series.pie.stroke.width){w.save();w.lineWidth=a.series.pie.stroke.width;r=e;for(x=0;x<M.length;++x)b(M[x].angle,a.series.pie.stroke.color,!1);w.restore()}g(w);w.restore();return a.series.pie.label.show?c():!0}if(y){var l=
b.getPlaceholder().width(),q=b.getPlaceholder().height(),s=y.children().filter(".legend").children().width()||0;w=c;$=!1;v=Math.min(l,q/a.series.pie.tilt)/2;Y=q/2+a.series.pie.offset.top;B=l/2;B="auto"==a.series.pie.offset.left?a.legend.position.match("w")?B+s/2:B-s/2:B+a.series.pie.offset.left;B<v?B=v:B>l-v&&(B=l-v);var M=b.getData(),s=0;do 0<s&&(v*=D),s+=1,e(),0.8>=a.series.pie.tilt&&f();while(!k()&&s<E);s>=E&&(e(),y.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));
b.setSeries&&b.insertLegend&&(b.setSeries(M),b.insertLegend())}}function g(b){if(0<a.series.pie.innerRadius){b.save();var c=1<a.series.pie.innerRadius?a.series.pie.innerRadius:v*a.series.pie.innerRadius;b.globalCompositeOperation="destination-out";b.beginPath();b.fillStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.fill();b.closePath();b.restore();b.save();b.beginPath();b.strokeStyle=a.series.pie.stroke.color;b.arc(0,0,c,0,2*Math.PI,!1);b.stroke();b.closePath();b.restore()}}function l(a){f("plothover",
a)}function k(a){f("plotclick",a)}function f(b,d){var e=c.offset(),f=parseInt(d.pageX-e.left);a:{for(var e=parseInt(d.pageY-e.top),g=c.getData(),k=c.getOptions(),k=1<k.series.pie.radius?k.series.pie.radius:v*k.series.pie.radius,l,s,D=0;D<g.length;++D){var C=g[D];if(C.pie.show){w.save();w.beginPath();w.moveTo(0,0);w.arc(0,0,k,C.startAngle,C.startAngle+C.angle/2,!1);w.arc(0,0,k,C.startAngle+C.angle/2,C.startAngle+C.angle,!1);w.closePath();l=f-B;s=e-Y;if(w.isPointInPath){if(w.isPointInPath(f-B,e-Y)){w.restore();
f={datapoint:[C.percent,C.data],dataIndex:0,series:C,seriesIndex:D};break a}}else{var E=k*Math.cos(C.startAngle),S=k*Math.sin(C.startAngle),$=k*Math.cos(C.startAngle+C.angle/4),V=k*Math.sin(C.startAngle+C.angle/4),da=k*Math.cos(C.startAngle+C.angle/2),ka=k*Math.sin(C.startAngle+C.angle/2),ja=k*Math.cos(C.startAngle+C.angle/1.5),ia=k*Math.sin(C.startAngle+C.angle/1.5),la=k*Math.cos(C.startAngle+C.angle),na=k*Math.sin(C.startAngle+C.angle),E=[[0,0],[E,S],[$,V],[da,ka],[ja,ia],[la,na]];l=[l,s];s=!1;
S=-1;$=E.length;for(V=$-1;++S<$;V=S)(E[S][1]<=l[1]&&l[1]<E[V][1]||E[V][1]<=l[1]&&l[1]<E[S][1])&&l[0]<(E[V][0]-E[S][0])*(l[1]-E[S][1])/(E[V][1]-E[S][1])+E[S][0]&&(s=!s);if(s){w.restore();f={datapoint:[C.percent,C.data],dataIndex:0,series:C,seriesIndex:D};break a}}w.restore()}}f=null}if(a.grid.autoHighlight)for(e=0;e<J.length;++e)g=J[e],g.auto!=b||f&&g.series==f.series||(g=g.series,null==g&&(J=[],c.triggerRedrawOverlay()),g=q(g),-1!=g&&(J.splice(g,1),c.triggerRedrawOverlay()));f&&(e=f.series,g=q(e),
-1==g?(J.push({series:e,auto:b}),c.triggerRedrawOverlay()):b||(J[g].auto=!1));y.trigger(b,[{pageX:d.pageX,pageY:d.pageY},f])}function q(a){for(var b=0;b<J.length;++b)if(J[b].series==a)return b;return-1}var s=null,y=null,v=null,B=null,Y=null,$=!1,w=null,J=[];c.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?0.75:1),1<b.series.pie.tilt?
b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});c.hooks.bindEvents.push(function(a,b){var c=a.getOptions();c.series.pie.show&&(c.grid.hoverable&&b.unbind("mousemove").mousemove(l),c.grid.clickable&&b.unbind("click").click(k))});c.hooks.processDatapoints.push(function(b,c,f,g){b.getOptions().series.pie.show&&!$&&($=!0,s=b.getCanvas(),y=d(s).parent(),a=b.getOptions(),b.setData(e(b.getData())))});c.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),
d=1<c.series.pie.radius?c.series.pie.radius:v*c.series.pie.radius;b.save();b.translate(B,Y);b.scale(1,c.series.pie.tilt);for(var e=0;e<J.length;++e){var f=J[e].series;0>=f.angle||isNaN(f.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(f.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,f.startAngle,f.startAngle+f.angle/2,!1),b.arc(0,0,d,f.startAngle+f.angle/2,f.startAngle+f.angle,!1),b.closePath(),b.fill())}g(b);b.restore()}});c.hooks.draw.push(function(a,
c){a.getOptions().series.pie.show&&b(a,c)})},options:a,name:"pie",version:"1.1"})})(jQuery);
(function(d,E){var D=0;d.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3},_create:function(){this.id=D;D+=1;this.chart=this.table=null},_init:function(){var a=this.element;this.table=this.data=null;this.chart_options={currentChart:null,
currentDataIndex:null,currentSeriesIndex:null};this.table_options={hidden:!1};var c=d(a).find(".pt-chart");this.chart=c.length?c.first():null;this.options.renderFilter||this.options.renderOptions?(c=d(a).attr("id"),this.options.renderOptions?(d("#"+c+"-options").show(),this.options.collapseOptions&&(d("#"+c+"-options legend").siblings().toggle(),d("#"+c+"-options legend").children().toggle())):d("#"+c+"-options").hide(),this.options.renderFilter?(d("#"+c+"-filters").show(),this.options.collapseFilter&&
(d("#"+c+"-filters legend").siblings().toggle(),d("#"+c+"-filters legend").children().toggle())):d("#"+c+"-options").hide()):d(a).find(".pt-form-container").hide();this.options.collapseTable&&(this.table_options.hidden=!0,d(a).find(".pt-table").hide(),d(a).find(".pt-show-table").show(),d(a).find(".pt-hide-table").hide());this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var a=this.element,c=null;this._unbindEvents();var e=d(a).find('input[type="hidden"][name="pivotdata"]');
e.length&&(c=JSON.parse(d(e).first().val()));c||(c={empty:!0},d(a).find(".pt-hide-table").hide(),d(a).find(".pt-show-table").hide());this.data=c;c.nodata?(d(a).find(".pt-table").first().empty().append(d('<div class="pt-no-data">'+c.nodata+"</div>")),d(a).find(".pt-hide-table").hide(),d(a).find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();c.empty?d(a).find(".pt-empty").show():d(a).find(".pt-empty").hide();this.options.autoSubmit?d(a).find(".pt-submit").hide():
d(a).find(".pt-submit").show();this._bindEvents();d(a).find(".pt-throbber").hide()},_renderTable:function(){var a=this.element,c=d(a).find(".pt-table").first().empty();this.table=null;var e=this.data;if(!e.empty)if(this.options.renderTable){var b=e.cells,g=e.cols,l=e.rows,k=e.total,f=e.labels,e=this._renderHeader(g,f);e.append(this._renderColumns(g,f));b=this._renderRows(l,g,f,b);g=this._renderFooter(l,g,f,k);l=d('<table class="dataTable display report"/>').append(e).append(b);null!==g&&l.append(g);
this.table=d(l);d(c).append(this.table);this.table_options.hidden?(d(a).find(".pt-show-table").show(),d(a).find(".pt-hide-table").hide()):(d(a).find(".pt-show-table").hide(),d(a).find(".pt-hide-table").show())}else d(a).find(".pt-show-table").hide(),d(a).find(".pt-hide-table").hide()},_renderHeader:function(a,c){var e=d("<tr>");colspan="__other__"==a[a.length-1][0]?a.length-1:a.length;e.append(d('<th scope="col">'+c.layer+"</th>"));(1<a.length||a[0][4])&&e.append(d('<th scope="col" colspan="'+colspan+
'">'+c.cols+"</th>"));this.options.showTotals&&e.append(d('<th class="totals_header row_totals" scope="col" rowspan="2">'+c.total+"</th>"));return d("<thead>").append(e)},_renderColumns:function(a,c){var e=d("<tr>"),b;e.append(d('<th scope="col">'+c.rows+"</th>"));for(var g=1==a.length&&null===a[0][4]?!0:!1,l=0;l<a.length;l++)"__other__"==a[l][0]||g&&this.options.showTotals||(b=g?"":a[l][4],e.append(d('<th scope="col">'+b+"</th>")));return e},_renderRows:function(a,c,e,b){for(var g=d("<tbody>"),l=
this.options.showTotals,k=1==a.length&&null===a[0][4]?!0:!1,f,q,s=0;s<b.length;s++)f=a[s],"__other__"==f[0]||k&&this.options.showTotals||(q=k?"":a[s][4],q=d('<tr class="'+(s%2?"odd":"even")+'"><td>'+q+"</td></tr>").append(this._renderCells(b[s],c,e)),l&&q.append(d("<td>"+f[2]+"</td>")),g.append(q));return g},_renderCells:function(a,c,e){for(var b,g=e.none,l=1==c.length&&null===c[0][4]?!0:!1,k=[],f,q,s=0;s<a.length;s++)if(!("__other__"==c[s][0]||l&&this.options.showTotals)){b=a[s];e=b.items;f=d("<td>");
if(null===e)q=d('<div class="pt-cell-value">'+g+"</div>");else if(d.isArray(e)){q=d('<div class="pt-cell-value">');list=d("<ul>");for(var y=0;y<e.length;y++)list.append(d("<li>"+e[y]+"</li>"));q.append(list)}else q=d('<div class="pt-cell-value">'+e+"</div>");f.append(q);b=b.keys;e&&(b&&b.length)&&f.data("records",b).append(d('<div class="pt-cell-zoom"></div>'));k.push(f)}return k},_renderFooter:function(a,c,e,b){var g=1==c.length&&null===c[0][4]?!0:!1;if(this.options.showTotals){var l,k;k=l=0;for(len=
a.length;l<len;l++)"__other__"!=a[l][0]&&k++;a=d('<tr class="'+(k%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+e.total+"</th></tr>");for(l=0;l<c.length;l++)"__other__"==c[l][0]||g||a.append(d("<td>"+c[l][2]+"</td>"));a.append(d("<td>"+b+"</td>"));return d("<tfoot>").append(a)}return null},_renderChartOptions:function(){var a=this.element,c=d(a).find(".pt-chart-controls").first().empty(),e=this.data;if(!e.empty&&this.options.renderChart){var e=e.labels,b=d(a).attr("id"),a=
e.layer,g=e.rows,l=e.cols,k=e.per,f=d('<div class="pt-chart-opts">'),q=b+"-pchart-rows",s=b+"-vchart-rows",y=b+"-hchart-rows",v=b+"-pchart-cols",B=b+"-vchart-cols",b=b+"-hchart-cols";a&&d(f).append(d('<span class="pt-chart-label">'+a+"</span>"));g&&d(f).append(d('<div id="'+q+'" class="pt-chart-icon pt-pchart"/><div id="'+s+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+k+" "+g+"</span>"));l&&d(f).append(d('<div id="'+v+'" class="pt-chart-icon pt-pchart"/><div id="'+B+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+
k+" "+l+"</span>"));g&&l&&d(f).append(d('<span class="pt-chart-label">| '+e.breakdown+'</span><div id="'+y+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+[k,g,"&amp;",l].join(" ")+'</span><div id="'+b+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+[k,l,"&amp;",g].join(" ")+"</span>"));d(c).append(f)}},_truncateLabel:function(a,c){return a.length>c?a.substring(0,c-3).replace(/\s+$/g,"")+"...":a},_renderChart:function(a){var c=this.data;d(this.element).find(".pt-chart-contents").hide();
var e=this.chart;if(e&&(d(e).unbind("plothover").unbind("plotclick").empty(),!c.empty&&this.options.renderChart))if(!1===a)this.options.collapseChart=!0;else{e=this.options.collapseChart;if("undefined"==typeof a||!a){if(e)return;a=this.chart_options.currentChart}if("undefined"==typeof a||!a){if(e)return;a=this.options.defaultChart}if("undefined"!=typeof a&&a){this.options.collapseChart=!1;this.chart_options.currentChart=a;e=a.type;a=a.axis;var b=c.labels,g=b.per,l=b.layer+" "+g+" "+b.rows,b=b.layer+
" "+g+" "+b.cols,g=c.filter,k=g[0],f=g[1];"piechart"==e?"rows"==a?this._renderPieChart(c.rows,l,k):this._renderPieChart(c.cols,b,f):"barchart"==e?"rows"==a?this._renderBarChart(c.rows,l,k):this._renderBarChart(c.cols,b,f):"breakdown"==e&&("rows"==a?this._renderBreakDown(c,0,l,g):this._renderBreakDown(c,1,b,g))}}},_renderPieChart:function(a,c,e){var b=this.chart;if(b){d(b).closest(".pt-chart-contents").show().css({width:"800px"});d(b).css({height:"360px"});for(var g=[],l=0;l<a.length;l++){var k=a[l];
k[1]||g.push({label:k[4],data:k[2],key:k[3]})}c?d(b).siblings(".pt-chart-title").html("<h4>"+c+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),g,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,clickable:!0}});var f=this;this.chart_options.currentDataIndex=null;d(b).bind("plothover",function(a,b,c){if(c){if(f.chart_options.currentDataIndex!=c.seriesIndex){f._removeChartTooltip();f.chart_options.currentDataIndex=c.seriesIndex;a=c.series.data[0][1];
var e=c.series.percent.toFixed(1),g='<div class="pt-tooltip-label">'+c.series.label+"</div>";f._renderChartTooltip(b.pageX,b.pageY,g+('<div class="pt-tooltip-text">'+a+" ("+e+"%)</div>"));d(".pt-tooltip-label").css({color:c.series.color})}}else f._removeChartTooltip()});this.options.exploreChart&&e&&d(b).bind("plotclick",function(a,b,c){if(c){try{var d=[[e,g[c.seriesIndex].key]]}catch(k){return}f._chartExplore(d)}})}},_renderBarChart:function(a,c,e){var b=this.chart,g=this._truncateLabel;if(b){d(b).closest(".pt-chart-contents").show().css({width:"96%"});
d(b).css({height:"360px"});for(var l=[],k=[],f=0,q=0;q<a.length;q++){var s=a[q];s[1]||(l.push({label:s[4],data:[[f+1,s[2]]],key:s[3]}),k.push([f+1,g(s[4],16)]),f++)}c?d(b).siblings(".pt-chart-title").html("<h4>"+c+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),l,{series:{bars:{show:!0,barWidth:0.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},xaxis:{ticks:k,min:0,max:l.length+1,tickLength:0}});var y=this;this.chart_options.currentDataIndex=
null;d(b).bind("plothover",function(a,b,c){c?y.chart_options.currentDataIndex!=c.seriesIndex&&(y._removeChartTooltip(),y.chart_options.currentDataIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+c.series.label+"</div>",a+='<div class="pt-tooltip-text">'+c.series.data[0][1]+"</div>",y._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({color:c.series.color})):y._removeChartTooltip()});this.options.exploreChart&&e&&d(b).bind("plotclick",function(a,b,c){if(c){try{var d=[[e,l[c.seriesIndex].key]]}catch(f){return}y._chartExplore(d)}})}},
_renderBreakDown:function(a,c,e,b){var g=this.chart;if(g){d(g).closest(".pt-chart-contents").show().css({width:"96%"});var l,k,f=a.cells,q,s=[],y=[];0===c?(c=a.rows,q=a.cols,a=function(a,b){return f[s[a]][y[b]].value},l=b[0],k=b[1]):(c=a.cols,q=a.rows,a=function(a,b){return f[y[b]][s[a]].value},l=b[1],k=b[0]);var v=[],B=[];b=0;for(len=c.length;b<len;b++)c[b][1]||(v.push(c[b]),s.push(b));b=0;for(len=q.length;b<len;b++)q[b][1]||(B.push(q[b]),y.push(b));b=Math.max(v.length*Math.max(16*(B.length+1),50)+
70,360);d(g).css({height:b+"px"});b=[];for(var D=c=0;D<B.length;D++){for(var E={label:B[D][4]},w=[],J,r=0;r<v.length;r++)q=(v.length-r)*(B.length+1)-D,J=a(r,D),J>c&&(c=J),w.push([J,q]);E.data=w;b.push(E)}a=[];for(r=0;r<v.length;r++)D=v[r][4],q=(v.length-r)*(B.length+1)+1,a.push([q,D]);e?d(g).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):d(g).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(g),b,{series:{bars:{show:!0,barWidth:0.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},
yaxis:{ticks:a,labelWidth:120,max:v.length*(B.length+1)+1},xaxis:{max:1.1*c},grid:{hoverable:!0,clickable:!0}});d(".flot-y-axis .tickLabel").css({"padding-top":"20px",left:"0px",width:"120px"});var x=this;this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;d(g).bind("plothover",function(a,b,c){if(c){if(x.chart_options.currentDataIndex!=c.dataIndex||x.chart_options.currentSeriesIndex!=c.seriesIndex)x._removeChartTooltip(),x.chart_options.currentDataIndex=c.dataIndex,
x.chart_options.currentSeriesIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+v[c.dataIndex][4]+"</div>",a+='<div class="pt-tooltip-text">'+c.series.label+' : <span class="pt-tooltip-value">'+c.datapoint[0]+"</span></div>",x._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({"padding-bottom":"8px"}),d(".pt-tooltip-text").css({color:c.series.color}),d(".pt-tooltip-value").css({"font-weight":"bold"})}else x._removeChartTooltip()});this.options.exploreChart&&l&&k&&d(g).bind("plotclick",
function(a,b,c){if(c){try{var d=[[l,v[c.dataIndex][3]],[k,B[c.seriesIndex][3]]]}catch(e){return}x._chartExplore(d)}})}},_chartExplore:function(a){var c=this.options,e=d(this.element).closest(".ui-tabs"),b=c.filterTab;if(e.length&&!1!==b)c=(c=c.filterForm)?d("#"+c):E,S3.search.setCurrentFilters(c,a),a=b?d("#"+b).index():0,e.tabs("option","active",a);else if(filterURL=c.filterURL)e=this._updateURL(filterURL,a),window.open(e,"_blank")},_renderChartTooltip:function(a,c,e){d('<div class="pt-chart-tooltip">'+
e+"</div>").css({position:"absolute",display:"none",top:c-50,left:a+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:0.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){d(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var a="#"+d(this.element).attr("id");return{rows:d(a+"-rows").val(),cols:d(a+"-cols").val(),
fact:d(a+"-fact").val(),totals:d(a+"-totals").is(":checked")?1:0}},_getFilters:function(){var a="#"+d(this.element).attr("id"),a=d(a+"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(c){}},_updateURL:function(a,c){var d,b,g=[],l={};d={};var k,f,q;if(c)for(k=0,len=c.length;k<len;k++)d=c[k],q=d[0],l[q]=!0,g.push(q+"="+d[1]);d=this.options.ajaxURL.split("?");if(1<d.length){b=d[1].split("&");d={};k=0;for(len=b.length;k<len;k++)f=b[k].split("="),1<f.length&&(q=decodeURIComponent(f[0]),
l[q]||(g.push(q+"="+decodeURIComponent(f[1])),d[q]=!0));for(q in d)l[q]=!0}d=a.split("?");if(1<d.length)for(b=d[1].split("&"),k=0,len=b.length;k<len;k++)f=b[k].split("="),1<f.length&&(q=decodeURIComponent(f[0]),l[q]||g.push(q+"="+decodeURIComponent(f[1])));g=g.join("&");l=d[0];g&&(l=l+"?"+g);return l},_updateAjaxURL:function(a,c){var e=this.options.ajaxURL.split("?"),b=null,b=[],g=!1,l;1<e.length?(l=e[1],l=l.split("&")):l=[];var k,f;if(a)for(k in a)newopt=a[k],f=k+"="+newopt,"totals"==k?this.options.showTotals=
newopt?!0:!1:g||-1!=d.inArray(f,l)||(g=!0),b.push(f);k={};var q={},s,y,v;if(c)for(s=0,y=c.length;s<y;s++)f=c[s],v=f[0],f=f[1],null===f?k[v]||(q[v]=!0):(q[v]&&(q[v]=!1),k[v]?k[v].push(v+"="+f):k[v]=[v+"="+f]);s=0;for(y=l.length;s<y;s++)f=l[s].split("="),1<f.length&&(v=decodeURIComponent(f[0]),f=decodeURIComponent(f[1]),q[v]?g=!0:k[v]?g||-1!=d.inArray(v+"="+f,k[v])||(g=!0):"aggregate"!=v&&(a&&a.hasOwnProperty(v)||b.push(l[s])));for(v in k)for(s=0,y=k[v].length;s<y;s++)g||-1!=d.inArray(k[v][s],l)||(g=
!0),b.push(k[v][s]);b=b.join("&");e=e[0];b&&(e=e+"?"+b);this.options.ajaxURL=e;return g},reload:function(a,c,e){e="undefined"!=typeof e?e:!0;"undefined"==typeof c&&(c=this._getFilters());var b=this,g=this.element,l,k=d(g).find('input[type="hidden"][name="pivotdata"]');if(k.length){if(a||c)l=this._updateAjaxURL(a,c);l||e?(a=this.options.ajaxURL,d(g).find(".pt-throbber").show(),d(g).find(".pt-empty").hide(),d.ajax({url:a,dataType:"json"}).done(function(a){k.first().val(JSON.stringify(a));b.refresh()}).fail(function(a,
b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):(d(g).find(".pt-throbber").show(),b.refresh())}},_bindEvents:function(a){var c=this,e=this.element;a=this.data;var b=d(e).attr("id");d("#"+b+"-options legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d("#"+b+"-filters legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d(e).find(".pt-hide-table").click(function(){c.table_options.hidden=!0;d(e).find(".pt-table").hide();
d(this).siblings(".pt-show-table").show();d(this).hide()});d(e).find(".pt-show-table").click(function(){c.table_options.hidden=!1;d(e).find(".pt-table").show();d(this).siblings(".pt-hide-table").show();d(this).hide()});d("#"+b+"-totals").click(function(){var a=d(this).is(":checked");c.options.showTotals!=a&&c.reload({totals:a},null,!1)});d("#"+b+"-rows, #"+b+"-cols, #"+b+"-fact").on("change.autosubmit",function(){d(e).find(".pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var g=this.options.autoSubmit;
d(e).find(".pt-form").on("optionChanged",function(){var a=d(this);if(!a.data("noAutoSubmit")){var b=a.data("autoSubmitTimeout");b&&clearTimeout(b);b=setTimeout(function(){var a=c._getOptions(),b=c._getFilters();c.reload(a,b,!1)},g);a.data("autoSubmitTimeout",b)}})}else d(e).find("input.pt-submit").click(function(){var a=c._getOptions(),b=c._getFilters();c.reload(a,b,!1)});d("#"+b+" div.pt-table div.pt-cell-zoom").click(function(b){b=d(b.currentTarget);var c=b.closest("td"),e=c.find(".pt-cell-records");
if(0<e.length)e.remove(),b.removeClass("opened");else{for(var g=c.data("records"),e=d("<div/>").addClass("pt-cell-records"),s=d("<ul/>"),y=0;y<g.length;y++)s.append("<li>"+a.lookup[g[y]]+"</li>");e.append(s);c.append(e);b.addClass("opened")}});d("#"+b+"-pchart-rows").click(function(){c._renderChart({type:"piechart",axis:"rows"})});d("#"+b+"-vchart-rows").click(function(){c._renderChart({type:"barchart",axis:"rows"})});d("#"+b+"-pchart-cols").click(function(){c._renderChart({type:"piechart",axis:"cols"})});
d("#"+b+"-vchart-cols").click(function(){c._renderChart({type:"barchart",axis:"cols"})});d("#"+b+"-hchart-rows").click(function(){c._renderChart({type:"breakdown",axis:"rows"})});d("#"+b+"-hchart-cols").click(function(){c._renderChart({type:"breakdown",axis:"cols"})});d(e).find(".pt-hide-chart").click(function(){c._renderChart(!1)})},_unbindEvents:function(){var a=this.element,c=d(a).attr("id");d("#"+c+" div.pt-table div.pt-cell-zoom").unbind("click");d("#"+c+"-options legend").unbind("click");d("#"+
c+"-filters legend").unbind("click");d(c+"-totals").unbind("click");d("#"+c+"-rows, #"+c+"-cols, #"+c+"-fact").unbind("change.autosubmit");d(a).find(".pt-form").unbind("optionChanged");d(a).find("input.pt-submit").unbind("click");d("#"+c+"-pchart-rows").unbind("click");d("#"+c+"-vchart-rows").unbind("click");d("#"+c+"-pchart-cols").unbind("click");d("#"+c+"-vchart-cols").unbind("click");d(a).find(".pt-hide-table").unbind("click");d(a).find(".pt-show-table").unbind("click");d(a).find(".pt-hide-chart").unbind("click")}})})(jQuery);
