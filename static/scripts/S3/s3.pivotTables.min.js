/*
: 2013 (c) Sahana Software Foundation
 @license: MIT

 requires: jQuery 1.9.1+
 requires: jQuery UI 1.10 widget factory

*/
(function(d){d.color={};d.color.make=function(r,c,a,e){var b={};b.r=r||0;b.g=c||0;b.b=a||0;b.a=null!=e?e:1;b.add=function(a,d){for(var c=0;c<a.length;++c)b[a.charAt(c)]+=d;return b.normalize()};b.scale=function(a,d){for(var c=0;c<a.length;++c)b[a.charAt(c)]*=d;return b.normalize()};b.toString=function(){return 1<=b.a?"rgb("+[b.r,b.g,b.b].join()+")":"rgba("+[b.r,b.g,b.b,b.a].join()+")"};b.normalize=function(){function a(b,d,c){return d<b?b:d>c?c:d}b.r=a(0,parseInt(b.r),255);b.g=a(0,parseInt(b.g),255);
b.b=a(0,parseInt(b.b),255);b.a=a(0,b.a,1);return b};b.clone=function(){return d.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};d.color.extract=function(r,c){var a;do{a=r.css(c).toLowerCase();if(""!=a&&"transparent"!=a)break;r=r.parent()}while(!d.nodeName(r.get(0),"body"));"rgba(0, 0, 0, 0)"==a&&(a="transparent");return d.color.parse(a)};d.color.parse=function(w){var c,a=d.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(w))return a(parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10));if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(w))return a(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]));if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(w))return a(2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]));if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(w))return a(2.55*
parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3]),parseFloat(c[4]));if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(w))return a(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16));if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(w))return a(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16));w=d.trim(w).toLowerCase();if("transparent"==w)return a(255,255,255,0);c=r[w]||[0,0,0];return a(c[0],c[1],c[2])};var r={aqua:[0,255,255],azure:[240,255,255],beige:[245,
245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,
144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);
(function(d){function r(a,c){var b=c.children("."+a)[0];if(null==b&&(b=document.createElement("canvas"),b.className=a,d(b).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(c),!b.getContext))if(window.G_vmlCanvasManager)b=window.G_vmlCanvasManager.initElement(b);else throw Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=
b;b=this.context=b.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1);this.resize(c.width(),c.height());this.textContainer=null;this.text={};this._textCache={}}function w(a,c,b,l){function m(k,x){x=[F].concat(x);for(var h=0;h<k.length;++h)k[h].apply(this,x)}function g(k){for(var x=[],h=0;h<k.length;++h){var a=d.extend(!0,{},n.series);null!=k[h].data?
(a.data=k[h].data,delete k[h].data,d.extend(!0,a,k[h]),k[h].data=a.data):a.data=k[h];x.push(a)}E=x;h=E.length;x=-1;for(k=0;k<E.length;++k)a=E[k].color,null!=a&&(h--,"number"==typeof a&&a>x&&(x=a));h<=x&&(h=x+1);var x=[],b=n.colors,c=b.length,D=0;for(k=0;k<h;k++)a=d.color.parse(b[k%c]||"#666"),0==k%c&&k&&(D=0<=D?.5>D?-D-.2:0:-D),x[k]=a.scale("rgb",1+D);for(k=h=0;k<E.length;++k){a=E[k];null==a.color?(a.color=x[h].toString(),++h):"number"==typeof a.color&&(a.color=x[a.color].toString());if(null==a.lines.show){var e,
b=!0;for(e in a)if(a[e]&&a[e].show){b=!1;break}b&&(a.lines.show=!0)}null==a.lines.zero&&(a.lines.zero=!!a.lines.fill);a.xaxis=B(M,f(a,"x"));a.yaxis=B(S,f(a,"y"))}z()}function f(k,x){var h=k[x+"axis"];"object"==typeof h&&(h=h.n);"number"!=typeof h&&(h=1);return h}function p(){return d.grep(M.concat(S),function(k){return k})}function s(k){var x={},h,a;for(h=0;h<M.length;++h)(a=M[h])&&a.used&&(x["x"+a.n]=a.c2p(k.left));for(h=0;h<S.length;++h)(a=S[h])&&a.used&&(x["y"+a.n]=a.c2p(k.top));void 0!==x.x1&&
(x.x=x.x1);void 0!==x.y1&&(x.y=x.y1);return x}function B(k,a){k[a-1]||(k[a-1]={n:a,direction:k==M?"x":"y",options:d.extend(!0,{},k==M?n.xaxis:n.yaxis)});return k[a-1]}function z(){function k(k,h,a){h<k.datamin&&h!=-b&&(k.datamin=h);a>k.datamax&&a!=b&&(k.datamax=a)}var a=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,b=Number.MAX_VALUE,c,e,D,G,u,I,P,n,l,q,g,f;d.each(p(),function(k,b){b.datamin=a;b.datamax=h;b.used=!1});for(c=0;c<E.length;++c)u=E[c],u.datapoints={points:[]},m(Q.processRawData,
[u,u.data,u.datapoints]);for(c=0;c<E.length;++c){u=E[c];g=u.data;f=u.datapoints.format;if(!f){f=[];f.push({x:!0,number:!0,required:!0});f.push({y:!0,number:!0,required:!0});if(u.bars.show||u.lines.show&&u.lines.fill)f.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:!!(u.bars.show&&u.bars.zero||u.lines.show&&u.lines.zero)}),u.bars.horizontal&&(delete f[f.length-1].y,f[f.length-1].x=!0);u.datapoints.format=f}if(null==u.datapoints.pointsize){u.datapoints.pointsize=f.length;P=u.datapoints.pointsize;
I=u.datapoints.points;var ba=u.lines.show&&u.lines.steps;u.xaxis.used=u.yaxis.used=!0;for(e=D=0;e<g.length;++e,D+=P){q=g[e];var s=null==q;if(!s)for(G=0;G<P;++G){n=q[G];if(l=f[G])l.number&&null!=n&&(n=+n,isNaN(n)?n=null:Infinity==n?n=b:-Infinity==n&&(n=-b)),null==n&&(l.required&&(s=!0),null!=l.defaultValue&&(n=l.defaultValue));I[D+G]=n}if(s)for(G=0;G<P;++G)n=I[D+G],null!=n&&(l=f[G],l.autoscale&&(l.x&&k(u.xaxis,n,n),l.y&&k(u.yaxis,n,n))),I[D+G]=null;else if(ba&&0<D&&null!=I[D-P]&&I[D-P]!=I[D]&&I[D-
P+1]!=I[D+1]){for(G=0;G<P;++G)I[D+P+G]=I[D+G];I[D+1]=I[D-P+1];D+=P}}}}for(c=0;c<E.length;++c)u=E[c],m(Q.processDatapoints,[u,u.datapoints]);for(c=0;c<E.length;++c){u=E[c];I=u.datapoints.points;P=u.datapoints.pointsize;f=u.datapoints.format;q=D=a;ba=g=h;for(e=0;e<I.length;e+=P)if(null!=I[e])for(G=0;G<P;++G)n=I[e+G],(l=f[G])&&!1!==l.autoscale&&n!=b&&n!=-b&&(l.x&&(n<D&&(D=n),n>g&&(g=n)),l.y&&(n<q&&(q=n),n>ba&&(ba=n)));if(u.bars.show){switch(u.bars.align){case "left":e=0;break;case "right":e=-u.bars.barWidth;
break;case "center":e=-u.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+u.bars.align);}u.bars.horizontal?(q+=e,ba+=e+u.bars.barWidth):(D+=e,g+=e+u.bars.barWidth)}k(u.xaxis,D,g);k(u.yaxis,q,ba)}d.each(p(),function(k,b){b.datamin==a&&(b.datamin=null);b.datamax==h&&(b.datamax=null)})}function w(k){function a(k){return k}var h,b,c=k.options.transform||a,d=k.options.inverseTransform;"x"==k.direction?(h=k.scale=T/Math.abs(c(k.max)-c(k.min)),b=Math.min(c(k.max),c(k.min))):(h=k.scale=
R/Math.abs(c(k.max)-c(k.min)),h=-h,b=Math.max(c(k.max),c(k.min)));k.p2c=c==a?function(k){return(k-b)*h}:function(k){return(c(k)-b)*h};k.c2p=d?function(k){return d(b+k/h)}:function(k){return b+k/h}}function t(k){var a=k.labelWidth,h=k.labelHeight,b=k.options.position,c=k.options.tickLength,e=n.grid.axisMargin,D=n.grid.labelMargin,G="x"==k.direction?M:S,u,I=d.grep(G,function(k){return k&&k.options.position==b&&k.reserveSpace});d.inArray(k,I)==I.length-1&&(e=0);null==c&&(c=d.grep(G,function(k){return k&&
k.reserveSpace}),c=(u=0==d.inArray(k,c))?"full":5);isNaN(+c)||(D+=+c);"x"==k.direction?(h+=D,"bottom"==b?(v.bottom+=h+e,k.box={top:K.height-v.bottom,height:h}):(k.box={top:v.top+e,height:h},v.top+=h+e)):(a+=D,"left"==b?(k.box={left:v.left+e,width:a},v.left+=a+e):(v.right+=a+e,k.box={left:K.width-v.right,width:a}));k.position=b;k.tickLength=c;k.box.padding=D;k.innermost=u}function N(){var k=n.grid.minBorderMargin,a={x:0,y:0},h;if(null==k)for(h=k=0;h<E.length;++h)k=Math.max(k,2*(E[h].points.radius+
E[h].points.lineWidth/2));a.x=a.y=Math.ceil(k);d.each(p(),function(k,h){var b=h.direction;h.reserveSpace&&(a[b]=Math.ceil(Math.max(a[b],("x"==b?h.labelWidth:h.labelHeight)/2)))});v.left=Math.max(a.x,v.left);v.right=Math.max(a.x,v.right);v.top=Math.max(a.y,v.top);v.bottom=Math.max(a.y,v.bottom)}function A(){var k,a=p(),h=n.grid.show;for(k in v){var b=n.grid.margin||0;v[k]="number"==typeof b?b:b[k]||0}m(Q.processOffset,[v]);for(k in v)v[k]="object"==typeof n.grid.borderWidth?v[k]+(h?n.grid.borderWidth[k]:
0):v[k]+(h?n.grid.borderWidth:0);d.each(a,function(k,a){a.show=a.options.show;null==a.show&&(a.show=a.used);a.reserveSpace=a.show||a.options.reserveSpace;var h=a.options,b=+(null!=h.min?h.min:a.datamin),c=+(null!=h.max?h.max:a.datamax),x=c-b;if(0==x){if(x=0==c?1:.01,null==h.min&&(b-=x),null==h.max||null!=h.min)c+=x}else{var d=h.autoscaleMargin;null!=d&&(null==h.min&&(b-=x*d,0>b&&null!=a.datamin&&0<=a.datamin&&(b=0)),null==h.max&&(c+=x*d,0<c&&null!=a.datamax&&0>=a.datamax&&(c=0)))}a.min=b;a.max=c});
if(h){b=d.grep(a,function(k){return k.reserveSpace});d.each(b,function(k,a){C(a);var h=a.options.ticks,b=[];null==h||"number"==typeof h&&0<h?b=a.tickGenerator(a):h&&(b=d.isFunction(h)?h(a):h);var c;a.ticks=[];for(h=0;h<b.length;++h){var x=null,e=b[h];"object"==typeof e?(c=+e[0],1<e.length&&(x=e[1])):c=+e;null==x&&(x=a.tickFormatter(c,a));isNaN(c)||a.ticks.push({v:c,label:x})}b=a.ticks;a.options.autoscaleMargin&&0<b.length&&(null==a.options.min&&(a.min=Math.min(a.min,b[0].v)),null==a.options.max&&
1<b.length&&(a.max=Math.max(a.max,b[b.length-1].v)));b=a.options;h=a.ticks||[];c=b.labelWidth||0;x=b.labelHeight||0;e=c||"x"==a.direction?Math.floor(K.width/(h.length||1)):null;legacyStyles=a.direction+"Axis "+a.direction+a.n+"Axis";layer="flot-"+a.direction+"-axis flot-"+a.direction+a.n+"-axis "+legacyStyles;font=b.font||"flot-tick-label tickLabel";for(var n=0;n<h.length;++n){var $=h[n];$.label&&($=K.getTextInfo(layer,$.label,font,null,e),c=Math.max(c,$.width),x=Math.max(x,$.height))}a.labelWidth=
b.labelWidth||c;a.labelHeight=b.labelHeight||x});for(k=b.length-1;0<=k;--k)t(b[k]);N();d.each(b,function(k,a){"x"==a.direction?(a.box.left=v.left-a.labelWidth/2,a.box.width=K.width-v.left-v.right+a.labelWidth):(a.box.top=v.top-a.labelHeight/2,a.box.height=K.height-v.bottom-v.top+a.labelHeight)})}T=K.width-v.left-v.right;R=K.height-v.bottom-v.top;d.each(a,function(k,a){w(a)});h&&fa();U()}function C(k){var a=k.options,h;h="number"==typeof a.ticks&&0<a.ticks?a.ticks:.3*Math.sqrt("x"==k.direction?K.width:
K.height);h=(k.max-k.min)/h;var b=-Math.floor(Math.log(h)/Math.LN10),c=a.tickDecimals;null!=c&&b>c&&(b=c);var e=Math.pow(10,-b),n=h/e,l;1.5>n?l=1:3>n?(l=2,2.25<n&&(null==c||b+1<=c)&&(l=2.5,++b)):l=7.5>n?5:10;l*=e;null!=a.minTickSize&&l<a.minTickSize&&(l=a.minTickSize);k.delta=h;k.tickDecimals=Math.max(0,null!=c?c:b);k.tickSize=a.tickSize||l;if("time"==a.mode&&!k.tickGenerator)throw Error("Time mode requires the flot.time plugin.");k.tickGenerator||(k.tickGenerator=function(k){var a=[],h;h=k.tickSize;
h*=Math.floor(k.min/h);var b=0,c=Number.NaN,x;do x=c,c=h+b*k.tickSize,a.push(c),++b;while(c<k.max&&c!=x);return a},k.tickFormatter=function(k,a){var h=a.tickDecimals?Math.pow(10,a.tickDecimals):1,b=""+Math.round(k*h)/h;if(null!=a.tickDecimals){var c=b.indexOf("."),c=-1==c?0:b.length-c-1;if(c<a.tickDecimals)return(c?b:b+".")+(""+h).substr(1,a.tickDecimals-c)}return b});d.isFunction(a.tickFormatter)&&(k.tickFormatter=function(k,h){return""+a.tickFormatter(k,h)});if(null!=a.alignTicksWithAxis){var u=
("x"==k.direction?M:S)[a.alignTicksWithAxis-1];u&&u.used&&u!=k&&(h=k.tickGenerator(k),0<h.length&&(null==a.min&&(k.min=Math.min(k.min,h[0])),null==a.max&&1<h.length&&(k.max=Math.max(k.max,h[h.length-1]))),k.tickGenerator=function(k){var a=[],h,b;for(b=0;b<u.ticks.length;++b)h=(u.ticks[b].v-u.min)/(u.max-u.min),h=k.min+h*(k.max-k.min),a.push(h);return a},k.mode||null!=a.tickDecimals||(h=Math.max(0,-Math.floor(Math.log(k.delta)/Math.LN10)+1),b=k.tickGenerator(k),1<b.length&&/\..*0$/.test((b[1]-b[0]).toFixed(h))||
(k.tickDecimals=h)))}}function J(){K.clear();m(Q.drawBackground,[q]);var k=n.grid;k.show&&k.backgroundColor&&(q.save(),q.translate(v.left,v.top),q.fillStyle=na(n.grid.backgroundColor,R,0,"rgba(255, 255, 255, 0)"),q.fillRect(0,0,T,R),q.restore());k.show&&!k.aboveData&&oa();for(var a=0;a<E.length;++a){m(Q.drawSeries,[q,E[a]]);var h=E[a];h.lines.show&&aa(h);h.bars.show&&y(h);h.points.show&&H(h)}m(Q.draw,[q]);k.show&&k.aboveData&&oa();K.render();ca()}function V(k,a){for(var h,b,c,d,e=p(),n=0;n<e.length;++n)if(h=
e[n],h.direction==a&&(d=a+h.n+"axis",k[d]||1!=h.n||(d=a+"axis"),k[d])){b=k[d].from;c=k[d].to;break}k[d]||(h="x"==a?M[0]:S[0],b=k[a+"1"],c=k[a+"2"]);null!=b&&null!=c&&b>c&&(d=b,b=c,c=d);return{from:b,to:c,axis:h}}function oa(){var k,a,h;q.save();q.translate(v.left,v.top);if(h=n.grid.markings)for(d.isFunction(h)&&(a=F.getAxes(),a.xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,h=h(a)),k=0;k<h.length;++k){a=h[k];var b=V(a,"x"),c=V(a,"y");null==b.from&&(b.from=b.axis.min);null==
b.to&&(b.to=b.axis.max);null==c.from&&(c.from=c.axis.min);null==c.to&&(c.to=c.axis.max);b.to<b.axis.min||b.from>b.axis.max||c.to<c.axis.min||c.from>c.axis.max||(b.from=Math.max(b.from,b.axis.min),b.to=Math.min(b.to,b.axis.max),c.from=Math.max(c.from,c.axis.min),c.to=Math.min(c.to,c.axis.max),b.from==b.to&&c.from==c.to)||(b.from=b.axis.p2c(b.from),b.to=b.axis.p2c(b.to),c.from=c.axis.p2c(c.from),c.to=c.axis.p2c(c.to),b.from==b.to||c.from==c.to?(q.beginPath(),q.strokeStyle=a.color||n.grid.markingsColor,
q.lineWidth=a.lineWidth||n.grid.markingsLineWidth,q.moveTo(b.from,c.from),q.lineTo(b.to,c.to),q.stroke()):(q.fillStyle=a.color||n.grid.markingsColor,q.fillRect(b.from,c.to,b.to-b.from,c.from-c.to)))}a=p();h=n.grid.borderWidth;for(b=0;b<a.length;++b){c=a[b];k=c.box;var e=c.tickLength,l,m,u,f;if(c.show&&0!=c.ticks.length){q.lineWidth=1;"x"==c.direction?(l=0,m="full"==e?"top"==c.position?0:R:k.top-v.top+("top"==c.position?k.height:0)):(m=0,l="full"==e?"left"==c.position?0:T:k.left-v.left+("left"==c.position?
k.width:0));c.innermost||(q.strokeStyle=c.options.color,q.beginPath(),u=f=0,"x"==c.direction?u=T+1:f=R+1,1==q.lineWidth&&("x"==c.direction?m=Math.floor(m)+.5:l=Math.floor(l)+.5),q.moveTo(l,m),q.lineTo(l+u,m+f),q.stroke());q.strokeStyle=c.options.tickColor;q.beginPath();for(k=0;k<c.ticks.length;++k){var g=c.ticks[k].v;u=f=0;isNaN(g)||g<c.min||g>c.max||"full"==e&&("object"==typeof h&&0<h[c.position]||0<h)&&(g==c.min||g==c.max)||("x"==c.direction?(l=c.p2c(g),f="full"==e?-R:e,"top"==c.position&&(f=-f)):
(m=c.p2c(g),u="full"==e?-T:e,"left"==c.position&&(u=-u)),1==q.lineWidth&&("x"==c.direction?l=Math.floor(l)+.5:m=Math.floor(m)+.5),q.moveTo(l,m),q.lineTo(l+u,m+f))}q.stroke()}}h&&(k=n.grid.borderColor,"object"==typeof h||"object"==typeof k?("object"!==typeof h&&(h={top:h,right:h,bottom:h,left:h}),"object"!==typeof k&&(k={top:k,right:k,bottom:k,left:k}),0<h.top&&(q.strokeStyle=k.top,q.lineWidth=h.top,q.beginPath(),q.moveTo(0-h.left,0-h.top/2),q.lineTo(T,0-h.top/2),q.stroke()),0<h.right&&(q.strokeStyle=
k.right,q.lineWidth=h.right,q.beginPath(),q.moveTo(T+h.right/2,0-h.top),q.lineTo(T+h.right/2,R),q.stroke()),0<h.bottom&&(q.strokeStyle=k.bottom,q.lineWidth=h.bottom,q.beginPath(),q.moveTo(T+h.right,R+h.bottom/2),q.lineTo(0,R+h.bottom/2),q.stroke()),0<h.left&&(q.strokeStyle=k.left,q.lineWidth=h.left,q.beginPath(),q.moveTo(0-h.left/2,R+h.bottom),q.lineTo(0-h.left/2,0),q.stroke())):(q.lineWidth=h,q.strokeStyle=n.grid.borderColor,q.strokeRect(-h/2,-h/2,T+h,R+h)));q.restore()}function fa(){d.each(p(),
function(a,b){if(b.show&&0!=b.ticks.length){var c=b.box,d="flot-"+b.direction+"-axis flot-"+b.direction+b.n+"-axis "+(b.direction+"Axis "+b.direction+b.n+"Axis"),e=b.options.font||"flot-tick-label tickLabel",n,l,m,u,f;K.removeText(d);for(var g=0;g<b.ticks.length;++g)n=b.ticks[g],!n.label||n.v<b.min||n.v>b.max||("x"==b.direction?(u="center",l=v.left+b.p2c(n.v),"bottom"==b.position?m=c.top+c.padding:(m=c.top+c.height-c.padding,f="bottom")):(f="middle",m=v.top+b.p2c(n.v),"left"==b.position?(l=c.left+
c.width-c.padding,u="right"):l=c.left+c.padding),K.addText(d,l,m,n.label,e,null,null,u,f))}})}function aa(a){function b(a,k,c,h,d){var e=a.points;a=a.pointsize;var n=null,x=null;q.beginPath();for(var l=a;l<e.length;l+=a){var m=e[l-a],f=e[l-a+1],g=e[l],p=e[l+1];if(null!=m&&null!=g){if(f<=p&&f<d.min){if(p<d.min)continue;m=(d.min-f)/(p-f)*(g-m)+m;f=d.min}else if(p<=f&&p<d.min){if(f<d.min)continue;g=(d.min-f)/(p-f)*(g-m)+m;p=d.min}if(f>=p&&f>d.max){if(p>d.max)continue;m=(d.max-f)/(p-f)*(g-m)+m;f=d.max}else if(p>=
f&&p>d.max){if(f>d.max)continue;g=(d.max-f)/(p-f)*(g-m)+m;p=d.max}if(m<=g&&m<h.min){if(g<h.min)continue;f=(h.min-m)/(g-m)*(p-f)+f;m=h.min}else if(g<=m&&g<h.min){if(m<h.min)continue;p=(h.min-m)/(g-m)*(p-f)+f;g=h.min}if(m>=g&&m>h.max){if(g>h.max)continue;f=(h.max-m)/(g-m)*(p-f)+f;m=h.max}else if(g>=m&&g>h.max){if(m>h.max)continue;p=(h.max-m)/(g-m)*(p-f)+f;g=h.max}m==n&&f==x||q.moveTo(h.p2c(m)+k,d.p2c(f)+c);n=g;x=p;q.lineTo(h.p2c(g)+k,d.p2c(p)+c)}}q.stroke()}function c(a,k,b){var h=a.points;a=a.pointsize;
for(var d=Math.min(Math.max(0,b.min),b.max),e=0,n=!1,x=1,m=0,l=0;!(0<a&&e>h.length+a);){var e=e+a,f=h[e-a],g=h[e-a+x],p=h[e],s=h[e+x];if(n){if(0<a&&null!=f&&null==p){l=e;a=-a;x=2;continue}if(0>a&&e==m+a){q.fill();n=!1;a=-a;x=1;e=m=l+a;continue}}if(null!=f&&null!=p){if(f<=p&&f<k.min){if(p<k.min)continue;g=(k.min-f)/(p-f)*(s-g)+g;f=k.min}else if(p<=f&&p<k.min){if(f<k.min)continue;s=(k.min-f)/(p-f)*(s-g)+g;p=k.min}if(f>=p&&f>k.max){if(p>k.max)continue;g=(k.max-f)/(p-f)*(s-g)+g;f=k.max}else if(p>=f&&
p>k.max){if(f>k.max)continue;s=(k.max-f)/(p-f)*(s-g)+g;p=k.max}n||(q.beginPath(),q.moveTo(k.p2c(f),b.p2c(d)),n=!0);if(g>=b.max&&s>=b.max)q.lineTo(k.p2c(f),b.p2c(b.max)),q.lineTo(k.p2c(p),b.p2c(b.max));else if(g<=b.min&&s<=b.min)q.lineTo(k.p2c(f),b.p2c(b.min)),q.lineTo(k.p2c(p),b.p2c(b.min));else{var $=f,ma=p;g<=s&&g<b.min&&s>=b.min?(f=(b.min-g)/(s-g)*(p-f)+f,g=b.min):s<=g&&s<b.min&&g>=b.min&&(p=(b.min-g)/(s-g)*(p-f)+f,s=b.min);g>=s&&g>b.max&&s<=b.max?(f=(b.max-g)/(s-g)*(p-f)+f,g=b.max):s>=g&&s>b.max&&
g<=b.max&&(p=(b.max-g)/(s-g)*(p-f)+f,s=b.max);f!=$&&q.lineTo(k.p2c($),b.p2c(g));q.lineTo(k.p2c(f),b.p2c(g));q.lineTo(k.p2c(p),b.p2c(s));p!=ma&&(q.lineTo(k.p2c(p),b.p2c(s)),q.lineTo(k.p2c(ma),b.p2c(s)))}}}}q.save();q.translate(v.left,v.top);q.lineJoin="round";var d=a.lines.lineWidth,e=a.shadowSize;if(0<d&&0<e){q.lineWidth=e;q.strokeStyle="rgba(0,0,0,0.1)";var n=Math.PI/18;b(a.datapoints,Math.sin(n)*(d/2+e/2),Math.cos(n)*(d/2+e/2),a.xaxis,a.yaxis);q.lineWidth=e/2;b(a.datapoints,Math.sin(n)*(d/2+e/4),
Math.cos(n)*(d/2+e/4),a.xaxis,a.yaxis)}q.lineWidth=d;q.strokeStyle=a.color;if(e=L(a.lines,a.color,0,R))q.fillStyle=e,c(a.datapoints,a.xaxis,a.yaxis);0<d&&b(a.datapoints,0,0,a.xaxis,a.yaxis);q.restore()}function H(a){function b(a,k,c,h,d,e,f,n){var g=a.points;a=a.pointsize;for(var x=0;x<g.length;x+=a){var m=g[x],l=g[x+1];null==m||m<e.min||m>e.max||l<f.min||l>f.max||(q.beginPath(),m=e.p2c(m),l=f.p2c(l)+h,"circle"==n?q.arc(m,l,k,0,d?Math.PI:2*Math.PI,!1):n(q,m,l,k,d),q.closePath(),c&&(q.fillStyle=c,
q.fill()),q.stroke())}}q.save();q.translate(v.left,v.top);var c=a.points.lineWidth,d=a.shadowSize,e=a.points.radius,f=a.points.symbol;0==c&&(c=1E-4);0<c&&0<d&&(d/=2,q.lineWidth=d,q.strokeStyle="rgba(0,0,0,0.1)",b(a.datapoints,e,null,d+d/2,!0,a.xaxis,a.yaxis,f),q.strokeStyle="rgba(0,0,0,0.2)",b(a.datapoints,e,null,d/2,!0,a.xaxis,a.yaxis,f));q.lineWidth=c;q.strokeStyle=a.color;b(a.datapoints,e,L(a.points,a.color),0,!1,a.xaxis,a.yaxis,f);q.restore()}function pa(a,b,c,d,e,f,n,m,g,l,p,q){var s,A,r,B;p?
(B=A=r=!0,s=!1,p=c,c=b+d,e=b+e,a<p&&(b=a,a=p,p=b,s=!0,A=!1)):(s=A=r=!0,B=!1,p=a+d,a+=e,e=c,c=b,c<e&&(b=c,c=e,e=b,B=!0,r=!1));a<m.min||p>m.max||c<g.min||e>g.max||(p<m.min&&(p=m.min,s=!1),a>m.max&&(a=m.max,A=!1),e<g.min&&(e=g.min,B=!1),c>g.max&&(c=g.max,r=!1),p=m.p2c(p),e=g.p2c(e),a=m.p2c(a),c=g.p2c(c),n&&(l.beginPath(),l.moveTo(p,e),l.lineTo(p,c),l.lineTo(a,c),l.lineTo(a,e),l.fillStyle=n(e,c),l.fill()),0<q&&(s||A||r||B)&&(l.beginPath(),l.moveTo(p,e+f),s?l.lineTo(p,c+f):l.moveTo(p,c+f),r?l.lineTo(a,
c+f):l.moveTo(a,c+f),A?l.lineTo(a,e+f):l.moveTo(a,e+f),B?l.lineTo(p,e+f):l.moveTo(p,e+f),l.stroke()))}function y(a){q.save();q.translate(v.left,v.top);q.lineWidth=a.bars.lineWidth;q.strokeStyle=a.color;var b;switch(a.bars.align){case "left":b=0;break;case "right":b=-a.bars.barWidth;break;case "center":b=-a.bars.barWidth/2;break;default:throw Error("Invalid bar alignment: "+a.bars.align);}(function(b,c,d,e,f,n,m){var g=b.points;b=b.pointsize;for(var l=0;l<g.length;l+=b)null!=g[l]&&pa(g[l],g[l+1],g[l+
2],c,d,e,f,n,m,q,a.bars.horizontal,a.bars.lineWidth)})(a.datapoints,b,b+a.bars.barWidth,0,a.bars.fill?function(b,c){return L(a.bars,a.color,b,c)}:null,a.xaxis,a.yaxis);q.restore()}function L(a,b,c,e){var f=a.fill;if(!f)return null;if(a.fillColor)return na(a.fillColor,c,e,b);a=d.color.parse(b);a.a="number"==typeof f?f:.4;a.normalize();return a.toString()}function U(){a.find(".legend").remove();if(n.legend.show){for(var b=[],c=[],h=!1,e=n.legend.labelFormatter,f,l,g=0;g<E.length;++g)f=E[g],f.label&&
(l=e?e(f.label,f):f.label)&&c.push({label:l,color:f.color});if(n.legend.sorted)if(d.isFunction(n.legend.sorted))c.sort(n.legend.sorted);else if("reverse"==n.legend.sorted)c.reverse();else{var m="descending"!=n.legend.sorted;c.sort(function(a,b){return a.label==b.label?0:a.label<b.label!=m?1:-1})}for(g=0;g<c.length;++g)e=c[g],0==g%n.legend.noColumns&&(h&&b.push("</tr>"),b.push("<tr>"),h=!0),b.push('<td class="legendColorBox"><div style="border:1px solid '+n.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
e.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+e.label+"</td>");h&&b.push("</tr>");0!=b.length&&(c='<table style="font-size:smaller;color:'+n.grid.color+'">'+b.join("")+"</table>",null!=n.legend.container?d(n.legend.container).html(c):(b="",h=n.legend.position,g=n.legend.margin,null==g[0]&&(g=[g,g]),"n"==h.charAt(0)?b+="top:"+(g[1]+v.top)+"px;":"s"==h.charAt(0)&&(b+="bottom:"+(g[1]+v.bottom)+"px;"),"e"==h.charAt(1)?b+="right:"+(g[0]+v.right)+"px;":"w"==h.charAt(1)&&(b+="left:"+
(g[0]+v.left)+"px;"),c=d('<div class="legend">'+c.replace('style="','style="position:absolute;'+b+";")+"</div>").appendTo(a),0!=n.legend.backgroundOpacity&&(h=n.legend.backgroundColor,null==h&&(h=(h=n.grid.backgroundColor)&&"string"==typeof h?d.color.parse(h):d.color.extract(c,"background-color"),h.a=1,h=h.toString()),g=c.children(),d('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+b+"background-color:"+h+';"> </div>').prependTo(c).css("opacity",n.legend.backgroundOpacity))))}}
function da(a){n.grid.hoverable&&ga("plothover",a,function(a){return!1!=a.hoverable})}function X(a){n.grid.hoverable&&ga("plothover",a,function(a){return!1})}function ia(a){ga("plotclick",a,function(a){return!1!=a.clickable})}function ga(b,c,h){var e=W.offset(),d=c.pageX-e.left-v.left,f=c.pageY-e.top-v.top,g=s({left:d,top:f});g.pageX=c.pageX;g.pageY=c.pageY;c=n.grid.mouseActiveRadius;var l=c*c+1,m=null,p,q,A;for(p=E.length-1;0<=p;--p)if(h(E[p])){var r=E[p],B=r.xaxis,t=r.yaxis,C=r.datapoints.points,
z=B.c2p(d),aa=t.c2p(f),fa=c/B.scale,J=c/t.scale;A=r.datapoints.pointsize;B.options.inverseTransform&&(fa=Number.MAX_VALUE);t.options.inverseTransform&&(J=Number.MAX_VALUE);if(r.lines.show||r.points.show)for(q=0;q<C.length;q+=A){var y=C[q],H=C[q+1];null==y||y-z>fa||y-z<-fa||H-aa>J||H-aa<-J||(y=Math.abs(B.p2c(y)-d),H=Math.abs(t.p2c(H)-f),H=y*y+H*H,H<l&&(l=H,m=[p,q/A]))}if(r.bars.show&&!m)for(B="left"==r.bars.align?0:-r.bars.barWidth/2,r=B+r.bars.barWidth,q=0;q<C.length;q+=A)y=C[q],H=C[q+1],t=C[q+2],
null!=y&&(E[p].bars.horizontal?z<=Math.max(t,y)&&z>=Math.min(t,y)&&aa>=H+B&&aa<=H+r:z>=y+B&&z<=y+r&&aa>=Math.min(t,H)&&aa<=Math.max(t,H))&&(m=[p,q/A])}m?(p=m[0],q=m[1],A=E[p].datapoints.pointsize,h={datapoint:E[p].datapoints.points.slice(q*A,(q+1)*A),dataIndex:q,series:E[p],seriesIndex:p}):h=null;h&&(h.pageX=parseInt(h.series.xaxis.p2c(h.datapoint[0])+e.left+v.left,10),h.pageY=parseInt(h.series.yaxis.p2c(h.datapoint[1])+e.top+v.top,10));if(n.grid.autoHighlight){for(e=0;e<Y.length;++e)d=Y[e],d.auto!=
b||h&&d.series==h.series&&d.point[0]==h.datapoint[0]&&d.point[1]==h.datapoint[1]||ja(d.series,d.point);h&&ka(h.series,h.datapoint,b)}a.trigger(b,[g,h])}function ca(){var a=n.interaction.redrawOverlayInterval;-1==a?la():ha||(ha=setTimeout(la,a))}function la(){ha=null;O.save();ea.clear();O.translate(v.left,v.top);var a,b;for(a=0;a<Y.length;++a)if(b=Y[a],b.series.bars.show)ra(b.series,b.point);else{var c=b.series,e=b.point;b=e[0];var e=e[1],f=c.xaxis,g=c.yaxis,l="string"===typeof c.highlightColor?c.highlightColor:
d.color.parse(c.color).scale("a",.5).toString();if(!(b<f.min||b>f.max||e<g.min||e>g.max)){var n=c.points.radius+c.points.lineWidth/2;O.lineWidth=n;O.strokeStyle=l;l=1.5*n;b=f.p2c(b);e=g.p2c(e);O.beginPath();"circle"==c.points.symbol?O.arc(b,e,l,0,2*Math.PI,!1):c.points.symbol(O,b,e,l,!1);O.closePath();O.stroke()}}O.restore();m(Q.drawOverlay,[O])}function ka(a,b,c){"number"==typeof a&&(a=E[a]);if("number"==typeof b){var e=a.datapoints.pointsize;b=a.datapoints.points.slice(e*b,e*(b+1))}e=qa(a,b);-1==
e?(Y.push({series:a,point:b,auto:c}),ca()):c||(Y[e].auto=!1)}function ja(a,b){if(null==a&&null==b)Y=[],ca();else{"number"==typeof a&&(a=E[a]);if("number"==typeof b){var c=a.datapoints.pointsize;b=a.datapoints.points.slice(c*b,c*(b+1))}c=qa(a,b);-1!=c&&(Y.splice(c,1),ca())}}function qa(a,b){for(var c=0;c<Y.length;++c){var e=Y[c];if(e.series==a&&e.point[0]==b[0]&&e.point[1]==b[1])return c}return-1}function ra(a,b){var c="string"===typeof a.highlightColor?a.highlightColor:d.color.parse(a.color).scale("a",
.5).toString(),e="left"==a.bars.align?0:-a.bars.barWidth/2;O.lineWidth=a.bars.lineWidth;O.strokeStyle=c;pa(b[0],b[1],b[2]||0,e,e+a.bars.barWidth,0,function(){return c},a.xaxis,a.yaxis,O,a.bars.horizontal,a.bars.lineWidth)}function na(a,b,c,e){if("string"==typeof a)return a;b=q.createLinearGradient(0,c,0,b);c=0;for(var f=a.colors.length;c<f;++c){var g=a.colors[c];if("string"!=typeof g){var l=d.color.parse(e);null!=g.brightness&&(l=l.scale("rgb",g.brightness));null!=g.opacity&&(l.a*=g.opacity);g=l.toString()}b.addColorStop(c/
(f-1),g)}return b}var E=[],n={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,
alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,
margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1E3/60},hooks:{}},K=null,ea=null,W=null,q=null,O=null,M=[],S=[],v={left:0,right:0,top:0,bottom:0},T=0,R=0,Q={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},F=this;
F.setData=g;F.setupGrid=A;F.draw=J;F.getPlaceholder=function(){return a};F.getCanvas=function(){return K.element};F.getPlotOffset=function(){return v};F.width=function(){return T};F.height=function(){return R};F.offset=function(){var a=W.offset();a.left+=v.left;a.top+=v.top;return a};F.getData=function(){return E};F.getAxes=function(){var a={};d.each(M.concat(S),function(b,c){c&&(a[c.direction+(1!=c.n?c.n:"")+"axis"]=c)});return a};F.getXAxes=function(){return M};F.getYAxes=function(){return S};F.c2p=
s;F.p2c=function(a){var b={},c,e,d;for(c=0;c<M.length;++c)if((e=M[c])&&e.used&&(d="x"+e.n,null==a[d]&&1==e.n&&(d="x"),null!=a[d])){b.left=e.p2c(a[d]);break}for(c=0;c<S.length;++c)if((e=S[c])&&e.used&&(d="y"+e.n,null==a[d]&&1==e.n&&(d="y"),null!=a[d])){b.top=e.p2c(a[d]);break}return b};F.getOptions=function(){return n};F.highlight=ka;F.unhighlight=ja;F.triggerRedrawOverlay=ca;F.pointOffset=function(a){return{left:parseInt(M[f(a,"x")-1].p2c(+a.x)+v.left,10),top:parseInt(S[f(a,"y")-1].p2c(+a.y)+v.top,
10)}};F.shutdown=function(){ha&&clearTimeout(ha);W.unbind("mousemove",da);W.unbind("mouseleave",X);W.unbind("click",ia);m(Q.shutdown,[W])};F.resize=function(){var b=a.width(),c=a.height();K.resize(b,c);ea.resize(b,c)};F.hooks=Q;(function(){for(var a={Canvas:r},b=0;b<l.length;++b){var c=l[b];c.init(F,a);c.options&&d.extend(!0,n,c.options)}})(F);(function(b){d.extend(!0,n,b);b&&b.colors&&(n.colors=b.colors);null==n.xaxis.color&&(n.xaxis.color=d.color.parse(n.grid.color).scale("a",.22).toString());null==
n.yaxis.color&&(n.yaxis.color=d.color.parse(n.grid.color).scale("a",.22).toString());null==n.xaxis.tickColor&&(n.xaxis.tickColor=n.grid.tickColor||n.xaxis.color);null==n.yaxis.tickColor&&(n.yaxis.tickColor=n.grid.tickColor||n.yaxis.color);null==n.grid.borderColor&&(n.grid.borderColor=n.grid.color);null==n.grid.tickColor&&(n.grid.tickColor=d.color.parse(n.grid.color).scale("a",.22).toString());var c,e,f={style:a.css("font-style"),size:Math.round(.8*(+a.css("font-size").replace("px","")||13)),variant:a.css("font-variant"),
weight:a.css("font-weight"),family:a.css("font-family")};f.lineHeight=1.15*f.size;e=n.xaxes.length||1;for(b=0;b<e;++b)(c=n.xaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},n.xaxis,c),n.xaxes[b]=c,c.font&&(c.font=d.extend({},f,c.font),c.font.color||(c.font.color=c.color));e=n.yaxes.length||1;for(b=0;b<e;++b)(c=n.yaxes[b])&&!c.tickColor&&(c.tickColor=c.color),c=d.extend(!0,{},n.yaxis,c),n.yaxes[b]=c,c.font&&(c.font=d.extend({},f,c.font),c.font.color||(c.font.color=c.color));n.xaxis.noTicks&&
null==n.xaxis.ticks&&(n.xaxis.ticks=n.xaxis.noTicks);n.yaxis.noTicks&&null==n.yaxis.ticks&&(n.yaxis.ticks=n.yaxis.noTicks);n.x2axis&&(n.xaxes[1]=d.extend(!0,{},n.xaxis,n.x2axis),n.xaxes[1].position="top");n.y2axis&&(n.yaxes[1]=d.extend(!0,{},n.yaxis,n.y2axis),n.yaxes[1].position="right");n.grid.coloredAreas&&(n.grid.markings=n.grid.coloredAreas);n.grid.coloredAreasColor&&(n.grid.markingsColor=n.grid.coloredAreasColor);n.lines&&d.extend(!0,n.series.lines,n.lines);n.points&&d.extend(!0,n.series.points,
n.points);n.bars&&d.extend(!0,n.series.bars,n.bars);null!=n.shadowSize&&(n.series.shadowSize=n.shadowSize);null!=n.highlightColor&&(n.series.highlightColor=n.highlightColor);for(b=0;b<n.xaxes.length;++b)B(M,b+1).options=n.xaxes[b];for(b=0;b<n.yaxes.length;++b)B(S,b+1).options=n.yaxes[b];for(var g in Q)n.hooks[g]&&n.hooks[g].length&&(Q[g]=Q[g].concat(n.hooks[g]));m(Q.processOptions,[n])})(b);(function(){a.css("padding",0).children(":not(.flot-base,.flot-overlay)").remove();"static"==a.css("position")&&
a.css("position","relative");K=new r("flot-base",a);ea=new r("flot-overlay",a);q=K.context;O=ea.context;W=d(ea.element).unbind();var b=a.data("plot");b&&(b.shutdown(),ea.clear());a.data("plot",F)})();g(c);A();J();n.grid.hoverable&&(W.mousemove(da),W.bind("mouseleave",X));n.grid.clickable&&W.click(ia);m(Q.bindEvents,[W]);var Y=[],ha=null}var c=Object.prototype.hasOwnProperty;r.prototype.resize=function(a,c){if(0>=a||0>=c)throw Error("Invalid dimensions for plot, width = "+a+", height = "+c);var b=
this.element,d=this.context,m=this.pixelRatio;this.width!=a&&(b.width=a*m,b.style.width=a+"px",this.width=a);this.height!=c&&(b.height=c*m,b.style.height=c+"px",this.height=c);d.restore();d.save();d.scale(m,m)};r.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};r.prototype.render=function(){var a=this._textCache,e;for(e in a)if(c.call(a,e)){var b=this.getTextLayer(e),d=a[e];b.hide();for(var m in d)if(c.call(d,m)){var g=d[m],f;for(f in g)if(c.call(g,f)){for(var p=g[f].positions,
s=0,r;r=p[s];s++)r.active?r.rendered||(b.append(r.element),r.rendered=!0):(p.splice(s--,1),r.rendered&&r.element.detach());0==p.length&&delete g[f]}}b.show()}};r.prototype.getTextLayer=function(a){var c=this.text[a];null==c&&(null==this.textContainer&&(this.textContainer=d("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),c=this.text[a]=d("<div></div>").addClass(a).css({position:"absolute",top:0,
left:0,bottom:0,right:0}).appendTo(this.textContainer));return c};r.prototype.getTextInfo=function(a,c,b,l,m){var g,f;c=""+c;l="object"===typeof b?b.style+" "+b.variant+" "+b.weight+" "+b.size+"px/"+b.lineHeight+"px "+b.family:b;g=this._textCache[a];null==g&&(g=this._textCache[a]={});f=g[l];null==f&&(f=g[l]={});g=f[c];null==g&&(a=d("<div></div>").html(c).css({position:"absolute","max-width":m,top:-9999}).appendTo(this.getTextLayer(a)),"object"===typeof b?a.css({font:l,color:b.color}):"string"===typeof b&&
a.addClass(b),g=f[c]={width:a.outerWidth(!0),height:a.outerHeight(!0),element:a,positions:[]},a.detach());return g};r.prototype.addText=function(a,c,b,d,m,g,f,p,s){a=this.getTextInfo(a,d,m,g,f);d=a.positions;"center"==p?c-=a.width/2:"right"==p&&(c-=a.width);"middle"==s?b-=a.height/2:"bottom"==s&&(b-=a.height);for(s=0;m=d[s];s++)if(m.x==c&&m.y==b){m.active=!0;return}m={active:!0,rendered:!1,element:d.length?a.element.clone():a.element,x:c,y:b};d.push(m);m.element.css({top:Math.round(b),left:Math.round(c),
"text-align":p})};r.prototype.removeText=function(a,d,b,l,m,g){if(null==l){if(d=this._textCache[a],null!=d)for(var f in d)if(c.call(d,f)){b=d[f];for(var p in b)if(c.call(b,p))for(a=b[p].positions,l=0;m=a[l];l++)m.active=!1}}else for(a=this.getTextInfo(a,l,m,g).positions,l=0;m=a[l];l++)m.x==d&&m.y==b&&(m.active=!1)};d.plot=function(a,c,b){return new w(d(a),c,b,d.plot.plugins)};d.plot.version="0.8.1";d.plot.plugins=[];d.fn.plot=function(a,c){return this.each(function(){d.plot(this,a,c)})}})(jQuery);
(function(d){var r={series:{pie:{show:!1,radius:"auto",innerRadius:0,startAngle:1.5,tilt:1,shadow:{left:5,top:15,alpha:.02},offset:{top:0,left:"auto"},stroke:{color:"#fff",width:1},label:{show:"auto",formatter:function(d,c){return"<div style='font-size:x-small;text-align:center;padding:2px;color:"+c.color+";'>"+d+"<br/>"+Math.round(c.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:.5}}}};d.plot.plugins.push({init:function(w){function c(a){for(var b=
0,c=0,e=0,f=r.series.pie.combine.color,g=[],m=0;m<a.length;++m){var l=a[m].data;d.isArray(l)&&1==l.length&&(l=l[0]);d.isArray(l)?!isNaN(parseFloat(l[1]))&&isFinite(l[1])?l[1]=+l[1]:l[1]=0:l=!isNaN(parseFloat(l))&&isFinite(l)?[1,+l]:[1,0];a[m].data=[l]}for(m=0;m<a.length;++m)b+=a[m].data[0][1];for(m=0;m<a.length;++m)l=a[m].data[0][1],l/b<=r.series.pie.combine.threshold&&(c+=l,e++,f||(f=a[m].color));for(m=0;m<a.length;++m)l=a[m].data[0][1],(2>e||l/b>r.series.pie.combine.threshold)&&g.push({data:[[1,
l]],color:a[m].color,label:a[m].label,angle:l*Math.PI*2/b,percent:l/(b/100)});1<e&&g.push({data:[[1,c]],color:f,label:r.series.pie.combine.label,angle:c*Math.PI*2/b,percent:c/(b/100)});return g}function a(a,b){function c(){t.clearRect(0,0,l,m);p.children().filter(".pieLabel, .pieLabelBackground").remove()}function f(){var a=r.series.pie.shadow.left,b=r.series.pie.shadow.top,c=r.series.pie.shadow.alpha,d=1<r.series.pie.radius?r.series.pie.radius:s*r.series.pie.radius;if(!(d>=l/2-a||d*r.series.pie.tilt>=
m/2-b||10>=d)){t.save();t.translate(a,b);t.globalAlpha=c;t.fillStyle="#000";t.translate(B,z);t.scale(1,r.series.pie.tilt);for(a=1;10>=a;a++)t.beginPath(),t.arc(0,0,d,0,2*Math.PI,!1),t.fill(),d-=a;t.restore()}}function g(){function a(b,c,d){0>=b||isNaN(b)||(d?t.fillStyle=c:(t.strokeStyle=c,t.lineJoin="round"),t.beginPath(),1E-9<Math.abs(b-2*Math.PI)&&t.moveTo(0,0),t.arc(0,0,f,A,A+b/2,!1),t.arc(0,0,f,A+b/2,A+b,!1),t.closePath(),A+=b,d?t.fill():t.stroke())}function b(){for(var a=c,e=1<r.series.pie.label.radius?
r.series.pie.label.radius:s*r.series.pie.label.radius,f=0;f<w.length;++f){if(w[f].percent>=100*r.series.pie.label.threshold){var g;g=w[f];var t=a,A=f;if(0==g.data[0][1])g=!0;else{var C=r.legend.labelFormatter,y=void 0,J=r.series.pie.label.formatter,y=C?C(g.label,g):g.label;J&&(y=J(y,g));C=(t+g.angle+t)/2;t=B+Math.round(Math.cos(C)*e);C=z+Math.round(Math.sin(C)*e)*r.series.pie.tilt;p.append("<span class='pieLabel' id='pieLabel"+A+"' style='position:absolute;top:"+C+"px;left:"+t+"px;'>"+y+"</span>");
A=p.children("#pieLabel"+A);y=C-A.height()/2;C=t-A.width()/2;A.css("top",y);A.css("left",C);0<0-y||0<0-C||0>m-(y+A.height())||0>l-(C+A.width())?g=!1:(0!=r.series.pie.label.background.opacity&&(t=r.series.pie.label.background.color,null==t&&(t=g.color),g="top:"+y+"px;left:"+C+"px;",d("<div class='pieLabelBackground' style='position:absolute;width:"+A.width()+"px;height:"+A.height()+"px;"+g+"background-color:"+t+";'></div>").css("opacity",r.series.pie.label.background.opacity).insertBefore(A)),g=!0)}if(!g)return!1}a+=
w[f].angle}return!0}var c=Math.PI*r.series.pie.startAngle,f=1<r.series.pie.radius?r.series.pie.radius:s*r.series.pie.radius;t.save();t.translate(B,z);t.scale(1,r.series.pie.tilt);t.save();for(var A=c,C=0;C<w.length;++C)w[C].startAngle=A,a(w[C].angle,w[C].color,!0);t.restore();if(0<r.series.pie.stroke.width){t.save();t.lineWidth=r.series.pie.stroke.width;A=c;for(C=0;C<w.length;++C)a(w[C].angle,r.series.pie.stroke.color,!1);t.restore()}e(t);t.restore();return r.series.pie.label.show?b():!0}if(p){var l=
a.getPlaceholder().width(),m=a.getPlaceholder().height(),H=p.children().filter(".legend").children().width()||0;t=b;Z=!1;s=Math.min(l,m/r.series.pie.tilt)/2;z=m/2+r.series.pie.offset.top;B=l/2;B="auto"==r.series.pie.offset.left?r.legend.position.match("w")?B+H/2:B-H/2:B+r.series.pie.offset.left;B<s?B=s:B>l-s&&(B=l-s);var w=a.getData(),H=0;do 0<H&&(s*=.95),H+=1,c(),.8>=r.series.pie.tilt&&f();while(!g()&&10>H);10<=H&&(c(),p.prepend("<div class='error'>Could not draw pie with labels contained inside canvas</div>"));
a.setSeries&&a.insertLegend&&(a.setSeries(w),a.insertLegend())}}function e(a){if(0<r.series.pie.innerRadius){a.save();var b=1<r.series.pie.innerRadius?r.series.pie.innerRadius:s*r.series.pie.innerRadius;a.globalCompositeOperation="destination-out";a.beginPath();a.fillStyle=r.series.pie.stroke.color;a.arc(0,0,b,0,2*Math.PI,!1);a.fill();a.closePath();a.restore();a.save();a.beginPath();a.strokeStyle=r.series.pie.stroke.color;a.arc(0,0,b,0,2*Math.PI,!1);a.stroke();a.closePath();a.restore()}}function b(a){m("plothover",
a)}function l(a){m("plotclick",a)}function m(a,b){var c=w.offset(),d=parseInt(b.pageX-c.left);a:{for(var c=parseInt(b.pageY-c.top),e=w.getData(),f=w.getOptions(),f=1<f.series.pie.radius?f.series.pie.radius:s*f.series.pie.radius,l,m,Z=0;Z<e.length;++Z){var y=e[Z];if(y.pie.show){t.save();t.beginPath();t.moveTo(0,0);t.arc(0,0,f,y.startAngle,y.startAngle+y.angle/2,!1);t.arc(0,0,f,y.startAngle+y.angle/2,y.startAngle+y.angle,!1);t.closePath();l=d-B;m=c-z;if(t.isPointInPath){if(t.isPointInPath(d-B,c-z)){t.restore();
d={datapoint:[y.percent,y.data],dataIndex:0,series:y,seriesIndex:Z};break a}}else{var L=f*Math.cos(y.startAngle),U=f*Math.sin(y.startAngle),da=f*Math.cos(y.startAngle+y.angle/4),X=f*Math.sin(y.startAngle+y.angle/4),ia=f*Math.cos(y.startAngle+y.angle/2),ga=f*Math.sin(y.startAngle+y.angle/2),ca=f*Math.cos(y.startAngle+y.angle/1.5),la=f*Math.sin(y.startAngle+y.angle/1.5),ka=f*Math.cos(y.startAngle+y.angle),ja=f*Math.sin(y.startAngle+y.angle),L=[[0,0],[L,U],[da,X],[ia,ga],[ca,la],[ka,ja]];l=[l,m];m=!1;
U=-1;da=L.length;for(X=da-1;++U<da;X=U)(L[U][1]<=l[1]&&l[1]<L[X][1]||L[X][1]<=l[1]&&l[1]<L[U][1])&&l[0]<(L[X][0]-L[U][0])*(l[1]-L[U][1])/(L[X][1]-L[U][1])+L[U][0]&&(m=!m);if(m){t.restore();d={datapoint:[y.percent,y.data],dataIndex:0,series:y,seriesIndex:Z};break a}}t.restore()}}d=null}if(r.grid.autoHighlight)for(c=0;c<N.length;++c)e=N[c],e.auto!=a||d&&e.series==d.series||(e=e.series,null==e&&(N=[],w.triggerRedrawOverlay()),e=g(e),-1!=e&&(N.splice(e,1),w.triggerRedrawOverlay()));d&&(c=d.series,e=g(c),
-1==e?(N.push({series:c,auto:a}),w.triggerRedrawOverlay()):a||(N[e].auto=!1));p.trigger(a,[{pageX:b.pageX,pageY:b.pageY},d])}function g(a){for(var b=0;b<N.length;++b)if(N[b].series==a)return b;return-1}var f=null,p=null,s=null,B=null,z=null,Z=!1,t=null,N=[];w.hooks.processOptions.push(function(a,b){b.series.pie.show&&(b.grid.show=!1,"auto"==b.series.pie.label.show&&(b.series.pie.label.show=b.legend.show?!1:!0),"auto"==b.series.pie.radius&&(b.series.pie.radius=b.series.pie.label.show?.75:1),1<b.series.pie.tilt?
b.series.pie.tilt=1:0>b.series.pie.tilt&&(b.series.pie.tilt=0))});w.hooks.bindEvents.push(function(a,c){var d=a.getOptions();d.series.pie.show&&(d.grid.hoverable&&c.unbind("mousemove").mousemove(b),d.grid.clickable&&c.unbind("click").click(l))});w.hooks.processDatapoints.push(function(a,b,e,g){a.getOptions().series.pie.show&&!Z&&(Z=!0,f=a.getCanvas(),p=d(f).parent(),r=a.getOptions(),a.setData(c(a.getData())))});w.hooks.drawOverlay.push(function(a,b){if(a.getOptions().series.pie.show){var c=a.getOptions(),
d=1<c.series.pie.radius?c.series.pie.radius:s*c.series.pie.radius;b.save();b.translate(B,z);b.scale(1,c.series.pie.tilt);for(var f=0;f<N.length;++f){var g=N[f].series;0>=g.angle||isNaN(g.angle)||(b.fillStyle="rgba(255, 255, 255, "+c.series.pie.highlight.opacity+")",b.beginPath(),1E-9<Math.abs(g.angle-2*Math.PI)&&b.moveTo(0,0),b.arc(0,0,d,g.startAngle,g.startAngle+g.angle/2,!1),b.arc(0,0,d,g.startAngle+g.angle/2,g.startAngle+g.angle,!1),b.closePath(),b.fill())}e(b);b.restore()}});w.hooks.draw.push(function(b,
c){b.getOptions().series.pie.show&&a(b,c)})},options:r,name:"pie",version:"1.1"})})(jQuery);
(function(d,r){var w=0;d.widget("s3.pivottable",{options:{showTotals:!0,ajaxURL:null,defaultChart:{type:"breakdown",axis:"rows"},renderFilter:!0,renderOptions:!0,renderChart:!0,renderTable:!0,collapseFilter:!1,collapseOptions:!0,collapseChart:!0,collapseTable:!1,exploreChart:!1,filterURL:null,filterForm:null,filterTab:null,autoSubmit:1E3,thousandSeparator:" ",thousandGrouping:"3",minTickSize:null,precision:null},_create:function(){this.id=w;w+=1;this.chart=this.table=null},_init:function(){var c=
d(this.element),a=this.options;this.table=this.data=null;this.chart_options={currentChart:null,currentDataIndex:null,currentSeriesIndex:null};this.table_options={hidden:!1};var e=c.find(".pt-chart");this.chart=e.length?e.first():null;a.renderFilter||a.renderOptions?(e=c.attr("id"),a.renderOptions?(d("#"+e+"-options").show(),a.collapseOptions&&(d("#"+e+"-options legend").siblings().toggle(),d("#"+e+"-options legend").children().toggle())):d("#"+e+"-options").hide(),a.renderFilter?(d("#"+e+"-filters").show(),
a.collapseFilter&&(d("#"+e+"-filters legend").siblings().toggle(),d("#"+e+"-filters legend").children().toggle())):d("#"+e+"-options").hide()):c.find(".pt-form-container").hide();a.collapseTable&&(this.table_options.hidden=!0,c.find(".pt-table").hide(),c.find(".pt-show-table").show(),c.find(".pt-hide-table").hide());a.numberFormatter=function(b){var c=a.precision,c=c||0==c?b.toFixed(c):b.toString(),c=c.split(".");b=c[0];c=1<c.length?"."+c[1]:"";b=b.replace(new RegExp("\\B(?=(\\d{"+a.thousandGrouping+
"})+(?!\\d))","g"),a.thousandSeparator);return b+c};this.refresh()},_destroy:function(){this.table&&this.table.remove();this.chart&&this.chart.empty()},refresh:function(){var c=d(this.element),a=null;this._unbindEvents();var e=c.find('input[type="hidden"][name="pivotdata"]');e.length&&(a=JSON.parse(d(e).first().val()));a?"count"==a.method&&(this.options.precision=0,this.options.minTickSize=1):(a={empty:!0},c.find(".pt-hide-table").hide(),c.find(".pt-show-table").hide());this.data=a;a.nodata?(c.find(".pt-table").first().empty().append(d('<div class="pt-no-data">'+
a.nodata+"</div>")),c.find(".pt-hide-table").hide(),c.find(".pt-show-table").hide()):(this._renderTable(),this._renderChartOptions());this._renderChart();a.empty?c.find(".pt-empty").show():c.find(".pt-empty").hide();this.options.autoSubmit?c.find(".pt-submit").hide():c.find(".pt-submit").show();this._bindEvents();c.find(".pt-throbber").hide()},_renderTable:function(){var c=d(this.element),a=c.find(".pt-table").first().empty();this.table=null;var e=this.data;if(!e.empty)if(this.options.renderTable){var b=
e.cells,l=e.cols,m=e.rows,g=e.total,f=e.labels,e=this._renderHeader(l,f);e.append(this._renderColumns(l,f));b=this._renderRows(m,l,f,b);l=this._renderFooter(m,l,f,g);m=d('<table class="dataTable display report"/>').append(e).append(b);null!==l&&m.append(l);this.table=d(m);d(a).append(this.table);this.table_options.hidden?(c.find(".pt-show-table").show(),c.find(".pt-hide-table").hide()):(c.find(".pt-show-table").hide(),c.find(".pt-hide-table").show())}else c.find(".pt-show-table").hide(),c.find(".pt-hide-table").hide()},
_renderHeader:function(c,a){var e=d("<tr>");colspan="__other__"==c[c.length-1][0]?c.length-1:c.length;e.append(d('<th scope="col">'+a.layer+"</th>"));(1<c.length||c[0][4])&&e.append(d('<th scope="col" colspan="'+colspan+'">'+a.cols+"</th>"));this.options.showTotals&&e.append(d('<th class="totals_header row_totals" scope="col" rowspan="2">'+a.total+"</th>"));return d("<thead>").append(e)},_renderColumns:function(c,a){var e=d("<tr>"),b;e.append(d('<th scope="col">'+a.rows+"</th>"));for(var l=1==c.length&&
null===c[0][4]?!0:!1,m=0;m<c.length;m++)"__other__"==c[m][0]||l&&this.options.showTotals||(b=l?"":c[m][4],e.append(d('<th scope="col">'+b+"</th>")));return e},_renderRows:function(c,a,e,b){for(var l=d("<tbody>"),m=this.options.showTotals,g=1==c.length&&null===c[0][4]?!0:!1,f,p,s=0;s<b.length;s++)f=c[s],"__other__"==f[0]||g&&this.options.showTotals||(p=g?"":c[s][4],p=d('<tr class="'+(s%2?"odd":"even")+'"><td>'+p+"</td></tr>").append(this._renderCells(b[s],a,e)),m&&p.append(d("<td>"+f[2]+"</td>")),
l.append(p));return l},_renderCells:function(c,a,e){for(var b,l=e.none,m=1==a.length&&null===a[0][4]?!0:!1,g=[],f,p,s=0;s<c.length;s++)if(!("__other__"==a[s][0]||m&&this.options.showTotals)){b=c[s];e=b.items;f=d("<td>");if(null===e)p=d('<div class="pt-cell-value">'+l+"</div>");else if(d.isArray(e)){p=d('<div class="pt-cell-value">');list=d("<ul>");for(var r=0;r<e.length;r++)list.append(d("<li>"+e[r]+"</li>"));p.append(list)}else p=d('<div class="pt-cell-value">'+e+"</div>");f.append(p);b=b.keys;e&&
b&&b.length&&f.data("records",b).append(d('<div class="pt-cell-zoom"></div>'));g.push(f)}return g},_renderFooter:function(c,a,e,b){var l=1==a.length&&null===a[0][4]?!0:!1;if(this.options.showTotals){var m,g;g=m=0;for(len=c.length;m<len;m++)"__other__"!=c[m][0]&&g++;c=d('<tr class="'+(g%2?"odd":"even")+' totals_row"><th class="totals_header" scope="row">'+e.total+"</th></tr>");for(m=0;m<a.length;m++)"__other__"==a[m][0]||l||c.append(d("<td>"+a[m][2]+"</td>"));c.append(d("<td>"+b+"</td>"));return d("<tfoot>").append(c)}return null},
_renderChartOptions:function(){var c=d(this.element),a=c.find(".pt-chart-controls").first().empty(),e=this.data;if(!e.empty&&this.options.renderChart){var e=e.labels,b=c.attr("id"),c=e.layer,l=e.rows,m=e.cols,g=e.per,f=d('<div class="pt-chart-opts">'),p=b+"-pchart-rows",s=b+"-vchart-rows",r=b+"-hchart-rows",z=b+"-pchart-cols",w=b+"-vchart-cols",b=b+"-hchart-cols";c&&d(f).append(d('<span class="pt-chart-label">'+c+": </span>"));l&&d(f).append(d('<div id="'+p+'" class="pt-chart-icon pt-pchart"/><div id="'+
s+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+g+" "+l+"</span>"));m&&d(f).append(d('<div id="'+z+'" class="pt-chart-icon pt-pchart"/><div id="'+w+'" class="pt-chart-icon pt-vchart"/><span class="pt-chart-label">'+g+" "+m+"</span>"));l&&m&&d(f).append(d('<span class="pt-chart-label">| '+e.breakdown+': </span><div id="'+r+'" class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+[g,l,"&amp;",m].join(" ")+'</span><div id="'+b+'"  class="pt-chart-icon pt-hchart"/><span class="pt-chart-label">'+
[g,m,"&amp;",l].join(" ")+"</span>"));d(a).append(f)}},_truncateLabel:function(c,a){return c.length>a?c.substring(0,a-3).replace(/\s+$/g,"")+"...":c},_renderChart:function(c){var a=d(this.element),e=this.data;a.find(".pt-chart-contents").hide();if(a=this.chart)if(d(a).unbind("plothover").unbind("plotclick").empty(),!e.empty&&this.options.renderChart)if(!1===c)this.options.collapseChart=!0;else{a=this.options.collapseChart;if("undefined"==typeof c||!c){if(a)return;c=this.chart_options.currentChart}if("undefined"==
typeof c||!c){if(a)return;c=this.options.defaultChart}if("undefined"!=typeof c&&c){this.options.collapseChart=!1;this.chart_options.currentChart=c;a=c.type;c=c.axis;var b=e.labels,l=b.per,m=b.layer+" "+l+" "+b.rows,b=b.layer+" "+l+" "+b.cols,l=e.filter,g=l[0],f=l[1];"piechart"==a?"rows"==c?this._renderPieChart(e.rows,m,g):this._renderPieChart(e.cols,b,f):"barchart"==a?"rows"==c?this._renderBarChart(e.rows,m,g):this._renderBarChart(e.cols,b,f):"breakdown"==a&&("rows"==c?this._renderBreakDown(e,0,m,
l):this._renderBreakDown(e,1,b,l))}}},_renderPieChart:function(c,a,e){var b=this.chart;if(b){d(b).closest(".pt-chart-contents").show().css({width:"800px"});d(b).css({height:"360px"});for(var l=[],m=0;m<c.length;m++){var g=c[m];g[1]||l.push({index:g[0],label:g[4],data:g[2],key:g[3]})}a?d(b).siblings(".pt-chart-title").html("<h4>"+a+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),l,{series:{pie:{show:!0,radius:125}},legend:{show:!0,position:"ne"},grid:{hoverable:!0,clickable:!0}});
var f=this;this.chart_options.currentDataIndex=null;d(b).bind("plothover",function(a,b,c){if(c){if(f.chart_options.currentDataIndex!=c.seriesIndex){f._removeChartTooltip();f.chart_options.currentDataIndex=c.seriesIndex;a=c.series.data[0][1];var e=c.series.percent.toFixed(1),g='<div class="pt-tooltip-label">'+c.series.label+"</div>";f._renderChartTooltip(b.pageX,b.pageY,g+('<div class="pt-tooltip-text">'+a+" ("+e+"%)</div>"));d(".pt-tooltip-label").css({color:c.series.color})}}else f._removeChartTooltip()});
this.options.exploreChart&&e&&d(b).bind("plotclick",function(a,b,c){if(c){a=l[c.seriesIndex];try{var d=[["__other__"==a.index?e+"__belongs":e,a.key]]}catch(g){return}f._chartExplore(d)}})}},_renderBarChart:function(c,a,e){var b=this.chart,l=this._truncateLabel;if(b){d(b).closest(".pt-chart-contents").show().css({width:"96%"});d(b).css({height:"360px"});for(var m=[],g=[],f=0,p=0;p<c.length;p++){var s=c[p];s[1]||(m.push({index:s[0],label:s[4],data:[[f+1,s[2]]],key:s[3]}),g.push([f+1,l(s[4],16)]),f++)}a?
d(b).siblings(".pt-chart-title").html("<h4>"+a+"</h4>"):d(b).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(b),m,{series:{bars:{show:!0,barWidth:.6,align:"center"}},legend:{show:!1,position:"ne"},grid:{hoverable:!0,clickable:!0},xaxis:{ticks:g,min:0,max:m.length+1,tickLength:0},yaxis:{tickFormatter:this.options.numberFormatter,minTickSize:this.options.minTickSize}});var r=this;this.chart_options.currentDataIndex=null;d(b).bind("plothover",function(a,b,c){c?r.chart_options.currentDataIndex!=
c.seriesIndex&&(r._removeChartTooltip(),r.chart_options.currentDataIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+c.series.label+"</div>",a+='<div class="pt-tooltip-text">'+c.series.data[0][1]+"</div>",r._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({color:c.series.color})):r._removeChartTooltip()});this.options.exploreChart&&e&&d(b).bind("plotclick",function(a,b,c){if(c){a=m[c.seriesIndex];try{var d=[["__other__"==a.index?e+"__belongs":e,a.key]]}catch(f){return}r._chartExplore(d)}})}},
_renderBreakDown:function(c,a,e,b){var l=this.chart;if(l){d(l).closest(".pt-chart-contents").show().css({width:"96%"});var m,g,f=c.cells,p,r=[],B=[];0===a?(a=c.rows,p=c.cols,c=function(a,b){return f[r[a]][B[b]].value},m=b[0],g=b[1]):(a=c.cols,p=c.rows,c=function(a,b){return f[B[b]][r[a]].value},m=b[1],g=b[0]);var z=[],w=[];b=0;for(len=a.length;b<len;b++)a[b][1]||(z.push(a[b]),r.push(b));b=0;for(len=p.length;b<len;b++)p[b][1]||(w.push(p[b]),B.push(b));b=Math.max(z.length*Math.max(16*(w.length+1),50)+
70,360);d(l).css({height:b+"px"});b=[];for(var t=a=0;t<w.length;t++){for(var N={label:w[t][4]},A=[],C,J=0;J<z.length;J++)p=(z.length-J)*(w.length+1)-t,C=c(J,t),C>a&&(a=C),A.push([C,p]);N.data=A;b.push(N)}c=[];for(J=0;J<z.length;J++)t=z[J][4],p=(z.length-J)*(w.length+1)+1,c.push([p,t]);e?d(l).siblings(".pt-chart-title").html("<h4>"+e+"</h4>"):d(l).siblings(".pt-chart-title").empty();reportChart=jQuery.plot(d(l),b,{series:{bars:{show:!0,barWidth:.8,align:"center",horizontal:!0}},legend:{show:!0,position:"ne"},
yaxis:{ticks:c,labelWidth:120,max:z.length*(w.length+1)+1},xaxis:{max:1.1*a,tickFormatter:this.options.numberFormatter,minTickSize:this.options.minTickSize},grid:{hoverable:!0,clickable:!0}});d(".flot-y-axis .tickLabel").css({"padding-top":"25px",left:"0px",width:"120px"});var V=this;this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null;d(l).bind("plothover",function(a,b,c){if(c){if(V.chart_options.currentDataIndex!=c.dataIndex||V.chart_options.currentSeriesIndex!=c.seriesIndex)V._removeChartTooltip(),
V.chart_options.currentDataIndex=c.dataIndex,V.chart_options.currentSeriesIndex=c.seriesIndex,a='<div class="pt-tooltip-label">'+z[c.dataIndex][4]+"</div>",a+='<div class="pt-tooltip-text">'+c.series.label+' : <span class="pt-tooltip-value">'+c.datapoint[0]+"</span></div>",V._renderChartTooltip(b.pageX,b.pageY,a),d(".pt-tooltip-label").css({"padding-bottom":"8px"}),d(".pt-tooltip-text").css({color:c.series.color}),d(".pt-tooltip-value").css({"font-weight":"bold"})}else V._removeChartTooltip()});this.options.exploreChart&&
m&&g&&d(l).bind("plotclick",function(a,b,c){if(c){try{var d=z[c.dataIndex][3],e=w[c.seriesIndex][3];a=[[m,d?d:"None"],[g,e?e:"None"]]}catch(f){return}V._chartExplore(a)}})}},_chartExplore:function(c){var a=this.options,e=d(this.element).closest(".ui-tabs"),b=a.filterTab;if(e.length&&!1!==b)a=(a=a.filterForm)?d("#"+a):r,S3.search.setCurrentFilters(a,c),c=b?d("#"+b).index():0,e.tabs("option","active",c);else if(filterURL=a.filterURL)e=this._updateURL(filterURL,c),window.open(e,"_blank")},_renderChartTooltip:function(c,
a,e){d('<div class="pt-chart-tooltip">'+e+"</div>").css({position:"absolute",display:"none",top:a-50,left:c+10,border:"1px solid #999",padding:"10px","min-height":"50px","max-width":"240px","z-index":"501","background-color":"white",color:"#000",opacity:.95}).appendTo("body").fadeIn(200)},_removeChartTooltip:function(){d(".pt-chart-tooltip").remove();this.chart_options.currentDataIndex=null;this.chart_options.currentSeriesIndex=null},_getOptions:function(){var c="#"+d(this.element).attr("id");return{rows:d(c+
"-rows").val(),cols:d(c+"-cols").val(),fact:d(c+"-fact").val(),totals:d(c+"-totals").is(":checked")?1:0}},_getFilters:function(){var c="#"+d(this.element).attr("id"),c=d(c+"-filters");try{return c.length?S3.search.getCurrentFilters(c.first()):null}catch(a){}},_updateURL:function(c,a){var d,b,l=[],m={};d={};var g,f,p;if(a)for(g=0,len=a.length;g<len;g++)d=a[g],p=d[0],m[p]=!0,l.push(p+"="+d[1]);d=this.options.ajaxURL.split("?");if(1<d.length){b=d[1].split("&");d={};g=0;for(len=b.length;g<len;g++)f=b[g].split("="),
1<f.length&&(p=decodeURIComponent(f[0]),m[p]||(l.push(p+"="+decodeURIComponent(f[1])),d[p]=!0));for(p in d)m[p]=!0}d=c.split("?");if(1<d.length)for(b=d[1].split("&"),g=0,len=b.length;g<len;g++)f=b[g].split("="),1<f.length&&(p=decodeURIComponent(f[0]),m[p]||l.push(p+"="+decodeURIComponent(f[1])));l=l.join("&");m=d[0];l&&(m=m+"?"+l);return m},_updateAjaxURL:function(c,a){var e=this.options.ajaxURL.split("?"),b=null,b=[],l=!1,m;1<e.length?(m=e[1],m=m.split("&")):m=[];var g,f;if(c)for(g in c)newopt=c[g],
f=g+"="+newopt,"totals"==g?this.options.showTotals=newopt?!0:!1:l||-1!=d.inArray(f,m)||(l=!0),b.push(f);g={};var p={},r,w,z;if(a)for(r=0,w=a.length;r<w;r++)f=a[r],z=f[0],f=f[1],null===f?g[z]||(p[z]=!0):(p[z]&&(p[z]=!1),g[z]?g[z].push(z+"="+f):g[z]=[z+"="+f]);r=0;for(w=m.length;r<w;r++)f=m[r].split("="),1<f.length&&(z=decodeURIComponent(f[0]),f=decodeURIComponent(f[1]),p[z]?l=!0:g[z]?l||-1!=d.inArray(z+"="+f,g[z])||(l=!0):"aggregate"!=z&&(c&&c.hasOwnProperty(z)||b.push(m[r])));for(z in g)for(r=0,w=
g[z].length;r<w;r++)l||-1!=d.inArray(g[z][r],m)||(l=!0),b.push(g[z][r]);b=b.join("&");e=e[0];b&&(e=e+"?"+b);this.options.ajaxURL=e;return l},reload:function(c,a,e){e="undefined"!=typeof e?e:!0;"undefined"==typeof a&&(a=this._getFilters());var b=this,l=this.element,m,g=l.find('input[type="hidden"][name="pivotdata"]');if(g.length){l.find(".pt-throbber").show();if(c||a)m=this._updateAjaxURL(c,a);m||e?(c=this.options.ajaxURL,l.find(".pt-empty").hide(),d.ajax({url:c,dataType:"json"}).done(function(a){g.first().val(JSON.stringify(a));
b.refresh()}).fail(function(a,b,c){msg="UNAUTHORIZED"==c?i18n.gis_requires_login:a.responseText;console.log(msg)})):b.refresh()}},_bindEvents:function(c){var a=this,e=d(this.element);c=this.data;var b=e.attr("id");d("#"+b+"-options legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});d("#"+b+"-filters legend").click(function(){d(this).siblings().toggle();d(this).children().toggle()});e.find(".pt-hide-table").click(function(){a.table_options.hidden=!0;e.find(".pt-table").hide();
d(this).siblings(".pt-show-table").show();d(this).hide()});e.find(".pt-show-table").click(function(){a.table_options.hidden=!1;e.find(".pt-table").show();d(this).siblings(".pt-hide-table").show();d(this).hide()});d("#"+b+"-totals").click(function(){var b=d(this).is(":checked");a.options.showTotals!=b&&a.reload({totals:b},null,!1)});d("#"+b+"-rows, #"+b+"-cols, #"+b+"-fact").on("change.autosubmit",function(){d("#"+b+"-pt-form").trigger("optionChanged")});if(this.options.autoSubmit){var l=this.options.autoSubmit;
d("#"+b+"-pt-form").on("optionChanged",function(){var b=d(this);if(!b.data("noAutoSubmit")){var c=b.data("autoSubmitTimeout");c&&clearTimeout(c);c=setTimeout(function(){var b=a._getOptions(),c=a._getFilters();a.reload(b,c,!1)},l);b.data("autoSubmitTimeout",c)}})}else d("#"+b+"-pt-form input.pt-submit").click(function(){var b=a._getOptions(),c=a._getFilters();a.reload(b,c,!1)});d("#"+b+" div.pt-table div.pt-cell-zoom").click(function(a){a=d(a.currentTarget);var b=a.closest("td"),e=b.find(".pt-cell-records");
if(0<e.length)e.remove(),a.removeClass("opened");else{for(var l=b.data("records"),e=d("<div/>").addClass("pt-cell-records"),r=d("<ul/>"),w=0;w<l.length;w++)r.append("<li>"+c.lookup[l[w]]+"</li>");e.append(r);b.append(e);a.addClass("opened")}});d("#"+b+"-pchart-rows").click(function(){a._renderChart({type:"piechart",axis:"rows"})});d("#"+b+"-vchart-rows").click(function(){a._renderChart({type:"barchart",axis:"rows"})});d("#"+b+"-pchart-cols").click(function(){a._renderChart({type:"piechart",axis:"cols"})});
d("#"+b+"-vchart-cols").click(function(){a._renderChart({type:"barchart",axis:"cols"})});d("#"+b+"-hchart-rows").click(function(){a._renderChart({type:"breakdown",axis:"rows"})});d("#"+b+"-hchart-cols").click(function(){a._renderChart({type:"breakdown",axis:"cols"})});e.find(".pt-hide-chart").click(function(){a._renderChart(!1)})},_unbindEvents:function(){var c=d(this.element),a=c.attr("id");d("#"+a+" div.pt-table div.pt-cell-zoom").unbind("click");d("#"+a+"-options legend").unbind("click");d("#"+
a+"-filters legend").unbind("click");d(a+"-totals").unbind("click");d("#"+a+"-rows, #"+a+"-cols, #"+a+"-fact").unbind("change.autosubmit");d("#"+a+"-pt-form").unbind("optionChanged");c.find("input.pt-submit").unbind("click");d("#"+a+"-pchart-rows").unbind("click");d("#"+a+"-vchart-rows").unbind("click");d("#"+a+"-pchart-cols").unbind("click");d("#"+a+"-vchart-cols").unbind("click");c.find(".pt-hide-table").unbind("click");c.find(".pt-show-table").unbind("click");c.find(".pt-hide-chart").unbind("click")}})})(jQuery);
