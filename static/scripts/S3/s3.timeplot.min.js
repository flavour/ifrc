/*
 2013-2016 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+

*/
!function(){function W(c,t){return c<t?-1:c>t?1:c>=t?0:NaN}function r(c){return null!=c&&!isNaN(c)}function a(c){return{left:function(t,a,g,h){3>arguments.length&&(g=0);4>arguments.length&&(h=t.length);for(;g<h;){var n=g+h>>>1;0>c(t[n],a)?g=n+1:h=n}return g},right:function(t,a,g,h){3>arguments.length&&(g=0);4>arguments.length&&(h=t.length);for(;g<h;){var n=g+h>>>1;0<c(t[n],a)?h=n:g=n+1}return g}}}function b(c){return c.length}function m(c,t){try{for(var a in t)Object.defineProperty(c.prototype,a,
{value:t[a],enumerable:!1})}catch(g){c.prototype=t}}function B(){}function p(c){return eb+c in this}function f(){var c=[];this.forEach(function(t){c.push(t)});return c}function l(){var c=0,t;for(t in this)t.charCodeAt(0)===Sb&&++c;return c}function v(){for(var c in this)if(c.charCodeAt(0)===Sb)return!1;return!0}function u(){}function I(c,t,a){return function(){var g=a.apply(t,arguments);return g===t?c:g}}function G(c,t){if(t in c)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var a=0,g=Sd.length;a<
g;++a){var h=Sd[a]+t;if(h in c)return h}}function D(){}function H(){}function E(c){function t(){for(var t=a,g=-1,K=t.length,z;++g<K;)(z=t[g].on)&&z.apply(this,arguments);return c}var a=[],g=new B;t.on=function(t,n){var K=g.get(t),z;if(2>arguments.length)return K&&K.on;K&&(K.on=null,a=a.slice(0,z=a.indexOf(K)).concat(a.slice(z+1)),g.remove(t));n&&a.push(g.set(t,{on:n}));return c};return t}function M(){x.event.preventDefault()}function T(){for(var c=x.event,t;t=c.sourceEvent;)c=t;return c}function C(c){for(var t=
new H,a=0,g=arguments.length;++a<g;)t[arguments[a]]=E(t);t.of=function(a,e){return function(g){try{var z=g.sourceEvent=x.event;g.target=c;x.event=g;t[g.type].apply(a,e)}finally{x.event=z}}};return t}function N(c){Tb(c,pa);return c}function Q(c){return"function"===typeof c?c:function(){return Mc(c,this)}}function J(c){return"function"===typeof c?c:function(){return Nc(c,this)}}function R(c,t){function a(){this.removeAttribute(c)}function g(){this.removeAttributeNS(c.space,c.local)}function h(){this.setAttribute(c,
t)}function n(){this.setAttributeNS(c.space,c.local,t)}function K(){var a=t.apply(this,arguments);null==a?this.removeAttribute(c):this.setAttribute(c,a)}function z(){var a=t.apply(this,arguments);null==a?this.removeAttributeNS(c.space,c.local):this.setAttributeNS(c.space,c.local,a)}c=x.ns.qualify(c);return null==t?c.local?g:a:"function"===typeof t?c.local?z:K:c.local?n:h}function P(c){return new RegExp("(?:^|\\s+)"+x.requote(c)+"(?:\\s+|$)","g")}function O(c,t){function a(){for(var e=-1;++e<h;)c[e](this,
t)}function g(){for(var a=-1,e=t.apply(this,arguments);++a<h;)c[a](this,e)}c=(c+"").trim().split(/^|\s+/).map(w);var h=c.length;return"function"===typeof t?g:a}function w(c){var t=P(c);return function(a,g){if(h=a.classList)return g?h.add(c):h.remove(c);var h=a.getAttribute("class")||"";g?(t.lastIndex=0,t.test(h)||a.setAttribute("class",(h+" "+c).trim().replace(/\s+/g," "))):a.setAttribute("class",h.replace(t," ").trim().replace(/\s+/g," "))}}function F(c,t,a){function g(){this.style.removeProperty(c)}
function h(){this.style.setProperty(c,t,a)}function n(){var g=t.apply(this,arguments);null==g?this.style.removeProperty(c):this.style.setProperty(c,g,a)}return null==t?g:"function"===typeof t?n:h}function A(c,t){function a(){delete this[c]}function g(){this[c]=t}function h(){var a=t.apply(this,arguments);null==a?delete this[c]:this[c]=a}return null==t?a:"function"===typeof t?h:g}function q(c){return"function"===typeof c?c:(c=x.ns.qualify(c)).local?function(){return this.ownerDocument.createElementNS(c.space,
c.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,c)}}function S(c){return function(){return Td(this,c)}}function X(c){arguments.length||(c=W);return function(t,a){return t&&a?c(t.__data__,a.__data__):!t-!a}}function U(c,t){for(var a=0,g=c.length;a<g;a++)for(var h=c[a],n=0,K=h.length,z;n<K;n++)(z=h[n])&&t(z,n,a);return c}function L(c){Tb(c,Qa);return c}function Z(c){var t,a;return function(g,h,n){g=c[n].update;var K=g.length;n!=a&&(a=n,t=0);for(h>=t&&(t=h+1);!(h=g[t])&&
++t<K;);return h}}function V(){var c=this.__transition__;c&&++c.active}function k(c,t,a){function g(){var t=this[K];t&&(this.removeEventListener(c,t,t.$),delete this[K])}function h(){var h=da(t,Xa(arguments));g.call(this);this.addEventListener(c,this[K]=h,h.$=a);h._=t}function n(){var t=new RegExp("^__on([^.]+)"+x.requote(c)+"$"),a,e;for(e in this)if(a=e.match(t)){var g=this[e];this.removeEventListener(a[1],g,g.$);delete this[e]}}var K="__on"+c,z=c.indexOf("."),da=y;0<z&&(c=c.substring(0,z));var b=
Oc.get(c);b&&(c=b,da=la);return z?t?h:g:t?D:n}function y(c,t){return function(a){var g=x.event;x.event=a;t[0]=this.__data__;try{c.apply(this,t)}finally{x.event=g}}}function la(c,t){var a=y(c,t);return function(c){var t=c.relatedTarget;t&&(t===this||t.compareDocumentPosition(this)&8)||a.call(this,c)}}function ga(){var c=".dragsuppress-"+ ++kg,t="click"+c,a=x.select(ya).on("touchmove"+c,M).on("dragstart"+c,M).on("selectstart"+c,M);if(Eb){var g=Ra.style,h=g[Eb];g[Eb]="none"}return function(n){a.on(c,
null);Eb&&(g[Eb]=h);if(n){var K=function(){a.on(t,null)};a.on(t,function(){M();K()},!0);setTimeout(K,0)}}}function ma(c,t){t.changedTouches&&(t=t.changedTouches[0]);var a=c.ownerSVGElement||c;if(a.createSVGPoint){var g=a.createSVGPoint();if(0>Pc&&(ya.scrollX||ya.scrollY)){var a=x.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"),h=a[0][0].getScreenCTM();Pc=!(h.f||h.e);a.remove()}Pc?(g.x=t.pageX,g.y=t.pageY):(g.x=t.clientX,g.y=t.clientY);
g=g.matrixTransform(c.getScreenCTM().inverse());return[g.x,g.y]}a=c.getBoundingClientRect();return[t.clientX-a.left-c.clientLeft,t.clientY-a.top-c.clientTop]}function Y(){return x.event.changedTouches[0].identifier}function ea(){return x.event.target}function ha(){return ya}function ca(c,t,a){return(t[0]-c[0])*(a[1]-c[1])-(t[1]-c[1])*(a[0]-c[0])}function ba(c){return 1<c?0:-1>c?ja:Math.acos(c)}function na(c){return 1<c?va:-1>c?-va:Math.asin(c)}function fa(c){return((c=Math.exp(c))+1/c)/2}function Aa(c){return(c=
Math.sin(c/2))*c}function oa(){}function za(c,t,a){return this instanceof za?void(this.h=+c,this.s=+t,this.l=+a):2>arguments.length?c instanceof za?new za(c.h,c.s,c.l):Ud(""+c,Vd,za):new za(c,t,a)}function rb(c,t,a){function g(c){360<c?c-=360:0>c&&(c+=360);return 60>c?h+(n-h)*c/60:180>c?n:240>c?h+(n-h)*(240-c)/60:h}var h,n;c=isNaN(c)?0:0>(c%=360)?c+360:c;t=isNaN(t)?0:0>t?0:1<t?1:t;a=0>a?0:1<a?1:a;n=.5>=a?a*(1+t):a+t-a*t;h=2*a-n;return new Ba(Math.round(255*g(c+120)),Math.round(255*g(c)),Math.round(255*
g(c-120)))}function Ia(c,t,a){return this instanceof Ia?void(this.h=+c,this.c=+t,this.l=+a):2>arguments.length?c instanceof Ia?new Ia(c.h,c.c,c.l):c instanceof Ja?Wd(c.l,c.a,c.b):Wd((c=Xd((c=x.rgb(c)).r,c.g,c.b)).l,c.a,c.b):new Ia(c,t,a)}function Qc(c,t,a){isNaN(c)&&(c=0);isNaN(t)&&(t=0);return new Ja(a,Math.cos(c*=ia)*t,Math.sin(c)*t)}function Ja(c,t,a){return this instanceof Ja?void(this.l=+c,this.a=+t,this.b=+a):2>arguments.length?c instanceof Ja?new Ja(c.l,c.a,c.b):c instanceof Ia?Qc(c.l,c.c,
c.h):Xd((c=Ba(c)).r,c.g,c.b):new Ja(c,t,a)}function Yd(c,t,a){c=(c+16)/116;a=c-a/200;t=Rc(c+t/500)*Zd;c=Rc(c)*$d;a=Rc(a)*ae;return new Ba(Sc(3.2404542*t-1.5371385*c-.4985314*a),Sc(-.969266*t+1.8760108*c+.041556*a),Sc(.0556434*t-.2040259*c+1.0572252*a))}function Wd(c,t,a){return 0<c?new Ia(Math.atan2(a,t)*ra,Math.sqrt(t*t+a*a),c):new Ia(NaN,NaN,c)}function Rc(c){return.206893034<c?c*c*c:(c-4/29)/7.787037}function Tc(c){return.008856<c?Math.pow(c,1/3):7.787037*c+4/29}function Sc(c){return Math.round(255*
(.00304>=c?12.92*c:1.055*Math.pow(c,1/2.4)-.055))}function Ba(c,t,a){return this instanceof Ba?void(this.r=~~c,this.g=~~t,this.b=~~a):2>arguments.length?c instanceof Ba?new Ba(c.r,c.g,c.b):Ud(""+c,Ba,rb):new Ba(c,t,a)}function Ub(c){return new Ba(c>>16,c>>8&255,c&255)+""}function sb(c){return 16>c?"0"+Math.max(0,c).toString(16):Math.min(255,c).toString(16)}function Ud(c,t,a){var g=0,h=0,n=0,K,z;if(K=/([a-z]+)\((.*)\)/i.exec(c))switch(z=K[2].split(","),K[1]){case "hsl":return a(parseFloat(z[0]),parseFloat(z[1])/
100,parseFloat(z[2])/100);case "rgb":return t(Uc(z[0]),Uc(z[1]),Uc(z[2]))}if(a=Vb.get(c))return t(a.r,a.g,a.b);null==c||"#"!==c.charAt(0)||isNaN(a=parseInt(c.substring(1),16))||(4===c.length?(g=(a&3840)>>4,g|=g>>4,h=a&240,h|=h>>4,n=a&15,n|=n<<4):7===c.length&&(g=(a&16711680)>>16,h=(a&65280)>>8,n=a&255));return t(g,h,n)}function Vd(c,t,a){var g=Math.min(c/=255,t/=255,a/=255),h=Math.max(c,t,a),n=h-g,K=(h+g)/2;n?(g=.5>K?n/(h+g):n/(2-h-g),c=60*(c==h?(t-a)/n+(t<a?6:0):t==h?(a-c)/n+2:(c-t)/n+4)):(c=NaN,
g=0<K&&1>K?0:c);return new za(c,g,K)}function Xd(c,t,a){c=Vc(c);t=Vc(t);a=Vc(a);var g=Tc((.4124564*c+.3575761*t+.1804375*a)/Zd),h=Tc((.2126729*c+.7151522*t+.072175*a)/$d);c=Tc((.0193339*c+.119192*t+.9503041*a)/ae);return Ja(116*h-16,500*(g-h),200*(h-c))}function Vc(c){return.04045>=(c/=255)?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Uc(c){var t=parseFloat(c);return"%"===c.charAt(c.length-1)?Math.round(2.55*t):t}function qa(c){return"function"===typeof c?c:function(){return c}}function ua(c){return c}
function Wc(c){return function(t,a,g){2===arguments.length&&"function"===typeof a&&(g=a,a=null);return Wb(t,a,c,g)}}function Wb(c,t,a,g){function h(){var c=da.status,t;if(!c&&da.responseText||200<=c&&300>c||304===c){try{t=a.call(n,da)}catch(g){K.error.call(n,g);return}K.load.call(n,t)}else K.error.call(n,da)}var n={},K=x.dispatch("beforesend","progress","load","error"),z={},da=new XMLHttpRequest,b=null;!ya.XDomainRequest||"withCredentials"in da||!/^(http(s)?:)?\/\//.test(c)||(da=new XDomainRequest);
"onload"in da?da.onload=da.onerror=h:da.onreadystatechange=function(){3<da.readyState&&h()};da.onprogress=function(c){var t=x.event;x.event=c;try{K.progress.call(n,da)}finally{x.event=t}};n.header=function(c,t){c=(c+"").toLowerCase();if(2>arguments.length)return z[c];null==t?delete z[c]:z[c]=t+"";return n};n.mimeType=function(c){if(!arguments.length)return t;t=null==c?null:c+"";return n};n.responseType=function(c){if(!arguments.length)return b;b=c;return n};n.response=function(c){a=c;return n};["get",
"post"].forEach(function(c){n[c]=function(){return n.send.apply(n,[c].concat(Xa(arguments)))}});n.send=function(a,e,g){2===arguments.length&&"function"===typeof e&&(g=e,e=null);da.open(a,c,!0);null==t||"accept"in z||(z.accept=t+",*/*");if(da.setRequestHeader)for(var h in z)da.setRequestHeader(h,z[h]);null!=t&&da.overrideMimeType&&da.overrideMimeType(t);null!=b&&(da.responseType=b);if(null!=g)n.on("error",g).on("load",function(c){g(null,c)});K.beforesend.call(n,da);da.send(null==e?null:e);return n};
n.abort=function(){da.abort();return n};x.rebind(n,K,"on");return null==g?n:n.get(lg(g))}function lg(c){return 1===c.length?function(t,a){c(null==t?a:null)}:c}function Xc(){var c=be(),c=ce()-c;24<c?(isFinite(c)&&(clearTimeout(Xb),Xb=setTimeout(Xc,c)),Yb=0):(Yb=1,de(Xc))}function be(){var c=Date.now();for(Sa=Zb;Sa;)c>=Sa.t&&(Sa.f=Sa.c(c-Sa.t)),Sa=Sa.n;return c}function ce(){for(var c,t=Zb,a=Infinity;t;)t.f?t=c?c.n=t.n:Zb=t.n:(t.t<a&&(a=t.t),t=(c=t).n);$b=c;return a}function Yc(c,a){return a-(c?Math.ceil(Math.log(c)/
Math.LN10):1)}function mg(c){var a=c.decimal,e=c.thousands,g=c.grouping,h=c.currency,n=g?function(c){for(var a=c.length,t=[],h=0,n=g[0];0<a&&0<n;)t.push(c.substring(a-=n,a+n)),n=g[h=(h+1)%g.length];return t.reverse().join(e)}:ua;return function(c){c=ee.exec(c);var e=c[1]||" ",g=c[2]||">",b=c[3]||"",k=c[4]||"",fb=c[5],l=+c[6],f=c[7],q=c[8],m=c[9],y=1,p="",w="",u=!1;q&&(q=+q.substring(1));if(fb||"0"===e&&"="===g)fb=e="0",g="=",f&&(l-=Math.floor((l-1)/4));switch(m){case "n":f=!0;m="g";break;case "%":y=
100;w="%";m="f";break;case "p":y=100;w="%";m="r";break;case "b":case "o":case "x":case "X":"#"===k&&(p="0"+m.toLowerCase());case "c":case "d":u=!0;q=0;break;case "s":y=-1,m="r"}"$"===k&&(p=h[0],w=h[1]);"r"!=m||q||(m="g");if(null!=q)if("g"==m)q=Math.max(1,Math.min(21,q));else if("e"==m||"f"==m)q=Math.max(0,Math.min(20,q));var m=ng.get(m)||og,C=fb&&f;return function(c){var h=w;if(u&&c%1)return"";var K=0>c||0===c&&0>1/c?(c=-c,"-"):b;0>y?(h=x.formatPrefix(c,q),c=h.scale(c),h=h.symbol+w):c*=y;c=m(c,q);
var k=c.lastIndexOf("."),wa=0>k?c:c.substring(0,k);c=0>k?"":a+c.substring(k+1);!fb&&f&&(wa=n(wa));var k=p.length+wa.length+c.length+(C?0:K.length),F=k<l?Array(k=l-k+1).join(e):"";C&&(wa=n(F+wa));K+=p;c=wa+c;return("<"===g?K+c+F:">"===g?F+K+c:"^"===g?F.substring(0,k>>=1)+K+c+F.substring(k):K+(C?c:F+c))+h}}}function og(c){return c+""}function Ta(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function gb(c,a,e){function g(a){var t=c(a),e=n(t,1);return a-t<e-a?t:e}function h(e){a(e=
c(new xa(e-1)),1);return e}function n(c,e){a(c=new xa(+c),e);return c}function K(c,g,n){c=h(c);var z=[];if(1<n)for(;c<g;)e(c)%n||z.push(new Date(+c)),a(c,1);else for(;c<g;)z.push(new Date(+c)),a(c,1);return z}c.floor=c;c.round=g;c.ceil=h;c.offset=n;c.range=K;var z=c.utc=ac(c);z.floor=z;z.round=ac(g);z.ceil=ac(h);z.offset=ac(n);z.range=function(c,a,t){try{xa=Ta;var e=new Ta;e._=c;return K(e,a,t)}finally{xa=Date}};return c}function ac(c){return function(a,e){try{xa=Ta;var g=new Ta;g._=a;return c(g,
e)._}finally{xa=Date}}}function pg(c){function a(c){function t(a){for(var e=[],h=-1,n=0,z,K;++h<g;)if(37===c.charCodeAt(h)){e.push(c.substring(n,h));null!=(z=fe[n=c.charAt(++h)])&&(n=c.charAt(++h));if(K=F[n])n=K(a,null==z?"e"===n?" ":"0":z);e.push(n);n=h+1}e.push(c.substring(n,h));return e.join("")}var g=c.length;t.parse=function(a){var t={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(e(t,c,a,0)!=a.length)return null;"p"in t&&(t.H=t.H%12+12*t.p);a=null!=t.Z&&xa!==Ta;var g=new (a?Ta:xa);"j"in t?g.setFullYear(t.y,
0,t.j):"w"in t&&("W"in t||"U"in t)?(g.setFullYear(t.y,0,1),g.setFullYear(t.y,0,"W"in t?(t.w+6)%7+7*t.W-(g.getDay()+5)%7:t.w+7*t.U-(g.getDay()+6)%7)):g.setFullYear(t.y,t.m,t.d);g.setHours(t.H+Math.floor(t.Z/100),t.M+t.Z%100,t.S,t.L);return a?g._:g};t.toString=function(){return c};return t}function e(c,a,t,e){for(var g,h=0,n=a.length,z=t.length;h<n;){if(e>=z)return-1;g=a.charCodeAt(h++);if(37===g){if(g=a.charAt(h++),g=C[g in fe?a.charAt(h++):g],!g||0>(e=g(c,t,e)))return-1}else if(g!=t.charCodeAt(e++))return-1}return e}
var g=c.dateTime,h=c.date,n=c.time,K=c.periods,z=c.days,da=c.shortDays,b=c.months,k=c.shortMonths;a.utc=function(c){function e(c){try{xa=Ta;var a=new xa;a._=c;return g(a)}finally{xa=Date}}var g=a(c);e.parse=function(c){try{xa=Ta;var a=g.parse(c);return a&&a._}finally{xa=Date}};e.toString=g.toString;return e};a.multi=a.utc.multi=qg;var l=x.map(),Ga=bc(z),f=cc(z),q=bc(da),m=cc(da),y=bc(b),p=cc(b),w=bc(k),u=cc(k);K.forEach(function(c,a){l.set(c.toLowerCase(),a)});var F={a:function(c){return da[c.getDay()]},
A:function(c){return z[c.getDay()]},b:function(c){return k[c.getMonth()]},B:function(c){return b[c.getMonth()]},c:a(g),d:function(c,a){return Ca(c.getDate(),a,2)},e:function(c,a){return Ca(c.getDate(),a,2)},H:function(c,a){return Ca(c.getHours(),a,2)},I:function(c,a){return Ca(c.getHours()%12||12,a,2)},j:function(c,a){return Ca(1+aa.dayOfYear(c),a,3)},L:function(c,a){return Ca(c.getMilliseconds(),a,3)},m:function(c,a){return Ca(c.getMonth()+1,a,2)},M:function(c,a){return Ca(c.getMinutes(),a,2)},p:function(c){return K[+(12<=
c.getHours())]},S:function(c,a){return Ca(c.getSeconds(),a,2)},U:function(c,a){return Ca(aa.sundayOfYear(c),a,2)},w:function(c){return c.getDay()},W:function(c,a){return Ca(aa.mondayOfYear(c),a,2)},x:a(h),X:a(n),y:function(c,a){return Ca(c.getFullYear()%100,a,2)},Y:function(c,a){return Ca(c.getFullYear()%1E4,a,4)},Z:rg,"%":function(){return"%"}},C={a:function(c,a,t){q.lastIndex=0;return(a=q.exec(a.substring(t)))?(c.w=m.get(a[0].toLowerCase()),t+a[0].length):-1},A:function(c,a,t){Ga.lastIndex=0;return(a=
Ga.exec(a.substring(t)))?(c.w=f.get(a[0].toLowerCase()),t+a[0].length):-1},b:function(c,a,t){w.lastIndex=0;return(a=w.exec(a.substring(t)))?(c.m=u.get(a[0].toLowerCase()),t+a[0].length):-1},B:function(c,a,t){y.lastIndex=0;return(a=y.exec(a.substring(t)))?(c.m=p.get(a[0].toLowerCase()),t+a[0].length):-1},c:function(c,a,t){return e(c,F.c.toString(),a,t)},d:ge,e:ge,H:he,I:he,j:sg,L:tg,m:ug,M:vg,p:function(c,a,t){a=l.get(a.substring(t,t+=2).toLowerCase());return null==a?-1:(c.p=a,t)},S:wg,U:xg,w:yg,W:zg,
x:function(c,a,t){return e(c,F.x.toString(),a,t)},X:function(c,a,t){return e(c,F.X.toString(),a,t)},y:Ag,Y:Bg,Z:Cg,"%":Dg};return a}function Ca(c,a,e){var g=0>c?"-":"";c=(g?-c:c)+"";var h=c.length;return g+(h<e?Array(e-h+1).join(a)+c:c)}function bc(c){return new RegExp("^(?:"+c.map(x.requote).join("|")+")","i")}function cc(c){for(var a=new B,e=-1,g=c.length;++e<g;)a.set(c[e].toLowerCase(),e);return a}function yg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+1)))?(c.w=+a[0],e+a[0].length):
-1}function xg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e)))?(c.U=+a[0],e+a[0].length):-1}function zg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e)))?(c.W=+a[0],e+a[0].length):-1}function Bg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+4)))?(c.y=+a[0],e+a[0].length):-1}function Ag(c,a,e){sa.lastIndex=0;if(a=sa.exec(a.substring(e,e+2))){var g=+a[0];c=(c.y=g+(68<g?1900:2E3),e+a[0].length)}else c=-1;return c}function Cg(c,a,e){return/^[+-]\d{4}$/.test(a=a.substring(e,e+5))?
(c.Z=-a,e+5):-1}function ug(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+2)))?(c.m=a[0]-1,e+a[0].length):-1}function ge(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+2)))?(c.d=+a[0],e+a[0].length):-1}function sg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+3)))?(c.j=+a[0],e+a[0].length):-1}function he(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+2)))?(c.H=+a[0],e+a[0].length):-1}function vg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+2)))?(c.M=+a[0],
e+a[0].length):-1}function wg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+2)))?(c.S=+a[0],e+a[0].length):-1}function tg(c,a,e){sa.lastIndex=0;return(a=sa.exec(a.substring(e,e+3)))?(c.L=+a[0],e+a[0].length):-1}function rg(c){var a=c.getTimezoneOffset();c=0<a?"-":"+";var e=~~(ka(a)/60),a=ka(a)%60;return c+Ca(e,"0",2)+Ca(a,"0",2)}function Dg(c,a,e){ie.lastIndex=0;return(c=ie.exec(a.substring(e,e+1)))?e+c[0].length:-1}function qg(c){for(var a=c.length,e=-1;++e<a;)c[e][0]=this(c[e][0]);return function(a){for(var t=
0,e=c[t];!e[1](a);)e=c[++t];return e[0](a)}}function Zc(){}function je(c,a,e){var g=e.s=c+a,h=g-c;e.t=c-(g-h)+(a-h)}function dc(c,a){if(c&&ke.hasOwnProperty(c.type))ke[c.type](c,a)}function $c(c,a,e){var g=-1;e=c.length-e;var h;for(a.lineStart();++g<e;)h=c[g],a.point(h[0],h[1],h[2]);a.lineEnd()}function le(c,a){var e=-1,g=c.length;for(a.polygonStart();++e<g;)$c(c[e],a,1);a.polygonEnd()}function Eg(){function c(c,a){c*=ia;a=a*ia/2+ja/4;var t=c-g,e=0<=t?1:-1,t=e*t,b=Math.cos(a),k=Math.sin(a),l=n*k;
hb.add(Math.atan2(l*e*Math.sin(t),h*b+l*Math.cos(t)));g=c;h=b;n=k}var a,e,g,h,n;Da.point=function(K,z){Da.point=c;g=(a=K)*ia;h=Math.cos(z=(e=z)*ia/2+ja/4);n=Math.sin(z)};Da.lineEnd=function(){c(a,e)}}function ib(c){var a=c[0];c=c[1];var e=Math.cos(c);return[e*Math.cos(a),e*Math.sin(a),Math.sin(c)]}function ec(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]}function tb(c,a){return[c[1]*a[2]-c[2]*a[1],c[2]*a[0]-c[0]*a[2],c[0]*a[1]-c[1]*a[0]]}function ad(c,a){c[0]+=a[0];c[1]+=a[1];c[2]+=a[2]}function fc(c,
a){return[c[0]*a,c[1]*a,c[2]*a]}function gc(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2]);c[0]/=a;c[1]/=a;c[2]/=a}function hc(c){return[Math.atan2(c[1],c[0]),na(c[2])]}function ic(c,a){return 1E-6>ka(c[0]-a[0])&&1E-6>ka(c[1]-a[1])}function bd(c,a){c*=ia;var e=Math.cos(a*=ia);Fb(e*Math.cos(c),e*Math.sin(c),Math.sin(a))}function Fb(c,a,e){++Gb;jb+=(c-jb)/Gb;kb+=(a-kb)/Gb;Ua+=(e-Ua)/Gb}function me(){function c(c,n){c*=ia;var K=Math.cos(n*=ia),z=K*Math.cos(c),K=K*Math.sin(c),da=Math.sin(n),b=Math.atan2(Math.sqrt((b=
e*da-g*K)*b+(b=g*z-a*da)*b+(b=a*K-e*z)*b),a*z+e*K+g*da);jc+=b;Ya+=b*(a+(a=z));Za+=b*(e+(e=K));Oa+=b*(g+(g=da));Fb(a,e,g)}var a,e,g;Ka.point=function(h,n){h*=ia;var K=Math.cos(n*=ia);a=K*Math.cos(h);e=K*Math.sin(h);g=Math.sin(n);Ka.point=c;Fb(a,e,g)}}function ne(){Ka.point=bd}function Fg(){function c(c,a){c*=ia;var t=Math.cos(a*=ia),e=t*Math.cos(c),t=t*Math.sin(c),b=Math.sin(a),k=h*b-n*t,l=n*e-g*b,f=g*t-h*e,q=Math.sqrt(k*k+l*l+f*f),m=g*e+h*t+n*b,y=q&&-ba(m)/q,q=Math.atan2(q,m);ub+=y*k;vb+=y*l;$a+=
y*f;jc+=q;Ya+=q*(g+(g=e));Za+=q*(h+(h=t));Oa+=q*(n+(n=b));Fb(g,h,n)}var a,e,g,h,n;Ka.point=function(K,z){a=K;e=z;Ka.point=c;K*=ia;var da=Math.cos(z*=ia);g=da*Math.cos(K);h=da*Math.sin(K);n=Math.sin(z);Fb(g,h,n)};Ka.lineEnd=function(){c(a,e);Ka.lineEnd=ne;Ka.point=bd}}function wb(){return!0}function oe(c,a,e,g,h){var n=[],K=[];c.forEach(function(c){if(!(0>=(a=c.length-1))){var a,t=c[0],e=c[a];if(ic(t,e)){h.lineStart();for(e=0;e<a;++e)h.point((t=c[e])[0],t[1]);h.lineEnd()}else a=new kc(t,c,null,!0),
t=new kc(t,null,a,!1),a.o=t,n.push(a),K.push(t),a=new kc(e,c,null,!1),t=new kc(e,null,a,!0),a.o=t,n.push(a),K.push(t)}});K.sort(a);pe(n);pe(K);if(n.length){c=0;a=e;for(e=K.length;c<e;++c)K[c].e=a=!a;a=n[0];for(var z,da;;){for(var b=a,k=!0;b.v;)if((b=b.n)===a)return;z=b.z;h.lineStart();do{b.v=b.o.v=!0;if(b.e){if(k)for(c=0,e=z.length;c<e;++c)h.point((da=z[c])[0],da[1]);else g(b.x,b.n.x,1,h);b=b.n}else{if(k)for(z=b.p.z,c=z.length-1;0<=c;--c)h.point((da=z[c])[0],da[1]);else g(b.x,b.p.x,-1,h);b=b.p}b=
b.o;z=b.z;k=!k}while(!b.v);h.lineEnd()}}}function pe(c){if(a=c.length){for(var a,e=0,g=c[0],h;++e<a;)g.n=h=c[e],h.p=g,g=h;g.n=h=c[0];h.p=g}}function kc(c,a,e,g){this.x=c;this.z=a;this.o=e;this.e=g;this.v=!1;this.n=this.p=null}function qe(c,a,e,g){return function(h,n){function K(a,t){var e=h(a,t);c(a=e[0],t=e[1])&&n.point(a,t)}function z(c,a){var t=h(c,a);q.point(t[0],t[1])}function da(){y.point=z;q.lineStart()}function b(){y.point=K;q.lineEnd()}function k(c,a){A.push([c,a]);var t=h(c,a);u.point(t[0],
t[1])}function l(){u.lineStart();A=[]}function f(){k(A[0][0],A[0][1]);u.lineEnd();var c=u.clean(),a=w.buffer(),t=a.length;A.pop();C.push(A);A=null;if(t)if(c&1){var c=a[0],t=c.length-1,a=-1,e;if(0<t){F||(n.polygonStart(),F=!0);for(n.lineStart();++a<t;)n.point((e=c[a])[0],e[1]);n.lineEnd()}}else 1<t&&c&2&&a.push(a.pop().concat(a.shift())),p.push(a.filter(Gg))}var q=a(n),m=h.invert(g[0],g[1]),y={point:K,lineStart:da,lineEnd:b,polygonStart:function(){y.point=k;y.lineStart=l;y.lineEnd=f;p=[];C=[]},polygonEnd:function(){y.point=
K;y.lineStart=da;y.lineEnd=b;p=x.merge(p);var c,a=m;c=C;var t=a[0],g=a[1],h=[Math.sin(t),-Math.cos(t),0],z=0,k=0;hb.reset();for(var wa=0,l=c.length;wa<l;++wa){var f=c[wa],fb=f.length;if(fb)for(var q=f[0],Ga=q[0],a=q[1]/2+ja/4,w=Math.sin(a),u=Math.cos(a),A=1;;){A===fb&&(A=0);var a=f[A],L=a[0],r=a[1]/2+ja/4,v=Math.sin(r),r=Math.cos(r),B=L-Ga,S=0<=B?1:-1,J=S*B,E=J>ja,w=w*v;hb.add(Math.atan2(w*S*Math.sin(J),u*r+w*Math.cos(J)));z+=E?B+S*Ea:B;E^Ga>=t^L>=t&&(q=tb(ib(q),ib(a)),gc(q),Ga=tb(h,q),gc(Ga),Ga=
(E^0<=B?-1:1)*na(Ga[2]),g>Ga||g===Ga&&(q[0]||q[1]))&&(k+=E^0<=B?1:-1);if(!A++)break;Ga=L;w=v;u=r;q=a}}c=(-1E-6>z||1E-6>z&&0>hb)^k&1;p.length?(F||(n.polygonStart(),F=!0),oe(p,Hg,c,e,n)):c&&(F||(n.polygonStart(),F=!0),n.lineStart(),e(null,null,1,n),n.lineEnd());F&&(n.polygonEnd(),F=!1);p=C=null},sphere:function(){n.polygonStart();n.lineStart();e(null,null,1,n);n.lineEnd();n.polygonEnd()}},p,w=re(),u=a(w),F=!1,C,A;return y}}function Gg(c){return 1<c.length}function re(){var c=[],a;return{lineStart:function(){c.push(a=
[])},point:function(c,g){a.push([c,g])},lineEnd:D,buffer:function(){var e=c;c=[];a=null;return e},rejoin:function(){1<c.length&&c.push(c.pop().concat(c.shift()))}}}function Hg(c,a){return(0>(c=c.x)[0]?c[1]-va-1E-6:va-c[1])-(0>(a=a.x)[0]?a[1]-va-1E-6:va-a[1])}function Ig(c){function a(c,t){return Math.cos(c)*Math.cos(t)>h}function e(c,a,t){var e=ib(c),g=ib(a),n=[1,0,0],g=tb(e,g),z=ec(g,g),e=g[0],K=z-e*e;if(!K)return!t&&c;z=h*z/K;K=-h*e/K;e=tb(n,g);n=fc(n,z);g=fc(g,K);ad(n,g);g=ec(n,e);z=ec(e,e);K=
g*g-z*(ec(n,n)-1);if(!(0>K)){var b=Math.sqrt(K),K=fc(e,(-g-b)/z);ad(K,n);K=hc(K);if(!t)return K;t=c[0];var k=a[0];c=c[1];a=a[1];var l;k<t&&(l=t,t=k,k=l);var f=k-t,q=1E-6>ka(f-ja);!q&&a<c&&(l=c,c=a,a=l);if(q||1E-6>f?q?0<c+a^K[1]<(1E-6>ka(K[0]-t)?c:a):c<=K[1]&&K[1]<=a:f>ja^(t<=K[0]&&K[0]<=k))return a=fc(e,(-g+b)/z),ad(a,n),[K,hc(a)]}}function g(a,t){var e=n?c:ja-c,g=0;a<-e?g|=1:a>e&&(g|=2);t<-e?g|=4:t>e&&(g|=8);return g}var h=Math.cos(c),n=0<h,K=1E-6<ka(h),z=cd(c,6*ia);return qe(a,function(c){var h,
z,b,k,l;return{lineStart:function(){k=b=!1;l=1},point:function(f,q){var y=[f,q],m,p=a(f,q),w=n?p?0:g(f,q):p?g(f+(0>f?ja:-ja),q):0;!h&&(k=b=p)&&c.lineStart();p!==b&&(m=e(h,y),ic(h,m)||ic(y,m))&&(y[0]+=1E-6,y[1]+=1E-6,p=a(y[0],y[1]));if(p!==b)l=0,p?(c.lineStart(),m=e(y,h),c.point(m[0],m[1])):(m=e(h,y),c.point(m[0],m[1]),c.lineEnd()),h=m;else if(K&&h&&n^p){var u;w&z||!(u=e(y,h,!0))||(l=0,n?(c.lineStart(),c.point(u[0][0],u[0][1]),c.point(u[1][0],u[1][1]),c.lineEnd()):(c.point(u[1][0],u[1][1]),c.lineEnd(),
c.lineStart(),c.point(u[0][0],u[0][1])))}!p||h&&ic(h,y)||c.point(y[0],y[1]);h=y;b=p;z=w},lineEnd:function(){b&&c.lineEnd();h=null},clean:function(){return l|(k&&b)<<1}}},z,n?[0,-c]:[-ja,c-ja])}function se(c,a,e,g){return function(h){var n=h.a,K=h.b,z=n.x,n=n.y,b=0,k=1,l=K.x-z,K=K.y-n,f;f=c-z;if(l||!(0<f)){f/=l;if(0>l){if(f<b)return;f<k&&(k=f)}else if(0<l){if(f>k)return;f>b&&(b=f)}f=e-z;if(l||!(0>f)){f/=l;if(0>l){if(f>k)return;f>b&&(b=f)}else if(0<l){if(f<b)return;f<k&&(k=f)}f=a-n;if(K||!(0<f)){f/=
K;if(0>K){if(f<b)return;f<k&&(k=f)}else if(0<K){if(f>k)return;f>b&&(b=f)}f=g-n;if(K||!(0>f)){f/=K;if(0>K){if(f>k)return;f>b&&(b=f)}else if(0<K){if(f<b)return;f<k&&(k=f)}0<b&&(h.a={x:z+b*l,y:n+b*K});1>k&&(h.b={x:z+k*l,y:n+k*K});return h}}}}}}function te(c,a,e,g){function h(g,h){return 1E-6>ka(g[0]-c)?0<h?0:3:1E-6>ka(g[0]-e)?0<h?2:1:1E-6>ka(g[1]-a)?0<h?1:0:0<h?3:2}function n(c,a){return K(c.x,a.x)}function K(c,a){var t=h(c,1),e=h(a,1);return t!==e?t-e:0===t?a[1]-c[1]:1===t?c[0]-a[0]:2===t?c[1]-a[1]:
a[0]-c[0]}return function(z){function b(n,z,da,k){var Na=0,l=0;if(null==n||(Na=h(n,da))!==(l=h(z,da))||0>K(n,z)^0<da){do k.point(0===Na||3===Na?c:e,1<Na?g:a);while((Na=(Na+da+4)%4)!==l)}else k.point(z[0],z[1])}function k(h,n){c<=h&&h<=e&&a<=n&&n<=g&&z.point(h,n)}function l(h,n){h=Math.max(-1E9,Math.min(1E9,h));n=Math.max(-1E9,Math.min(1E9,n));var K=c<=h&&h<=e&&a<=n&&n<=g;p&&w.push([h,n]);if(B)F=h,C=n,A=K,B=!1,K&&(z.lineStart(),z.point(h,n));else if(K&&v)z.point(h,n);else{var b={a:{x:r,y:L},b:{x:h,
y:n}};y(b)?(v||(z.lineStart(),z.point(b.a.x,b.a.y)),z.point(b.b.x,b.b.y),K||z.lineEnd(),S=!1):K&&(z.lineStart(),z.point(h,n),S=!1)}r=h;L=n;v=K}var f=z,q=re(),y=se(c,a,e,g),m,p,w,u={point:k,lineStart:function(){u.point=l;p&&p.push(w=[]);B=!0;v=!1;r=L=NaN},lineEnd:function(){m&&(l(F,C),A&&v&&q.rejoin(),m.push(q.buffer()));u.point=k;v&&z.lineEnd()},polygonStart:function(){z=q;m=[];p=[];S=!0},polygonEnd:function(){z=f;m=x.merge(m);var a;a=[c,g];for(var t=0,e=p.length,h=a[1],K=0;K<e;++K)for(var k=1,Na=
p[K],l=Na.length,q=Na[0],wa;k<l;++k)wa=Na[k],q[1]<=h?wa[1]>h&&0<ca(q,wa,a)&&++t:wa[1]<=h&&0>ca(q,wa,a)&&--t,q=wa;a=0!==t;t=S&&a;e=m.length;if(t||e)z.polygonStart(),t&&(z.lineStart(),b(null,null,1,z),z.lineEnd()),e&&oe(m,n,a,b,z),z.polygonEnd();m=p=w=null}},F,C,A,r,L,v,B,S;return u}}function ue(c,a){function e(e,h){return e=c(e,h),a(e[0],e[1])}c.invert&&a.invert&&(e.invert=function(e,h){return e=a.invert(e,h),e&&c.invert(e[0],e[1])});return e}function dd(c){var a=0,e=ja/3,g=ed(c);c=g(a,e);c.parallels=
function(c){return arguments.length?g(a=c[0]*ja/180,e=c[1]*ja/180):[a/ja*180,e/ja*180]};return c}function ve(c,a){function e(c,a){var t=Math.sqrt(n-2*h*Math.sin(a))/h;return[t*Math.sin(c*=h),K-t*Math.cos(c)]}var g=Math.sin(c),h=(g+Math.sin(a))/2,n=1+g*(2*h-g),K=Math.sqrt(n)/h;e.invert=function(c,a){var t=K-a;return[Math.atan2(c,t)/h,na((n-(c*c+t*t)*h*h)/(2*h))]};return e}function Jg(){function c(c,a){fd+=h*c-g*a;g=c;h=a}var a,e,g,h;ab.point=function(n,K){ab.point=c;a=g=n;e=h=K};ab.lineEnd=function(){c(a,
e)}}function Kg(){function c(c,a){K.push("M",c,",",a,n)}function a(c,t){K.push("M",c,",",t);z.point=e}function e(c,a){K.push("L",c,",",a)}function g(){z.point=c}function h(){K.push("Z")}var n=we(4.5),K=[],z={point:c,lineStart:function(){z.point=a},lineEnd:g,polygonStart:function(){z.lineEnd=h},polygonEnd:function(){z.lineEnd=g;z.point=c},pointRadius:function(c){n=we(c);return z},result:function(){if(K.length){var c=K.join("");K=[];return c}}};return z}function we(c){return"m0,"+c+"a"+c+","+c+" 0 1,1 0,"+
-2*c+"a"+c+","+c+" 0 1,1 0,"+2*c+"z"}function lb(c,a){jb+=c;kb+=a;++Ua}function xe(){function c(c,h){var n=c-a,K=h-e,n=Math.sqrt(n*n+K*K);Ya+=n*(a+c)/2;Za+=n*(e+h)/2;Oa+=n;lb(a=c,e=h)}var a,e;La.point=function(g,h){La.point=c;lb(a=g,e=h)}}function ye(){La.point=lb}function Lg(){function c(c,a){var t=c-g,e=a-h,t=Math.sqrt(t*t+e*e);Ya+=t*(g+c)/2;Za+=t*(h+a)/2;Oa+=t;t=h*c-g*a;ub+=t*(g+c);vb+=t*(h+a);$a+=3*t;lb(g=c,h=a)}var a,e,g,h;La.point=function(n,K){La.point=c;lb(a=g=n,e=h=K)};La.lineEnd=function(){c(a,
e)}}function Mg(c){function a(t,e){c.moveTo(t,e);c.arc(t,e,K,0,Ea)}function e(a,t){c.moveTo(a,t);z.point=g}function g(a,t){c.lineTo(a,t)}function h(){z.point=a}function n(){c.closePath()}var K=4.5,z={point:a,lineStart:function(){z.point=e},lineEnd:h,polygonStart:function(){z.lineEnd=n},polygonEnd:function(){z.lineEnd=h;z.point=a},pointRadius:function(c){K=c;return z},result:D};return z}function ze(c){function a(c){return(z?g:e)(c)}function e(a){return Ae(a,function(t,e){t=c(t,e);a.point(t[0],t[1])})}
function g(a){function t(e,g){e=c(e,g);a.point(e[0],e[1])}function e(){u=NaN;r.point=g;a.lineStart()}function g(t,e){var n=ib([t,e]),K=c(t,e);h(u,F,w,x,C,A,u=K[0],F=K[1],w=t,x=n[0],C=n[1],A=n[2],z,a);a.point(u,F)}function n(){r.point=t;a.lineEnd()}function K(){e();r.point=b;r.lineEnd=k}function b(c,a){g(l=c,a);f=u;q=F;m=x;y=C;p=A;r.point=g}function k(){h(u,F,w,x,C,A,f,q,l,m,y,p,z,a);r.lineEnd=n;n()}var l,f,q,m,y,p,w,u,F,x,C,A,r={point:t,lineStart:e,lineEnd:n,polygonStart:function(){a.polygonStart();
r.lineStart=K},polygonEnd:function(){a.polygonEnd();r.lineStart=e}};return r}function h(a,t,e,g,z,b,k,l,f,q,m,y,p,u){var w=k-a,F=l-t,x=w*w+F*F;if(x>4*n&&p--){var C=g+q,A=z+m,r=b+y,L=Math.sqrt(C*C+A*A+r*r),v=Math.asin(r/=L),B=1E-6>ka(ka(r)-1)||1E-6>ka(e-f)?(e+f)/2:Math.atan2(A,C),S=c(B,v),v=S[0],S=S[1],J=v-a,E=S-t,M=F*J-w*E;if(M*M/x>n||.3<ka((w*J+F*E)/x-.5)||g*q+z*m+b*y<K)h(a,t,e,g,z,b,v,S,B,C/=L,A/=L,r,p,u),u.point(v,S),h(v,S,B,C,A,r,k,l,f,q,m,y,p,u)}}var n=.5,K=Math.cos(30*ia),z=16;a.precision=function(c){if(!arguments.length)return Math.sqrt(n);
z=0<(n=c*c)&&16;return a};return a}function Ng(c){var a=ze(function(a,t){return c([a*ra,t*ra])});return function(c){return Be(a(c))}}function Ce(c){this.stream=c}function Ae(c,a){return{point:a,sphere:function(){c.sphere()},lineStart:function(){c.lineStart()},lineEnd:function(){c.lineEnd()},polygonStart:function(){c.polygonStart()},polygonEnd:function(){c.polygonEnd()}}}function bb(c){return ed(function(){return c})()}function ed(c){function a(c){c=z(c[0]*ia,c[1]*ia);return[c[0]*k+w,F-c[1]*k]}function e(c){return(c=
z.invert((c[0]-w)/k,(F-c[1])/k))&&[c[0]*ra,c[1]*ra]}function g(){z=ue(K=gd(y,p,u),n);var c=n(q,m);w=l-c[0]*k;F=f+c[1]*k;return h()}function h(){L&&(L.valid=!1,L=null);return a}var n,K,z,b=ze(function(c,a){c=n(c,a);return[c[0]*k+w,F-c[1]*k]}),k=150,l=480,f=250,q=0,m=0,y=0,p=0,u=0,w,F,C=De,A=ua,r=null,v=null,L;a.stream=function(c){L&&(L.valid=!1);L=Be(C(K,b(A(c))));L.valid=!0;return L};a.clipAngle=function(c){if(!arguments.length)return r;C=null==c?(r=c,De):Ig((r=+c)*ia);return h()};a.clipExtent=function(c){if(!arguments.length)return v;
A=(v=c)?te(c[0][0],c[0][1],c[1][0],c[1][1]):ua;return h()};a.scale=function(c){if(!arguments.length)return k;k=+c;return g()};a.translate=function(c){if(!arguments.length)return[l,f];l=+c[0];f=+c[1];return g()};a.center=function(c){if(!arguments.length)return[q*ra,m*ra];q=c[0]%360*ia;m=c[1]%360*ia;return g()};a.rotate=function(c){if(!arguments.length)return[y*ra,p*ra,u*ra];y=c[0]%360*ia;p=c[1]%360*ia;u=2<c.length?c[2]%360*ia:0;return g()};x.rebind(a,b,"precision");return function(){n=c.apply(this,
arguments);a.invert=n.invert&&e;return g()}}function Be(c){return Ae(c,function(a,e){c.point(a*ia,e*ia)})}function Hb(c,a){return[c,a]}function Ee(c,a){return[c>ja?c-Ea:c<-ja?c+Ea:c,a]}function gd(c,a,e){return c?a||e?ue(Fe(c),Ge(a,e)):Fe(c):a||e?Ge(a,e):Ee}function He(c){return function(a,e){return a+=c,[a>ja?a-Ea:a<-ja?a+Ea:a,e]}}function Fe(c){var a=He(c);a.invert=He(-c);return a}function Ge(c,a){function e(c,a){var t=Math.cos(a),e=Math.cos(c)*t,t=Math.sin(c)*t,b=Math.sin(a),k=b*g+e*h;return[Math.atan2(t*
n-k*K,e*g-b*h),na(k*n+t*K)]}var g=Math.cos(c),h=Math.sin(c),n=Math.cos(a),K=Math.sin(a);e.invert=function(c,a){var t=Math.cos(a),e=Math.cos(c)*t,t=Math.sin(c)*t,b=Math.sin(a),k=b*n-t*K;return[Math.atan2(t*n+b*K,e*g+k*h),na(k*g-e*h)]};return e}function cd(c,a){var e=Math.cos(c),g=Math.sin(c);return function(h,n,b,z){var da=b*a;if(null!=h){if(h=Ie(e,h),n=Ie(e,n),0<b?h<n:h>n)h+=b*Ea}else h=c+b*Ea,n=c-.5*da;for(var k;0<b?h>n:h<n;h-=da)z.point((k=hc([e,-g*Math.cos(h),-g*Math.sin(h)]))[0],k[1])}}function Ie(c,
a){var e=ib(a);e[0]-=c;gc(e);var g=ba(-e[1]);return((0>-e[2]?-g:g)+2*Math.PI-1E-6)%(2*Math.PI)}function Je(c,a,e){var g=x.range(c,a-1E-6,e).concat(a);return function(c){return g.map(function(a){return[c,a]})}}function Ke(c,a,e){var g=x.range(c,a-1E-6,e).concat(a);return function(c){return g.map(function(a){return[a,c]})}}function hd(c){return c.source}function id(c){return c.target}function Og(c,a,e,g){var h=Math.cos(a),n=Math.sin(a),b=Math.cos(g),z=Math.sin(g),da=h*Math.cos(c),k=h*Math.sin(c),l=
b*Math.cos(e),f=b*Math.sin(e),q=2*Math.asin(Math.sqrt(Aa(g-a)+h*b*Aa(e-c))),m=1/Math.sin(q);e=q?function(c){var a=Math.sin(c*=q)*m;c=Math.sin(q-c)*m;var t=c*da+a*l,e=c*k+a*f;return[Math.atan2(e,t)*ra,Math.atan2(c*n+a*z,Math.sqrt(t*t+e*e))*ra]}:function(){return[c*ra,a*ra]};e.distance=q;return e}function Ib(c,a){function e(a,t){var e=Math.cos(t),b=c(Math.cos(a)*e);return[b*e*Math.sin(a),b*Math.sin(t)]}e.invert=function(c,e){var n=Math.sqrt(c*c+e*e),b=a(n),z=Math.sin(b);return[Math.atan2(c*z,n*Math.cos(b)),
Math.asin(n&&e*z/n)]};return e}function Le(c,a){function e(c,a){0<n?a<-va+1E-6&&(a=-va+1E-6):a>va-1E-6&&(a=va-1E-6);var t=n/Math.pow(Math.tan(ja/4+a/2),h);return[t*Math.sin(h*c),n-t*Math.cos(h*c)]}var g=Math.cos(c),h=c===a?Math.sin(c):Math.log(g/Math.cos(a))/Math.log(Math.tan(ja/4+a/2)/Math.tan(ja/4+c/2)),n=g*Math.pow(Math.tan(ja/4+c/2),h)/h;if(!h)return lc;e.invert=function(c,a){var t=n-a;return[Math.atan2(c,t)/h,2*Math.atan(Math.pow(n/((0<h?1:0>h?-1:0)*Math.sqrt(c*c+t*t)),1/h))-va]};return e}function Me(c,
a){function e(c,a){var t=n-a;return[t*Math.sin(h*c),n-t*Math.cos(h*c)]}var g=Math.cos(c),h=c===a?Math.sin(c):(g-Math.cos(a))/(a-c),n=g/h+c;if(1E-6>ka(h))return Hb;e.invert=function(c,a){var t=n-a;return[Math.atan2(c,t)/h,n-(0<h?1:0>h?-1:0)*Math.sqrt(c*c+t*t)]};return e}function lc(c,a){return[c,Math.log(Math.tan(ja/4+a/2))]}function Ne(c){var a=bb(c),e=a.scale,g=a.translate,h=a.clipExtent,n;a.scale=function(){var c=e.apply(a,arguments);return c===a?n?a.clipExtent(null):a:c};a.translate=function(){var c=
g.apply(a,arguments);return c===a?n?a.clipExtent(null):a:c};a.clipExtent=function(c){var b=h.apply(a,arguments);if(b===a){if(n=null==c){var da=ja*e(),k=g();h([[k[0]-da,k[1]-da],[k[0]+da,k[1]+da]])}}else n&&(b=null);return b};return a.clipExtent(null)}function jd(c,a){return[Math.log(Math.tan(ja/4+a/2)),-c]}function xb(c){return c[0]}function Jb(c){return c[1]}function Oe(c){for(var a=c.length,e=[0,1],g=2,h=2;h<a;h++){for(;1<g&&0>=ca(c[e[g-2]],c[e[g-1]],c[h]);)--g;e[g++]=h}return e.slice(0,g)}function Pg(c,
a){return c[0]-a[0]||c[1]-a[1]}function kd(c,a,e){return(e[0]-a[0])*(c[1]-a[1])<(e[1]-a[1])*(c[0]-a[0])}function Pe(c,a,e,g){var h=c[0],n=e[0],b=a[0]-h,z=g[0]-n;c=c[1];e=e[1];a=a[1]-c;g=g[1]-e;n=(z*(c-e)-g*(h-n))/(g*b-z*a);return[h+n*b,c+n*a]}function Qe(c){var a=c[0];c=c[c.length-1];return!(a[0]-c[0]||a[1]-c[1])}function Qg(){mc(this);this.edge=this.site=this.circle=null}function Re(c){var a=Se.pop()||new Qg;a.site=c;return a}function ld(c){yb(c);zb.remove(c);Se.push(c);mc(c)}function Te(c,a){var e=
c.site,g=e.x,h=e.y,n=h-a;if(!n)return g;var b=c.P;if(!b)return-Infinity;var e=b.site,b=e.x,e=e.y,z=e-a;if(!z)return b;var k=b-g,l=1/n-1/z,f=k/z;return l?(-f+Math.sqrt(f*f-2*l*(k*k/(-2*z)-e+z/2+h-n/2)))/l+g:(g+b)/2}function Ue(c){this.site=c;this.edges=[]}function Ve(c,a){return a.angle-c.angle}function Rg(){mc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Ab(c){var a=c.P,e=c.N;if(a&&e){var g=a.site,a=c.site,h=e.site;if(g!==h){var e=a.x,n=a.y,b=g.x-e,z=g.y-n,g=h.x-e,h=h.y-n,k=2*(b*h-
z*g);if(!(-1E-12<=k)){var l=b*b+z*z,f=g*g+h*h,z=(h*l-z*f)/k,b=(b*f-g*l)/k,h=b+n,n=We.pop()||new Rg;n.arc=c;n.site=a;n.x=z+e;n.y=h+Math.sqrt(z*z+b*b);n.cy=h;c.circle=n;c=null;for(a=Kb._;a;)if(n.y<a.y||n.y===a.y&&n.x<=a.x)if(a.L)a=a.L;else{c=a.P;break}else if(a.R)a=a.R;else{c=a;break}Kb.insert(c,n);c||(md=n)}}}}function yb(c){var a=c.circle;a&&(a.P||(md=a.N),Kb.remove(a),We.push(a),mc(a),c.circle=null)}function Sg(c,a){var e=c.b;if(e)return!0;var g=c.a,e=a[0][0],h=a[1][0],n=a[0][1],b=a[1][1],z=c.l,
k=c.r,l=z.x,z=z.y,f=k.x,k=k.y,q=(l+f)/2,m;if(k===z){if(q<e||q>=h)return;if(l>f){if(!g)g={x:q,y:n};else if(g.y>=b)return;e={x:q,y:b}}else{if(!g)g={x:q,y:b};else if(g.y<n)return;e={x:q,y:n}}}else if(m=(l-f)/(k-z),q=(z+k)/2-m*q,-1>m||1<m)if(l>f){if(!g)g={x:(n-q)/m,y:n};else if(g.y>=b)return;e={x:(b-q)/m,y:b}}else{if(!g)g={x:(b-q)/m,y:b};else if(g.y<n)return;e={x:(n-q)/m,y:n}}else if(z<k){if(!g)g={x:e,y:m*e+q};else if(g.x>=h)return;e={x:h,y:m*h+q}}else{if(!g)g={x:h,y:m*h+q};else if(g.x<e)return;e={x:e,
y:m*e+q}}c.a=g;c.b=e;return!0}function Xe(c,a){this.l=c;this.r=a;this.a=this.b=null}function Lb(c,a,e,g){var h=new Xe(c,a);Bb.push(h);e&&nc(h,c,a,e);g&&nc(h,a,c,g);mb[c.i].edges.push(new oc(h,c,a));mb[a.i].edges.push(new oc(h,a,c));return h}function Tg(c,a,e){c=new Xe(c,null);c.a=a;c.b=e;Bb.push(c);return c}function nc(c,a,e,g){c.a||c.b?c.l===e?c.b=g:c.a=g:(c.a=g,c.l=a,c.r=e)}function oc(c,a,e){var g=c.a,h=c.b;this.edge=c;this.site=a;this.angle=e?Math.atan2(e.y-a.y,e.x-a.x):c.l===a?Math.atan2(h.x-
g.x,g.y-h.y):Math.atan2(g.x-h.x,h.y-g.y)}function nd(){this._=null}function mc(c){c.U=c.C=c.L=c.R=c.P=c.N=null}function Mb(c,a){var e=a.R,g=a.U;g?g.L===a?g.L=e:g.R=e:c._=e;e.U=g;a.U=e;a.R=e.L;a.R&&(a.R.U=a);e.L=a}function Nb(c,a){var e=a.L,g=a.U;g?g.L===a?g.L=e:g.R=e:c._=e;e.U=g;a.U=e;a.L=e.R;a.L&&(a.L.U=a);e.R=a}function Ye(c){for(;c.L;)c=c.L;return c}function od(c,a){var e=c.sort(Ug).pop(),g,h,n;Bb=[];mb=Array(c.length);zb=new nd;for(Kb=new nd;;)if(n=md,e&&(!n||e.y<n.y||e.y===n.y&&e.x<n.x)){if(e.x!==
g||e.y!==h){mb[e.i]=new Ue(e);g=e;var b=g.x,z=g.y;n=h=void 0;for(var k,l,f=zb._;f;)if(k=Te(f,z)-b,1E-6<k)f=f.L;else{var q=f;l=z;var m=q.N;m?l=Te(m,l):(q=q.site,l=q.y===l?q.x:Infinity);l=b-l;if(1E-6<l){if(!f.R){h=f;break}f=f.R}else{-1E-6<k?(h=f.P,n=f):-1E-6<l?(h=f,n=f.N):h=n=f;break}}b=Re(g);zb.insert(h,b);if(h||n)if(h===n)yb(h),n=Re(h.site),zb.insert(b,n),b.edge=n.edge=Lb(h.site,b.site),Ab(h),Ab(n);else if(n){yb(h);yb(n);z=h.site;f=z.x;l=z.y;q=g.x-f;m=g.y-l;k=n.site;var y=k.x-f,p=k.y-l,u=2*(q*p-m*
y),w=q*q+m*m,F=y*y+p*p,f={x:(p*w-m*F)/u+f,y:(q*F-y*w)/u+l};nc(n.edge,z,k,f);b.edge=Lb(z,g,null,f);n.edge=Lb(g,k,null,f);Ab(h);Ab(n)}else b.edge=Lb(h.site,b.site);g=e.x;h=e.y}e=c.pop()}else if(n){k=n.arc;n=k.circle;z=n.x;f=n.cy;n={x:z,y:f};q=k.P;l=k.N;b=[k];ld(k);for(k=q;k.circle&&1E-6>ka(z-k.circle.x)&&1E-6>ka(f-k.circle.cy);)q=k.P,b.unshift(k),ld(k),k=q;b.unshift(k);yb(k);for(q=l;q.circle&&1E-6>ka(z-q.circle.x)&&1E-6>ka(f-q.circle.cy);)l=q.N,b.push(q),ld(q),q=l;b.push(q);yb(q);z=b.length;for(f=1;f<
z;++f)q=b[f],k=b[f-1],nc(q.edge,k.site,q.site,n);k=b[0];q=b[z-1];q.edge=Lb(k.site,q.site,null,n);Ab(k);Ab(q)}else break;if(a){e=Bb;g=se(a[0][0],a[0][1],a[1][0],a[1][1]);for(h=e.length;h--;)if(n=e[h],!Sg(n,a)||!g(n)||1E-6>ka(n.a.x-n.b.x)&&1E-6>ka(n.a.y-n.b.y))n.a=n.b=null,e.splice(h,1);e=a[0][0];g=a[1][0];h=a[0][1];n=a[1][1];f=mb;for(l=f.length;l--;)if((q=f[l])&&q.prepare())for(y=q.edges,p=y.length,m=0;m<p;)if(u=y[m].end(),z=u.x,k=u.y,w=y[++m%p].start(),b=w.x,w=w.y,1E-6<ka(z-b)||1E-6<ka(k-w))y.splice(m,
0,new oc(Tg(q.site,u,1E-6>ka(z-e)&&1E-6<n-k?{x:e,y:1E-6>ka(b-e)?w:n}:1E-6>ka(k-n)&&1E-6<g-z?{x:1E-6>ka(w-n)?b:g,y:n}:1E-6>ka(z-g)&&1E-6<k-h?{x:g,y:1E-6>ka(b-g)?w:h}:1E-6>ka(k-h)&&1E-6<z-e?{x:1E-6>ka(w-h)?b:e,y:h}:null),q.site,null)),++p}e={cells:mb,edges:Bb};zb=Kb=Bb=mb=null;return e}function Ug(c,a){return a.y-c.y||a.x-c.x}function Vg(c){return c.x}function Wg(c){return c.y}function Ze(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ob(c,a,e,g,h,n){if(!c(a,e,g,h,n)){var b=.5*(e+h),z=
.5*(g+n);a=a.nodes;a[0]&&Ob(c,a[0],e,g,b,z);a[1]&&Ob(c,a[1],b,g,h,z);a[2]&&Ob(c,a[2],e,z,b,n);a[3]&&Ob(c,a[3],b,z,h,n)}}function pd(c,a){c=x.rgb(c);a=x.rgb(a);var e=c.r,g=c.g,h=c.b,n=a.r-e,b=a.g-g,z=a.b-h;return function(c){return"#"+sb(Math.round(e+n*c))+sb(Math.round(g+b*c))+sb(Math.round(h+z*c))}}function $e(c,a){var e={},g={},h;for(h in c)h in a?e[h]=nb(c[h],a[h]):g[h]=c[h];for(h in a)h in c||(g[h]=a[h]);return function(c){for(h in e)g[h]=e[h](c);return g}}function Va(c,a){a-=c=+c;return function(e){return c+
a*e}}function af(c,a){var e=qd.lastIndex=rd.lastIndex=0,g,h,n,b=-1,z=[],k=[];c+="";for(a+="";(g=qd.exec(c))&&(h=rd.exec(a));)(n=h.index)>e&&(n=a.substring(e,n),z[b]?z[b]+=n:z[++b]=n),(g=g[0])===(h=h[0])?z[b]?z[b]+=h:z[++b]=h:(z[++b]=null,k.push({i:b,x:Va(g,h)})),e=rd.lastIndex;e<a.length&&(n=a.substring(e),z[b]?z[b]+=n:z[++b]=n);return 2>z.length?k[0]?(a=k[0].x,function(c){return a(c)+""}):function(){return a}:(a=k.length,function(c){for(var e=0,g;e<a;++e)z[(g=k[e]).i]=g.x(c);return z.join("")})}
function nb(c,a){for(var e=x.interpolators.length,g;0<=--e&&!(g=x.interpolators[e](c,a)););return g}function pc(c,a){var e=[],g=[],h=c.length,n=a.length,b=Math.min(c.length,a.length),z;for(z=0;z<b;++z)e.push(nb(c[z],a[z]));for(;z<h;++z)g[z]=c[z];for(;z<n;++z)g[z]=a[z];return function(c){for(z=0;z<b;++z)g[z]=e[z](c);return g}}function Xg(c){return function(a){return 0>=a?0:1<=a?1:c(a)}}function bf(c){return function(a){return 1-c(1-a)}}function cf(c){return function(a){return.5*(.5>a?c(2*a):2-c(2-
2*a))}}function Yg(c){return c*c}function Zg(c){return c*c*c}function $g(c){if(0>=c)return 0;if(1<=c)return 1;var a=c*c,e=a*c;return 4*(.5>c?e:3*(c-a)+e-.75)}function ah(c){return 1-Math.cos(c*va)}function bh(c){return Math.pow(2,10*(c-1))}function ch(c){return 1-Math.sqrt(1-c*c)}function dh(c){return c<1/2.75?7.5625*c*c:c<2/2.75?7.5625*(c-=1.5/2.75)*c+.75:c<2.5/2.75?7.5625*(c-=2.25/2.75)*c+.9375:7.5625*(c-=2.625/2.75)*c+.984375}function df(c,a){a-=c;return function(e){return Math.round(c+a*e)}}function ef(c){var a=
[c.a,c.b],e=[c.c,c.d],g=ff(a),h=a[0]*e[0]+a[1]*e[1],n=-h;e[0]+=n*a[0];e[1]+=n*a[1];n=ff(e)||0;a[0]*e[1]<e[0]*a[1]&&(a[0]*=-1,a[1]*=-1,g*=-1,h*=-1);this.rotate=(g?Math.atan2(a[1],a[0]):Math.atan2(-e[0],e[1]))*ra;this.translate=[c.e,c.f];this.scale=[g,n];this.skew=n?Math.atan2(h,n)*ra:0}function ff(c){var a=Math.sqrt(c[0]*c[0]+c[1]*c[1]);a&&(c[0]/=a,c[1]/=a);return a}function gf(c,a){var e=[],g=[],h,n=x.transform(c),b=x.transform(a),z=n.translate,k=b.translate,f=n.rotate,l=b.rotate,q=n.skew,m=b.skew,
n=n.scale,b=b.scale;z[0]!=k[0]||z[1]!=k[1]?(e.push("translate(",null,",",null,")"),g.push({i:1,x:Va(z[0],k[0])},{i:3,x:Va(z[1],k[1])})):k[0]||k[1]?e.push("translate("+k+")"):e.push("");f!=l?(180<f-l?l+=360:180<l-f&&(f+=360),g.push({i:e.push(e.pop()+"rotate(",null,")")-2,x:Va(f,l)})):l&&e.push(e.pop()+"rotate("+l+")");q!=m?g.push({i:e.push(e.pop()+"skewX(",null,")")-2,x:Va(q,m)}):m&&e.push(e.pop()+"skewX("+m+")");n[0]!=b[0]||n[1]!=b[1]?(h=e.push(e.pop()+"scale(",null,",",null,")"),g.push({i:h-4,x:Va(n[0],
b[0])},{i:h-2,x:Va(n[1],b[1])})):1==b[0]&&1==b[1]||e.push(e.pop()+"scale("+b+")");h=g.length;return function(c){for(var a=-1,t;++a<h;)e[(t=g[a]).i]=t.x(c);return e.join("")}}function eh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return(e-c)*a}}function fh(c,a){a=a-(c=+c)?1/(a-c):0;return function(e){return Math.max(0,Math.min(1,(e-c)*a))}}function gh(c){var a=c.source;c=c.target;var e;var g=c;if(a===g)e=a;else{e=hf(a);for(var g=hf(g),h=e.pop(),n=g.pop(),b=null;h===n;)b=h,h=e.pop(),n=g.pop();e=b}for(g=
[a];a!==e;)a=a.parent,g.push(a);for(a=g.length;c!==e;)g.splice(a,0,c),c=c.parent;return g}function hf(c){for(var a=[],e=c.parent;null!=e;)a.push(c),c=e,e=e.parent;a.push(c);return a}function hh(c){c.fixed|=2}function ih(c){c.fixed&=-7}function jh(c){c.fixed|=4;c.px=c.x;c.py=c.y}function kh(c){c.fixed&=-5}function jf(c,a,e){var g=0,h=0;c.charge=0;if(!c.leaf)for(var n=c.nodes,b=n.length,z=-1,k;++z<b;)k=n[z],null!=k&&(jf(k,a,e),c.charge+=k.charge,g+=k.charge*k.cx,h+=k.charge*k.cy);c.point&&(c.leaf||
(c.point.x+=Math.random()-.5,c.point.y+=Math.random()-.5),a*=e[c.point.index],c.charge+=c.pointCharge=a,g+=a*c.point.x,h+=a*c.point.y);c.cx=g/c.charge;c.cy=h/c.charge}function Pb(c,a){x.rebind(c,a,"sort","children","value");c.nodes=c;c.links=lh;return c}function Qb(c,a){for(var e=[c];null!=(c=e.pop());)if(a(c),(h=c.children)&&(g=h.length))for(var g,h;0<=--g;)e.push(h[g])}function Pa(c,a){for(var e=[c],g=[];null!=(c=e.pop());)if(g.push(c),(b=c.children)&&(n=b.length))for(var h=-1,n,b;++h<n;)e.push(b[h]);
for(;null!=(c=g.pop());)a(c)}function mh(c){return c.children}function nh(c){return c.value}function oh(c,a){return a.value-c.value}function lh(c){return x.merge(c.map(function(c){return(c.children||[]).map(function(a){return{source:c,target:a}})}))}function ph(c){return c.x}function qh(c){return c.y}function rh(c,a,e){c.y0=a;c.y=e}function sd(c){return x.range(c.length)}function td(c){var a=-1;c=c[0].length;for(var e=[];++a<c;)e[a]=0;return e}function sh(c){for(var a=1,e=0,g=c[0][1],h,n=c.length;a<
n;++a)(h=c[a][1])>g&&(e=a,g=h);return e}function th(c){return c.reduce(uh,0)}function uh(c,a){return c+a[1]}function vh(c,a){return kf(c,Math.ceil(Math.log(a.length)/Math.LN2+1))}function kf(c,a){for(var e=-1,g=+c[0],h=(c[1]-g)/a,n=[];++e<=a;)n[e]=h*e+g;return n}function wh(c){return[x.min(c),x.max(c)]}function xh(c,a){return c.value-a.value}function ud(c,a){var e=c._pack_next;c._pack_next=a;a._pack_prev=c;a._pack_next=e;e._pack_prev=a}function lf(c,a){c._pack_next=a;a._pack_prev=c}function mf(c,
a){var e=a.x-c.x,g=a.y-c.y,h=c.r+a.r;return.999*h*h>e*e+g*g}function nf(c){function a(c){g=Math.min(c.x-c.r,g);h=Math.max(c.x+c.r,h);n=Math.min(c.y-c.r,n);b=Math.max(c.y+c.r,b)}if((e=c.children)&&(y=e.length)){var e,g=Infinity,h=-Infinity,n=Infinity,b=-Infinity,z,k,f,l,q,m,y;e.forEach(yh);z=e[0];z.x=-z.r;z.y=0;a(z);if(1<y&&(k=e[1],k.x=k.r,k.y=0,a(k),2<y))for(f=e[2],of(z,k,f),a(f),ud(z,f),z._pack_prev=f,ud(f,k),k=z._pack_next,l=3;l<y;l++){of(z,k,f=e[l]);var p=0,w=1,u=1;for(q=k._pack_next;q!==k;q=q._pack_next,
w++)if(mf(q,f)){p=1;break}if(1==p)for(m=z._pack_prev;m!==q._pack_prev&&!mf(m,f);m=m._pack_prev,u++);p?(w<u||w==u&&k.r<z.r?lf(z,k=q):lf(z=m,k),l--):(ud(z,f),k=f,a(f))}z=(g+h)/2;k=(n+b)/2;for(l=q=0;l<y;l++)f=e[l],f.x-=z,f.y-=k,q=Math.max(q,f.r+Math.sqrt(f.x*f.x+f.y*f.y));c.r=q;e.forEach(zh)}}function yh(c){c._pack_next=c._pack_prev=c}function zh(c){delete c._pack_next;delete c._pack_prev}function pf(c,a,e,g){var h=c.children;c.x=a+=g*c.x;c.y=e+=g*c.y;c.r*=g;if(h){c=-1;for(var n=h.length;++c<n;)pf(h[c],
a,e,g)}}function of(c,a,e){var g=c.r+e.r,h=a.x-c.x,n=a.y-c.y;if(g&&(h||n)){var b=a.r+e.r,z=h*h+n*n,b=b*b,g=g*g;a=.5+(g-b)/(2*z);b=Math.sqrt(Math.max(0,2*b*(g+z)-(g-=z)*g-b*b))/(2*z);e.x=c.x+a*h+b*n;e.y=c.y+a*n-b*h}else e.x=c.x+g,e.y=c.y}function qf(c,a){return c.parent==a.parent?1:2}function vd(c){var a=c.children;return a.length?a[0]:c.t}function wd(c){var a=c.children,e;return(e=a.length)?a[e-1]:c.t}function Ah(c){return 1+x.max(c,function(c){return c.y})}function Bh(c){return c.reduce(function(c,
a){return c+a.x},0)/c.length}function rf(c){var a=c.children;return a&&a.length?rf(a[0]):c}function sf(c){var a=c.children,e;return a&&(e=a.length)?sf(a[e-1]):c}function xd(c){return{x:c.x,y:c.y,dx:c.dx,dy:c.dy}}function tf(c,a){var e=c.x+a[3],g=c.y+a[0],h=c.dx-a[1]-a[3],n=c.dy-a[0]-a[2];0>h&&(e+=h/2,h=0);0>n&&(g+=n/2,n=0);return{x:e,y:g,dx:h,dy:n}}function Cb(c){var a=c[0];c=c[c.length-1];return a<c?[a,c]:[c,a]}function qc(c){return c.rangeExtent?c.rangeExtent():Cb(c.range())}function Ch(c,a,e,g){var h=
e(c[0],c[1]),n=g(a[0],a[1]);return function(c){return n(h(c))}}function rc(c,a){var e=0,g=c.length-1,h=c[e],n=c[g],b;n<h&&(b=e,e=g,g=b,b=h,h=n,n=b);c[e]=a.floor(h);c[g]=a.ceil(n);return c}function uf(c){return c?{floor:function(a){return Math.floor(a/c)*c},ceil:function(a){return Math.ceil(a/c)*c}}:Dh}function Eh(c,a,e,g){var h=[],n=[],b=0,z=Math.min(c.length,a.length)-1;c[z]<c[0]&&(c=c.slice().reverse(),a=a.slice().reverse());for(;++b<=z;)h.push(e(c[b-1],c[b])),n.push(g(a[b-1],a[b]));return function(a){var e=
x.bisect(c,a,1,z)-1;return n[e](h[e](a))}}function vf(c,a,e,g){function h(){var h=2<Math.min(c.length,a.length)?Eh:Ch,k=g?fh:eh;b=h(c,a,k,e);z=h(a,c,k,nb);return n}function n(c){return b(c)}var b,z;n.invert=function(c){return z(c)};n.domain=function(a){if(!arguments.length)return c;c=a.map(Number);return h()};n.range=function(c){if(!arguments.length)return a;a=c;return h()};n.rangeRound=function(c){return n.range(c).interpolate(df)};n.clamp=function(c){if(!arguments.length)return g;g=c;return h()};
n.interpolate=function(c){if(!arguments.length)return e;e=c;return h()};n.ticks=function(a){return x.range.apply(x,cb(c,a))};n.tickFormat=function(a,e){return yd(c,a,e)};n.nice=function(a){rc(c,uf(cb(c,a)[2]));return h()};n.copy=function(){return vf(c,a,e,g)};return h()}function zd(c,a){return x.rebind(c,a,"range","rangeRound","interpolate","clamp")}function cb(c,a){null==a&&(a=10);var e=Cb(c),g=e[1]-e[0],h=Math.pow(10,Math.floor(Math.log(g/a)/Math.LN10)),g=a/g*h;.15>=g?h*=10:.35>=g?h*=5:.75>=g&&
(h*=2);e[0]=Math.ceil(e[0]/h)*h;e[1]=Math.floor(e[1]/h)*h+.5*h;e[2]=h;return e}function yd(c,a,e){c=cb(c,a);if(e){a=ee.exec(e);a.shift();if("s"===a[8]){var g=x.formatPrefix(Math.max(ka(c[0]),ka(c[1])));a[7]||(a[7]="."+sc(g.scale(c[2])));a[8]="f";e=x.format(a.join(""));return function(c){return e(g.scale(c))+g.symbol}}a[7]||(a[7]="."+Fh(a[8],c));e=a.join("")}else e=",."+sc(c[2])+"f";return x.format(e)}function sc(c){return-Math.floor(Math.log(c)/Math.LN10+.01)}function Fh(c,a){var e=sc(a[2]);return c in
Gh?Math.abs(e-sc(Math.max(ka(a[0]),ka(a[1]))))+ +("e"!==c):e-2*("%"===c)}function wf(c,a,e,g){function h(c){return(e?Math.log(0>c?0:c):-Math.log(0<c?0:-c))/Math.log(a)}function n(c){return e?Math.pow(a,c):-Math.pow(a,-c)}function b(a){return c(h(a))}b.invert=function(a){return n(c.invert(a))};b.domain=function(a){if(!arguments.length)return g;e=0<=a[0];c.domain((g=a.map(Number)).map(h));return b};b.base=function(e){if(!arguments.length)return a;a=+e;c.domain(g.map(h));return b};b.nice=function(){var a=
rc(g.map(h),e?Math:Hh);c.domain(a);g=a.map(n);return b};b.ticks=function(){var c=Cb(g),b=[],k=c[0],c=c[1],K=Math.floor(h(k)),f=Math.ceil(h(c)),l=a%1?2:a;if(isFinite(f-K)){if(e){for(;K<f;K++)for(var q=1;q<l;q++)b.push(n(K)*q);b.push(n(K))}else for(b.push(n(K));K++<f;)for(q=l-1;0<q;q--)b.push(n(K)*q);for(K=0;b[K]<k;K++);for(f=b.length;b[f-1]>c;f--);b=b.slice(K,f)}return b};b.tickFormat=function(c,a){if(!arguments.length)return xf;2>arguments.length?a=xf:"function"!==typeof a&&(a=x.format(a));var t=
Math.max(.1,c/b.ticks().length),g=e?(k=1E-12,Math.ceil):(k=-1E-12,Math.floor),k;return function(c){return c/n(g(h(c)+k))<=t?a(c):""}};b.copy=function(){return wf(c.copy(),a,e,g)};return zd(b,c)}function yf(c,a,e){function g(a){return c(h(a))}var h=tc(a),n=tc(1/a);g.invert=function(a){return n(c.invert(a))};g.domain=function(a){if(!arguments.length)return e;c.domain((e=a.map(Number)).map(h));return g};g.ticks=function(c){return x.range.apply(x,cb(e,c))};g.tickFormat=function(c,a){return yd(e,c,a)};
g.nice=function(c){return g.domain(rc(e,uf(cb(e,c)[2])))};g.exponent=function(b){if(!arguments.length)return a;h=tc(a=b);n=tc(1/a);c.domain(e.map(h));return g};g.copy=function(){return yf(c.copy(),a,e)};return zd(g,c)}function tc(c){return function(a){return 0>a?-Math.pow(-a,c):Math.pow(a,c)}}function zf(c,a){function e(e){return n[((h.get(e)||("range"===a.t?h.set(e,c.push(e)):NaN))-1)%n.length]}function g(a,e){return x.range(c.length).map(function(c){return a+e*c})}var h,n,b;e.domain=function(g){if(!arguments.length)return c;
c=[];h=new B;for(var n=-1,b=g.length,k;++n<b;)h.has(k=g[n])||h.set(k,c.push(k));return e[a.t].apply(e,a.a)};e.range=function(c){if(!arguments.length)return n;n=c;b=0;a={t:"range",a:arguments};return e};e.rangePoints=function(h,k){2>arguments.length&&(k=0);var f=h[0],l=h[1],q=(l-f)/(Math.max(1,c.length-1)+k);n=g(2>c.length?(f+l)/2:f+q*k/2,q);b=0;a={t:"rangePoints",a:arguments};return e};e.rangeBands=function(h,k,f){2>arguments.length&&(k=0);3>arguments.length&&(f=k);var l=h[1]<h[0],q=h[l-0],m=(h[1-
l]-q)/(c.length-k+2*f);n=g(q+m*f,m);l&&n.reverse();b=m*(1-k);a={t:"rangeBands",a:arguments};return e};e.rangeRoundBands=function(h,k,f){2>arguments.length&&(k=0);3>arguments.length&&(f=k);var l=h[1]<h[0],q=h[l-0],m=h[1-l],y=Math.floor((m-q)/(c.length-k+2*f));n=g(q+Math.round((m-q-(c.length-k)*y)/2),y);l&&n.reverse();b=Math.round(y*(1-k));a={t:"rangeRoundBands",a:arguments};return e};e.rangeBand=function(){return b};e.rangeExtent=function(){return Cb(a.a[0])};e.copy=function(){return zf(c,a)};return e.domain(c)}
function Af(c,a){function e(){var e=0,b=a.length;for(h=[];++e<b;)h[e-1]=x.quantile(c,e/b);return g}function g(c){if(!isNaN(c=+c))return a[x.bisect(h,c)]}var h;g.domain=function(a){if(!arguments.length)return c;c=a.filter(r).sort(W);return e()};g.range=function(c){if(!arguments.length)return a;a=c;return e()};g.quantiles=function(){return h};g.invertExtent=function(e){e=a.indexOf(e);return 0>e?[NaN,NaN]:[0<e?h[e-1]:c[0],e<h.length?h[e]:c[c.length-1]]};g.copy=function(){return Af(c,a)};return e()}function Bf(c,
a,e){function g(a){return e[Math.max(0,Math.min(b,Math.floor(n*(a-c))))]}function h(){n=e.length/(a-c);b=e.length-1;return g}var n,b;g.domain=function(e){if(!arguments.length)return[c,a];c=+e[0];a=+e[e.length-1];return h()};g.range=function(c){if(!arguments.length)return e;e=c;return h()};g.invertExtent=function(a){a=e.indexOf(a);a=0>a?NaN:a/n+c;return[a,a+1/n]};g.copy=function(){return Bf(c,a,e)};return h()}function Cf(c,a){function e(e){if(e<=e)return a[x.bisect(c,e)]}e.domain=function(a){if(!arguments.length)return c;
c=a;return e};e.range=function(c){if(!arguments.length)return a;a=c;return e};e.invertExtent=function(e){e=a.indexOf(e);return[c[e-1],c[e]]};e.copy=function(){return Cf(c,a)};return e}function Df(c){function a(c){return+c}a.invert=a;a.domain=a.range=function(e){if(!arguments.length)return c;c=e.map(a);return a};a.ticks=function(a){return x.range.apply(x,cb(c,a))};a.tickFormat=function(a,t){return yd(c,a,t)};a.copy=function(){return Df(c)};return a}function Ih(c){return c.innerRadius}function Jh(c){return c.outerRadius}
function Ef(c){return c.startAngle}function Ff(c){return c.endAngle}function Gf(c){function a(t){function b(){K.push("M",n(c(f),k))}for(var K=[],f=[],l=-1,q=t.length,m,y=qa(e),p=qa(g);++l<q;)h.call(this,m=t[l],l)?f.push([+y.call(this,m,l),+p.call(this,m,l)]):f.length&&(b(),f=[]);f.length&&b();return K.length?K.join(""):null}var e=xb,g=Jb,h=wb,n=Fa,b=n.key,k=.7;a.x=function(c){if(!arguments.length)return e;e=c;return a};a.y=function(c){if(!arguments.length)return g;g=c;return a};a.defined=function(c){if(!arguments.length)return h;
h=c;return a};a.interpolate=function(c){if(!arguments.length)return b;b="function"===typeof c?n=c:(n=Ad.get(c)||Fa).key;return a};a.tension=function(c){if(!arguments.length)return k;k=c;return a};return a}function Fa(c){return c.join("L")}function Bd(c){for(var a=0,e=c.length,g=c[0],h=[g[0],",",g[1]];++a<e;)h.push("V",(g=c[a])[1],"H",g[0]);return h.join("")}function Cd(c){for(var a=0,e=c.length,g=c[0],h=[g[0],",",g[1]];++a<e;)h.push("H",(g=c[a])[0],"V",g[1]);return h.join("")}function uc(c,a){if(1>
a.length||c.length!=a.length&&c.length!=a.length+2)return Fa(c);var e=c.length!=a.length,g="",h=c[0],n=c[1],b=a[0],k=b,f=1;e&&(g+="Q"+(n[0]-2*b[0]/3)+","+(n[1]-2*b[1]/3)+","+n[0]+","+n[1],h=c[1],f=2);if(1<a.length)for(k=a[1],n=c[f],f++,g+="C"+(h[0]+b[0])+","+(h[1]+b[1])+","+(n[0]-k[0])+","+(n[1]-k[1])+","+n[0]+","+n[1],h=2;h<a.length;h++,f++)n=c[f],k=a[h],g+="S"+(n[0]-k[0])+","+(n[1]-k[1])+","+n[0]+","+n[1];e&&(e=c[f],g+="Q"+(n[0]+2*k[0]/3)+","+(n[1]+2*k[1]/3)+","+e[0]+","+e[1]);return g}function Dd(c,
a){for(var e=[],g=(1-a)/2,h,n=c[0],b=c[1],k=1,f=c.length;++k<f;)h=n,n=b,b=c[k],e.push([g*(b[0]-h[0]),g*(b[1]-h[1])]);return e}function Hf(c){if(3>c.length)return Fa(c);var a=1,e=c.length,g=c[0],h=g[0],n=g[1],b=[h,h,h,(g=c[1])[0]],k=[n,n,n,g[1]],h=[h,",",n,"L",Ha(db,b),",",Ha(db,k)];for(c.push(c[e-1]);++a<=e;)g=c[a],b.shift(),b.push(g[0]),k.shift(),k.push(g[1]),Ed(h,b,k);c.pop();h.push("L",g);return h.join("")}function Ha(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]+c[3]*a[3]}function Ed(c,a,e){c.push("C",
Ha(If,a),",",Ha(If,e),",",Ha(Jf,a),",",Ha(Jf,e),",",Ha(db,a),",",Ha(db,e))}function Fd(c,a){return(a[1]-c[1])/(a[0]-c[0])}function Kf(c){for(var a,e=-1,g=c.length,h,n;++e<g;)a=c[e],h=a[0],n=a[1]+ob,a[0]=h*Math.cos(n),a[1]=h*Math.sin(n);return c}function Lf(c){function a(t){function f(){y.push("M",k(c(p),m),q,l(c(da.reverse()),m),"Z")}for(var y=[],da=[],p=[],w=-1,u=t.length,F,C=qa(e),x=qa(h),A=e===g?function(){return L}:qa(g),r=h===n?function(){return v}:qa(n),L,v;++w<u;)b.call(this,F=t[w],w)?(da.push([L=
+C.call(this,F,w),v=+x.call(this,F,w)]),p.push([+A.call(this,F,w),+r.call(this,F,w)])):da.length&&(f(),da=[],p=[]);da.length&&f();return y.length?y.join(""):null}var e=xb,g=xb,h=0,n=Jb,b=wb,k=Fa,f=k.key,l=k,q="L",m=.7;a.x=function(c){if(!arguments.length)return g;e=g=c;return a};a.x0=function(c){if(!arguments.length)return e;e=c;return a};a.x1=function(c){if(!arguments.length)return g;g=c;return a};a.y=function(c){if(!arguments.length)return n;h=n=c;return a};a.y0=function(c){if(!arguments.length)return h;
h=c;return a};a.y1=function(c){if(!arguments.length)return n;n=c;return a};a.defined=function(c){if(!arguments.length)return b;b=c;return a};a.interpolate=function(c){if(!arguments.length)return f;f="function"===typeof c?k=c:(k=Ad.get(c)||Fa).key;l=k.reverse||k;q=k.closed?"M":"L";return a};a.tension=function(c){if(!arguments.length)return m;m=c;return a};return a}function Kh(c){return c.radius}function Mf(c){return[c.x,c.y]}function Lh(c){return function(){var a=c.apply(this,arguments),e=a[0],a=a[1]+
ob;return[e*Math.cos(a),e*Math.sin(a)]}}function Mh(){return 64}function Nh(){return"circle"}function Nf(c){c=Math.sqrt(c/ja);return"M0,"+c+"A"+c+","+c+" 0 1,1 0,"+-c+"A"+c+","+c+" 0 1,1 0,"+c+"Z"}function Rb(c,a){Tb(c,ta);c.id=a;return c}function Gd(c,a,e,g){var h=c.id;return U(c,"function"===typeof e?function(c,b,k){c.__transition__[h].tween.set(a,g(e.call(c,c.__data__,b,k)))}:(e=g(e),function(c){c.__transition__[h].tween.set(a,e)}))}function Oh(c){null==c&&(c="");return function(){this.textContent=
c}}function vc(c,a,e,g){var h=c.__transition__||(c.__transition__={active:0,count:0}),n=h[e];if(!n){var b=g.time,n=h[e]={tween:new B,time:b,ease:g.ease,delay:g.delay,duration:g.duration};++h.count;x.timer(function(g){function k(g){if(h.active>e)return l();h.active=e;n.event&&n.event.start.call(c,q,a);n.tween.forEach(function(e,g){(g=g.call(c,q,a))&&u.push(g)});x.timer(function(){w.c=f(g||1)?wb:f;return 1},0,b)}function f(g){if(h.active!==e)return l();g/=p;for(var b=m(g),k=u.length;0<k;)u[--k].call(c,
b);if(1<=g)return n.event&&n.event.end.call(c,q,a),l()}function l(){--h.count?delete h[e]:delete c.__transition__;return 1}var q=c.__data__,m=n.ease,y=n.delay,p=n.duration,w=Sa,u=[];w.t=y+b;if(y<=g)return k(g-y);w.c=k},0,b)}}function Of(c,a){c.attr("transform",function(c){return"translate("+a(c)+",0)"})}function Pf(c,a){c.attr("transform",function(c){return"translate(0,"+a(c)+")"})}function Hd(c){return c.toISOString()}function Id(c,a,e){function g(a){return c(a)}function h(c,e){var g=(c[1]-c[0])/
e,h=x.bisect(wc,g);return h==wc.length?[a.year,cb(c.map(function(c){return c/31536E6}),e)[2]]:h?a[g/wc[h-1]<wc[h]/g?h-1:h]:[Ph,cb(c,e)[2]]}g.invert=function(a){return pb(c.invert(a))};g.domain=function(a){if(!arguments.length)return c.domain().map(pb);c.domain(a);return g};g.nice=function(c,a){function e(g){return!isNaN(g)&&!c.range(g,pb(+g+1),a).length}var t=g.domain(),b=Cb(t);if(b=null==c?h(b,10):"number"===typeof c&&h(b,c))c=b[0],a=b[1];return g.domain(rc(t,1<a?{floor:function(a){for(;e(a=c.floor(a));)a=
pb(a-1);return a},ceil:function(a){for(;e(a=c.ceil(a));)a=pb(+a+1);return a}}:c))};g.ticks=function(c,a){var e=Cb(g.domain()),t=null==c?h(e,10):"number"===typeof c?h(e,c):!c.range&&[{range:c},a];t&&(c=t[0],a=t[1]);return c.range(e[0],pb(+e[1]+1),1>a?1:a)};g.tickFormat=function(){return e};g.copy=function(){return Id(c.copy(),a,e)};return zd(g,c)}function pb(c){return new Date(c)}function Qh(c){return JSON.parse(c.responseText)}function Rh(c){var a=Ma.createRange();a.selectNode(Ma.body);return a.createContextualFragment(c.responseText)}
var x={version:"3.4.9"};Date.now||(Date.now=function(){return+new Date});var Qf=[].slice,Xa=function(c){return Qf.call(c)},Ma=document,Ra=Ma.documentElement,ya=window;try{Xa(Ra.childNodes)[0].nodeType}catch(c){Xa=function(c){for(var a=c.length,g=Array(a);a--;)g[a]=c[a];return g}}try{Ma.createElement("div").style.setProperty("opacity",0,"")}catch(c){var xc=ya.Element.prototype,Sh=xc.setAttribute,Th=xc.setAttributeNS,Rf=ya.CSSStyleDeclaration.prototype,Uh=Rf.setProperty;xc.setAttribute=function(c,a){Sh.call(this,
c,a+"")};xc.setAttributeNS=function(c,a,g){Th.call(this,c,a,g+"")};Rf.setProperty=function(c,a,g){Uh.call(this,c,a+"",g)}}x.ascending=W;x.descending=function(c,a){return a<c?-1:a>c?1:a>=c?0:NaN};x.min=function(c,a){var e=-1,g=c.length,h,b;if(1===arguments.length){for(;++e<g&&!(null!=(h=c[e])&&h<=h);)h=void 0;for(;++e<g;)null!=(b=c[e])&&h>b&&(h=b)}else{for(;++e<g&&!(null!=(h=a.call(c,c[e],e))&&h<=h);)h=void 0;for(;++e<g;)null!=(b=a.call(c,c[e],e))&&h>b&&(h=b)}return h};x.max=function(c,a){var e=-1,
g=c.length,h,b;if(1===arguments.length){for(;++e<g&&!(null!=(h=c[e])&&h<=h);)h=void 0;for(;++e<g;)null!=(b=c[e])&&b>h&&(h=b)}else{for(;++e<g&&!(null!=(h=a.call(c,c[e],e))&&h<=h);)h=void 0;for(;++e<g;)null!=(b=a.call(c,c[e],e))&&b>h&&(h=b)}return h};x.extent=function(c,a){var e=-1,g=c.length,h,b,k;if(1===arguments.length){for(;++e<g&&!(null!=(h=k=c[e])&&h<=h);)h=k=void 0;for(;++e<g;)null!=(b=c[e])&&(h>b&&(h=b),k<b&&(k=b))}else{for(;++e<g&&!(null!=(h=k=a.call(c,c[e],e))&&h<=h);)h=void 0;for(;++e<g;)null!=
(b=a.call(c,c[e],e))&&(h>b&&(h=b),k<b&&(k=b))}return[h,k]};x.sum=function(c,a){var e=0,g=c.length,h,b=-1;if(1===arguments.length)for(;++b<g;)isNaN(h=+c[b])||(e+=h);else for(;++b<g;)isNaN(h=+a.call(c,c[b],b))||(e+=h);return e};x.mean=function(c,a){var e=0,g=c.length,h,b=-1,k=g;if(1===arguments.length)for(;++b<g;)r(h=c[b])?e+=h:--k;else for(;++b<g;)r(h=a.call(c,c[b],b))?e+=h:--k;return k?e/k:void 0};x.quantile=function(c,a){var e=(c.length-1)*a+1,g=Math.floor(e),h=+c[g-1];return(e-=g)?h+e*(c[g]-h):
h};x.median=function(c,a){1<arguments.length&&(c=c.map(a));c=c.filter(r);return c.length?x.quantile(c.sort(W),.5):void 0};var Sf=a(W);x.bisectLeft=Sf.left;x.bisect=x.bisectRight=Sf.right;x.bisector=function(c){return a(1===c.length?function(a,e){return W(c(a),e)}:c)};x.shuffle=function(c){for(var a=c.length,e,g;a;)g=Math.random()*a--|0,e=c[a],c[a]=c[g],c[g]=e;return c};x.permute=function(c,a){for(var e=a.length,g=Array(e);e--;)g[e]=c[a[e]];return g};x.pairs=function(c){for(var a=0,e=c.length-1,g=
c[0],h=Array(0>e?0:e);a<e;)h[a]=[g,g=c[++a]];return h};x.zip=function(){if(!(h=arguments.length))return[];for(var c=-1,a=x.min(arguments,b),e=Array(a);++c<a;)for(var g=-1,h,n=e[c]=Array(h);++g<h;)n[g]=arguments[g][c];return e};x.transpose=function(c){return x.zip.apply(x,c)};x.keys=function(c){var a=[],e;for(e in c)a.push(e);return a};x.values=function(c){var a=[],e;for(e in c)a.push(c[e]);return a};x.entries=function(c){var a=[],e;for(e in c)a.push({key:e,value:c[e]});return a};x.merge=function(c){var a=
c.length,e;e=-1;for(var g=0,h,b;++e<a;)g+=c[e].length;for(h=Array(g);0<=--a;)for(b=c[a],e=b.length;0<=--e;)h[--g]=b[e];return h};var ka=Math.abs;x.range=function(c,a,e){3>arguments.length&&(e=1,2>arguments.length&&(a=c,c=0));if(Infinity===(a-c)/e)throw Error("infinite range");var g=[],h;h=ka(e);for(var b=1;h*b%1;)b*=10;h=b;var b=-1,k;c*=h;a*=h;e*=h;if(0>e)for(;(k=c+e*++b)>a;)g.push(k/h);else for(;(k=c+e*++b)<a;)g.push(k/h);return g};x.map=function(c){var a=new B;if(c instanceof B)c.forEach(function(c,
e){a.set(c,e)});else for(var e in c)a.set(e,c[e]);return a};m(B,{has:p,get:function(c){return this[eb+c]},set:function(c,a){return this[eb+c]=a},remove:function(c){c=eb+c;return c in this&&delete this[c]},keys:f,values:function(){var c=[];this.forEach(function(a,e){c.push(e)});return c},entries:function(){var c=[];this.forEach(function(a,e){c.push({key:a,value:e})});return c},size:l,empty:v,forEach:function(c){for(var a in this)a.charCodeAt(0)===Sb&&c.call(this,a.substring(1),this[a])}});var eb="\x00",
Sb=eb.charCodeAt(0);x.nest=function(){function c(a,h,t){if(t>=g.length)return k?k.call(e,h):b?h.sort(b):h;for(var f=-1,l=h.length,q=g[t++],m,y,p=new B,w;++f<l;)(w=p.get(m=q(y=h[f])))?w.push(y):p.set(m,[y]);a?(y=a(),h=function(e,g){y.set(e,c(a,g,t))}):(y={},h=function(e,g){y[e]=c(a,g,t)});p.forEach(h);return y}function a(c,e){if(e>=g.length)return c;var b=[],n=h[e++];c.forEach(function(c,g){b.push({key:c,values:a(g,e)})});return n?b.sort(function(c,a){return n(c.key,a.key)}):b}var e={},g=[],h=[],b,
k;e.map=function(a,e){return c(e,a,0)};e.entries=function(e){return a(c(x.map,e,0),0)};e.key=function(c){g.push(c);return e};e.sortKeys=function(c){h[g.length-1]=c;return e};e.sortValues=function(c){b=c;return e};e.rollup=function(c){k=c;return e};return e};x.set=function(c){var a=new u;if(c)for(var e=0,g=c.length;e<g;++e)a.add(c[e]);return a};m(u,{has:p,add:function(c){this[eb+c]=!0;return c},remove:function(c){c=eb+c;return c in this&&delete this[c]},values:f,size:l,empty:v,forEach:function(c){for(var a in this)a.charCodeAt(0)===
Sb&&c.call(this,a.substring(1))}});x.behavior={};x.rebind=function(c,a){for(var e=1,g=arguments.length,h;++e<g;)c[h=arguments[e]]=I(c,a,a[h]);return c};var Sd="webkit ms moz Moz o O".split(" ");x.dispatch=function(){for(var c=new H,a=-1,e=arguments.length;++a<e;)c[arguments[a]]=E(c);return c};H.prototype.on=function(c,a){var e=c.indexOf("."),g="";0<=e&&(g=c.substring(e+1),c=c.substring(0,e));if(c)return 2>arguments.length?this[c].on(g):this[c].on(g,a);if(2===arguments.length){if(null==a)for(c in this)if(this.hasOwnProperty(c))this[c].on(g,
null);return this}};x.event=null;x.requote=function(c){return c.replace(Vh,"\\$&")};var Vh=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Tb={}.__proto__?function(c,a){c.__proto__=a}:function(c,a){for(var e in a)c[e]=a[e]},Mc=function(c,a){return a.querySelector(c)},Nc=function(c,a){return a.querySelectorAll(c)},Wh=Ra.matches||Ra[G(Ra,"matchesSelector")],Td=function(c,a){return Wh.call(c,a)};"function"===typeof Sizzle&&(Mc=function(c,a){return Sizzle(c,a)[0]||null},Nc=Sizzle,Td=Sizzle.matchesSelector);x.selection=
function(){return Tf};var pa=x.selection.prototype=[];pa.select=function(c){var a=[],e,g,h,b;c=Q(c);for(var k=-1,z=this.length;++k<z;){a.push(e=[]);e.parentNode=(h=this[k]).parentNode;for(var f=-1,l=h.length;++f<l;)(b=h[f])?(e.push(g=c.call(b,b.__data__,f,k)),g&&"__data__"in b&&(g.__data__=b.__data__)):e.push(null)}return N(a)};pa.selectAll=function(c){var a=[],e,g;c=J(c);for(var h=-1,b=this.length;++h<b;)for(var k=this[h],z=-1,f=k.length;++z<f;)if(g=k[z])a.push(e=Xa(c.call(g,g.__data__,z,h))),e.parentNode=
g;return N(a)};var Jd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};x.ns={prefix:Jd,qualify:function(c){var a=c.indexOf(":"),e=c;0<=a&&(e=c.substring(0,a),c=c.substring(a+1));return Jd.hasOwnProperty(e)?{space:Jd[e],local:c}:c}};pa.attr=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node();c=x.ns.qualify(c);return c.local?e.getAttributeNS(c.space,
c.local):e.getAttribute(c)}for(a in c)this.each(R(a,c[a]));return this}return this.each(R(c,a))};pa.classed=function(c,a){if(2>arguments.length){if("string"===typeof c){var e=this.node(),g=(c=(c+"").trim().split(/^|\s+/)).length,h=-1;if(a=e.classList)for(;++h<g;){if(!a.contains(c[h]))return!1}else for(a=e.getAttribute("class");++h<g;)if(!P(c[h]).test(a))return!1;return!0}for(a in c)this.each(O(a,c[a]));return this}return this.each(O(c,a))};pa.style=function(c,a,e){var g=arguments.length;if(3>g){if("string"!==
typeof c){2>g&&(a="");for(e in c)this.each(F(e,c[e],a));return this}if(2>g)return ya.getComputedStyle(this.node(),null).getPropertyValue(c);e=""}return this.each(F(c,a,e))};pa.property=function(c,a){if(2>arguments.length){if("string"===typeof c)return this.node()[c];for(a in c)this.each(A(a,c[a]));return this}return this.each(A(c,a))};pa.text=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.textContent=null==a?"":a}:null==c?function(){this.textContent=
""}:function(){this.textContent=c}):this.node().textContent};pa.html=function(c){return arguments.length?this.each("function"===typeof c?function(){var a=c.apply(this,arguments);this.innerHTML=null==a?"":a}:null==c?function(){this.innerHTML=""}:function(){this.innerHTML=c}):this.node().innerHTML};pa.append=function(c){c=q(c);return this.select(function(){return this.appendChild(c.apply(this,arguments))})};pa.insert=function(c,a){c=q(c);a=Q(a);return this.select(function(){return this.insertBefore(c.apply(this,
arguments),a.apply(this,arguments)||null)})};pa.remove=function(){return this.each(function(){var c=this.parentNode;c&&c.removeChild(this)})};pa.data=function(c,a){function e(c,e){var g,h=c.length,b=e.length,n=Math.min(h,b),k=Array(b),q=Array(b),K=Array(h),m,y;if(a){var n=new B,p=new B,w=[],u;for(g=-1;++g<h;)u=a.call(m=c[g],m.__data__,g),n.has(u)?K[g]=m:n.set(u,m),w.push(u);for(g=-1;++g<b;)u=a.call(e,y=e[g],g),(m=n.get(u))?(k[g]=m,m.__data__=y):p.has(u)||(q[g]={__data__:y}),p.set(u,y),n.remove(u);
for(g=-1;++g<h;)n.has(w[g])&&(K[g]=c[g])}else{for(g=-1;++g<n;)m=c[g],y=e[g],m?(m.__data__=y,k[g]=m):q[g]={__data__:y};for(;g<b;++g)q[g]={__data__:e[g]};for(;g<h;++g)K[g]=c[g]}q.update=k;q.parentNode=k.parentNode=K.parentNode=c.parentNode;z.push(q);f.push(k);l.push(K)}var g=-1,h=this.length,b,k;if(!arguments.length){for(c=Array(h=(b=this[0]).length);++g<h;)if(k=b[g])c[g]=k.__data__;return c}var z=L([]),f=N([]),l=N([]);if("function"===typeof c)for(;++g<h;)e(b=this[g],c.call(b,b.parentNode.__data__,
g));else for(;++g<h;)e(b=this[g],c);f.enter=function(){return z};f.exit=function(){return l};return f};pa.datum=function(c){return arguments.length?this.property("__data__",c):this.property("__data__")};pa.filter=function(c){var a=[],e,g,h;"function"!==typeof c&&(c=S(c));for(var b=0,k=this.length;b<k;b++){a.push(e=[]);e.parentNode=(g=this[b]).parentNode;for(var z=0,f=g.length;z<f;z++)(h=g[z])&&c.call(h,h.__data__,z,b)&&e.push(h)}return N(a)};pa.order=function(){for(var c=-1,a=this.length;++c<a;)for(var e=
this[c],g=e.length-1,h=e[g],b;0<=--g;)if(b=e[g])h&&h!==b.nextSibling&&h.parentNode.insertBefore(b,h),h=b;return this};pa.sort=function(c){c=X.apply(this,arguments);for(var a=-1,e=this.length;++a<e;)this[a].sort(c);return this.order()};pa.each=function(c){return U(this,function(a,e,g){c.call(a,a.__data__,e,g)})};pa.call=function(c){var a=Xa(arguments);c.apply(a[0]=this,a);return this};pa.empty=function(){return!this.node()};pa.node=function(){for(var c=0,a=this.length;c<a;c++)for(var e=this[c],g=0,
b=e.length;g<b;g++){var n=e[g];if(n)return n}return null};pa.size=function(){var c=0;this.each(function(){++c});return c};var Qa=[];x.selection.enter=L;x.selection.enter.prototype=Qa;Qa.append=pa.append;Qa.empty=pa.empty;Qa.node=pa.node;Qa.call=pa.call;Qa.size=pa.size;Qa.select=function(c){for(var a=[],e,g,b,n,k,z=-1,f=this.length;++z<f;){b=(n=this[z]).update;a.push(e=[]);e.parentNode=n.parentNode;for(var l=-1,q=n.length;++l<q;)(k=n[l])?(e.push(b[l]=g=c.call(n.parentNode,k.__data__,l,z)),g.__data__=
k.__data__):e.push(null)}return N(a)};Qa.insert=function(c,a){2>arguments.length&&(a=Z(this));return pa.insert.call(this,c,a)};pa.transition=function(){for(var c=qb||++Uf,a=[],e,g,b=yc||{time:Date.now(),ease:$g,delay:0,duration:250},n=-1,k=this.length;++n<k;){a.push(e=[]);for(var z=this[n],f=-1,l=z.length;++f<l;)(g=z[f])&&vc(g,f,c,b),e.push(g)}return Rb(a,c)};pa.interrupt=function(){return this.each(V)};x.select=function(c){c=["string"===typeof c?Mc(c,Ma):c];c.parentNode=Ra;return N([c])};x.selectAll=
function(c){c=Xa("string"===typeof c?Nc(c,Ma):c);c.parentNode=Ra;return N([c])};var Tf=x.select(Ra);pa.on=function(c,a,e){var g=arguments.length;if(3>g){if("string"!==typeof c){2>g&&(a=!1);for(e in c)this.each(k(e,c[e],a));return this}if(2>g)return(g=this.node()["__on"+c])&&g._;e=!1}return this.each(k(c,a,e))};var Oc=x.map({mouseenter:"mouseover",mouseleave:"mouseout"});Oc.forEach(function(c){"on"+c in Ma&&Oc.remove(c)});var Eb="onselectstart"in Ma?null:G(Ra.style,"userSelect"),kg=0;x.mouse=function(c){return ma(c,
T())};var Pc=/WebKit/.test(ya.navigator.userAgent)?-1:0;x.touches=function(c,a){2>arguments.length&&(a=T().touches);return a?Xa(a).map(function(a){var g=ma(c,a);g.identifier=a.identifier;return g}):[]};x.behavior.drag=function(){function c(){this.on("mousedown.drag",b).on("touchstart.drag",n)}function a(c,b,h,t,n){return function(){var a=x.event.target,k=this.parentNode,f=e.of(this,arguments),l=0,q=c(),m=".drag"+(null==q?"":"-"+q),y,p=x.select(h()).on(t+m,function(){var c=b(k,q),a,e;c&&(a=c[0]-u[0],
e=c[1]-u[1],l|=a|e,u=c,f({type:"drag",x:c[0]+y[0],y:c[1]+y[1],dx:a,dy:e}))}).on(n+m,function(){b(k,q)&&(p.on(t+m,null).on(n+m,null),w(l&&x.event.target===a),f({type:"dragend"}))}),w=ga(),u=b(k,q);g?(y=g.apply(this,arguments),y=[y.x-u[0],y.y-u[1]]):y=[0,0];f({type:"dragstart"})}}var e=C(c,"drag","dragstart","dragend"),g=null,b=a(D,x.mouse,ha,"mousemove","mouseup"),n=a(Y,x.touch,ea,"touchmove","touchend");c.origin=function(a){if(!arguments.length)return g;g=a;return c};return x.rebind(c,e,"on")};var ja=
Math.PI,Ea=2*ja,va=ja/2,ia=ja/180,ra=180/ja,zc=Math.SQRT2;x.interpolateZoom=function(c,a){function e(c){var a=c*w;if(p){c=fa(y);var e,t=zc*a+y;e=((t=Math.exp(2*t))-1)/(t+1);var k=y,t=((k=Math.exp(k))-1/k)/2;e=n/(2*q)*(c*e-t);return[g+e*z,b+e*f,n*c/fa(zc*a+y)]}return[g+c*z,b+c*f,n*Math.exp(zc*a)]}var g=c[0],b=c[1],n=c[2],k=a[2],z=a[0]-g,f=a[1]-b,l=z*z+f*f,q=Math.sqrt(l),m=(k*k-n*n+4*l)/(4*n*q),l=(k*k-n*n-4*l)/(4*k*q),y=Math.log(Math.sqrt(m*m+1)-m),p=Math.log(Math.sqrt(l*l+1)-l)-y,w=(p||Math.log(k/
n))/zc;e.duration=1E3*w;return e};x.behavior.zoom=function(){function c(c){c.on("mousedown.zoom",f).on(Xh+".zoom",q).on("mousemove.zoom",m).on("dblclick.zoom",y).on("touchstart.zoom",l)}function a(c){return[(c[0]-p.x)/p.k,(c[1]-p.y)/p.k]}function e(c){p.k=Math.max(A[0],Math.min(A[1],c))}function g(c,a){a=[a[0]*p.k+p.x,a[1]*p.k+p.y];p.x+=c[0]-a[0];p.y+=c[1]-a[1]}function b(){S&&S.domain(B.range().map(function(c){return(c-p.x)/p.k}).map(B.invert));E&&E.domain(J.range().map(function(c){return(c-p.y)/
p.k}).map(J.invert))}function n(c){c({type:"zoomstart"})}function k(c){b();c({type:"zoom",scale:p.k,translate:[p.x,p.y]})}function z(c){c({type:"zoomend"})}function f(){var c=this,e=x.event.target,b=v.of(c,arguments),h=0,l=x.select(ya).on("mousemove.zoom",function(){h=1;g(x.mouse(c),q);k(b)}).on("mouseup.zoom",function(){l.on("mousemove.zoom",ya===c?m:null).on("mouseup.zoom",null);p(h&&x.event.target===e);z(b)}),q=a(x.mouse(c)),p=ga();V.call(c);n(b)}function l(){function c(){var e=x.touches(m);F=
p.k;e.forEach(function(c){c.identifier in w&&(w[c.identifier]=a(c))});return e}function b(){var a=x.event.target;x.select(a).on(r,h).on(C,q);B.push(a);for(var a=x.event.changedTouches,t=0,n=a.length;t<n;++t)w[a[t].identifier]=null;n=c();t=Date.now();1===n.length?(500>t-L&&(a=n[0],n=w[a.identifier],e(2*p.k),g(a,n),M(),k(y)),L=t):1<n.length&&(a=n[0],n=n[1],t=a[0]-n[0],a=a[1]-n[1],u=t*t+a*a)}function h(){for(var c=x.touches(m),a,b,t,n,z=0,f=c.length;z<f;++z,n=null)if(t=c[z],n=w[t.identifier]){if(b)break;
a=t;b=n}if(n){var l=(l=t[0]-a[0])*l+(l=t[1]-a[1])*l,c=u&&Math.sqrt(l/u);a=[(a[0]+t[0])/2,(a[1]+t[1])/2];b=[(b[0]+n[0])/2,(b[1]+n[1])/2];e(c*F)}L=null;g(a,b);k(y)}function q(){if(x.event.touches.length){for(var a=x.event.changedTouches,e=0,g=a.length;e<g;++e)delete w[a[e].identifier];for(var b in w)return void c()}x.selectAll(B).on(A,null);S.on("mousedown.zoom",f).on("touchstart.zoom",l);J();z(y)}var m=this,y=v.of(m,arguments),w={},u=0,F,A=".zoom-"+x.event.changedTouches[0].identifier,r="touchmove"+
A,C="touchend"+A,B=[],S=x.select(m).on("mousedown.zoom",null).on("touchstart.zoom",b),J=ga();V.call(m);b();n(y)}function q(){var c=v.of(this,arguments);r?clearTimeout(r):(V.call(this),n(c));r=setTimeout(function(){r=null;z(c)},50);M();var b=u||x.mouse(this);w||(w=a(b));e(Math.pow(2,.002*Ac())*p.k);g(b,w);k(c)}function m(){w=null}function y(){var c=v.of(this,arguments),b=x.mouse(this),h=a(b),f=Math.log(p.k)/Math.LN2;n(c);e(Math.pow(2,x.event.shiftKey?Math.ceil(f)-1:Math.floor(f)+1));g(b,h);k(c);z(c)}
var p={x:0,y:0,k:1},w,u,F=[960,500],A=Vf,r,L,v=C(c,"zoomstart","zoom","zoomend"),B,S,J,E;c.event=function(c){c.each(function(){var c=v.of(this,arguments),a=p;qb?x.select(this).transition().each("start.zoom",function(){p=this.__chart__||{x:0,y:0,k:1};n(c)}).tween("zoom:zoom",function(){var e=F[0],g=e/2,b=F[1]/2,h=x.interpolateZoom([(g-p.x)/p.k,(b-p.y)/p.k,e/p.k],[(g-a.x)/a.k,(b-a.y)/a.k,e/a.k]);return function(a){a=h(a);var t=e/a[2];this.__chart__=p={x:g-a[0]*t,y:b-a[1]*t,k:t};k(c)}}).each("end.zoom",
function(){z(c)}):(this.__chart__=p,n(c),k(c),z(c))})};c.translate=function(a){if(!arguments.length)return[p.x,p.y];p={x:+a[0],y:+a[1],k:p.k};b();return c};c.scale=function(a){if(!arguments.length)return p.k;p={x:p.x,y:p.y,k:+a};b();return c};c.scaleExtent=function(a){if(!arguments.length)return A;A=null==a?Vf:[+a[0],+a[1]];return c};c.center=function(a){if(!arguments.length)return u;u=a&&[+a[0],+a[1]];return c};c.size=function(a){if(!arguments.length)return F;F=a&&[+a[0],+a[1]];return c};c.x=function(a){if(!arguments.length)return S;
S=a;B=a.copy();p={x:0,y:0,k:1};return c};c.y=function(a){if(!arguments.length)return E;E=a;J=a.copy();p={x:0,y:0,k:1};return c};return x.rebind(c,v,"on")};var Vf=[0,Infinity],Ac,Xh="onwheel"in Ma?(Ac=function(){return-x.event.deltaY*(x.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Ma?(Ac=function(){return x.event.wheelDelta},"mousewheel"):(Ac=function(){return-x.event.detail},"MozMousePixelScroll");x.color=oa;oa.prototype.toString=function(){return this.rgb()+""};x.hsl=za;var Kd=za.prototype=
new oa;Kd.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);return new za(this.h,this.s,this.l/c)};Kd.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new za(this.h,this.s,c*this.l)};Kd.rgb=function(){return rb(this.h,this.s,this.l)};x.hcl=Ia;var Ld=Ia.prototype=new oa;Ld.brighter=function(c){return new Ia(this.h,this.c,Math.min(100,this.l+Bc*(arguments.length?c:1)))};Ld.darker=function(c){return new Ia(this.h,this.c,Math.max(0,this.l-Bc*(arguments.length?c:1)))};Ld.rgb=function(){return Qc(this.h,
this.c,this.l).rgb()};x.lab=Ja;var Bc=18,Zd=.95047,$d=1,ae=1.08883,Md=Ja.prototype=new oa;Md.brighter=function(c){return new Ja(Math.min(100,this.l+Bc*(arguments.length?c:1)),this.a,this.b)};Md.darker=function(c){return new Ja(Math.max(0,this.l-Bc*(arguments.length?c:1)),this.a,this.b)};Md.rgb=function(){return Yd(this.l,this.a,this.b)};x.rgb=Ba;var Cc=Ba.prototype=new oa;Cc.brighter=function(c){c=Math.pow(.7,arguments.length?c:1);var a=this.r,e=this.g,g=this.b;if(!a&&!e&&!g)return new Ba(30,30,30);
a&&30>a&&(a=30);e&&30>e&&(e=30);g&&30>g&&(g=30);return new Ba(Math.min(255,a/c),Math.min(255,e/c),Math.min(255,g/c))};Cc.darker=function(c){c=Math.pow(.7,arguments.length?c:1);return new Ba(c*this.r,c*this.g,c*this.b)};Cc.hsl=function(){return Vd(this.r,this.g,this.b)};Cc.toString=function(){return"#"+sb(this.r)+sb(this.g)+sb(this.b)};var Vb=x.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,
blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,
darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,
lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,
mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,
red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Vb.forEach(function(c,a){Vb.set(c,
new Ba(a>>16,a>>8&255,a&255))});x.functor=qa;x.xhr=Wc(ua);x.dsv=function(c,a){function e(c,e,n){3>arguments.length&&(n=e,e=null);var k=Wb(c,a,null==e?g:b(e),n);k.row=function(c){return arguments.length?k.response(null==(e=c)?g:b(c)):e};return k}function g(c){return e.parse(c.responseText)}function b(c){return function(a){return e.parse(a.responseText,c)}}function n(a){return a.map(k).join(c)}function k(c){return z.test(c)?'"'+c.replace(/\"/g,'""')+'"':c}var z=new RegExp('["'+c+"\n]"),f=c.charCodeAt(0);
e.parse=function(c,a){var g;return e.parseRows(c,function(c,e){if(g)return g(c,e-1);var b=new Function("d","return {"+c.map(function(c,a){return JSON.stringify(c)+": d["+a+"]"}).join(",")+"}");g=a?function(c,e){return a(b(c),e)}:b})};e.parseRows=function(c,a){function e(){if(n>=t)return b;if(l)return l=!1,g;var a=n;if(34===c.charCodeAt(a)){for(var h=a;h++<t;)if(34===c.charCodeAt(h)){if(34!==c.charCodeAt(h+1))break;++h}n=h+2;var k=c.charCodeAt(h+1);13===k?(l=!0,10===c.charCodeAt(h+2)&&++n):10===k&&
(l=!0);return c.substring(a+1,h).replace(/""/g,'"')}for(;n<t;){k=c.charCodeAt(n++);h=1;if(10===k)l=!0;else if(13===k)l=!0,10===c.charCodeAt(n)&&(++n,++h);else if(k!==f)continue;return c.substring(a,n-h)}return c.substring(a)}for(var g={},b={},h=[],t=c.length,n=0,k=0,z,l;(z=e())!==b;){for(var q=[];z!==g&&z!==b;)q.push(z),z=e();a&&!(q=a(q,k++))||h.push(q)}return h};e.format=function(a){if(Array.isArray(a[0]))return e.formatRows(a);var g=new u,b=[];a.forEach(function(c){for(var a in c)g.has(a)||b.push(g.add(a))});
return[b.map(k).join(c)].concat(a.map(function(a){return b.map(function(c){return k(a[c])}).join(c)})).join("\n")};e.formatRows=function(c){return c.map(n).join("\n")};return e};x.csv=x.dsv(",","text/csv");x.tsv=x.dsv("\t","text/tab-separated-values");x.touch=function(c,a,e){3>arguments.length&&(e=a,a=T().changedTouches);if(a)for(var g=0,b=a.length,n;g<b;++g)if((n=a[g]).identifier===e)return ma(c,n)};var Zb,$b,Yb,Xb,Sa,de=ya[G(ya,"requestAnimationFrame")]||function(c){setTimeout(c,17)};x.timer=function(c,
a,e){var g=arguments.length;2>g&&(a=0);3>g&&(e=Date.now());g={c:c,t:e+a,f:!1,n:null};$b?$b.n=g:Zb=g;$b=g;Yb||(Xb=clearTimeout(Xb),Yb=1,de(Xc))};x.timer.flush=function(){be();ce()};x.round=function(c,a){return a?Math.round(c*(a=Math.pow(10,a)))/a:Math.round(c)};var Yh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(c,a){var e=Math.pow(10,3*ka(8-a));return{scale:8<a?function(c){return c/e}:function(c){return c*e},symbol:c}});x.formatPrefix=function(c,a){var e=0;c&&(0>c&&(c*=-1),a&&(c=
x.round(c,Yc(c,a))),e=1+Math.floor(1E-12+Math.log(c)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3))));return Yh[8+e/3]};var ee=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ng=x.map({b:function(c){return c.toString(2)},c:function(c){return String.fromCharCode(c)},o:function(c){return c.toString(8)},x:function(c){return c.toString(16)},X:function(c){return c.toString(16).toUpperCase()},g:function(c,a){return c.toPrecision(a)},e:function(c,a){return c.toExponential(a)},
f:function(c,a){return c.toFixed(a)},r:function(c,a){return(c=x.round(c,Yc(c,a))).toFixed(Math.max(0,Math.min(20,Yc(c*(1+1E-15),a))))}}),aa=x.time={},xa=Date;Ta.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},
getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Wa.setUTCDate.apply(this._,arguments)},setDay:function(){Wa.setUTCDay.apply(this._,arguments)},setFullYear:function(){Wa.setUTCFullYear.apply(this._,arguments)},setHours:function(){Wa.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Wa.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Wa.setUTCMinutes.apply(this._,
arguments)},setMonth:function(){Wa.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Wa.setUTCSeconds.apply(this._,arguments)},setTime:function(){Wa.setTime.apply(this._,arguments)}};var Wa=Date.prototype;aa.year=gb(function(c){c=aa.day(c);c.setMonth(0,1);return c},function(c,a){c.setFullYear(c.getFullYear()+a)},function(c){return c.getFullYear()});aa.years=aa.year.range;aa.years.utc=aa.year.utc.range;aa.day=gb(function(c){var a=new xa(2E3,0);a.setFullYear(c.getFullYear(),c.getMonth(),c.getDate());
return a},function(c,a){c.setDate(c.getDate()+a)},function(c){return c.getDate()-1});aa.days=aa.day.range;aa.days.utc=aa.day.utc.range;aa.dayOfYear=function(c){var a=aa.year(c);return Math.floor((c-a-6E4*(c.getTimezoneOffset()-a.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(c,a){a=7-a;var e=aa[c]=gb(function(c){(c=aa.day(c)).setDate(c.getDate()-(c.getDay()+a)%7);return c},function(c,a){c.setDate(c.getDate()+7*Math.floor(a))},function(c){var e=
aa.year(c).getDay();return Math.floor((aa.dayOfYear(c)+(e+a)%7)/7)-(e!==a)});aa[c+"s"]=e.range;aa[c+"s"].utc=e.utc.range;aa[c+"OfYear"]=function(c){var e=aa.year(c).getDay();return Math.floor((aa.dayOfYear(c)+(e+a)%7)/7)}});aa.week=aa.sunday;aa.weeks=aa.sunday.range;aa.weeks.utc=aa.sunday.utc.range;aa.weekOfYear=aa.sundayOfYear;var fe={"-":"",_:" ",0:"0"},sa=/^\s*\d+/,ie=/^%/;x.locale=function(c){return{numberFormat:mg(c),timeFormat:pg(c)}};var Wf=x.locale({decimal:".",thousands:",",grouping:[3],
currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});x.format=Wf.numberFormat;x.geo={};Zc.prototype={s:0,t:0,add:function(c){je(c,this.t,Dc);je(Dc.s,this.s,
this);this.s?this.t+=Dc.t:this.s=Dc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Dc=new Zc;x.geo.stream=function(c,a){if(c&&Xf.hasOwnProperty(c.type))Xf[c.type](c,a);else dc(c,a)};var Xf={Feature:function(c,a){dc(c.geometry,a)},FeatureCollection:function(c,a){for(var e=c.features,g=-1,b=e.length;++g<b;)dc(e[g].geometry,a)}},ke={Sphere:function(c,a){a.sphere()},Point:function(c,a){c=c.coordinates;a.point(c[0],c[1],c[2])},MultiPoint:function(c,a){for(var e=c.coordinates,
g=-1,b=e.length;++g<b;)c=e[g],a.point(c[0],c[1],c[2])},LineString:function(c,a){$c(c.coordinates,a,0)},MultiLineString:function(c,a){for(var e=c.coordinates,g=-1,b=e.length;++g<b;)$c(e[g],a,0)},Polygon:function(c,a){le(c.coordinates,a)},MultiPolygon:function(c,a){for(var e=c.coordinates,g=-1,b=e.length;++g<b;)le(e[g],a)},GeometryCollection:function(c,a){for(var e=c.geometries,g=-1,b=e.length;++g<b;)dc(e[g],a)}};x.geo.area=function(a){Ec=0;x.geo.stream(a,Da);return Ec};var Ec,hb=new Zc,Da={sphere:function(){Ec+=
4*ja},point:D,lineStart:D,lineEnd:D,polygonStart:function(){hb.reset();Da.lineStart=Eg},polygonEnd:function(){var a=2*hb;Ec+=0>a?4*ja+a:a;Da.lineStart=Da.lineEnd=Da.point=D}};x.geo.bounds=function(){function a(c,e){C.push(L=[q=c,y=c]);e<m&&(m=e);e>p&&(p=e)}function b(e,g){var h=ib([e*ia,g*ia]);if(A){var n=tb(A,h),n=tb([n[1],-n[0],0],n);gc(n);var n=hc(n),t=e-w,k=0<t?1:-1,f=n[0]*ra*k,t=180<ka(t);t^(k*w<f&&f<k*e)?(n=n[1]*ra,n>p&&(p=n)):(f=(f+360)%360-180,t^(k*w<f&&f<k*e))?(n=-n[1]*ra,n<m&&(m=n)):(g<
m&&(m=g),g>p&&(p=g));t?e<w?z(q,e)>z(q,y)&&(y=e):z(e,y)>z(q,y)&&(q=e):y>=q?(e<q&&(q=e),e>y&&(y=e)):e>w?z(q,e)>z(q,y)&&(y=e):z(e,y)>z(q,y)&&(q=e)}else a(e,g);A=h;w=e}function e(){v.point=b}function g(){L[0]=q;L[1]=y;v.point=a;A=null}function h(a,c){if(A){var e=a-w;r+=180<ka(e)?e+(0<e?360:-360):e}else u=a,F=c;Da.point(a,c);b(a,c)}function n(){Da.lineStart()}function k(){h(u,F);Da.lineEnd();1E-6<ka(r)&&(q=-(y=180));L[0]=q;L[1]=y;A=null}function z(a,c){return 0>(c-=a)?c+360:c}function f(a,c){return a[0]-
c[0]}function l(a,c){return c[0]<=c[1]?c[0]<=a&&a<=c[1]:a<c[0]||c[1]<a}var q,m,y,p,w,u,F,A,r,C,L,v={point:a,lineStart:e,lineEnd:g,polygonStart:function(){v.point=h;v.lineStart=n;v.lineEnd=k;r=0;Da.polygonStart()},polygonEnd:function(){Da.polygonEnd();v.point=a;v.lineStart=e;v.lineEnd=g;0>hb?(q=-(y=180),m=-(p=90)):1E-6<r?p=90:-1E-6>r&&(m=-90);L[0]=q;L[1]=y}};return function(a){p=y=-(q=m=Infinity);C=[];x.geo.stream(a,v);if(a=C.length){C.sort(f);for(var c=1,e=C[0],g,b=[e];c<a;++c)g=C[c],l(g[0],e)||l(g[1],
e)?(z(e[0],g[1])>z(e[0],e[1])&&(e[1]=g[1]),z(g[0],e[1])>z(e[0],e[1])&&(e[0]=g[0])):b.push(e=g);var h=-Infinity,n;a=b.length-1;c=0;for(e=b[a];c<=a;e=g,++c)g=b[c],(n=z(e[1],g[0]))>h&&(h=n,q=g[0],y=e[1])}C=L=null;return Infinity===q||Infinity===m?[[NaN,NaN],[NaN,NaN]]:[[q,m],[y,p]]}}();x.geo.centroid=function(a){Gb=jc=jb=kb=Ua=Ya=Za=Oa=ub=vb=$a=0;x.geo.stream(a,Ka);a=ub;var b=vb,e=$a,g=a*a+b*b+e*e;return 1E-12>g&&(a=Ya,b=Za,e=Oa,1E-6>jc&&(a=jb,b=kb,e=Ua),g=a*a+b*b+e*e,1E-12>g)?[NaN,NaN]:[Math.atan2(b,
a)*ra,na(e/Math.sqrt(g))*ra]};var Gb,jc,jb,kb,Ua,Ya,Za,Oa,ub,vb,$a,Ka={sphere:D,point:bd,lineStart:me,lineEnd:ne,polygonStart:function(){Ka.lineStart=Fg},polygonEnd:function(){Ka.lineStart=me}},De=qe(wb,function(a){var b=NaN,e=NaN,g=NaN,h;return{lineStart:function(){a.lineStart();h=1},point:function(n,k){var f=0<n?ja:-ja,l=ka(n-b);if(1E-6>ka(l-ja))a.point(b,e=0<(e+k)/2?va:-va),a.point(g,e),a.lineEnd(),a.lineStart(),a.point(f,e),a.point(n,e),h=0;else if(g!==f&&l>=ja){1E-6>ka(b-g)&&(b-=1E-6*g);1E-6>
ka(n-f)&&(n-=1E-6*f);var l=b,q=e,m=n,y,p,w=Math.sin(l-m);e=1E-6<ka(w)?Math.atan((Math.sin(q)*(p=Math.cos(k))*Math.sin(m)-Math.sin(k)*(y=Math.cos(q))*Math.sin(l))/(y*p*w)):(q+k)/2;a.point(g,e);a.lineEnd();a.lineStart();a.point(f,e);h=0}a.point(b=n,e=k);g=f},lineEnd:function(){a.lineEnd();b=e=NaN},clean:function(){return 2-h}}},function(a,b,e,g){null==a?(e*=va,g.point(-ja,e),g.point(0,e),g.point(ja,e),g.point(ja,0),g.point(ja,-e),g.point(0,-e),g.point(-ja,-e),g.point(-ja,0),g.point(-ja,e)):1E-6<ka(a[0]-
b[0])?(a=a[0]<b[0]?ja:-ja,e=e*a/2,g.point(-a,e),g.point(0,e),g.point(a,e)):g.point(b[0],b[1])},[-ja,-ja/2]);x.geo.clipExtent=function(){var a,b,e,g,h,n,k={stream:function(a){h&&(h.valid=!1);h=n(a);h.valid=!0;return h},extent:function(f){if(!arguments.length)return[[a,b],[e,g]];n=te(a=+f[0][0],b=+f[0][1],e=+f[1][0],g=+f[1][1]);h&&(h.valid=!1,h=null);return k}};return k.extent([[0,0],[960,500]])};(x.geo.conicEqualArea=function(){return dd(ve)}).raw=ve;x.geo.albers=function(){return x.geo.conicEqualArea().rotate([96,
0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};x.geo.albersUsa=function(){function a(c){var e=c[0];c=c[1];h=null;(k(e,c),h)||(f(e,c),h)||l(e,c);return h}var b=x.geo.albers(),e=x.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g=x.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),h,n={point:function(a,c){h=[a,c]}},k,f,l;a.invert=function(a){var c=b.scale(),h=b.translate(),n=(a[0]-h[0])/c,c=(a[1]-h[1])/c;return(.12<=c&&.234>c&&-.425<=n&&-.214>
n?e:.166<=c&&.234>c&&-.214<=n&&-.115>n?g:b).invert(a)};a.stream=function(a){var c=b.stream(a),h=e.stream(a),n=g.stream(a);return{point:function(a,e){c.point(a,e);h.point(a,e);n.point(a,e)},sphere:function(){c.sphere();h.sphere();n.sphere()},lineStart:function(){c.lineStart();h.lineStart();n.lineStart()},lineEnd:function(){c.lineEnd();h.lineEnd();n.lineEnd()},polygonStart:function(){c.polygonStart();h.polygonStart();n.polygonStart()},polygonEnd:function(){c.polygonEnd();h.polygonEnd();n.polygonEnd()}}};
a.precision=function(h){if(!arguments.length)return b.precision();b.precision(h);e.precision(h);g.precision(h);return a};a.scale=function(h){if(!arguments.length)return b.scale();b.scale(h);e.scale(.35*h);g.scale(h);return a.translate(b.translate())};a.translate=function(h){if(!arguments.length)return b.translate();var q=b.scale(),m=+h[0],y=+h[1];k=b.translate(h).clipExtent([[m-.455*q,y-.238*q],[m+.455*q,y+.238*q]]).stream(n).point;f=e.translate([m-.307*q,y+.201*q]).clipExtent([[m-.425*q+1E-6,y+.12*
q+1E-6],[m-.214*q-1E-6,y+.234*q-1E-6]]).stream(n).point;l=g.translate([m-.205*q,y+.212*q]).clipExtent([[m-.214*q+1E-6,y+.166*q+1E-6],[m-.115*q-1E-6,y+.234*q-1E-6]]).stream(n).point;return a};return a.scale(1070)};var Nd,fd,ab={point:D,lineStart:D,lineEnd:D,polygonStart:function(){fd=0;ab.lineStart=Jg},polygonEnd:function(){ab.lineStart=ab.lineEnd=ab.point=D;Nd+=ka(fd/2)}},Fc,Gc,Hc,Ic,Zh={point:function(a,b){a<Fc&&(Fc=a);a>Hc&&(Hc=a);b<Gc&&(Gc=b);b>Ic&&(Ic=b)},lineStart:D,lineEnd:D,polygonStart:D,
polygonEnd:D},La={point:lb,lineStart:xe,lineEnd:ye,polygonStart:function(){La.lineStart=Lg},polygonEnd:function(){La.point=lb;La.lineStart=xe;La.lineEnd=ye}};x.geo.path=function(){function a(c){c&&("function"===typeof e&&k.pointRadius(+e.apply(this,arguments)),f&&f.valid||(f=n(k)),x.geo.stream(c,f));return k.result()}function b(){f=null;return a}var e=4.5,g,h,n,k,f;a.area=function(a){Nd=0;x.geo.stream(a,n(ab));return Nd};a.centroid=function(a){jb=kb=Ua=Ya=Za=Oa=ub=vb=$a=0;x.geo.stream(a,n(La));return $a?
[ub/$a,vb/$a]:Oa?[Ya/Oa,Za/Oa]:Ua?[jb/Ua,kb/Ua]:[NaN,NaN]};a.bounds=function(a){Hc=Ic=-(Fc=Gc=Infinity);x.geo.stream(a,n(Zh));return[[Fc,Gc],[Hc,Ic]]};a.projection=function(a){if(!arguments.length)return g;n=(g=a)?a.stream||Ng(a):ua;return b()};a.context=function(a){if(!arguments.length)return h;k=null==(h=a)?new Kg:new Mg(a);"function"!==typeof e&&k.pointRadius(e);return b()};a.pointRadius=function(g){if(!arguments.length)return e;e="function"===typeof g?g:(k.pointRadius(+g),+g);return a};return a.projection(x.geo.albersUsa()).context(null)};
x.geo.transform=function(a){return{stream:function(b){b=new Ce(b);for(var e in a)b[e]=a[e];return b}}};Ce.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};x.geo.projection=bb;x.geo.projectionMutator=ed;(x.geo.equirectangular=function(){return bb(Hb)}).raw=Hb.invert=
Hb;x.geo.rotation=function(a){function b(e){e=a(e[0]*ia,e[1]*ia);return e[0]*=ra,e[1]*=ra,e}a=gd(a[0]%360*ia,a[1]*ia,2<a.length?a[2]*ia:0);b.invert=function(e){e=a.invert(e[0]*ia,e[1]*ia);return e[0]*=ra,e[1]*=ra,e};return b};Ee.invert=Hb;x.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,e=gd(-c[0]*ia,-c[1]*ia,0).invert,g=[];h(null,null,1,{point:function(a,c){g.push(a=e(a,c));a[0]*=ra;a[1]*=ra}});return{type:"Polygon",coordinates:[g]}}var b=[0,0],e,g=6,h;a.origin=
function(e){if(!arguments.length)return b;b=e;return a};a.angle=function(b){if(!arguments.length)return e;h=cd((e=+b)*ia,g*ia);return a};a.precision=function(b){if(!arguments.length)return g;h=cd(e*ia,(g=+b)*ia);return a};return a.angle(90)};x.geo.distance=function(a,b){var e=(b[0]-a[0])*ia,g=a[1]*ia,h=b[1]*ia,n=Math.cos(e),k=Math.sin(g),g=Math.cos(g),f=Math.sin(h),h=Math.cos(h),l;return Math.atan2(Math.sqrt((l=h*Math.sin(e))*l+(l=g*f-k*h*n)*l),k*f+g*h*n)};x.geo.graticule=function(){function a(){return{type:"MultiLineString",
coordinates:b()}}function b(){return x.range(Math.ceil(n/p)*p,h,p).map(A).concat(x.range(Math.ceil(q/w)*w,l,w).map(C)).concat(x.range(Math.ceil(g/m)*m,e,m).filter(function(a){return 1E-6<ka(a%p)}).map(u)).concat(x.range(Math.ceil(f/y)*y,k,y).filter(function(a){return 1E-6<ka(a%w)}).map(F))}var e,g,h,n,k,f,l,q,m=10,y=m,p=90,w=360,u,F,A,C,r=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[A(n).concat(C(l).slice(1),
A(h).reverse().slice(1),C(q).reverse().slice(1))]}};a.extent=function(e){return arguments.length?a.majorExtent(e).minorExtent(e):a.minorExtent()};a.majorExtent=function(e){if(!arguments.length)return[[n,q],[h,l]];n=+e[0][0];h=+e[1][0];q=+e[0][1];l=+e[1][1];n>h&&(e=n,n=h,h=e);q>l&&(e=q,q=l,l=e);return a.precision(r)};a.minorExtent=function(b){if(!arguments.length)return[[g,f],[e,k]];g=+b[0][0];e=+b[1][0];f=+b[0][1];k=+b[1][1];g>e&&(b=g,g=e,e=b);f>k&&(b=f,f=k,k=b);return a.precision(r)};a.step=function(e){return arguments.length?
a.majorStep(e).minorStep(e):a.minorStep()};a.majorStep=function(e){if(!arguments.length)return[p,w];p=+e[0];w=+e[1];return a};a.minorStep=function(e){if(!arguments.length)return[m,y];m=+e[0];y=+e[1];return a};a.precision=function(b){if(!arguments.length)return r;r=+b;u=Je(f,k,90);F=Ke(g,e,r);A=Je(q,l,90);C=Ke(n,h,r);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,-80.000001],[180,80.000001]])};x.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[e||
b.apply(this,arguments),h||g.apply(this,arguments)]}}var b=hd,e,g=id,h;a.distance=function(){return x.geo.distance(e||b.apply(this,arguments),h||g.apply(this,arguments))};a.source=function(g){if(!arguments.length)return b;b=g;e="function"===typeof g?null:g;return a};a.target=function(e){if(!arguments.length)return g;g=e;h="function"===typeof e?null:e;return a};a.precision=function(){return arguments.length?a:0};return a};x.geo.interpolate=function(a,b){return Og(a[0]*ia,a[1]*ia,b[0]*ia,b[1]*ia)};
x.geo.length=function(a){Od=0;x.geo.stream(a,Db);return Od};var Od,Db={sphere:D,point:D,lineStart:function(){function a(c,n){var k=Math.sin(n*=ia),f=Math.cos(n),l=ka((c*=ia)-b),q=Math.cos(l);Od+=Math.atan2(Math.sqrt((l=f*Math.sin(l))*l+(l=g*k-e*f*q)*l),e*k+g*f*q);b=c;e=k;g=f}var b,e,g;Db.point=function(h,n){b=h*ia;e=Math.sin(n*=ia);g=Math.cos(n);Db.point=a};Db.lineEnd=function(){Db.point=Db.lineEnd=D}},lineEnd:D,polygonStart:D,polygonEnd:D},Yf=Ib(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*
Math.asin(a/2)});(x.geo.azimuthalEqualArea=function(){return bb(Yf)}).raw=Yf;var Zf=Ib(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},ua);(x.geo.azimuthalEquidistant=function(){return bb(Zf)}).raw=Zf;(x.geo.conicConformal=function(){return dd(Le)}).raw=Le;(x.geo.conicEquidistant=function(){return dd(Me)}).raw=Me;var $f=Ib(function(a){return 1/a},Math.atan);(x.geo.gnomonic=function(){return bb($f)}).raw=$f;lc.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-va]};(x.geo.mercator=function(){return Ne(lc)}).raw=
lc;var ag=Ib(function(){return 1},Math.asin);(x.geo.orthographic=function(){return bb(ag)}).raw=ag;var bg=Ib(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(x.geo.stereographic=function(){return bb(bg)}).raw=bg;jd.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-va]};(x.geo.transverseMercator=function(){var a=Ne(jd),b=a.center,e=a.rotate;a.center=function(a){return a?b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?e([a[0],a[1],2<a.length?a[2]+90:90]):(a=
e(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=jd;x.geom={};x.geom.hull=function(a){function b(a){if(3>a.length)return[];var c=qa(e),k=qa(g),t,f=a.length,l=[],q=[];for(t=0;t<f;t++)l.push([+c.call(this,a[t],t),+k.call(this,a[t],t),t]);l.sort(Pg);for(t=0;t<f;t++)q.push([l[t][0],-l[t][1]]);var c=Oe(l),q=Oe(q),k=q[0]===c[0],f=q[q.length-1]===c[c.length-1],m=[];for(t=c.length-1;0<=t;--t)m.push(a[l[c[t]][2]]);for(t=+k;t<q.length-f;++t)m.push(a[l[q[t]][2]]);return m}var e=xb,g=Jb;if(arguments.length)return b(a);
b.x=function(a){return arguments.length?(e=a,b):e};b.y=function(a){return arguments.length?(g=a,b):g};return b};x.geom.polygon=function(a){Tb(a,Jc);return a};var Jc=x.geom.polygon.prototype=[];Jc.area=function(){for(var a=-1,b=this.length,e,g=this[b-1],h=0;++a<b;)e=g,g=this[a],h+=e[1]*g[0]-e[0]*g[1];return.5*h};Jc.centroid=function(a){var b=-1,e=this.length,g=0,h=0,n,k=this[e-1],f;for(arguments.length||(a=-1/(6*this.area()));++b<e;)n=k,k=this[b],f=n[0]*k[1]-k[0]*n[1],g+=(n[0]+k[0])*f,h+=(n[1]+k[1])*
f;return[g*a,h*a]};Jc.clip=function(a){for(var b,e=Qe(a),g=-1,h=this.length-Qe(this),n,k,f=this[h-1],l,q,m;++g<h;){b=a.slice();a.length=0;l=this[g];q=b[(k=b.length-e)-1];for(n=-1;++n<k;)m=b[n],kd(m,f,l)?(kd(q,f,l)||a.push(Pe(q,m,f,l)),a.push(m)):kd(q,f,l)&&a.push(Pe(q,m,f,l)),q=m;e&&a.push(a[0]);f=l}return a};var Bb,mb,zb,Se=[],md,Kb,We=[];Ue.prototype.prepare=function(){for(var a=this.edges,b=a.length,e;b--;)e=a[b].edge,e.b&&e.a||a.splice(b,1);a.sort(Ve);return a.length};oc.prototype={start:function(){return this.edge.l===
this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};nd.prototype={insert:function(a,b){var e,g,h;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;e=a}else this._?(a=Ye(this._),b.P=null,b.N=a,a.P=a.L=b,e=a):(b.P=b.N=null,this._=b,e=null);b.L=b.R=null;b.U=e;b.C=!0;for(a=b;e&&e.C;)g=e.U,e===g.L?(h=g.R)&&h.C?(e.C=h.C=!1,g.C=!0,a=g):(a===e.R&&(Mb(this,e),a=e,e=a.U),e.C=!1,g.C=!0,Nb(this,g)):(h=g.L)&&h.C?(e.C=h.C=!1,
g.C=!0,a=g):(a===e.L&&(Nb(this,e),a=e,e=a.U),e.C=!1,g.C=!0,Mb(this,g)),e=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,e=a.L,g=a.R,h,n;h=e?g?Ye(g):e:g;b?b.L===a?b.L=h:b.R=h:this._=h;e&&g?(n=h.C,h.C=a.C,h.L=e,e.U=h,h!==g?(b=h.U,h.U=a.U,a=h.R,b.L=a,h.R=g,g.U=h):(h.U=b,b=h,a=h.R)):(n=a.C,a=h);a&&(a.U=b);if(!n)if(a&&a.C)a.C=!1;else{do{if(a===this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Mb(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=
!1,a.C=!0,Nb(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Mb(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Nb(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Mb(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Nb(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};x.geom.voronoi=function(a){function b(a){var c=Array(a.length),g=f[0][0],h=f[0][1],n=f[1][0],k=f[1][1];od(e(a),f).cells.forEach(function(e,b){var t=e.edges,f=e.site;(c[b]=t.length?t.map(function(a){a=a.start();return[a.x,
a.y]}):f.x>=g&&f.x<=n&&f.y>=h&&f.y<=k?[[g,k],[n,k],[n,h],[g,h]]:[]).point=a[b]});return c}function e(a){return a.map(function(a,c){return{x:1E-6*Math.round(n(a,c)/1E-6),y:1E-6*Math.round(k(a,c)/1E-6),i:c}})}var g=xb,h=Jb,n=g,k=h,f=Kc;if(a)return b(a);b.links=function(a){return od(e(a)).edges.filter(function(a){return a.l&&a.r}).map(function(c){return{source:a[c.l.i],target:a[c.r.i]}})};b.triangles=function(a){var c=[];od(e(a)).cells.forEach(function(e,b){for(var g=e.site,h=e.edges.sort(Ve),n=-1,k=
h.length,t,f=h[k-1].edge,f=f.l===g?f.r:f.l;++n<k;)t=f,f=h[n].edge,f=f.l===g?f.r:f.l,b<t.i&&b<f.i&&0>(g.x-f.x)*(t.y-g.y)-(g.x-t.x)*(f.y-g.y)&&c.push([a[b],a[t.i],a[f.i]])});return c};b.x=function(a){return arguments.length?(n=qa(g=a),b):g};b.y=function(a){return arguments.length?(k=qa(h=a),b):h};b.clipExtent=function(a){if(!arguments.length)return f===Kc?null:f;f=null==a?Kc:a;return b};b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):f===Kc?null:f&&f[1]};return b};var Kc=[[-1E6,
-1E6],[1E6,1E6]];x.geom.delaunay=function(a){return x.geom.voronoi().triangles(a)};x.geom.quadtree=function(a,b,e,g,h){function n(a){function c(a,e,b,g,h,k,t,f){if(!isNaN(b)&&!isNaN(g))if(a.leaf){var q=a.x,l=a.y;if(null!=q){if(!(.01>ka(q-b)+ka(l-g))){var z=a.point;a.x=a.y=a.point=null;n(a,z,q,l,h,k,t,f)}n(a,e,b,g,h,k,t,f)}else a.x=b,a.y=g,a.point=e}else n(a,e,b,g,h,k,t,f)}function n(a,e,b,g,h,k,t,f){var q=.5*(h+t),l=.5*(k+f),z=b>=q,m=g>=l,y=(m<<1)+z;a.leaf=!1;a=a.nodes[y]||(a.nodes[y]=Ze());z?h=q:
t=q;m?k=l:f=l;c(a,e,b,g,h,k,t,f)}var q,m=qa(k),y=qa(f),p,w,u,F,A,r,C,L;if(null!=b)A=b,r=e,C=g,L=h;else if(C=L=-(A=r=Infinity),p=[],w=[],F=a.length,l)for(u=0;u<F;++u)q=a[u],q.x<A&&(A=q.x),q.y<r&&(r=q.y),q.x>C&&(C=q.x),q.y>L&&(L=q.y),p.push(q.x),w.push(q.y);else for(u=0;u<F;++u){var v=+m(q=a[u],u);q=+y(q,u);v<A&&(A=v);q<r&&(r=q);v>C&&(C=v);q>L&&(L=q);p.push(v);w.push(q)}v=C-A;q=L-r;v>q?L=r+v:C=A+q;var x=Ze();x.add=function(a){c(x,a,+m(a,++u),+y(a,u),A,r,C,L)};x.visit=function(a){Ob(a,x,A,r,C,L)};u=
-1;if(null==b){for(;++u<F;)c(x,a[u],p[u],w[u],A,r,C,L);--u}else a.forEach(x.add);p=w=a=q=null;return x}var k=xb,f=Jb,l;if(l=arguments.length)return k=Vg,f=Wg,3===l&&(h=e,g=b,e=b=0),n(a);n.x=function(a){return arguments.length?(k=a,n):k};n.y=function(a){return arguments.length?(f=a,n):f};n.extent=function(a){if(!arguments.length)return null==b?null:[[b,e],[g,h]];null==a?b=e=g=h=null:(b=+a[0][0],e=+a[0][1],g=+a[1][0],h=+a[1][1]);return n};n.size=function(a){if(!arguments.length)return null==b?null:
[g-b,h-e];null==a?b=e=g=h=null:(b=e=0,g=+a[0],h=+a[1]);return n};return n};x.interpolateRgb=pd;x.interpolateObject=$e;x.interpolateNumber=Va;x.interpolateString=af;var qd=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rd=new RegExp(qd.source,"g");x.interpolate=nb;x.interpolators=[function(a,b){var e=typeof b;return("string"===e?Vb.has(b)||/^(#|rgb\(|hsl\()/.test(b)?pd:af:b instanceof oa?pd:Array.isArray(b)?pc:"object"===e&&isNaN(b)?$e:Va)(a,b)}];x.interpolateArray=pc;var cg=function(){return ua},$h=
x.map({linear:cg,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Yg},cubic:function(){return Zg},sin:function(){return ah},exp:function(){return bh},circle:function(){return ch},elastic:function(a,b){var e;2>arguments.length&&(b=.45);arguments.length?e=b/Ea*Math.asin(1/a):(a=1,e=b/4);return function(g){return 1+a*Math.pow(2,-10*g)*Math.sin((g-e)*Ea/b)}},back:function(a){a||(a=1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return dh}}),ai=x.map({"in":ua,
out:bf,"in-out":cf,"out-in":function(a){return cf(bf(a))}});x.ease=function(a){var b=a.indexOf("-"),e=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",e=$h.get(e)||cg,b=ai.get(b)||ua;return Xg(b(e.apply(null,Qf.call(arguments,1))))};x.interpolateHcl=function(a,b){a=x.hcl(a);b=x.hcl(b);var e=a.h,g=a.c,h=a.l,n=b.h-e,k=b.c-g,f=b.l-h;isNaN(k)&&(k=0,g=isNaN(g)?b.c:g);isNaN(n)?(n=0,e=isNaN(e)?b.h:e):180<n?n-=360:-180>n&&(n+=360);return function(a){return Qc(e+n*a,g+k*a,h+f*a)+""}};x.interpolateHsl=
function(a,b){a=x.hsl(a);b=x.hsl(b);var e=a.h,g=a.s,h=a.l,n=b.h-e,k=b.s-g,f=b.l-h;isNaN(k)&&(k=0,g=isNaN(g)?b.s:g);isNaN(n)?(n=0,e=isNaN(e)?b.h:e):180<n?n-=360:-180>n&&(n+=360);return function(a){return rb(e+n*a,g+k*a,h+f*a)+""}};x.interpolateLab=function(a,b){a=x.lab(a);b=x.lab(b);var e=a.l,g=a.a,h=a.b,n=b.l-e,k=b.a-g,f=b.b-h;return function(a){return Yd(e+n*a,g+k*a,h+f*a)+""}};x.interpolateRound=df;x.transform=function(a){var b=Ma.createElementNS(x.ns.prefix.svg,"g");return(x.transform=function(a){if(null!=
a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new ef(c?c.matrix:bi)})(a)};ef.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bi={a:1,b:0,c:0,d:1,e:0,f:0};x.interpolateTransform=gf;x.layout={};x.layout.bundle=function(){return function(a){for(var b=[],e=-1,g=a.length;++e<g;)b.push(gh(a[e]));return b}};x.layout.chord=function(){function a(){var c={},e=[],y=x.range(k),p=[],w,u,F,
A,r;g=[];h=[];w=0;for(A=-1;++A<k;){u=0;for(r=-1;++r<k;)u+=n[A][r];e.push(u);p.push(x.range(k));w+=u}q&&y.sort(function(a,c){return q(e[a],e[c])});l&&p.forEach(function(a,c){a.sort(function(a,e){return l(n[c][a],n[c][e])})});w=(Ea-f*k)/w;u=0;for(A=-1;++A<k;){F=u;for(r=-1;++r<k;){var C=y[A],L=p[C][r],v=n[C][L],B=u,S=u+=v*w;c[C+"-"+L]={index:C,subindex:L,startAngle:B,endAngle:S,value:v}}h[C]={index:C,startAngle:F,endAngle:u,value:(u-F)/w};u+=f}for(A=-1;++A<k;)for(r=A-1;++r<k;)y=c[A+"-"+r],p=c[r+"-"+
A],(y.value||p.value)&&g.push(y.value<p.value?{source:p,target:y}:{source:y,target:p});m&&b()}function b(){g.sort(function(a,c){return m((a.source.value+a.target.value)/2,(c.source.value+c.target.value)/2)})}var e={},g,h,n,k,f=0,q,l,m;e.matrix=function(a){if(!arguments.length)return n;k=(n=a)&&n.length;g=h=null;return e};e.padding=function(a){if(!arguments.length)return f;f=a;g=h=null;return e};e.sortGroups=function(a){if(!arguments.length)return q;q=a;g=h=null;return e};e.sortSubgroups=function(a){if(!arguments.length)return l;
l=a;g=null;return e};e.sortChords=function(a){if(!arguments.length)return m;m=a;g&&b();return e};e.chords=function(){g||a();return g};e.groups=function(){h||a();return h};return e};x.layout.force=function(){function a(c){return function(a,e,b,g){if(a.point!==c){b=a.cx-c.x;var h=a.cy-c.y;e=g-e;g=b*b+h*h;if(e*e/w<g)return g<y&&(e=a.charge/g,c.px-=b*e,c.py-=h*e),!0;a.point&&g&&g<y&&(e=a.pointCharge/g,c.px-=b*e,c.py-=h*e)}return!a.charge}}function b(a){a.px=x.event.x;a.py=x.event.y;e.resume()}var e={},
g=x.dispatch("start","tick","end"),h=[1,1],n,k,f=.9,q=ci,l=di,m=-30,y=ei,p=.1,w=.64,u=[],A=[],F,r,C;e.tick=function(){if(.005>(k*=.99))return g.end({type:"end",alpha:k=0}),!0;var e=u.length,b=A.length,n,t,q,l,y,w,L;for(n=0;n<b;++n)if(t=A[n],q=t.source,l=t.target,w=l.x-q.x,L=l.y-q.y,y=w*w+L*L)y=k*r[n]*((y=Math.sqrt(y))-F[n])/y,w*=y,L*=y,l.x-=w*(y=q.weight/(l.weight+q.weight)),l.y-=L*y,q.x+=w*(y=1-y),q.y+=L*y;if(y=k*p)if(w=h[0]/2,L=h[1]/2,n=-1,y)for(;++n<e;)t=u[n],t.x+=(w-t.x)*y,t.y+=(L-t.y)*y;if(m)for(jf(b=
x.geom.quadtree(u),k,C),n=-1;++n<e;)(t=u[n]).fixed||b.visit(a(t));for(n=-1;++n<e;)t=u[n],t.fixed?(t.x=t.px,t.y=t.py):(t.x-=(t.px-(t.px=t.x))*f,t.y-=(t.py-(t.py=t.y))*f);g.tick({type:"tick",alpha:k})};e.nodes=function(a){if(!arguments.length)return u;u=a;return e};e.links=function(a){if(!arguments.length)return A;A=a;return e};e.size=function(a){if(!arguments.length)return h;h=a;return e};e.linkDistance=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return e};e.distance=e.linkDistance;
e.linkStrength=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return e};e.friction=function(a){if(!arguments.length)return f;f=+a;return e};e.charge=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return e};e.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(y);y=a*a;return e};e.gravity=function(a){if(!arguments.length)return p;p=+a;return e};e.theta=function(a){if(!arguments.length)return Math.sqrt(w);w=a*a;return e};e.alpha=function(a){if(!arguments.length)return k;
a=+a;k?k=0<a?a:0:0<a&&(g.start({type:"start",alpha:k=a}),x.timer(e.tick));return e};e.start=function(){function a(e,g){if(!f){f=Array(b);for(n=0;n<b;++n)f[n]=[];for(n=0;n<k;++n){var h=A[n];f[h.source.index].push(h.target);f[h.target.index].push(h.source)}}for(var h=f[c],n=-1,k=h.length,t;++n<k;)if(!isNaN(t=h[n][e]))return t;return Math.random()*g}var c,b=u.length,g=A.length,n=h[0],k=h[1],f,t;for(c=0;c<b;++c)(t=u[c]).index=c,t.weight=0;for(c=0;c<g;++c)t=A[c],"number"==typeof t.source&&(t.source=u[t.source]),
"number"==typeof t.target&&(t.target=u[t.target]),++t.source.weight,++t.target.weight;for(c=0;c<b;++c)t=u[c],isNaN(t.x)&&(t.x=a("x",n)),isNaN(t.y)&&(t.y=a("y",k)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);F=[];if("function"===typeof q)for(c=0;c<g;++c)F[c]=+q.call(this,A[c],c);else for(c=0;c<g;++c)F[c]=q;r=[];if("function"===typeof l)for(c=0;c<g;++c)r[c]=+l.call(this,A[c],c);else for(c=0;c<g;++c)r[c]=l;C=[];if("function"===typeof m)for(c=0;c<b;++c)C[c]=+m.call(this,u[c],c);else for(c=0;c<b;++c)C[c]=
m;return e.resume()};e.resume=function(){return e.alpha(.1)};e.stop=function(){return e.alpha(0)};e.drag=function(){n||(n=x.behavior.drag().origin(ua).on("dragstart.force",hh).on("drag.force",b).on("dragend.force",ih));if(!arguments.length)return n;this.on("mouseover.force",jh).on("mouseout.force",kh).call(n)};return x.rebind(e,g,"on")};var ci=20,di=1,ei=Infinity;x.layout.hierarchy=function(){function a(h){var n=[h],k=[],f;for(h.depth=0;null!=(f=n.pop());)if(k.push(f),(l=e.call(a,f,f.depth))&&(q=
l.length)){for(var q,l,m;0<=--q;)n.push(m=l[q]),m.parent=f,m.depth=f.depth+1;g&&(f.value=0);f.children=l}else g&&(f.value=+g.call(a,f,f.depth)||0),delete f.children;Pa(h,function(a){var c,e;b&&(c=a.children)&&c.sort(b);g&&(e=a.parent)&&(e.value+=a.value)});return k}var b=oh,e=mh,g=nh;a.sort=function(e){if(!arguments.length)return b;b=e;return a};a.children=function(b){if(!arguments.length)return e;e=b;return a};a.value=function(e){if(!arguments.length)return g;g=e;return a};a.revalue=function(e){g&&
(Qb(e,function(a){a.children&&(a.value=0)}),Pa(e,function(e){var b;e.children||(e.value=+g.call(a,e,e.depth)||0);if(b=e.parent)b.value+=e.value}));return e};return a};x.layout.partition=function(){function a(e,b,g,h){var k=e.children;e.x=b;e.y=e.depth*h;e.dx=g;e.dy=h;if(k&&(t=k.length)){var f=-1,t,q;for(g=e.value?g/e.value:0;++f<t;)a(q=k[f],b,e=q.value*g,h),b+=e}}function b(a){a=a.children;var c=0;if(a&&(g=a.length))for(var e=-1,g;++e<g;)c=Math.max(c,b(a[e]));return 1+c}function e(e,k){var f=g.call(this,
e,k);a(f[0],0,h[0],h[1]/b(f[0]));return f}var g=x.layout.hierarchy(),h=[1,1];e.size=function(a){if(!arguments.length)return h;h=a;return e};return Pb(e,g)};x.layout.pie=function(){function a(k){var f=k.map(function(e,g){return+b.call(a,e,g)}),q=+("function"===typeof g?g.apply(this,arguments):g),l=(("function"===typeof h?h.apply(this,arguments):h)-q)/x.sum(f),m=x.range(k.length);null!=e&&m.sort(e===dg?function(a,c){return f[c]-f[a]}:function(a,c){return e(k[a],k[c])});var y=[];m.forEach(function(a){var c;
y[a]={data:k[a],value:c=f[a],startAngle:q,endAngle:q+=c*l}});return y}var b=Number,e=dg,g=0,h=Ea;a.value=function(e){if(!arguments.length)return b;b=e;return a};a.sort=function(b){if(!arguments.length)return e;e=b;return a};a.startAngle=function(e){if(!arguments.length)return g;g=e;return a};a.endAngle=function(e){if(!arguments.length)return h;h=e;return a};return a};var dg={};x.layout.stack=function(){function a(q,l){var m=q.map(function(e,g){return b.call(a,e,g)}),y=m.map(function(e){return e.map(function(e,
b){return[k.call(a,e,b),f.call(a,e,b)]})}),p=e.call(a,y,l),m=x.permute(m,p),y=x.permute(y,p),p=g.call(a,y,l),w=m.length,u=m[0].length,A,F,r;for(F=0;F<u;++F)for(h.call(a,m[0][F],r=p[F],y[0][F][1]),A=1;A<w;++A)h.call(a,m[A][F],r+=y[A-1][F][1],y[A][F][1]);return q}var b=ua,e=sd,g=td,h=rh,k=ph,f=qh;a.values=function(e){if(!arguments.length)return b;b=e;return a};a.order=function(b){if(!arguments.length)return e;e="function"===typeof b?b:fi.get(b)||sd;return a};a.offset=function(e){if(!arguments.length)return g;
g="function"===typeof e?e:gi.get(e)||td;return a};a.x=function(e){if(!arguments.length)return k;k=e;return a};a.y=function(e){if(!arguments.length)return f;f=e;return a};a.out=function(e){if(!arguments.length)return h;h=e;return a};return a};var fi=x.map({"inside-out":function(a){var b=a.length,e,g=a.map(sh),h=a.map(th),k=x.range(b).sort(function(a,c){return g[a]-g[c]}),f=0,q=0,l=[],m=[];for(a=0;a<b;++a)e=k[a],f<q?(f+=h[e],l.push(e)):(q+=h[e],m.push(e));return m.reverse().concat(l)},reverse:function(a){return x.range(a.length).reverse()},
"default":sd}),gi=x.map({silhouette:function(a){var b=a.length,e=a[0].length,g=[],h=0,k,f,q,l=[];for(f=0;f<e;++f){for(q=k=0;k<b;k++)q+=a[k][f][1];q>h&&(h=q);g.push(q)}for(f=0;f<e;++f)l[f]=(h-g[f])/2;return l},wiggle:function(a){var b=a.length,e=a[0],g=e.length,h,k,f,q,l,m,y,p,w,u=[];u[0]=p=w=0;for(k=1;k<g;++k){for(q=h=0;h<b;++h)q+=a[h][k][1];l=h=0;for(y=e[k][0]-e[k-1][0];h<b;++h){f=0;for(m=(a[h][k][1]-a[h][k-1][1])/(2*y);f<h;++f)m+=(a[f][k][1]-a[f][k-1][1])/y;l+=m*a[h][k][1]}u[k]=p-=q?l/q*y:0;p<w&&
(w=p)}for(k=0;k<g;++k)u[k]-=w;return u},expand:function(a){var b=a.length,e=a[0].length,g=1/b,h,k,f,q=[];for(k=0;k<e;++k){for(f=h=0;h<b;h++)f+=a[h][k][1];if(f)for(h=0;h<b;h++)a[h][k][1]/=f;else for(h=0;h<b;h++)a[h][k][1]=g}for(k=0;k<e;++k)q[k]=0;return q},zero:td});x.layout.histogram=function(){function a(c,k){var f=[],q=c.map(e,this),l=g.call(this,q,k),m=h.call(this,l,q,k),y;k=-1;for(var p=q.length,w=m.length-1,u=b?1:1/p;++k<w;)y=f[k]=[],y.dx=m[k+1]-(y.x=m[k]),y.y=0;if(0<w)for(k=-1;++k<p;)y=q[k],
y>=l[0]&&y<=l[1]&&(y=f[x.bisect(m,y,1,w)-1],y.y+=u,y.push(c[k]));return f}var b=!0,e=Number,g=wh,h=vh;a.value=function(b){if(!arguments.length)return e;e=b;return a};a.range=function(e){if(!arguments.length)return g;g=qa(e);return a};a.bins=function(e){if(!arguments.length)return h;h="number"===typeof e?function(a){return kf(a,e)}:qa(e);return a};a.frequency=function(e){if(!arguments.length)return b;b=!!e;return a};return a};x.layout.pack=function(){function a(c,k){var f=b.call(this,c,k),q=f[0],l=
g[0],m=g[1],y=null==h?Math.sqrt:"function"===typeof h?h:function(){return h};q.x=q.y=0;Pa(q,function(a){a.r=+y(a.value)});Pa(q,nf);if(e){var p=e*(h?1:Math.max(2*q.r/l,2*q.r/m))/2;Pa(q,function(a){a.r+=p});Pa(q,nf);Pa(q,function(a){a.r-=p})}pf(q,l/2,m/2,h?1:1/Math.max(2*q.r/l,2*q.r/m));return f}var b=x.layout.hierarchy().sort(xh),e=0,g=[1,1],h;a.size=function(e){if(!arguments.length)return g;g=e;return a};a.radius=function(e){if(!arguments.length)return h;h=null==e||"function"===typeof e?e:+e;return a};
a.padding=function(b){if(!arguments.length)return e;e=+b;return a};return Pb(a,b)};x.layout.tree=function(){function a(c,m){var y=k.call(this,c,m),p=y[0],w=b(p);Pa(w,e);w.parent.m=-w.z;Qb(w,g);if(l)Qb(p,h);else{var u=p,A=p,F=p;Qb(p,function(a){a.x<u.x&&(u=a);a.x>A.x&&(A=a);a.depth>F.depth&&(F=a)});var r=f(u,A)/2-u.x,C=q[0]/(A.x+f(A,u)/2+r),L=q[1]/(F.depth||1);Qb(p,function(a){a.x=(a.x+r)*C;a.y=a.depth*L})}return y}function b(a){a={A:null,children:[a]};for(var c=[a],e;null!=(e=c.pop());)for(var g=
e.children,h,k=0,n=g.length;k<n;++k)c.push((g[k]=h={_:g[k],parent:e,children:(h=g[k].children)&&h.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:k}).a=h);return a.children[0]}function e(a){var c=a.children,e=a.parent.children,b=a.i?e[a.i-1]:null;if(c.length){for(var g=0,h=0,k=a.children,n=k.length,q;0<=--n;)q=k[n],q.z+=g,q.m+=g,g+=q.s+(h+=q.c);c=(c[0].z+c[c.length-1].z)/2;b?(a.z=b.z+f(a._,b._),a.m=a.z-c):a.z=c}else b&&(a.z=b.z+f(a._,b._));c=a.parent;e=a.parent.A||e[0];if(b){h=g=a;k=g.parent.children[0];
n=g.m;q=h.m;for(var t=b.m,l=k.m,m;b=wd(b),g=vd(g),b&&g;){k=vd(k);h=wd(h);h.a=a;m=b.z+t-g.z-n+f(b._,g._);if(0<m){var y=b.a.parent===a.parent?b.a:e,p=a,w=m,u=w/(p.i-y.i);p.c-=u;p.s+=w;y.c+=u;p.z+=w;p.m+=w;n+=m;q+=m}t+=b.m;n+=g.m;l+=k.m;q+=h.m}b&&!wd(h)&&(h.t=b,h.m+=t-q);g&&!vd(k)&&(k.t=g,k.m+=n-l,e=a)}c.A=e}function g(a){a._.x=a.z+a.parent.m;a.m+=a.parent.m}function h(a){a.x*=q[0];a.y=a.depth*q[1]}var k=x.layout.hierarchy().sort(null).value(null),f=qf,q=[1,1],l=null;a.separation=function(e){if(!arguments.length)return f;
f=e;return a};a.size=function(e){if(!arguments.length)return l?null:q;l=null==(q=e)?h:null;return a};a.nodeSize=function(e){if(!arguments.length)return l?q:null;l=null==(q=e)?null:h;return a};return Pb(a,k)};x.layout.cluster=function(){function a(c,k){var f=b.call(this,c,k),q=f[0],l,m=0;Pa(q,function(a){var c=a.children;c&&c.length?(a.x=Bh(c),a.y=Ah(c)):(a.x=l?m+=e(a,l):0,a.y=0,l=a)});var y=rf(q),p=sf(q),w=y.x-e(y,p)/2,u=p.x+e(p,y)/2;Pa(q,h?function(a){a.x=(a.x-q.x)*g[0];a.y=(q.y-a.y)*g[1]}:function(a){a.x=
(a.x-w)/(u-w)*g[0];a.y=(1-(q.y?a.y/q.y:1))*g[1]});return f}var b=x.layout.hierarchy().sort(null).value(null),e=qf,g=[1,1],h=!1;a.separation=function(b){if(!arguments.length)return e;e=b;return a};a.size=function(e){if(!arguments.length)return h?null:g;h=null==(g=e);return a};a.nodeSize=function(e){if(!arguments.length)return h?g:null;h=null!=(g=e);return a};return Pb(a,b)};x.layout.treemap=function(){function a(c,e){for(var b=-1,g=c.length,h,k;++b<g;)k=(h=c[b]).value*(0>e?0:e),h.area=isNaN(k)||0>=
k?0:k}function b(e){var h=e.children;if(h&&h.length){var k=m(e),n=[],f=h.slice(),q=Infinity,l,y="slice"===w?k.dx:"dice"===w?k.dy:"slice-dice"===w?e.depth&1?k.dy:k.dx:Math.min(k.dx,k.dy);a(f,k.dx*k.dy/e.value);for(n.area=0;0<(e=f.length);){n.push(e=f[e-1]);n.area+=e.area;if(!(e="squarify"!==w)){l=y;e=n.area;for(var p,z=0,A=Infinity,F=-1,r=n.length;++F<r;)if(p=n[F].area)p<A&&(A=p),p>z&&(z=p);e*=e;l*=l;e=(l=e?Math.max(l*z*u/e,e/(l*A*u)):Infinity)<=q}e?(f.pop(),q=l):(n.area-=n.pop().area,g(n,y,k,!1),
y=Math.min(k.dx,k.dy),n.length=n.area=0,q=Infinity)}n.length&&(g(n,y,k,!0),n.length=n.area=0);h.forEach(b)}}function e(b){var h=b.children;if(h&&h.length){var k=m(b),n=h.slice(),f=[];a(n,k.dx*k.dy/b.value);for(f.area=0;b=n.pop();)f.push(b),f.area+=b.area,null!=b.z&&(g(f,b.z?k.dx:k.dy,k,!n.length),f.length=f.area=0);h.forEach(e)}}function g(a,c,e,b){var g=-1,h=a.length,k=e.x,n=e.y,q=c?f(a.area/c):0,l;if(c==e.dx){if(b||q>e.dy)q=e.dy;for(;++g<h;)l=a[g],l.x=k,l.y=n,l.dy=q,k+=l.dx=Math.min(e.x+e.dx-k,
q?f(l.area/q):0);l.z=!0;l.dx+=e.x+e.dx-k;e.y+=q;e.dy-=q}else{if(b||q>e.dx)q=e.dx;for(;++g<h;)l=a[g],l.x=k,l.y=n,l.dx=q,n+=l.dy=Math.min(e.y+e.dy-n,q?f(l.area/q):0);l.z=!1;l.dy+=e.y+e.dy-n;e.x+=q;e.dx-=q}}function h(g){g=p||k(g);var h=g[0];h.x=0;h.y=0;h.dx=q[0];h.dy=q[1];p&&k.revalue(h);a([h],h.dx*h.dy/h.value);(p?e:b)(h);y&&(p=g);return g}var k=x.layout.hierarchy(),f=Math.round,q=[1,1],l=null,m=xd,y=!1,p,w="squarify",u=.5*(1+Math.sqrt(5));h.size=function(a){if(!arguments.length)return q;q=a;return h};
h.padding=function(a){function c(e){var b=a.call(h,e,e.depth);return null==b?xd(e):tf(e,"number"===typeof b?[b,b,b,b]:b)}function e(c){return tf(c,a)}if(!arguments.length)return l;var b;m=null==(l=a)?xd:"function"===(b=typeof a)?c:"number"===b?(a=[a,a,a,a],e):e;return h};h.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return h};h.sticky=function(a){if(!arguments.length)return y;y=a;p=null;return h};h.ratio=function(a){if(!arguments.length)return u;u=a;return h};h.mode=
function(a){if(!arguments.length)return w;w=a+"";return h};return Pb(h,k)};x.random={normal:function(a,b){var e=arguments.length;2>e&&(b=1);1>e&&(a=0);return function(){var e,h;do e=2*Math.random()-1,h=2*Math.random()-1,h=e*e+h*h;while(!h||1<h);return a+b*e*Math.sqrt(-2*Math.log(h)/h)}},logNormal:function(){var a=x.random.normal.apply(x,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=x.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=
0,e=0;e<a;e++)b+=Math.random();return b}}};x.scale={};var Dh={floor:ua,ceil:ua};x.scale.linear=function(){return vf([0,1],[0,1],nb,!1)};var Gh={s:1,g:1,p:1,r:1,e:1};x.scale.log=function(){return wf(x.scale.linear().domain([0,1]),10,!0,[1,10])};var xf=x.format(".0e"),Hh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};x.scale.pow=function(){return yf(x.scale.linear(),1,[0,1])};x.scale.sqrt=function(){return x.scale.pow().exponent(.5)};x.scale.ordinal=function(){return zf([],
{t:"range",a:[[]]})};x.scale.category10=function(){return x.scale.ordinal().range(hi)};x.scale.category20=function(){return x.scale.ordinal().range(ii)};x.scale.category20b=function(){return x.scale.ordinal().range(ji)};x.scale.category20c=function(){return x.scale.ordinal().range(ki)};var hi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Ub),ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,
16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Ub),ji=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Ub),ki=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Ub);x.scale.quantile=function(){return Af([],[])};x.scale.quantize=
function(){return Bf(0,1,[0,1])};x.scale.threshold=function(){return Cf([.5],[0,1])};x.scale.identity=function(){return Df([0,1])};x.svg={};x.svg.arc=function(){function a(){var c=b.apply(this,arguments),k=e.apply(this,arguments),f=g.apply(this,arguments)+ob,q=h.apply(this,arguments)+ob,l=(q<f&&(l=f,f=q,q=l),q-f),m=l<ja?"0":"1",y=Math.cos(f),f=Math.sin(f),p=Math.cos(q),q=Math.sin(q);return l>=li?c?"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"M0,"+c+"A"+c+","+c+" 0 1,0 0,"+-c+"A"+
c+","+c+" 0 1,0 0,"+c+"Z":"M0,"+k+"A"+k+","+k+" 0 1,1 0,"+-k+"A"+k+","+k+" 0 1,1 0,"+k+"Z":c?"M"+k*y+","+k*f+"A"+k+","+k+" 0 "+m+",1 "+k*p+","+k*q+"L"+c*p+","+c*q+"A"+c+","+c+" 0 "+m+",0 "+c*y+","+c*f+"Z":"M"+k*y+","+k*f+"A"+k+","+k+" 0 "+m+",1 "+k*p+","+k*q+"L0,0Z"}var b=Ih,e=Jh,g=Ef,h=Ff;a.innerRadius=function(e){if(!arguments.length)return b;b=qa(e);return a};a.outerRadius=function(b){if(!arguments.length)return e;e=qa(b);return a};a.startAngle=function(e){if(!arguments.length)return g;g=qa(e);
return a};a.endAngle=function(e){if(!arguments.length)return h;h=qa(e);return a};a.centroid=function(){var a=(b.apply(this,arguments)+e.apply(this,arguments))/2,c=(g.apply(this,arguments)+h.apply(this,arguments))/2+ob;return[Math.cos(c)*a,Math.sin(c)*a]};return a};var ob=-va,li=Ea-1E-6;x.svg.line=function(){return Gf(ua)};var Ad=x.map({linear:Fa,"linear-closed":function(a){return Fa(a)+"Z"},step:function(a){for(var b=0,e=a.length,g=a[0],h=[g[0],",",g[1]];++b<e;)h.push("H",(g[0]+(g=a[b])[0])/2,"V",
g[1]);1<e&&h.push("H",g[0]);return h.join("")},"step-before":Bd,"step-after":Cd,basis:Hf,"basis-open":function(a){if(4>a.length)return Fa(a);for(var b=[],e=-1,g=a.length,h,k=[0],f=[0];3>++e;)h=a[e],k.push(h[0]),f.push(h[1]);b.push(Ha(db,k)+","+Ha(db,f));for(--e;++e<g;)h=a[e],k.shift(),k.push(h[0]),f.shift(),f.push(h[1]),Ed(b,k,f);return b.join("")},"basis-closed":function(a){for(var b,e=-1,g=a.length,h=g+4,k,f=[],q=[];4>++e;)k=a[e%g],f.push(k[0]),q.push(k[1]);b=[Ha(db,f),",",Ha(db,q)];for(--e;++e<
h;)k=a[e%g],f.shift(),f.push(k[0]),q.shift(),q.push(k[1]),Ed(b,f,q);return b.join("")},bundle:function(a,b){var e=a.length-1;if(e)for(var g=a[0][0],h=a[0][1],k=a[e][0]-g,f=a[e][1]-h,q=-1,l,m;++q<=e;)l=a[q],m=q/e,l[0]=b*l[0]+(1-b)*(g+m*k),l[1]=b*l[1]+(1-b)*(h+m*f);return Hf(a)},cardinal:function(a,b){return 3>a.length?Fa(a):a[0]+uc(a,Dd(a,b))},"cardinal-open":function(a,b){return 4>a.length?Fa(a):a[1]+uc(a.slice(1,a.length-1),Dd(a,b))},"cardinal-closed":function(a,b){return 3>a.length?Fa(a):a[0]+uc((a.push(a[0]),
a),Dd([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=Fa(a);else{var b=a[0],e=[],g,h,k,f;g=0;h=a.length-1;var q=[];k=a[1];for(f=q[0]=Fd(a[0],k);++g<h;)q[g]=(f+(f=Fd(k,k=a[g+1])))/2;q[g]=f;for(var l=-1,m=a.length-1;++l<m;)g=Fd(a[l],a[l+1]),1E-6>ka(g)?q[l]=q[l+1]=0:(h=q[l]/g,k=q[l+1]/g,f=h*h+k*k,9<f&&(f=3*g/Math.sqrt(f),q[l]=f*h,q[l+1]=f*k));for(l=-1;++l<=m;)f=(a[Math.min(m,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+q[l]*q[l])),e.push([f||0,q[l]*f||0]);a=b+uc(a,e)}return a}});
Ad.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var If=[0,2/3,1/3,0],Jf=[0,1/3,2/3,0],db=[0,1/6,2/3,1/6];x.svg.line.radial=function(){var a=Gf(Kf);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Bd.reverse=Cd;Cd.reverse=Bd;x.svg.area=function(){return Lf(ua)};x.svg.area.radial=function(){var a=Lf(Kf);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};
x.svg.chord=function(){function a(c,k){var f=b(this,g,c,k),n=b(this,h,c,k);return"M"+f.p0+e(f.r,f.p1,f.a1-f.a0)+(f.a0==n.a0&&f.a1==n.a1?"Q 0,0 "+f.p0:"Q 0,0 "+n.p0+e(n.r,n.p1,n.a1-n.a0)+("Q 0,0 "+f.p0))+"Z"}function b(a,c,e,g){var h=c.call(a,e,g);c=k.call(a,h,g);e=f.call(a,h,g)+ob;a=q.call(a,h,g)+ob;return{r:c,a0:e,a1:a,p0:[c*Math.cos(e),c*Math.sin(e)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function e(a,c,e){return"A"+a+","+a+" 0 "+ +(e>ja)+",1 "+c}var g=hd,h=id,k=Kh,f=Ef,q=Ff;a.radius=function(e){if(!arguments.length)return k;
k=qa(e);return a};a.source=function(e){if(!arguments.length)return g;g=qa(e);return a};a.target=function(e){if(!arguments.length)return h;h=qa(e);return a};a.startAngle=function(e){if(!arguments.length)return f;f=qa(e);return a};a.endAngle=function(e){if(!arguments.length)return q;q=qa(e);return a};return a};x.svg.diagonal=function(){function a(c,k){var f=b.call(this,c,k),q=e.call(this,c,k),l=(f.y+q.y)/2,f=[f,{x:f.x,y:l},{x:q.x,y:l},q],f=f.map(g);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=hd,
e=id,g=Mf;a.source=function(e){if(!arguments.length)return b;b=qa(e);return a};a.target=function(b){if(!arguments.length)return e;e=qa(b);return a};a.projection=function(e){if(!arguments.length)return g;g=e;return a};return a};x.svg.diagonal.radial=function(){var a=x.svg.diagonal(),b=Mf,e=a.projection;a.projection=function(a){return arguments.length?e(Lh(b=a)):b};return a};x.svg.symbol=function(){function a(c,h){return(eg.get(b.call(this,c,h))||Nf)(e.call(this,c,h))}var b=Nh,e=Mh;a.type=function(e){if(!arguments.length)return b;
b=qa(e);return a};a.size=function(b){if(!arguments.length)return e;e=qa(b);return a};return a};var eg=x.map({circle:Nf,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*fg));var b=a*fg;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/
Lc);var b=a*Lc/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Lc);var b=a*Lc/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});x.svg.symbolTypes=eg.keys();var Lc=Math.sqrt(3),fg=Math.tan(30*ia),ta=[],Uf=0,qb,yc;ta.call=pa.call;ta.empty=pa.empty;ta.node=pa.node;ta.size=pa.size;x.transition=function(a){return arguments.length?qb?a.transition():a:Tf.transition()};x.transition.prototype=ta;ta.select=function(a){var b=this.id,e=[],g,h,k;a=Q(a);for(var f=-1,q=this.length;++f<
q;){e.push(g=[]);for(var l=this[f],m=-1,y=l.length;++m<y;)(k=l[m])&&(h=a.call(k,k.__data__,m,f))?("__data__"in k&&(h.__data__=k.__data__),vc(h,m,b,k.__transition__[b]),g.push(h)):g.push(null)}return Rb(e,b)};ta.selectAll=function(a){var b=this.id,e=[],g,k,f,q;a=J(a);for(var l=-1,m=this.length;++l<m;)for(var y=this[l],p=-1,w=y.length;++p<w;)if(g=y[p]){q=g.__transition__[b];k=a.call(g,g.__data__,p,l);e.push(g=[]);for(var u=-1,A=k.length;++u<A;)(f=k[u])&&vc(f,u,b,q),g.push(f)}return Rb(e,b)};ta.filter=
function(a){var b=[],e,g,k;"function"!==typeof a&&(a=S(a));for(var f=0,q=this.length;f<q;f++){b.push(e=[]);g=this[f];for(var l=0,m=g.length;l<m;l++)(k=g[l])&&a.call(k,k.__data__,l,f)&&e.push(k)}return Rb(b,this.id)};ta.tween=function(a,b){var e=this.id;return 2>arguments.length?this.node().__transition__[e].tween.get(a):U(this,null==b?function(b){b.__transition__[e].tween.remove(a)}:function(g){g.__transition__[e].tween.set(a,b)})};ta.attr=function(a,b){function e(){this.removeAttribute(l)}function g(){this.removeAttributeNS(l.space,
l.local)}function k(a){return null==a?e:(a+="",function(){var c=this.getAttribute(l),e;return c!==a&&(e=q(c,a),function(a){this.setAttribute(l,e(a))})})}function f(a){return null==a?g:(a+="",function(){var c=this.getAttributeNS(l.space,l.local),e;return c!==a&&(e=q(c,a),function(a){this.setAttributeNS(l.space,l.local,e(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var q="transform"==a?gf:nb,l=x.ns.qualify(a);return Gd(this,"attr."+a,b,l.local?f:k)};ta.attrTween=function(a,
b){function e(a,c){var e=b.call(this,a,c,this.getAttribute(k));return e&&function(a){this.setAttribute(k,e(a))}}function g(a,c){var e=b.call(this,a,c,this.getAttributeNS(k.space,k.local));return e&&function(a){this.setAttributeNS(k.space,k.local,e(a))}}var k=x.ns.qualify(a);return this.tween("attr."+a,k.local?g:e)};ta.style=function(a,b,e){function g(){this.style.removeProperty(a)}var k=arguments.length;if(3>k){if("string"!==typeof a){2>k&&(b="");for(e in a)this.style(e,a[e],b);return this}e=""}return Gd(this,
"style."+a,b,function(b){return null==b?g:(b+="",function(){var g=ya.getComputedStyle(this,null).getPropertyValue(a),k;return g!==b&&(k=nb(g,b),function(b){this.style.setProperty(a,k(b),e)})})})};ta.styleTween=function(a,b,e){3>arguments.length&&(e="");return this.tween("style."+a,function(g,k){var f=b.call(this,g,k,ya.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),e)}})};ta.text=function(a){return Gd(this,"text",a,Oh)};ta.remove=function(){return this.each("end.transition",
function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};ta.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==typeof a&&(a=x.ease.apply(x,arguments));return U(this,function(e){e.__transition__[b].ease=a})};ta.delay=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].delay:U(this,"function"===typeof a?function(e,g,k){e.__transition__[b].delay=+a.call(e,e.__data__,g,k)}:(a=+a,function(e){e.__transition__[b].delay=
a}))};ta.duration=function(a){var b=this.id;return 1>arguments.length?this.node().__transition__[b].duration:U(this,"function"===typeof a?function(e,g,k){e.__transition__[b].duration=Math.max(1,a.call(e,e.__data__,g,k))}:(a=Math.max(1,a),function(e){e.__transition__[b].duration=a}))};ta.each=function(a,b){var e=this.id;if(2>arguments.length){var g=yc,k=qb;qb=e;U(this,function(b,g,k){yc=b.__transition__[e];a.call(b,b.__data__,g,k)});yc=g;qb=k}else U(this,function(g){g=g.__transition__[e];(g.event||
(g.event=x.dispatch("start","end"))).on(a,b)});return this};ta.transition=function(){for(var a=this.id,b=++Uf,e=[],g,k,f,q,l=0,m=this.length;l<m;l++){e.push(g=[]);k=this[l];for(var y=0,p=k.length;y<p;y++){if(f=k[y])q=Object.create(f.__transition__[a]),q.delay+=q.duration,vc(f,y,b,q);g.push(f)}}return Rb(e,b)};x.svg.axis=function(){function a(c){c.each(function(){var a=x.select(this),c=this.__chart__||b,y=this.__chart__=b.copy(),p=null==l?y.ticks?y.ticks.apply(y,q):y.domain():l,w=null==m?y.tickFormat?
y.tickFormat.apply(y,q):ua:m,u=a.selectAll(".tick").data(p,y),p=u.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),A=x.transition(u.exit()).style("opacity",1E-6).remove(),F=x.transition(u.order()).style("opacity",1),r,C=qc(y),a=a.selectAll(".domain").data([0]),a=(a.enter().append("path").attr("class","domain"),x.transition(a));p.append("line");p.append("text");var L=p.select("line"),v=F.select("line"),w=u.select("text").text(w),u=p.select("text"),B=F.select("text");switch(e){case "bottom":r=
Of;L.attr("y2",g);u.attr("y",Math.max(g,0)+f);v.attr("x2",0).attr("y2",g);B.attr("x",0).attr("y",Math.max(g,0)+f);w.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+k+"V0H"+C[1]+"V"+k);break;case "top":r=Of;L.attr("y2",-g);u.attr("y",-(Math.max(g,0)+f));v.attr("x2",0).attr("y2",-g);B.attr("x",0).attr("y",-(Math.max(g,0)+f));w.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+C[0]+","+-k+"V0H"+C[1]+"V"+-k);break;case "left":r=Pf;L.attr("x2",-g);u.attr("x",-(Math.max(g,
0)+f));v.attr("x2",-g).attr("y2",0);B.attr("x",-(Math.max(g,0)+f)).attr("y",0);w.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-k+","+C[0]+"H0V"+C[1]+"H"+-k);break;case "right":r=Pf,L.attr("x2",g),u.attr("x",Math.max(g,0)+f),v.attr("x2",g).attr("y2",0),B.attr("x",Math.max(g,0)+f).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+k+","+C[0]+"H0V"+C[1]+"H"+k)}if(y.rangeBand)var S=y,J=S.rangeBand()/2,c=y=function(a){return S(a)+J};else c.rangeBand?c=y:A.call(r,
y);p.call(r,c);F.call(r,y)})}var b=x.scale.linear(),e=gg,g=6,k=6,f=3,q=[10],l=null,m;a.scale=function(e){if(!arguments.length)return b;b=e;return a};a.orient=function(b){if(!arguments.length)return e;e=b in mi?b+"":gg;return a};a.ticks=function(){if(!arguments.length)return q;q=arguments;return a};a.tickValues=function(e){if(!arguments.length)return l;l=e;return a};a.tickFormat=function(e){if(!arguments.length)return m;m=e;return a};a.tickSize=function(e){var b=arguments.length;if(!b)return g;g=+e;
k=+arguments[b-1];return a};a.innerTickSize=function(e){if(!arguments.length)return g;g=+e;return a};a.outerTickSize=function(e){if(!arguments.length)return k;k=+e;return a};a.tickPadding=function(e){if(!arguments.length)return f;f=+e;return a};a.tickSubdivide=function(){return arguments.length&&a};return a};var gg="bottom",mi={top:1,right:1,bottom:1,left:1};x.svg.brush=function(){function a(f){f.each(function(){var f=x.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color",
"rgba(0,0,0,0)").on("mousedown.brush",k).on("touchstart.brush",k),n=f.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var m=f.selectAll(".resize").data(F,ua);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ni[a]}).append("rect").attr("x",
function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);f=x.transition(f);n=x.transition(n);q&&(m=qc(q),n.attr("x",m[0]).attr("width",m[1]-m[0]),e(f));l&&(m=qc(l),n.attr("y",m[0]).attr("height",m[1]-m[0]),g(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+m[+/e$/.test(a)]+","+y[+/^s/.test(a)]+")"})}function e(a){a.select(".extent").attr("x",
m[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",m[1]-m[0])}function g(a){a.select(".extent").attr("y",y[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",y[1]-y[0])}function k(){function h(){var a=x.mouse(C),c=!1;oa&&(a[0]+=oa[0],a[1]+=oa[1]);U||(x.event.altKey?(R||(R=[(m[0]+m[1])/2,(y[0]+y[1])/2]),N[0]=m[+(a[0]<R[0])],N[1]=y[+(a[1]<R[1])]):R=null);J&&F(a,q,0)&&(e(B),c=!0);E&&F(a,l,1)&&(g(B),c=!0);c&&(b(B),v({type:"brush",mode:U?"move":"resize"}))}function F(a,c,e){var b=qc(c);c=
b[0];var g=b[1],b=N[e],k=e?y:m,h=k[1]-k[0];U&&(c-=b,g-=h+b);a=(e?A:u)?Math.max(c,Math.min(g,a[e])):a[e];U?c=(a+=b)+h:(R&&(b=Math.max(c,Math.min(g,2*R[e]-a))),b<a?(c=a,a=b):c=b);if(k[0]!=a||k[1]!=c)return e?w=null:p=null,k[0]=a,k[1]=c,!0}function r(){h();B.style("pointer-events","all").selectAll(".resize").style("display",a.empty()?"none":null);x.select("body").style("cursor",null);D.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",
null).on("keyup.brush",null);X();v({type:"brushend"})}var C=this,L=x.select(x.event.target),v=f.of(C,arguments),B=x.select(C),S=L.datum(),J=!/^(n|s)$/.test(S)&&q,E=!/^(e|w)$/.test(S)&&l,U=L.classed("extent"),X=ga(),R,N=x.mouse(C),oa,D=x.select(ya).on("keydown.brush",function(){32==x.event.keyCode&&(U||(R=null,N[0]-=m[1],N[1]-=y[1],U=2),M())}).on("keyup.brush",function(){32==x.event.keyCode&&2==U&&(N[0]+=m[1],N[1]+=y[1],U=0,M())});if(x.event.changedTouches)D.on("touchmove.brush",h).on("touchend.brush",
r);else D.on("mousemove.brush",h).on("mouseup.brush",r);B.interrupt().selectAll("*").interrupt();if(U)N[0]=m[0]-N[0],N[1]=y[0]-N[1];else if(S){var O=+/w$/.test(S),S=+/^n/.test(S);oa=[m[1-O]-N[0],y[1-S]-N[1]];N[0]=m[O];N[1]=y[S]}else x.event.altKey&&(R=N.slice());B.style("pointer-events","none").selectAll(".resize").style("display",null);x.select("body").style("cursor",L.style("cursor"));v({type:"brushstart"});h()}var f=C(a,"brushstart","brush","brushend"),q=null,l=null,m=[0,0],y=[0,0],p,w,u=!0,A=
!0,F=Pd[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),c={x:m,y:y,i:p,j:w},e=this.__chart__||c;this.__chart__=c;qb?x.select(this).transition().each("start.brush",function(){p=e.i;w=e.j;m=e.x;y=e.y;a({type:"brushstart"})}).tween("brush:brush",function(){var e=pc(m,c.x),b=pc(y,c.y);p=w=null;return function(g){m=c.x=e(g);y=c.y=b(g);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){p=c.i;w=c.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),
a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(e){if(!arguments.length)return q;q=e;F=Pd[!q<<1|!l];return a};a.y=function(e){if(!arguments.length)return l;l=e;F=Pd[!q<<1|!l];return a};a.clamp=function(e){if(!arguments.length)return q&&l?[u,A]:q?u:l?A:null;q&&l?(u=!!e[0],A=!!e[1]):q?u=!!e:l&&(A=!!e);return a};a.extent=function(e){var b,g,k,h,f;if(!arguments.length)return q&&(p?(b=p[0],g=p[1]):(b=m[0],g=m[1],q.invert&&(b=q.invert(b),g=q.invert(g)),g<b&&(f=b,b=g,g=f))),l&&(w?(k=
w[0],h=w[1]):(k=y[0],h=y[1],l.invert&&(k=l.invert(k),h=l.invert(h)),h<k&&(f=k,k=h,h=f))),q&&l?[[b,k],[g,h]]:q?[b,g]:l&&[k,h];q&&(b=e[0],g=e[1],l&&(b=b[0],g=g[0]),p=[b,g],q.invert&&(b=q(b),g=q(g)),g<b&&(f=b,b=g,g=f),b!=m[0]||g!=m[1])&&(m=[b,g]);l&&(k=e[0],h=e[1],q&&(k=k[1],h=h[1]),w=[k,h],l.invert&&(k=l(k),h=l(h)),h<k&&(f=k,k=h,h=f),k!=y[0]||h!=y[1])&&(y=[k,h]);return a};a.clear=function(){a.empty()||(m=[0,0],y=[0,0],p=w=null);return a};a.empty=function(){return!!q&&m[0]==m[1]||!!l&&y[0]==y[1]};return x.rebind(a,
f,"on")};var ni={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Pd=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],Qd=aa.format=Wf.timeFormat,hg=Qd.utc,ig=hg("%Y-%m-%dT%H:%M:%S.%LZ");Qd.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Hd:ig;Hd.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Hd.toString=ig.toString;aa.second=gb(function(a){return new xa(1E3*Math.floor(a/1E3))},function(a,
b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});aa.seconds=aa.second.range;aa.seconds.utc=aa.second.utc.range;aa.minute=gb(function(a){return new xa(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});aa.minutes=aa.minute.range;aa.minutes.utc=aa.minute.utc.range;aa.hour=gb(function(a){var b=a.getTimezoneOffset()/60;return new xa(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*
Math.floor(b))},function(a){return a.getHours()});aa.hours=aa.hour.range;aa.hours.utc=aa.hour.utc.range;aa.month=gb(function(a){a=aa.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});aa.months=aa.month.range;aa.months.utc=aa.month.utc.range;var wc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],Rd=[[aa.second,1],[aa.second,5],[aa.second,15],[aa.second,30],[aa.minute,1],[aa.minute,5],[aa.minute,
15],[aa.minute,30],[aa.hour,1],[aa.hour,3],[aa.hour,6],[aa.hour,12],[aa.day,1],[aa.day,2],[aa.week,1],[aa.month,1],[aa.month,3],[aa.year,1]],oi=Qd.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",wb]]),Ph={range:function(a,
b,e){return x.range(Math.ceil(a/e)*e,+b,e).map(pb)},floor:ua,ceil:ua};Rd.year=aa.year;aa.scale=function(){return Id(x.scale.linear(),Rd,oi)};var jg=Rd.map(function(a){return[a[0].utc,a[1]]}),pi=hg.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],
["%B",function(a){return a.getUTCMonth()}],["%Y",wb]]);jg.year=aa.year.utc;aa.scale.utc=function(){return Id(x.scale.linear(),jg,pi)};x.text=Wc(function(a){return a.responseText});x.json=function(a,b){return Wb(a,"application/json",Qh,b)};x.html=function(a,b){return Wb(a,"text/html",Rh,b)};x.xml=Wc(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(x):"object"===typeof module&&module.exports?module.exports=x:this.d3=x}();
(function(){function W(a,b){return(new Date(b,a+1,0)).getDate()}var r=window.nv||{};r.version="1.1.15b";r.dev=!0;window.nv=r;r.tooltip=r.tooltip||{};r.utils=r.utils||{};r.models=r.models||{};r.charts={};r.graphs=[];r.logs={};r.dispatch=d3.dispatch("render_start","render_end");r.dev&&(r.dispatch.on("render_start",function(a){r.logs.startTime=+new Date}),r.dispatch.on("render_end",function(a){r.logs.endTime=+new Date;r.logs.totalTime=r.logs.endTime-r.logs.startTime;r.log("total",r.logs.totalTime)}));
r.log=function(){r.dev&&console.log&&console.log.apply?console.log.apply(console,arguments):r.dev&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};r.render=function(a){a=a||1;r.render.active=!0;r.dispatch.render_start();setTimeout(function(){for(var b,m,B=0;B<a&&(m=r.render.queue[B]);B++)b=m.generate(),typeof m.callback==typeof Function&&m.callback(b),r.graphs.push(b);r.render.queue.splice(0,
B);r.render.queue.length?setTimeout(arguments.callee,0):(r.dispatch.render_end(),r.render.active=!1)},0)};r.render.active=!1;r.render.queue=[];r.addGraph=function(a,b){typeof a===typeof Function&&(a={generate:a,callback:b});r.render.queue.push(a);r.render.active||r.render()};r.identity=function(a){return a};r.strip=function(a){return a.replace(/(\s|&)/g,"")};d3.time.monthEnd=function(a){return new Date(a.getFullYear(),a.getMonth(),0)};d3.time.monthEnds=function(a,b,m){return function(r,p,f){var l=
a(r),v=[];l<r&&b(l);if(1<f)for(;l<p;)r=new Date(+l),0===m(r)%f&&v.push(r),b(l);else for(;l<p;)v.push(new Date(+l)),b(l);return v}}(d3.time.monthEnd,function(a){a.setUTCDate(a.getUTCDate()+1);a.setDate(W(a.getMonth()+1,a.getFullYear()))},function(a){return a.getMonth()});r.interactiveGuideline=function(){function a(G){G.each(function(D){function H(){var m=d3.mouse(this),u=m[0],m=m[1],r=!0,C=!1;I&&(u=d3.event.offsetX,m=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&
(C=!0));r&&(u-=p.left,m-=p.top);0>u||0>m||u>M||m>T||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||C?I&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&d3.event.relatedTarget.className.match(b.nvPointerEventsClass)||(l.elementMouseout({mouseX:u,mouseY:m}),a.renderGuideLine(null)):(r=f.invert(u),l.elementMousemove({mouseX:u,mouseY:m,pointXValue:r}),"dblclick"===d3.event.type&&l.elementDblclick({mouseX:u,mouseY:m,pointXValue:r}))}var E=d3.select(this),
M=m||960,T=B||400,C=E.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([D]);C.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");u&&(u.on("mousemove",H,!0).on("mouseout",H,!0).on("dblclick",H),a.renderGuideLine=function(a){v&&(a=C.select(".nv-interactiveGuideLine").selectAll("line").data(null!=a?[r.utils.NaNtoZero(a)]:[],String),a.enter().append("line").attr("class","nv-guideline").attr("x1",function(a){return a}).attr("x2",
function(a){return a}).attr("y1",T).attr("y2",0),a.exit().remove())})})}var b=r.models.tooltip(),m=null,B=null,p={left:0,top:0},f=d3.scale.linear();d3.scale.linear();var l=d3.dispatch("elementMousemove","elementMouseout","elementDblclick"),v=!0,u=null,I=-1!==navigator.userAgent.indexOf("MSIE");a.dispatch=l;a.tooltip=b;a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return m;
m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.showGuideLine=function(b){if(!arguments.length)return v;v=b;return a};a.svgContainer=function(b){if(!arguments.length)return u;u=b;return a};return a};r.interactiveBisect=function(a,b,m){if(!a instanceof Array)return null;"function"!==typeof m&&(m=function(a,b){return a.x});var r=d3.bisector(m).left,r=d3.max([0,r(a,b)-1]),p=m(a[r],r);"undefined"===typeof p&&
(p=r);if(p===b)return r;var f=d3.min([r+1,a.length-1]);a=m(a[f],f);"undefined"===typeof a&&(a=f);return Math.abs(a-b)>=Math.abs(p-b)?r:f};r.nearestValueIndex=function(a,b,m){var r=Infinity,p=null;a.forEach(function(a,l){var v=Math.abs(b-a);v<=r&&v<m&&(r=v,p=l)});return p};(function(){window.nv.tooltip={};window.nv.models.tooltip=function(){function a(){if(D){var b;b=m&&m.series&&0<m.series.length?!0:!1;if(b){if(u){b=d3.select(u);"svg"!==b.node().tagName&&(b=b.select("svg"));var E=b.node()?b.attr("viewBox"):
null;E&&(E=E.split(" "),b=parseInt(b.style("width"))/E[2],G.left*=b,G.top*=b)}b=G.left;var E=null!=l?l:G.top,M;M=T(m);var J;J=u?d3.select(u):d3.select("body");var R=J.select(".nvtooltip");null===R.node()&&(R=J.append("div").attr("class","nvtooltip "+(v?v:"xy-tooltip")).attr("id",H));R.node().innerHTML=M;R.style("top",0).style("left",0).style("opacity",0);R.selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0);R.classed("nv-pointer-events-none",!0);I=M=R.node();if(u){(R=u.getElementsByTagName("svg")[0])?
R.getBoundingClientRect():u.getBoundingClientRect();var P=0;J=0;if(R){R=R.getBoundingClientRect();P=u.getBoundingClientRect();J=R.top;if(0>J){var O=u.getBoundingClientRect();J=Math.abs(J)>O.height?0:J}J=Math.abs(J-P.top);P=Math.abs(R.left-P.left)}b+=u.offsetLeft+P-2*u.scrollLeft;E+=u.offsetTop+J-2*u.scrollTop}f&&0<f&&(E=Math.floor(E/f)*f);r.tooltip.calcTooltipPosition([b,E],B,p,M);return a}}}var b=null,m=null,B="w",p=50,f=25,l=null,v=null,u=null,I=null,G={left:null,top:null},D=!0,H="nvtooltip-"+Math.floor(1E5*
Math.random()),E=function(a,b){return a},M=function(a){return a},T=function(a){if(null!=b)return b;if(null==a)return"";var f=d3.select(document.createElement("table"));f.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(M(a.value));var l=f.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});
l.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(a){return a.color});l.append("td").classed("key",!0).html(function(a){return a.key});l.append("td").classed("value",!0).html(function(a,b){return E(a.value,b)});l.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",a(.6)).style("border-top-color",a(.6)))});f=f.node().outerHTML;void 0!==a.footer&&(f+="<div class='footer'>"+
a.footer+"</div>");return f};a.nvPointerEventsClass="nv-pointer-events-none";a.content=function(f){if(!arguments.length)return b;b=f;return a};a.tooltipElem=function(){return I};a.contentGenerator=function(b){if(!arguments.length)return T;"function"===typeof b&&(T=b);return a};a.data=function(b){if(!arguments.length)return m;m=b;return a};a.gravity=function(b){if(!arguments.length)return B;B=b;return a};a.distance=function(b){if(!arguments.length)return p;p=b;return a};a.snapDistance=function(b){if(!arguments.length)return f;
f=b;return a};a.classes=function(b){if(!arguments.length)return v;v=b;return a};a.chartContainer=function(b){if(!arguments.length)return u;u=b;return a};a.position=function(b){if(!arguments.length)return G;G.left="undefined"!==typeof b.left?b.left:G.left;G.top="undefined"!==typeof b.top?b.top:G.top;return a};a.fixedTop=function(b){if(!arguments.length)return l;l=b;return a};a.enabled=function(b){if(!arguments.length)return D;D=b;return a};a.valueFormatter=function(b){if(!arguments.length)return E;
"function"===typeof b&&(E=b);return a};a.headerFormatter=function(b){if(!arguments.length)return M;"function"===typeof b&&(M=b);return a};a.id=function(){return H};return a};r.tooltip.show=function(a,b,m,B,p,f){var l=document.createElement("div");l.className="nvtooltip "+(f?f:"xy-tooltip");f=p;if(!p||p.tagName.match(/g|svg/i))f=document.getElementsByTagName("body")[0];l.style.left=0;l.style.top=0;l.style.opacity=0;l.innerHTML=b;f.appendChild(l);p&&(a[0]-=p.scrollLeft,a[1]-=p.scrollTop);r.tooltip.calcTooltipPosition(a,
m,B,l)};r.tooltip.findFirstNonSVGParent=function(a){for(;null!==a.tagName.match(/^g|svg$/i);)a=a.parentNode;return a};r.tooltip.findTotalOffsetTop=function(a,b){var m=b;do isNaN(a.offsetTop)||(m+=a.offsetTop);while(a=a.offsetParent);return m};r.tooltip.findTotalOffsetLeft=function(a,b){var m=b;do isNaN(a.offsetLeft)||(m+=a.offsetLeft);while(a=a.offsetParent);return m};r.tooltip.calcTooltipPosition=function(a,b,m,B){var p=parseInt(B.offsetHeight),f=parseInt(B.offsetWidth),l=r.utils.windowSize().width,
v=r.utils.windowSize().height,u=window.pageYOffset,I=window.pageXOffset,G,D,v=window.innerWidth>=document.body.scrollWidth?v:v-16,l=window.innerHeight>=document.body.scrollHeight?l:l-16;m=m||20;var H=function(a){return r.tooltip.findTotalOffsetTop(a,D)},E=function(a){return r.tooltip.findTotalOffsetLeft(a,G)};switch(b||"s"){case "e":G=a[0]-f-m;D=a[1]-p/2;b=E(B);H=H(B);b<I&&(G=a[0]+m>I?a[0]+m:I-b+G);H<u&&(D=u-H+D);H+p>u+v&&(D=u+v-H+D-p);break;case "w":G=a[0]+m;D=a[1]-p/2;b=E(B);H=H(B);b+f>l&&(G=a[0]-
f-m);H<u&&(D=u+5);H+p>u+v&&(D=u+v-H+D-p);break;case "n":G=a[0]-f/2-5;D=a[1]+m;b=E(B);H=H(B);b<I&&(G=I+5);b+f>l&&(G=G-f/2+5);H+p>u+v&&(D=u+v-H+D-p);break;case "s":G=a[0]-f/2;D=a[1]-p-m;b=E(B);H=H(B);b<I&&(G=I+5);b+f>l&&(G=G-f/2+5);u>H&&(D=u);break;case "none":G=a[0],D=a[1]-m,b=E(B),H=H(B)}B.style.left=G+"px";B.style.top=D+"px";B.style.opacity=1;B.style.position="absolute";return B};r.tooltip.cleanup=function(){for(var a=document.getElementsByClassName("nvtooltip"),b=[];a.length;)b.push(a[0]),a[0].style.transitionDelay=
"0 !important",a[0].style.opacity=0,a[0].className="nvtooltip-pending-removal";setTimeout(function(){for(;b.length;){var a=b.pop();a.parentNode.removeChild(a)}},500)}})();r.utils.windowSize=function(){var a={width:640,height:480};document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a.width=document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight);
window.innerWidth&&window.innerHeight&&(a.width=window.innerWidth,a.height=window.innerHeight);return a};r.utils.windowResize=function(a){if(void 0!==a){var b=window.onresize;window.onresize=function(m){"function"==typeof b&&b(m);a(m)}}};r.utils.getColor=function(a){return arguments.length?"[object Array]"===Object.prototype.toString.call(a)?function(b,m){return b.color||a[m%a.length]}:a:r.utils.defaultColor()};r.utils.defaultColor=function(){var a=d3.scale.category20().range();return function(b,
m){return b.color||a[m%a.length]}};r.utils.customTheme=function(a,b,m){b=b||function(a){return a.key};m=m||d3.scale.category20().range();var r=m.length;return function(p,f){var l=b(p);r||(r=m.length);return"undefined"!==typeof a[l]?"function"===typeof a[l]?a[l]():a[l]:m[--r]}};r.utils.pjax=function(a,b){function m(m){d3.html(m,function(m){var f=d3.select(b).node();f.parentNode.replaceChild(d3.select(m).select(b).node(),f);r.utils.pjax(a,b)})}d3.selectAll(a).on("click",function(){history.pushState(this.href,
this.textContent,this.href);m(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&m(d3.event.state)})};r.utils.calcApproxTextWidth=function(a){if("function"===typeof a.style&&"function"===typeof a.text){var b=parseInt(a.style("font-size").replace("px",""));return a.text().length*b*.5}return 0};r.utils.NaNtoZero=function(a){return"number"!==typeof a||isNaN(a)||null===a||Infinity===a?0:a};r.utils.optionsFunc=function(a){a&&d3.map(a).forEach(function(a,m){if("function"===
typeof this[a])this[a](m)}.bind(this));return this};r.models.axis=function(){function a(p){p.each(function(a){a=d3.select(this).selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");var p=a.select("g");null!==E?b.ticks(E):"top"!=b.orient()&&"bottom"!=b.orient()||b.ticks(Math.abs(f.range()[1]-f.range()[0])/100);p.transition().call(b);T=T||b.scale();var r=b.tickFormat();null==r&&(r=T.tickFormat());var C=p.selectAll("text.nv-axislabel").data([l||
null]);C.exit().remove();switch(b.orient()){case "top":C.enter().append("text").attr("class","nv-axislabel");var P=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);C.attr("text-anchor","middle").attr("y",0).attr("x",P/2);v&&(P=a.selectAll("g.nv-axisMaxMin").data(f.domain()),P.enter().append("g").attr("class","nv-axisMaxMin").append("text"),P.exit().remove(),P.attr("transform",function(a,b){return"translate("+f(a)+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-b.tickPadding()).attr("text-anchor","middle").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),P.transition().attr("transform",function(a,b){return"translate("+f.range()[b]+",0)"}));break;case "bottom":var O=36,w=30,F=p.selectAll("g").select("text");I%360&&(F.each(function(a,b){var f=this.getBBox().width;f>w&&(w=f)}),P=Math.abs(Math.sin(I*Math.PI/180)),O=(P?P*w:w)+30,F.attr("transform",function(a,b,f){return"rotate("+I+" 0,0)"}).style("text-anchor",0<I%360?"start":"end"));C.enter().append("text").attr("class",
"nv-axislabel");P=2==f.range().length?f.range()[1]:f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]);C.attr("text-anchor","middle").attr("y",O).attr("x",P/2);v&&(P=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),P.enter().append("g").attr("class","nv-axisMaxMin").append("text"),P.exit().remove(),P.attr("transform",function(a,b){return"translate("+(f(a)+(H?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",b.tickPadding()).attr("transform",
function(a,b,f){return"rotate("+I+" 0,0)"}).style("text-anchor",I?0<I%360?"start":"end":"middle").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),P.transition().attr("transform",function(a,b){return"translate("+(f(a)+(H?f.rangeBand()/2:0))+",0)"}));D&&F.attr("transform",function(a,b){return"translate(0,"+(0==b%2?"0":"12")+")"});break;case "right":C.enter().append("text").attr("class","nv-axislabel");C.style("text-anchor",G?"middle":"begin").attr("transform",G?"rotate(90)":"").attr("y",
G?-Math.max(m.right,B)+12:-10).attr("x",G?f.range()[0]/2:b.tickPadding());v&&(P=a.selectAll("g.nv-axisMaxMin").data(f.domain()),P.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),P.exit().remove(),P.attr("transform",function(a,b){return"translate(0,"+f(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",b.tickPadding()).style("text-anchor","start").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),P.transition().attr("transform",function(a,
b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1));break;case "left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",G?"middle":"end").attr("transform",G?"rotate(-90)":"").attr("y",G?-Math.max(m.left,B)+M:-10).attr("x",G?-f.range()[0]/2:-b.tickPadding()),v&&(P=a.selectAll("g.nv-axisMaxMin").data(f.domain()),P.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),P.exit().remove(),P.attr("transform",function(a,b){return"translate(0,"+
T(a)+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-b.tickPadding()).attr("text-anchor","end").text(function(a,b){var f=r(a);return(""+f).match("NaN")?"":f}),P.transition().attr("transform",function(a,b){return"translate(0,"+f.range()[b]+")"}).select("text").style("opacity",1))}C.text(function(a){return a});!v||"left"!==b.orient()&&"right"!==b.orient()||(p.selectAll("g").each(function(a,b){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<
a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,b){return b?0:1}));if(v&&("top"===b.orient()||"bottom"===b.orient())){var A=[];a.selectAll("g.nv-axisMaxMin").each(function(a,b){try{b?A.push(f(a)-this.getBBox().width-4):A.push(f(a)+this.getBBox().width+4)}catch(l){b?A.push(f(a)-4):A.push(f(a)+4)}});p.selectAll("g").each(function(a,b){if(f(a)<A[0]||
f(a)>A[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}u&&p.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a.__data__)/1E6)&&void 0!==a.__data__}).classed("zero",!0);T=f.copy()});return a}var b=d3.svg.axis(),m={top:0,right:0,bottom:0,left:0},B=75,p=60,f=d3.scale.linear(),l=null,v=!0,u=!0,I=0,G=!0,D=!1,H=!1,E=null,M=12;b.scale(f).orient("bottom").tickFormat(function(a){return a});var T;a.axis=b;d3.rebind(a,b,"orient","tickValues","tickSubdivide",
"tickSize","tickPadding","tickFormat");d3.rebind(a,f,"domain","range","rangeBand","rangeBands");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;m.right="undefined"!=typeof b.right?b.right:m.right;m.bottom="undefined"!=typeof b.bottom?b.bottom:m.bottom;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.width=function(b){if(!arguments.length)return B;B=b;return a};a.ticks=function(b){if(!arguments.length)return E;
E=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.axisLabel=function(b){if(!arguments.length)return l;l=b;return a};a.showMaxMin=function(b){if(!arguments.length)return v;v=b;return a};a.highlightZero=function(b){if(!arguments.length)return u;u=b;return a};a.scale=function(l){if(!arguments.length)return f;f=l;b.scale(f);H="function"===typeof f.rangeBands;d3.rebind(a,f,"domain","range","rangeBand","rangeBands");return a};a.rotateYLabel=function(b){if(!arguments.length)return G;
G=b;return a};a.rotateLabels=function(b){if(!arguments.length)return I;I=b;return a};a.staggerLabels=function(b){if(!arguments.length)return D;D=b;return a};a.axisLabelDistance=function(b){if(!arguments.length)return M;M=b;return a};return a};r.models.historicalBar=function(){function a(R){R.each(function(a){var R=m-b.left-b.right,w=B-b.top-b.bottom,F=d3.select(this);f.domain(M||d3.extent(a[0].values.map(v).concat(I)));D?f.range(C||[.5*R/a[0].values.length,R*(a[0].values.length-.5)/a[0].values.length]):
f.range(C||[0,R]);l.domain(T||d3.extent(a[0].values.map(u).concat(G))).range(N||[w,0]);f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):l.domain([-1,1]));var A=F.selectAll("g.nv-wrap.nv-historicalBar-"+p).data([a[0].values]),q=A.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
p),S=q.append("defs"),q=q.append("g"),X=A.select("g");q.append("g").attr("class","nv-bars");A.attr("transform","translate("+b.left+","+b.top+")");F.on("click",function(a,b){Q.chartClick({data:a,index:b,pos:d3.event,id:p})});S.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");A.select("#nv-chart-clip-path-"+p+" rect").attr("width",R).attr("height",w);X.attr("clip-path",H?"url(#nv-chart-clip-path-"+p+")":"");w=A.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},function(a,
b){return v(a,b)});w.exit().remove();w.enter().append("rect").attr("x",0).attr("y",function(a,b){return r.utils.NaNtoZero(l(Math.max(0,u(a,b))))}).attr("height",function(a,b){return r.utils.NaNtoZero(Math.abs(l(u(a,b))-l(0)))}).attr("transform",function(b,l){return"translate("+(f(v(b,l))-R/a[0].values.length*.45)+",0)"}).on("mouseover",function(b,q){J&&(d3.select(this).classed("hover",!0),Q.elementMouseover({point:b,series:a[0],pos:[f(v(b,q)),l(u(b,q))],pointIndex:q,seriesIndex:0,e:d3.event}))}).on("mouseout",
function(b,f){J&&(d3.select(this).classed("hover",!1),Q.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event}))}).on("click",function(a,b){J&&(Q.elementClick({value:u(a,b),data:a,index:b,pos:[f(v(a,b)),l(u(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())}).on("dblclick",function(a,b){J&&(Q.elementDblClick({value:u(a,b),data:a,index:b,pos:[f(v(a,b)),l(u(a,b))],e:d3.event,id:p}),d3.event.stopPropagation())});w.attr("fill",function(a,b){return E(a,b)}).attr("class",function(a,
b,f){return(0>u(a,b)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+f+"-"+b}).transition().attr("transform",function(b,l){return"translate("+(f(v(b,l))-R/a[0].values.length*.45)+",0)"}).attr("width",R/a[0].values.length*.9);w.transition().attr("y",function(a,b){var f=0>u(a,b)?l(0):1>l(0)-l(u(a,b))?l(0)-1:l(u(a,b));return r.utils.NaNtoZero(f)}).attr("height",function(a,b){return r.utils.NaNtoZero(Math.max(Math.abs(l(u(a,b))-l(0)),1))})});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,
p=Math.floor(1E4*Math.random()),f=d3.scale.linear(),l=d3.scale.linear(),v=function(a){return a.x},u=function(a){return a.y},I=[],G=[0],D=!1,H=!0,E=r.utils.defaultColor(),M,T,C,N,Q=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),J=!0;a.highlightPoint=function(a,b){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar-0-"+a).classed("hover",b)};a.clearHighlights=function(){d3.select(".nv-historicalBar-"+p).select(".nv-bars .nv-bar.hover").classed("hover",
!1)};a.dispatch=Q;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return u;u=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};
a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return l;l=b;return a};a.xDomain=function(b){if(!arguments.length)return M;M=b;return a};a.yDomain=function(b){if(!arguments.length)return T;T=b;return a};a.xRange=function(b){if(!arguments.length)return C;C=b;return a};a.yRange=function(b){if(!arguments.length)return N;N=b;return a};a.forceX=function(b){if(!arguments.length)return I;
I=b;return a};a.forceY=function(b){if(!arguments.length)return G;G=b;return a};a.padData=function(b){if(!arguments.length)return D;D=b;return a};a.clipEdge=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return E;E=r.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.interactive=function(b){if(!arguments.length)return J;J=!1;return a};return a};r.models.bullet=function(){function a(m){m.each(function(a,m){var r=
u-b.left-b.right,E=I-b.top-b.bottom,G=d3.select(this),J=p.call(this,a,m).slice().sort(d3.descending),R=f.call(this,a,m).slice().sort(d3.descending),P=l.call(this,a,m).slice().sort(d3.descending),O=(a.rangeLabels?a.rangeLabels:[]).slice(),w=(a.markerLabels?a.markerLabels:[]).slice(),F=(a.measureLabels?a.measureLabels:[]).slice(),A=d3.scale.linear().domain(d3.extent(d3.merge([v,J]))).range(B?[r,0]:[0,r]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(A.range());this.__chart__=A;var r=
d3.min(J),q=d3.max(J),J=J[1],G=G.selectAll("g.nv-wrap.nv-bullet").data([a]),S=G.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),X=G.select("g");S.append("rect").attr("class","nv-range nv-rangeMax");S.append("rect").attr("class","nv-range nv-rangeAvg");S.append("rect").attr("class","nv-range nv-rangeMin");S.append("rect").attr("class","nv-measure");S.append("path").attr("class","nv-markerTriangle");G.attr("transform","translate("+b.left+","+b.top+")");var S=function(a){return Math.abs(A(a)-
A(0))},U=function(a){return 0>a?A(a):A(0)};X.select("rect.nv-rangeMax").attr("height",E).attr("width",S(0<q?q:r)).attr("x",U(0<q?q:r)).datum(0<q?q:r);X.select("rect.nv-rangeAvg").attr("height",E).attr("width",S(J)).attr("x",U(J)).datum(J);X.select("rect.nv-rangeMin").attr("height",E).attr("width",S(q)).attr("x",U(q)).attr("width",S(0<q?r:q)).attr("x",U(0<q?r:q)).datum(0<q?r:q);X.select("rect.nv-measure").style("fill",D).attr("height",E/3).attr("y",E/3).attr("width",0>P?A(0)-A(P[0]):A(P[0])-A(0)).attr("x",
U(P)).on("mouseover",function(){H.elementMouseover({value:P[0],label:F[0]||"Current",pos:[A(P[0]),E/2]})}).on("mouseout",function(){H.elementMouseout({value:P[0],label:F[0]||"Current"})});r=E/6;if(R[0])X.selectAll("path.nv-markerTriangle").attr("transform",function(a){return"translate("+A(R[0])+","+E/2+")"}).attr("d","M0,"+r+"L"+r+","+-r+" "+-r+","+-r+"Z").on("mouseover",function(){H.elementMouseover({value:R[0],label:w[0]||"Previous",pos:[A(R[0]),E/2]})}).on("mouseout",function(){H.elementMouseout({value:R[0],
label:w[0]||"Previous"})});else X.selectAll("path.nv-markerTriangle").remove();G.selectAll(".nv-range").on("mouseover",function(a,b){H.elementMouseover({value:a,label:O[b]||(b?1==b?"Mean":"Minimum":"Maximum"),pos:[A(a),E/2]})}).on("mouseout",function(a,b){H.elementMouseout({value:a,label:O[b]||(b?1==b?"Mean":"Minimum":"Maximum")})})});return a}var b={top:0,right:0,bottom:0,left:0},m="left",B=!1,p=function(a){return a.ranges},f=function(a){return a.markers},l=function(a){return a.measures},v=[0],u=
380,I=30,G=null,D=r.utils.getColor(["#1f77b4"]),H=d3.dispatch("elementMouseover","elementMouseout");a.dispatch=H;a.options=r.utils.optionsFunc.bind(a);a.orient=function(b){if(!arguments.length)return m;m=b;B="right"==m||"bottom"==m;return a};a.ranges=function(b){if(!arguments.length)return p;p=b;return a};a.markers=function(b){if(!arguments.length)return f;f=b;return a};a.measures=function(b){if(!arguments.length)return l;l=b;return a};a.forceX=function(b){if(!arguments.length)return v;v=b;return a};
a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.tickFormat=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return D;
D=r.utils.getColor(b);return a};return a};r.models.bulletChart=function(){function a(m){m.each(function(C,N){var Q=d3.select(this),J=(u||parseInt(Q.style("width"))||960)-p.left-p.right,R=I-p.top-p.bottom,P=this;a.update=function(){a(m)};a.container=this;if(C&&f.call(this,C,N))Q.selectAll(".nv-noData").remove();else return Q=Q.selectAll(".nv-noData").data([E]),Q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Q.attr("x",p.left+J/2).attr("y",18+
p.top+R/2).text(function(a){return a}),a;var O=f.call(this,C,N).slice().sort(d3.descending),w=l.call(this,C,N).slice().sort(d3.descending),F=v.call(this,C,N).slice().sort(d3.descending),A=Q.selectAll("g.nv-wrap.nv-bulletChart").data([C]),q=A.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),Q=A.select("g");q.append("g").attr("class","nv-bulletWrap");q.append("g").attr("class","nv-titles");A.attr("transform","translate("+p.left+","+p.top+")");var S=d3.scale.linear().domain([0,
Math.max(O[0],w[0],F[0])]).range(B?[J,0]:[0,J]),X=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(S.range());this.__chart__=S;O=q.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(I-p.top-p.bottom)/2+")");O.append("text").attr("class","nv-title").text(function(a){return a.title});O.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});b.width(J).height(R);O=Q.select(".nv-bulletWrap");d3.transition(O).call(b);
var U=G||S.tickFormat(J/100),J=Q.selectAll("g.nv-tick").data(S.ticks(J/50),function(a){return this.textContent||U(a)}),Q=J.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+X(a)+",0)"}).style("opacity",1E-6);Q.append("line").attr("y1",R).attr("y2",7*R/6);Q.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*R/6).text(U);Q=d3.transition(J).attr("transform",function(a){return"translate("+S(a)+",0)"}).style("opacity",1);Q.select("line").attr("y1",
R).attr("y2",7*R/6);Q.select("text").attr("y",7*R/6);d3.transition(J.exit()).attr("transform",function(a){return"translate("+S(a)+",0)"}).style("opacity",1E-6).remove();M.on("tooltipShow",function(b){b.key=C.title;if(D){var f=P.parentNode,l=b.pos[0]+(f.offsetLeft||0)+p.left,k=b.pos[1]+(f.offsetTop||0)+p.top,q=H(b.key,b.label,b.value,b,a);r.tooltip.show([l,k],q,0>b.value?"e":"w",null,f)}})});d3.timer.flush();return a}var b=r.models.bullet(),m="left",B=!1,p={top:5,right:40,bottom:20,left:120},f=function(a){return a.ranges},
l=function(a){return a.markers},v=function(a){return a.measures},u=null,I=55,G=null,D=!0,H=function(a,b,f,l,m){return"<h3>"+b+"</h3><p>"+f+"</p>"},E="No Data Available.",M=d3.dispatch("tooltipShow","tooltipHide");b.dispatch.on("elementMouseover.tooltip",function(a){M.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){M.tooltipHide(a)});M.on("tooltipHide",function(){D&&r.tooltip.cleanup()});a.dispatch=M;a.bullet=b;d3.rebind(a,b,"color");a.options=r.utils.optionsFunc.bind(a);a.orient=
function(b){if(!arguments.length)return m;m=b;B="right"==m||"bottom"==m;return a};a.ranges=function(b){if(!arguments.length)return f;f=b;return a};a.markers=function(b){if(!arguments.length)return l;l=b;return a};a.measures=function(b){if(!arguments.length)return v;v=b;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;
p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.tickFormat=function(b){if(!arguments.length)return G;G=b;return a};a.tooltips=function(b){if(!arguments.length)return D;D=b;return a};a.tooltipContent=function(b){if(!arguments.length)return H;H=b;return a};a.noData=function(b){if(!arguments.length)return E;E=b;return a};return a};r.models.cumulativeLineChart=function(){function a(k){k.each(function(k){function L(){W.data([V]);
var b=a.transitionDuration();a.transitionDuration(0);a.update();a.transitionDuration(b)}var ga=d3.select(this).classed("nv-chart-"+w,!0),ma=this,Y=(G||parseInt(ga.style("width"))||960)-u.left-u.right,ea=(D||parseInt(ga.style("height"))||400)-u.top-u.bottom;a.update=function(){ga.transition().duration(U).call(a)};a.container=this;F.disabled=k.map(function(a){return!!a.disabled});if(!A){var ha;A={};for(ha in F)A[ha]=F[ha]instanceof Array?F[ha].slice(0):F[ha]}ha=d3.behavior.drag().on("dragstart",function(b,
k){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,b){V.x=d3.event.x;V.i=Math.round(Z.invert(V.x));L()}).on("dragend",function(b,k){d3.select(a.container).style("cursor","auto");F.index=V.i;X.stateChange(F)});if(k&&k.length&&k.filter(function(a){return a.values.length}).length)ga.selectAll(".nv-noData").remove();else return ha=ga.selectAll(".nv-noData").data([q]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",
u.left+Y/2).attr("y",u.top+ea/2).text(function(a){return a}),a;P=m.xScale();O=m.yScale();if(J)m.yDomain(null);else{var ca=k.filter(function(a){return!a.disabled}).map(function(a,b){var k=d3.extent(a.values,m.y());-.95>k[0]&&(k[0]=-.95);return[(k[0]-k[1])/(1+k[1]),(k[1]-k[0])/(1+k[0])]}),ca=[d3.min(ca,function(a){return a[0]}),d3.max(ca,function(a){return a[1]})];m.yDomain(ca)}Z.domain([0,k[0].values.length-1]).range([0,Y]).clamp(!0);k=b(V.i,k);var ba=Q?"none":"all",na=ga.selectAll("g.nv-wrap.nv-cumulativeLine").data([k]),
fa=na.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ca=na.select("g");fa.append("g").attr("class","nv-interactive");fa.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");fa.append("g").attr("class","nv-y nv-axis");fa.append("g").attr("class","nv-background");fa.append("g").attr("class","nv-linesWrap").style("pointer-events",ba);fa.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");fa.append("g").attr("class","nv-legendWrap");
fa.append("g").attr("class","nv-controlsWrap");H&&(f.width(Y),ca.select(".nv-legendWrap").datum(k).call(f),u.top!=f.height()&&(u.top=f.height(),ea=(D||parseInt(ga.style("height"))||400)-u.top-u.bottom),ca.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")"));N&&(ba=[{key:"Re-scale y-axis",disabled:!J}],l.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ca.select(".nv-controlsWrap").datum(ba).attr("transform","translate(0,"+-u.top+")").call(l));
na.attr("transform","translate("+u.left+","+u.top+")");T&&ca.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");ba=k.filter(function(a){return a.tempDisabled});na.select(".tempDisabled").remove();ba.length&&na.append("text").attr("class","tempDisabled").attr("x",Y/2).attr("y","-.71em").style("text-anchor","end").text(ba.map(function(a){return a.key}).join(", ")+" values cannot be calculated for this time period.");Q&&(v.width(Y).height(ea).margin({left:u.left,top:u.top}).svgContainer(ga).xScale(P),
na.select(".nv-interactive").call(v));fa.select(".nv-background").append("rect");ca.select(".nv-background rect").attr("width",Y).attr("height",ea);m.y(function(a){return a.display.y}).width(Y).height(ea).color(k.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!k[b].disabled&&!k[b].tempDisabled}));na=ca.select(".nv-linesWrap").datum(k.filter(function(a){return!a.disabled&&!a.tempDisabled}));na.call(m);k.forEach(function(a,b){a.seriesIndex=b});fa=k.filter(function(a){return!a.disabled&&
!!S(a)});fa=ca.select(".nv-avgLinesWrap").selectAll("line").data(fa,function(a){return a.key});ba=function(a){a=O(S(a));return 0>a?0:a>ea?ea:a};fa.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,b){return m.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",Y).attr("y1",ba).attr("y2",ba);fa.style("stroke-opacity",function(a){a=O(S(a));return 0>a||a>ea?0:1}).attr("x1",0).attr("x2",Y).attr("y1",ba).attr("y2",ba);fa.exit().remove();var W=na.selectAll(".nv-indexLine").data([V]);
W.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ha);W.attr("transform",function(a){return"translate("+Z(a.i)+",0)"}).attr("height",ea);E&&(B.scale(P).ticks(Math.min(k[0].values.length,Y/70)).tickSize(-ea,0),ca.select(".nv-x.nv-axis").attr("transform","translate(0,"+O.range()[0]+")"),d3.transition(ca.select(".nv-x.nv-axis")).call(B));M&&(p.scale(O).ticks(ea/36).tickSize(-Y,0),d3.transition(ca.select(".nv-y.nv-axis")).call(p));
ca.select(".nv-background rect").on("click",function(){V.x=d3.mouse(this)[0];V.i=Math.round(Z.invert(V.x));F.index=V.i;X.stateChange(F);L()});m.dispatch.on("elementClick",function(a){V.i=a.pointIndex;V.x=Z(V.i);F.index=V.i;X.stateChange(F);L()});l.dispatch.on("legendClick",function(b,k){b.disabled=!b.disabled;J=!b.disabled;F.rescaleY=J;X.stateChange(F);a.update()});f.dispatch.on("stateChange",function(b){F.disabled=b.disabled;X.stateChange(F);a.update()});v.dispatch.on("elementMousemove",function(b){m.clearHighlights();
var f,l,q,w=[];k.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(k,y){l=r.interactiveBisect(k.values,b.pointXValue,a.x());m.highlightPoint(y,l,!0);var p=k.values[l];"undefined"!==typeof p&&("undefined"===typeof f&&(f=p),"undefined"===typeof q&&(q=a.xScale()(a.x()(p,l))),w.push({key:k.key,value:a.y()(p,l),color:I(k,k.seriesIndex)}))});if(2<w.length){var A=a.yScale().invert(b.mouseY),F=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),A=r.nearestValueIndex(w.map(function(a){return a.value}),
A,F);null!==A&&(w[A].highlight=!0)}A=B.tickFormat()(a.x()(f,l),l);v.tooltip.position({left:q+u.left,top:b.mouseY+u.top}).chartContainer(ma.parentNode).enabled(C).valueFormatter(function(a,b){return p.tickFormat()(a)}).data({value:A,series:w})();v.renderGuideLine(q)});v.dispatch.on("elementMouseout",function(a){X.tooltipHide();m.clearHighlights()});X.on("tooltipShow",function(b){if(C){var k=ma.parentNode,f=b.pos[0]+(k.offsetLeft||0),l=b.pos[1]+(k.offsetTop||0),q=B.tickFormat()(m.x()(b.point,b.pointIndex)),
y=p.tickFormat()(m.y()(b.point,b.pointIndex));b=R(b.series.key,q,y,b,a);r.tooltip.show([f,l],b,null,null,k)}});X.on("changeState",function(b){"undefined"!==typeof b.disabled&&(k.forEach(function(a,k){a.disabled=b.disabled[k]}),F.disabled=b.disabled);"undefined"!==typeof b.index&&(V.i=b.index,V.x=Z(V.i),F.index=b.index,W.data([V]));"undefined"!==typeof b.rescaleY&&(J=b.rescaleY);a.update()})});return a}function b(a,b){return b.map(function(b,f){if(!b.values)return b;var l=b.values[a];if(null==l)return b;
var q=m.y()(l,a);if(-.95>q&&!L)return b.tempDisabled=!0,b;b.tempDisabled=!1;b.values=b.values.map(function(a,b){a.display={y:(m.y()(a,b)-q)/(1+q)};return a});return b})}var m=r.models.line(),B=r.models.axis(),p=r.models.axis(),f=r.models.legend(),l=r.models.legend(),v=r.interactiveGuideline(),u={top:30,right:30,bottom:50,left:60},I=r.utils.defaultColor(),G=null,D=null,H=!0,E=!0,M=!0,T=!1,C=!0,N=!0,Q=!1,J=!0,R=function(a,b,f,l,q){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},P,O,w=m.id(),F={index:0,
rescaleY:J},A=null,q="No Data Available.",S=function(a){return a.average},X=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),U=250,L=!1;B.orient("bottom").tickPadding(7);p.orient(T?"right":"left");l.updateState(!1);var Z=d3.scale.linear(),V={i:0,x:0};m.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];X.tooltipShow(a)});m.dispatch.on("elementMouseout.tooltip",function(a){X.tooltipHide(a)});X.on("tooltipHide",function(){C&&r.tooltip.cleanup()});
a.dispatch=X;a.lines=m;a.legend=f;a.xAxis=B;a.yAxis=p;a.interactiveLayer=v;d3.rebind(a,m,"defined","isArea","x","y","xScale","yScale","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","useVoronoi","id");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return u;u.top="undefined"!=typeof b.top?b.top:u.top;u.right="undefined"!=typeof b.right?b.right:u.right;u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom;u.left=
"undefined"!=typeof b.left?b.left:u.left;return a};a.width=function(b){if(!arguments.length)return G;G=b;return a};a.height=function(b){if(!arguments.length)return D;D=b;return a};a.color=function(b){if(!arguments.length)return I;I=r.utils.getColor(b);f.color(I);return a};a.rescaleY=function(b){if(!arguments.length)return J;J=b;return a};a.showControls=function(b){if(!arguments.length)return N;N=b;return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return Q;Q=b;!0===b&&(a.interactive(!1),
a.useVoronoi(!1));return a};a.showLegend=function(b){if(!arguments.length)return H;H=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return M;M=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return T;T=b;p.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return C;C=b;return a};a.tooltipContent=function(b){if(!arguments.length)return R;R=b;return a};a.state=function(b){if(!arguments.length)return F;
F=b;return a};a.defaultState=function(b){if(!arguments.length)return A;A=b;return a};a.noData=function(b){if(!arguments.length)return q;q=b;return a};a.average=function(b){if(!arguments.length)return S;S=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.noErrorCheck=function(b){if(!arguments.length)return L;L=b;return a};return a};r.models.discreteBar=function(){function a(p){p.each(function(a){var p=m-b.left-b.right,w=B-b.top-b.bottom,r=d3.select(this);a.forEach(function(a,
b){a.values.forEach(function(a){a.series=b})});var A=E&&M?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:u(a,b),y0:a.y0}})});f.domain(E||d3.merge(A).map(function(a){return a.x})).rangeBands(T||[0,p],.1);l.domain(M||d3.extent(d3.merge(A).map(function(a){return a.y}).concat(I)));D?l.range(C||[w-(0>l.domain()[0]?12:0),0<l.domain()[1]?12:0]):l.range(C||[w,0]);J=J||l.copy().range([l(0),l(0)]);p=r.selectAll("g.nv-wrap.nv-discretebar").data([a]);w=p.enter().append("g").attr("class",
"nvd3 nv-wrap nv-discretebar").append("g");p.select("g");w.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});
p.transition().style("stroke-opacity",1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();w=p.enter().append("g").attr("transform",function(a,b,m){return"translate("+(f(v(a,b))+.05*f.rangeBand())+", "+l(0)+")"}).on("mouseover",function(b,m){d3.select(this).classed("hover",!0);N.elementMouseover({value:u(b,m),point:b,series:a[b.series],pos:[f(v(b,m))+f.rangeBand()*(b.series+.5)/a.length,l(u(b,m))],pointIndex:m,seriesIndex:b.series,e:d3.event})}).on("mouseout",
function(b,f){d3.select(this).classed("hover",!1);N.elementMouseout({value:u(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,m){N.elementClick({value:u(b,m),point:b,series:a[b.series],pos:[f(v(b,m))+f.rangeBand()*(b.series+.5)/a.length,l(u(b,m))],pointIndex:m,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,m){N.elementDblClick({value:u(b,m),point:b,series:a[b.series],pos:[f(v(b,m))+f.rangeBand()*(b.series+
.5)/a.length,l(u(b,m))],pointIndex:m,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});w.append("rect").attr("height",0).attr("width",.9*f.rangeBand()/a.length);D?(w.append("text").attr("text-anchor","middle"),p.select("text").text(function(a,b){return H(u(a,b))}).transition().attr("x",.9*f.rangeBand()/2).attr("y",function(a,b){return 0>u(a,b)?l(u(a,b))-l(0)+12:-4})):p.selectAll("text").remove();p.attr("class",function(a,b){return 0>u(a,b)?"nv-bar negative":"nv-bar positive"}).style("fill",
function(a,b){return a.color||G(a,b)}).style("stroke",function(a,b){return a.color||G(a,b)}).select("rect").attr("class",Q).transition().attr("width",.9*f.rangeBand()/a.length);p.transition().attr("transform",function(a,b){var m=f(v(a,b))+.05*f.rangeBand(),p=0>u(a,b)?l(0):1>l(0)-l(u(a,b))?l(0)-1:l(u(a,b));return"translate("+m+", "+p+")"}).select("rect").attr("height",function(a,b){return Math.max(Math.abs(l(u(a,b))-l(M&&M[0]||0))||1)});f.copy();J=l.copy()});return a}var b={top:0,right:0,bottom:0,
left:0},m=960,B=500,p=Math.floor(1E4*Math.random()),f=d3.scale.ordinal(),l=d3.scale.linear(),v=function(a){return a.x},u=function(a){return a.y},I=[0],G=r.utils.defaultColor(),D=!1,H=d3.format(",.2f"),E,M,T,C,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),Q="discreteBar",J;a.dispatch=N;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return u;u=b;return a};a.margin=
function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return l;l=b;
return a};a.xDomain=function(b){if(!arguments.length)return E;E=b;return a};a.yDomain=function(b){if(!arguments.length)return M;M=b;return a};a.xRange=function(b){if(!arguments.length)return T;T=b;return a};a.yRange=function(b){if(!arguments.length)return C;C=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return G;G=r.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};a.showValues=function(b){if(!arguments.length)return D;
D=b;return a};a.valueFormat=function(b){if(!arguments.length)return H;H=b;return a};a.rectClass=function(b){if(!arguments.length)return Q;Q=b;return a};return a};r.models.discreteBarChart=function(){function a(v){v.each(function(v){var J=d3.select(this),O=this,w=(f||parseInt(J.style("width"))||960)-p.left-p.right,F=(l||parseInt(J.style("height"))||400)-p.top-p.bottom;a.update=function(){N.beforeUpdate();J.transition().duration(Q).call(a)};a.container=this;if(v&&v.length&&v.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();
else return v=J.selectAll(".nv-noData").data([C]),v.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),v.attr("x",p.left+w/2).attr("y",p.top+F/2).text(function(a){return a}),a;M=b.xScale();T=b.yScale().clamp(!0);var A=J.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([v]),q=A.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),S=q.append("defs"),A=A.select("g");q.append("g").attr("class","nv-x nv-axis");q.append("g").attr("class",
"nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");q.append("g").attr("class","nv-barsWrap");A.attr("transform","translate("+p.left+","+p.top+")");G&&A.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)");b.width(w).height(F);A.select(".nv-barsWrap").datum(v.filter(function(a){return!a.disabled})).transition().call(b);S.append("clipPath").attr("id","nv-x-label-clip-"+b.id()).append("rect");A.select("#nv-x-label-clip-"+b.id()+" rect").attr("width",M.rangeBand()*(D?2:1)).attr("height",
16).attr("x",-M.rangeBand()/(D?1:2));u&&(m.scale(M).ticks(w/100).tickSize(-F,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+(T.range()[0]+(b.showValues()&&0>T.domain()[0]?16:0))+")"),A.select(".nv-x.nv-axis").transition().call(m),v=A.select(".nv-x.nv-axis").selectAll("g"),D&&v.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?"5":"17")+")"}));I&&(B.scale(T).ticks(F/36).tickSize(-w,0),A.select(".nv-y.nv-axis").transition().call(B));A.select(".nv-zeroLine line").attr("x1",
0).attr("x2",w).attr("y1",T(0)).attr("y2",T(0));N.on("tooltipShow",function(f){if(H){var l=O.parentNode,q=f.pos[0]+(l.offsetLeft||0),p=f.pos[1]+(l.offsetTop||0),w=m.tickFormat()(b.x()(f.point,f.pointIndex)),k=B.tickFormat()(b.y()(f.point,f.pointIndex)),w=E(f.series.key,w,k,f,a);r.tooltip.show([q,p],w,0>f.value?"n":"s",null,l)}})});return a}var b=r.models.discreteBar(),m=r.models.axis(),B=r.models.axis(),p={top:15,right:10,bottom:50,left:60},f=null,l=null,v=r.utils.getColor(),u=!0,I=!0,G=!1,D=!1,H=
!0,E=function(a,b,f,l,m){return"<h3>"+b+"</h3><p>"+f+"</p>"},M,T,C="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate"),Q=250;m.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});B.orient(G?"right":"left").tickFormat(d3.format(",.1f"));b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+p.left,a.pos[1]+p.top];N.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){N.tooltipHide(a)});N.on("tooltipHide",function(){H&&
r.tooltip.cleanup()});a.dispatch=N;a.discretebar=b;a.xAxis=m;a.yAxis=B;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","id","showValues","valueFormat");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return p;p.top="undefined"!=typeof b.top?b.top:p.top;p.right="undefined"!=typeof b.right?b.right:p.right;p.bottom="undefined"!=typeof b.bottom?b.bottom:p.bottom;p.left="undefined"!=typeof b.left?b.left:p.left;return a};a.width=function(b){if(!arguments.length)return f;
f=b;return a};a.height=function(b){if(!arguments.length)return l;l=b;return a};a.color=function(f){if(!arguments.length)return v;v=r.utils.getColor(f);b.color(v);return a};a.showXAxis=function(b){if(!arguments.length)return u;u=b;return a};a.showYAxis=function(b){if(!arguments.length)return I;I=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return G;G=b;B.orient(b?"right":"left");return a};a.staggerLabels=function(b){if(!arguments.length)return D;D=b;return a};a.tooltips=function(b){if(!arguments.length)return H;
H=b;return a};a.tooltipContent=function(b){if(!arguments.length)return E;E=b;return a};a.noData=function(b){if(!arguments.length)return C;C=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Q;Q=b;return a};return a};r.models.distribution=function(){function a(m){m.each(function(a){var m="x"==p?"y":"x",r=d3.select(this);u=u||v;a=r.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");r=a.select("g");a.attr("transform",
"translate("+b.left+","+b.top+")");a=r.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,b){return"nv-dist nv-series-"+b}).style("stroke",function(a,b){return l(a,b)});r=a.selectAll("line.nv-dist"+p).data(function(a){return a.values});r.enter().append("line").attr(p+"1",function(a,b){return u(f(a,b))}).attr(p+"2",function(a,b){return u(f(a,b))});a.exit().selectAll("line.nv-dist"+p).transition().attr(p+"1",function(a,b){return v(f(a,
b))}).attr(p+"2",function(a,b){return v(f(a,b))}).style("stroke-opacity",0).remove();r.attr("class",function(a,b){return"nv-dist"+p+" nv-dist"+p+"-"+b}).attr(m+"1",0).attr(m+"2",B);r.transition().attr(p+"1",function(a,b){return v(f(a,b))}).attr(p+"2",function(a,b){return v(f(a,b))});u=v.copy()});return a}var b={top:0,right:0,bottom:0,left:0},m=400,B=8,p="x",f=function(a){return a[p]},l=r.utils.defaultColor(),v=d3.scale.linear(),u;a.options=r.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.axis=function(b){if(!arguments.length)return p;p=b;return a};a.size=function(b){if(!arguments.length)return B;B=b;return a};a.getData=function(b){if(!arguments.length)return f;f=d3.functor(b);return a};a.scale=function(b){if(!arguments.length)return v;
v=b;return a};a.color=function(b){if(!arguments.length)return l;l=r.utils.getColor(b);return a};return a};r.models.historicalBarChart=function(){function a(O){O.each(function(w){var F=d3.select(this),A=this,q=(v||parseInt(F.style("width"))||960)-f.left-f.right,S=(u||parseInt(F.style("height"))||400)-f.top-f.bottom;a.update=function(){F.transition().duration(P).call(a)};a.container=this;N.disabled=w.map(function(a){return!!a.disabled});if(!Q){var X;Q={};for(X in N)Q[X]=N[X]instanceof Array?N[X].slice(0):
N[X]}if(w&&w.length&&w.filter(function(a){return a.values.length}).length)F.selectAll(".nv-noData").remove();else return X=F.selectAll(".nv-noData").data([J]),X.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),X.attr("x",f.left+q/2).attr("y",f.top+S/2).text(function(a){return a}),a;T=b.xScale();C=b.yScale();var U=F.selectAll("g.nv-wrap.nv-historicalBarChart").data([w]);X=U.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g");
var L=U.select("g");X.append("g").attr("class","nv-x nv-axis");X.append("g").attr("class","nv-y nv-axis");X.append("g").attr("class","nv-barsWrap");X.append("g").attr("class","nv-legendWrap");I&&(p.width(q),L.select(".nv-legendWrap").datum(w).call(p),f.top!=p.height()&&(f.top=p.height(),S=(u||parseInt(F.style("height"))||400)-f.top-f.bottom),U.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"));U.attr("transform","translate("+f.left+","+f.top+")");H&&L.select(".nv-y.nv-axis").attr("transform",
"translate("+q+",0)");b.width(q).height(S).color(w.map(function(a,b){return a.color||l(a,b)}).filter(function(a,b){return!w[b].disabled}));L.select(".nv-barsWrap").datum(w.filter(function(a){return!a.disabled})).transition().call(b);G&&(m.scale(T).tickSize(-S,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+C.range()[0]+")"),L.select(".nv-x.nv-axis").transition().call(m));D&&(B.scale(C).ticks(S/36).tickSize(-q,0),L.select(".nv-y.nv-axis").transition().call(B));p.dispatch.on("legendClick",
function(b,f){b.disabled=!b.disabled;w.filter(function(a){return!a.disabled}).length||w.map(function(a){a.disabled=!1;U.selectAll(".nv-series").classed("disabled",!1);return a});N.disabled=w.map(function(a){return!!a.disabled});R.stateChange(N);O.transition().call(a)});p.dispatch.on("legendDblclick",function(b){w.forEach(function(a){a.disabled=!0});b.disabled=!1;N.disabled=w.map(function(a){return!!a.disabled});R.stateChange(N);a.update()});R.on("tooltipShow",function(f){if(E){var l=A.parentNode;
if(l){var k=d3.select(l).select("svg"),q=k.node()?k.attr("viewBox"):null;q&&(q=q.split(" "),k=parseInt(k.style("width"))/q[2],f.pos[0]*=k,f.pos[1]*=k)}var k=f.pos[0]+(l.offsetLeft||0),q=f.pos[1]+(l.offsetTop||0),p=m.tickFormat()(b.x()(f.point,f.pointIndex)),w=B.tickFormat()(b.y()(f.point,f.pointIndex));f=M(f.series.key,p,w,f,a);r.tooltip.show([k,q],f,null,null,l)}});R.on("changeState",function(b){"undefined"!==typeof b.disabled&&(w.forEach(function(a,k){a.disabled=b.disabled[k]}),N.disabled=b.disabled);
a.update()})});return a}var b=r.models.historicalBar(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f={top:30,right:90,bottom:50,left:90},l=r.utils.defaultColor(),v=null,u=null,I=!1,G=!0,D=!0,H=!1,E=!0,M=function(a,b,f,l,q){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},T,C,N={},Q=null,J="No Data Available.",R=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),P=250;m.orient("bottom").tickPadding(7);B.orient(H?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+f.left,a.pos[1]+f.top];R.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){R.tooltipHide(a)});R.on("tooltipHide",function(){E&&r.tooltip.cleanup()});a.dispatch=R;a.bars=b;a.legend=p;a.xAxis=m;a.yAxis=B;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id","interpolate","highlightPoint","clearHighlights","interactive");a.options=r.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return f;f.top="undefined"!=typeof b.top?b.top:f.top;f.right="undefined"!=typeof b.right?b.right:f.right;f.bottom="undefined"!=typeof b.bottom?b.bottom:f.bottom;f.left="undefined"!=typeof b.left?b.left:f.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return u;u=b;return a};a.color=function(b){if(!arguments.length)return l;l=r.utils.getColor(b);p.color(l);return a};a.showLegend=function(b){if(!arguments.length)return I;
I=b;return a};a.showXAxis=function(b){if(!arguments.length)return G;G=b;return a};a.showYAxis=function(b){if(!arguments.length)return D;D=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return H;H=b;B.orient(b?"right":"left");return a};a.tooltips=function(b){if(!arguments.length)return E;E=b;return a};a.tooltipContent=function(b){if(!arguments.length)return M;M=b;return a};a.state=function(b){if(!arguments.length)return N;N=b;return a};a.defaultState=function(b){if(!arguments.length)return Q;
Q=b;return a};a.noData=function(b){if(!arguments.length)return J;J=b;return a};a.transitionDuration=function(b){if(!arguments.length)return P;P=b;return a};return a};r.models.indentedTree=function(){function a(b){b.each(function(b){function f(b,l,q){d3.event.stopPropagation();if(d3.event.shiftKey&&!q)return d3.event.shiftKey=!1,b.values&&b.values.forEach(function(a){(a.values||a._values)&&f(a,0,!0)}),!0;if(!r(b))return!0;b.values?(b._values=b.values,b.values=null):(b.values=b._values,b._values=null);
a.update()}function m(a){return a._values&&a._values.length?D:a.values&&a.values.length?H:""}function p(a){return a._values&&a._values.length}function r(a){return(a=a.values||a._values)&&a.length}var C=1,w=d3.select(this),F=d3.layout.tree().children(function(a){return a.values}).size([B,20]);a.update=function(){w.transition().duration(600).call(a)};b[0]||(b[0]={key:u});var C=F.nodes(b[0]),A=d3.select(this).selectAll("div").data([[C]]);b=A.enter().append("div").attr("class","nvd3 nv-wrap nv-indentedtree").append("table");
A=A.select("table").attr("width","100%").attr("class",G);if(l){var q=b.append("thead").append("tr");I.forEach(function(a){q.append("th").attr("width",a.width?a.width:"10%").style("text-align","numeric"==a.type?"right":"left").append("span").text(a.label)})}b=A.selectAll("tbody").data(function(a){return a});b.enter().append("tbody");C=d3.max(C,function(a){return a.depth});F.size([B,20*C]);var S=b.selectAll("tr").data(function(a){return a.filter(function(a){return v&&!a.children?v(a):!0})},function(a,
b){return a.id||a.id||++T});S.exit().remove();S.select("img.nv-treeicon").attr("src",m).classed("folded",p);var X=S.enter().append("tr");I.forEach(function(a,b){var l=X.append("td").style("padding-left",function(a){return(b?0:20*a.depth+12+(m(a)?0:16))+"px"},"important").style("text-align","numeric"==a.type?"right":"left");if(0==b)l.append("img").classed("nv-treeicon",!0).classed("nv-folded",p).attr("src",m).style("width","14px").style("height","14px").style("padding","0 1px").style("display",function(a){return m(a)?
"inline-block":"none"}).on("click",f);l.each(function(f){!b&&M(f)?d3.select(this).append("a").attr("href",M).attr("class",d3.functor(a.classes)).append("span"):d3.select(this).append("span");d3.select(this).select("span").attr("class",d3.functor(a.classes)).text(function(b){return a.format?b[a.key]?a.format(b[a.key]):"-":b[a.key]||"-"})});a.showCount&&(l.append("span").attr("class","nv-childrenCount"),S.selectAll("span.nv-childrenCount").text(function(a){return a.values&&a.values.length||a._values&&
a._values.length?"("+(a.values&&a.values.filter(function(a){return v?v(a):!0}).length||a._values&&a._values.filter(function(a){return v?v(a):!0}).length||0)+")":""}))});S.order().on("click",function(a){E.elementClick({row:this,data:a,pos:[a.x,a.y]})}).on("dblclick",function(a){E.elementDblclick({row:this,data:a,pos:[a.x,a.y]})}).on("mouseover",function(a){E.elementMouseover({row:this,data:a,pos:[a.x,a.y]})}).on("mouseout",function(a){E.elementMouseout({row:this,data:a,pos:[a.x,a.y]})})});return a}
var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=r.utils.defaultColor(),f=Math.floor(1E4*Math.random()),l=!0,v=!1,u="No Data Available.",I=[{key:"key",label:"Name",type:"text"}],G=null,D="images/grey-plus.png",H="images/grey-minus.png",E=d3.dispatch("elementClick","elementDblclick","elementMouseover","elementMouseout"),M=function(a){return a.url},T=0;a.options=r.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.color=function(b){if(!arguments.length)return p;p=r.utils.getColor(b);scatter.color(p);return a};a.id=function(b){if(!arguments.length)return f;f=b;return a};a.header=function(b){if(!arguments.length)return l;l=b;return a};a.noData=
function(b){if(!arguments.length)return u;u=b;return a};a.filterZero=function(b){if(!arguments.length)return v;v=b;return a};a.columns=function(b){if(!arguments.length)return I;I=b;return a};a.tableClass=function(b){if(!arguments.length)return G;G=b;return a};a.iconOpen=function(b){if(!arguments.length)return D;D=b;return a};a.iconClose=function(b){if(!arguments.length)return H;H=b;return a};a.getUrl=function(b){if(!arguments.length)return M;M=b;return a};return a};r.models.legend=function(){function a(D){D.each(function(a){var E=
m-b.left-b.right,D=d3.select(this).selectAll("g.nv-legend").data([a]);D.enter().append("g").attr("class","nvd3 nv-legend").append("g");var T=D.select("g");D.attr("transform","translate("+b.left+","+b.top+")");var D=T.selectAll(".nv-series").data(function(a){return a}),C=D.enter().append("g").attr("class","nv-series").on("mouseover",function(a,b){G.legendMouseover(a,b)}).on("mouseout",function(a,b){G.legendMouseout(a,b)}).on("click",function(b,f){G.legendClick(b,f);u&&(I?(a.forEach(function(a){a.disabled=
!0}),b.disabled=!1):(b.disabled=!b.disabled,a.every(function(a){return a.disabled})&&a.forEach(function(a){a.disabled=!1})),G.stateChange({disabled:a.map(function(a){return!!a.disabled})}))}).on("dblclick",function(b,f){G.legendDblclick(b,f);u&&(a.forEach(function(a){a.disabled=!0}),b.disabled=!1,G.stateChange({disabled:a.map(function(a){return!!a.disabled})}))});C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);C.append("text").attr("text-anchor","start").attr("class",
"nv-legend-text").attr("dy",".32em").attr("dx","8");D.classed("disabled",function(a){return a.disabled});D.exit().remove();D.select("circle").style("fill",function(a,b){return a.color||f(a,b)}).style("stroke",function(a,b){return a.color||f(a,b)});D.select("text").text(p);if(l){var N=[];D.each(function(a,b){var f=d3.select(this).select("text"),l;try{if(l=f.getComputedTextLength(),0>=l)throw Error();}catch(m){l=r.utils.calcApproxTextWidth(f)}N.push(l+28)});for(var Q=0,J=0,C=[];J<E&&Q<N.length;)C[Q]=
N[Q],J+=N[Q++];for(0===Q&&(Q=1);J>E&&1<Q;){C=[];Q--;for(J=0;J<N.length;J++)N[J]>(C[J%Q]||0)&&(C[J%Q]=N[J]);J=C.reduce(function(a,b,f,l){return a+b})}for(var R=[],P=E=0;E<Q;E++)R[E]=P,P+=C[E];D.attr("transform",function(a,b){return"translate("+R[b%Q]+","+(5+20*Math.floor(b/Q))+")"});v?T.attr("transform","translate("+(m-b.right-J)+","+b.top+")"):T.attr("transform","translate(0,"+b.top+")");B=b.top+b.bottom+20*Math.ceil(N.length/Q)}else{var O=5,w=5,F=0,A;D.attr("transform",function(a,f){var l=d3.select(this).select("text").node().getComputedTextLength()+
28;A=w;m<b.left+b.right+A+l&&(w=A=5,O+=20);w+=l;w>F&&(F=w);return"translate("+A+","+O+")"});T.attr("transform","translate("+(m-b.right-F)+","+b.top+")");B=b.top+b.bottom+O+15}});return a}var b={top:5,right:0,bottom:5,left:0},m=400,B=20,p=function(a){return a.key},f=r.utils.defaultColor(),l=!0,v=!0,u=!0,I=!1,G=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");a.dispatch=G;a.options=r.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.key=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return f;f=r.utils.getColor(b);return a};a.align=function(b){if(!arguments.length)return l;
l=b;return a};a.rightAlign=function(b){if(!arguments.length)return v;v=b;return a};a.updateState=function(b){if(!arguments.length)return u;u=b;return a};a.radioButtonMode=function(b){if(!arguments.length)return I;I=b;return a};return a};r.models.line=function(){function a(C){C.each(function(a){var C=B-m.left-m.right,J=p-m.top-m.bottom,R=d3.select(this);D=b.xScale();H=b.yScale();M=M||D;T=T||H;a=R.selectAll("g.nv-wrap.nv-line").data([a]);var P=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),
R=P.append("defs"),O=P.append("g"),P=a.select("g");O.append("g").attr("class","nv-groups");O.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+m.left+","+m.top+")");b.width(C).height(J);O=a.select(".nv-scatterWrap");O.transition().call(b);R.append("clipPath").attr("id","nv-edge-clip-"+b.id()).append("rect");a.select("#nv-edge-clip-"+b.id()+" rect").attr("width",C).attr("height",0<J?J:0);P.attr("clip-path",G?"url(#nv-edge-clip-"+b.id()+")":"");O.attr("clip-path",G?"url(#nv-edge-clip-"+
b.id()+")":"");C=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});C.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);C.exit().remove();C.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return f(a,b)}).style("stroke",function(a,b){return f(a,b)});C.transition().style("stroke-opacity",1).style("fill-opacity",.5);J=C.selectAll("path.nv-area").data(function(a){return I(a)?
[a]:[]});J.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(E).defined(u).x(function(a,b){return r.utils.NaNtoZero(M(l(a,b)))}).y0(function(a,b){return r.utils.NaNtoZero(T(v(a,b)))}).y1(function(a,b){return T(0>=H.domain()[0]?0<=H.domain()[1]?0:H.domain()[1]:H.domain()[0])}).apply(this,[a.values])});C.exit().selectAll("path.nv-area").remove();J.transition().attr("d",function(a){return d3.svg.area().interpolate(E).defined(u).x(function(a,b){return r.utils.NaNtoZero(D(l(a,
b)))}).y0(function(a,b){return r.utils.NaNtoZero(H(v(a,b)))}).y1(function(a,b){return H(0>=H.domain()[0]?0<=H.domain()[1]?0:H.domain()[1]:H.domain()[0])}).apply(this,[a.values])});C=C.selectAll("path.nv-line").data(function(a){return[a.values]});C.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(E).defined(u).x(function(a,b){return r.utils.NaNtoZero(M(l(a,b)))}).y(function(a,b){return r.utils.NaNtoZero(T(v(a,b)))}));C.transition().attr("d",d3.svg.line().interpolate(E).defined(u).x(function(a,
b){return r.utils.NaNtoZero(D(l(a,b)))}).y(function(a,b){return r.utils.NaNtoZero(H(v(a,b)))}));M=D.copy();T=H.copy()});return a}var b=r.models.scatter(),m={top:0,right:0,bottom:0,left:0},B=960,p=500,f=r.utils.defaultColor(),l=function(a){return a.x},v=function(a){return a.y},u=function(a,b){return!isNaN(v(a,b))&&null!==v(a,b)},I=function(a){return a.area},G=!1,D,H,E="linear";b.size(16).sizeDomain([16,256]);var M,T;a.dispatch=b.dispatch;a.scatter=b;d3.rebind(a,b,"id","interactive","size","xScale",
"yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","padData","highlightPoint","clearHighlights");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;m.right="undefined"!=typeof b.right?b.right:m.right;m.bottom="undefined"!=typeof b.bottom?b.bottom:m.bottom;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.width=function(b){if(!arguments.length)return B;
B=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.x=function(f){if(!arguments.length)return l;l=f;b.x(f);return a};a.y=function(f){if(!arguments.length)return v;v=f;b.y(f);return a};a.clipEdge=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(l){if(!arguments.length)return f;f=r.utils.getColor(l);b.color(f);return a};a.interpolate=function(b){if(!arguments.length)return E;E=b;return a};a.defined=function(b){if(!arguments.length)return u;u=b;return a};
a.isArea=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};return a};r.models.lineChart=function(){function a(F){F.each(function(A){var q=d3.select(this),F=this,X=(u||parseInt(q.style("width"))||960)-l.left-l.right,U=(I||parseInt(q.style("height"))||400)-l.top-l.bottom;a.update=function(){q.transition().duration(w).call(a)};a.container=this;J.disabled=A.map(function(a){return!!a.disabled});if(!R){var L;R={};for(L in J)R[L]=J[L]instanceof Array?J[L].slice(0):J[L]}if(A&&A.length&&
A.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return L=q.selectAll(".nv-noData").data([P]),L.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),L.attr("x",l.left+X/2).attr("y",l.top+U/2).text(function(a){return a}),a;N=b.xScale();Q=b.yScale();L=q.selectAll("g.nv-wrap.nv-lineChart").data([A]);var Z=L.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),V=L.select("g");Z.append("rect").style("opacity",
0);Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-linesWrap");Z.append("g").attr("class","nv-legendWrap");Z.append("g").attr("class","nv-interactive");V.select("rect").attr("width",X).attr("height",0<U?U:0);G&&(p.width(X),V.select(".nv-legendWrap").datum(A).call(p),l.top!=p.height()&&(l.top=p.height(),U=(I||parseInt(q.style("height"))||400)-l.top-l.bottom),L.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")"));
L.attr("transform","translate("+l.left+","+l.top+")");E&&V.select(".nv-y.nv-axis").attr("transform","translate("+X+",0)");M&&(f.width(X).height(U).margin({left:l.left,top:l.top}).svgContainer(q).xScale(N),L.select(".nv-interactive").call(f));b.width(X).height(U).color(A.map(function(a,b){return a.color||v(a,b)}).filter(function(a,b){return!A[b].disabled}));V.select(".nv-linesWrap").datum(A.filter(function(a){return!a.disabled})).transition().call(b);D&&(m.scale(N).ticks(X/100).tickSize(-U,0),V.select(".nv-x.nv-axis").attr("transform",
"translate(0,"+Q.range()[0]+")"),V.select(".nv-x.nv-axis").transition().call(m));H&&(B.scale(Q).ticks(U/36).tickSize(-X,0),V.select(".nv-y.nv-axis").transition().call(B));p.dispatch.on("stateChange",function(b){J=b;O.stateChange(J);a.update()});f.dispatch.on("elementMousemove",function(k){b.clearHighlights();var q,p,u,w=[];A.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(f,l){p=r.interactiveBisect(f.values,k.pointXValue,a.x());b.highlightPoint(l,p,!0);var m=f.values[p];
"undefined"!==typeof m&&("undefined"===typeof q&&(q=m),"undefined"===typeof u&&(u=a.xScale()(a.x()(m,p))),w.push({key:f.key,value:a.y()(m,p),color:v(f,f.seriesIndex)}))});if(2<w.length){var L=a.yScale().invert(k.mouseY),C=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]),L=r.nearestValueIndex(w.map(function(a){return a.value}),L,C);null!==L&&(w[L].highlight=!0)}L=m.tickFormat()(a.x()(q,p));f.tooltip.position({left:u+l.left,top:k.mouseY+l.top}).chartContainer(F.parentNode).enabled(T).valueFormatter(function(a,
b){return B.tickFormat()(a)}).data({value:L,series:w})();f.renderGuideLine(u)});f.dispatch.on("elementMouseout",function(a){O.tooltipHide();b.clearHighlights()});O.on("tooltipShow",function(k){if(T){var f=F.parentNode,l=k.pos[0]+(f.offsetLeft||0),q=k.pos[1]+(f.offsetTop||0),p=m.tickFormat()(b.x()(k.point,k.pointIndex)),u=B.tickFormat()(b.y()(k.point,k.pointIndex));k=C(k.series.key,p,u,k,a);r.tooltip.show([l,q],k,null,null,f)}});O.on("changeState",function(b){"undefined"!==typeof b.disabled&&A.length===
b.disabled.length&&(A.forEach(function(a,f){a.disabled=b.disabled[f]}),J.disabled=b.disabled);a.update()})});return a}var b=r.models.line(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f=r.interactiveGuideline(),l={top:30,right:20,bottom:50,left:60},v=r.utils.defaultColor(),u=null,I=null,G=!0,D=!0,H=!0,E=!1,M=!1,T=!0,C=function(a,b,f,l,m){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},N,Q,J={},R=null,P="No Data Available.",O=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),
w=250;m.orient("bottom").tickPadding(7);B.orient(E?"right":"left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top];O.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){T&&r.tooltip.cleanup()});a.dispatch=O;a.lines=b;a.legend=p;a.xAxis=m;a.yAxis=B;a.interactiveLayer=f;d3.rebind(a,b,"defined","isArea","x","y","size","xScale","yScale","xDomain","yDomain","xRange","yRange","forceX","forceY",
"interactive","clipEdge","clipVoronoi","useVoronoi","id","interpolate");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:l.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=
function(b){if(!arguments.length)return v;v=r.utils.getColor(b);p.color(v);return a};a.showLegend=function(b){if(!arguments.length)return G;G=b;return a};a.showXAxis=function(b){if(!arguments.length)return D;D=b;return a};a.showYAxis=function(b){if(!arguments.length)return H;H=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return E;E=b;B.orient(b?"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return M;M=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));
return a};a.tooltips=function(b){if(!arguments.length)return T;T=b;return a};a.tooltipContent=function(b){if(!arguments.length)return C;C=b;return a};a.state=function(b){if(!arguments.length)return J;J=b;return a};a.defaultState=function(b){if(!arguments.length)return R;R=b;return a};a.noData=function(b){if(!arguments.length)return P;P=b;return a};a.transitionDuration=function(b){if(!arguments.length)return w;w=b;return a};return a};r.models.linePlusBarChart=function(){function a(w){w.each(function(w){var A=
d3.select(this),q=this,S=(u||parseInt(A.style("width"))||960)-v.left-v.right,D=(I||parseInt(A.style("height"))||400)-v.top-v.bottom;a.update=function(){A.transition().call(a)};J.disabled=w.map(function(a){return!!a.disabled});if(!R){var G;R={};for(G in J)R[G]=J[G]instanceof Array?J[G].slice(0):J[G]}if(w&&w.length&&w.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return G=A.selectAll(".nv-noData").data([P]),G.enter().append("text").attr("class","nvd3 nv-noData").attr("dy",
"-.7em").style("text-anchor","middle"),G.attr("x",v.left+S/2).attr("y",v.top+D/2).text(function(a){return a}),a;G=w.filter(function(a){return!a.disabled&&a.bar});var L=w.filter(function(a){return!a.bar});C=L.filter(function(a){return!a.disabled}).length&&L.filter(function(a){return!a.disabled})[0].values.length?b.xScale():m.xScale();N=m.yScale();Q=b.yScale();var Z=d3.select(this).selectAll("g.nv-wrap.nv-linePlusBar").data([w]),V=Z.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),
k=Z.select("g");V.append("g").attr("class","nv-x nv-axis");V.append("g").attr("class","nv-y1 nv-axis");V.append("g").attr("class","nv-y2 nv-axis");V.append("g").attr("class","nv-barsWrap");V.append("g").attr("class","nv-linesWrap");V.append("g").attr("class","nv-legendWrap");E&&(l.width(S/2),k.select(".nv-legendWrap").datum(w.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(l),v.top!=l.height()&&(v.top=
l.height(),D=(I||parseInt(A.style("height"))||400)-v.top-v.bottom),k.select(".nv-legendWrap").attr("transform","translate("+S/2+","+-v.top+")"));Z.attr("transform","translate("+v.left+","+v.top+")");b.width(S).height(D).color(w.map(function(a,b){return a.color||H(a,b)}).filter(function(a,b){return!w[b].disabled&&!w[b].bar}));m.width(S).height(D).color(w.map(function(a,b){return a.color||H(a,b)}).filter(function(a,b){return!w[b].disabled&&w[b].bar}));Z=k.select(".nv-barsWrap").datum(G.length?G:[{values:[]}]);
V=k.select(".nv-linesWrap").datum(L[0]&&!L[0].disabled?L:[{values:[]}]);d3.transition(Z).call(m);d3.transition(V).call(b);B.scale(C).ticks(S/100).tickSize(-D,0);k.select(".nv-x.nv-axis").attr("transform","translate(0,"+N.range()[0]+")");d3.transition(k.select(".nv-x.nv-axis")).call(B);p.scale(N).ticks(D/36).tickSize(-S,0);d3.transition(k.select(".nv-y1.nv-axis")).style("opacity",G.length?1:0).call(p);f.scale(Q).ticks(D/36).tickSize(G.length?0:-S,0);k.select(".nv-y2.nv-axis").style("opacity",L.length?
1:0).attr("transform","translate("+S+",0)");d3.transition(k.select(".nv-y2.nv-axis")).call(f);l.dispatch.on("stateChange",function(b){J=b;O.stateChange(J);a.update()});O.on("tooltipShow",function(k){if(M){var l=q.parentNode,m=k.pos[0]+(l.offsetLeft||0),u=k.pos[1]+(l.offsetTop||0),w=B.tickFormat()(b.x()(k.point,k.pointIndex)),A=(k.series.bar?p:f).tickFormat()(b.y()(k.point,k.pointIndex)),w=T(k.series.key,w,A,k,a);r.tooltip.show([m,u],w,0>k.value?"n":"s",null,l)}});O.on("changeState",function(b){"undefined"!==
typeof b.disabled&&(w.forEach(function(a,k){a.disabled=b.disabled[k]}),J.disabled=b.disabled);a.update()})});return a}var b=r.models.line(),m=r.models.historicalBar(),B=r.models.axis(),p=r.models.axis(),f=r.models.axis(),l=r.models.legend(),v={top:30,right:60,bottom:50,left:60},u=null,I=null,G=function(a){return a.x},D=function(a){return a.y},H=r.utils.defaultColor(),E=!0,M=!0,T=function(a,b,f,l,m){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},C,N,Q,J={},R=null,P="No Data Available.",O=d3.dispatch("tooltipShow",
"tooltipHide","stateChange","changeState");m.padData(!0);b.clipEdge(!1).padData(!0);B.orient("bottom").tickPadding(7).highlightZero(!1);p.orient("left");f.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];O.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){O.tooltipHide(a)});m.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];O.tooltipShow(a)});m.dispatch.on("elementMouseout.tooltip",
function(a){O.tooltipHide(a)});O.on("tooltipHide",function(){M&&r.tooltip.cleanup()});a.dispatch=O;a.legend=l;a.lines=b;a.bars=m;a.xAxis=B;a.y1Axis=p;a.y2Axis=f;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=r.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return G;G=f;b.x(f);m.x(f);return a};a.y=function(f){if(!arguments.length)return D;D=f;b.y(f);m.y(f);return a};a.margin=function(b){if(!arguments.length)return v;v.top="undefined"!=typeof b.top?b.top:v.top;
v.right="undefined"!=typeof b.right?b.right:v.right;v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom;v.left="undefined"!=typeof b.left?b.left:v.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=function(b){if(!arguments.length)return I;I=b;return a};a.color=function(b){if(!arguments.length)return H;H=r.utils.getColor(b);l.color(H);return a};a.showLegend=function(b){if(!arguments.length)return E;E=b;return a};a.tooltips=function(b){if(!arguments.length)return M;
M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return J;J=b;return a};a.defaultState=function(b){if(!arguments.length)return R;R=b;return a};a.noData=function(b){if(!arguments.length)return P;P=b;return a};return a};r.models.lineWithFocusChart=function(){function a(q){q.each(function(q){function X(){u.empty()||u.extent(R);ea.data([u.empty()?N.domain():R]).each(function(a,b){var k=N(a[0])-T.range()[0],f=T.range()[1]-N(a[1]);
d3.select(this).select(".left").attr("width",0>k?0:k);d3.select(this).select(".right").attr("x",N(a[1])).attr("width",0>f?0:f)})}function U(){R=u.empty()?null:u.extent();var a=u.empty()?N.domain():u.extent();1>=Math.abs(a[0]-a[1])||(F.brush({extent:a,brush:u}),X(),ma.select(".nv-focus .nv-linesWrap").datum(q.filter(function(a){return!a.disabled}).map(function(k,f){return{key:k.key,values:k.values.filter(function(k,f){return b.x()(k,f)>=a[0]&&b.x()(k,f)<=a[1]})}})).transition().duration(A).call(b),
ma.select(".nv-focus .nv-x.nv-axis").transition().duration(A).call(B),ma.select(".nv-focus .nv-y.nv-axis").transition().duration(A).call(p))}var L=d3.select(this),Z=this,V=(H||parseInt(L.style("width"))||960)-I.left-I.right,k=(E||parseInt(L.style("height"))||400)-I.top-I.bottom-M,y=M-G.top-G.bottom;a.update=function(){L.transition().duration(A).call(a)};a.container=this;if(q&&q.length&&q.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else{var la=L.selectAll(".nv-noData").data([w]);
la.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");la.attr("x",I.left+V/2).attr("y",I.top+k/2).text(function(a){return a});return a}T=b.xScale();C=b.yScale();N=m.xScale();Q=m.yScale();var la=L.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([q]),ga=la.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),ma=la.select("g");ga.append("g").attr("class","nv-legendWrap");var Y=ga.append("g").attr("class","nv-focus");
Y.append("g").attr("class","nv-x nv-axis");Y.append("g").attr("class","nv-y nv-axis");Y.append("g").attr("class","nv-linesWrap");ga=ga.append("g").attr("class","nv-context");ga.append("g").attr("class","nv-x nv-axis");ga.append("g").attr("class","nv-y nv-axis");ga.append("g").attr("class","nv-linesWrap");ga.append("g").attr("class","nv-brushBackground");ga.append("g").attr("class","nv-x nv-brush");J&&(v.width(V),ma.select(".nv-legendWrap").datum(q).call(v),I.top!=v.height()&&(I.top=v.height(),k=(E||
parseInt(L.style("height"))||400)-I.top-I.bottom-M),ma.select(".nv-legendWrap").attr("transform","translate(0,"+-I.top+")"));la.attr("transform","translate("+I.left+","+I.top+")");b.width(V).height(k).color(q.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!q[b].disabled}));m.defined(b.defined()).width(V).height(y).color(q.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!q[b].disabled}));ma.select(".nv-context").attr("transform","translate(0,"+(k+I.bottom+
G.top)+")");la=ma.select(".nv-context .nv-linesWrap").datum(q.filter(function(a){return!a.disabled}));d3.transition(la).call(m);B.scale(T).ticks(V/100).tickSize(-k,0);p.scale(C).ticks(k/36).tickSize(-V,0);ma.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+k+")");u.x(N).on("brush",function(){var b=a.transitionDuration();a.transitionDuration(0);U();a.transitionDuration(b)});R&&u.extent(R);var ea=ma.select(".nv-brushBackground").selectAll("g").data([R||u.extent()]),k=ea.enter().append("g");
k.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",y);k.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",y);k=ma.select(".nv-x.nv-brush").call(u);k.selectAll("rect").attr("height",y);k.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,k=y/3;return"M"+.5*b+","+k+"A6,6 0 0 "+a+" "+6.5*b+","+(k+6)+"V"+(2*k-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*k+"ZM"+2.5*b+","+(k+8)+"V"+(2*k-8)+"M"+4.5*b+","+(k+8)+"V"+(2*k-8)});U();f.scale(N).ticks(V/
100).tickSize(-y,0);ma.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")");d3.transition(ma.select(".nv-context .nv-x.nv-axis")).call(f);l.scale(Q).ticks(y/36).tickSize(-V,0);d3.transition(ma.select(".nv-context .nv-y.nv-axis")).call(l);ma.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+Q.range()[0]+")");v.dispatch.on("stateChange",function(b){a.update()});F.on("tooltipShow",function(k){if(P){var f=Z.parentNode,l=k.pos[0]+(f.offsetLeft||0),q=k.pos[1]+
(f.offsetTop||0),m=B.tickFormat()(b.x()(k.point,k.pointIndex)),y=p.tickFormat()(b.y()(k.point,k.pointIndex));k=O(k.series.key,m,y,k,a);r.tooltip.show([l,q],k,null,null,f)}})});return a}var b=r.models.line(),m=r.models.line(),B=r.models.axis(),p=r.models.axis(),f=r.models.axis(),l=r.models.axis(),v=r.models.legend(),u=d3.svg.brush(),I={top:30,right:30,bottom:30,left:60},G={top:0,right:30,bottom:20,left:60},D=r.utils.defaultColor(),H=null,E=null,M=100,T,C,N,Q,J=!0,R=null,P=!0,O=function(a,b,f,l,m){return"<h3>"+
a+"</h3><p>"+f+" at "+b+"</p>"},w="No Data Available.",F=d3.dispatch("tooltipShow","tooltipHide","brush"),A=250;b.clipEdge(!0);m.interactive(!1);B.orient("bottom").tickPadding(5);p.orient("left");f.orient("bottom").tickPadding(5);l.orient("left");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+I.left,a.pos[1]+I.top];F.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){F.tooltipHide(a)});F.on("tooltipHide",function(){P&&r.tooltip.cleanup()});a.dispatch=F;a.legend=
v;a.lines=b;a.lines2=m;a.xAxis=B;a.yAxis=p;a.x2Axis=f;a.y2Axis=l;d3.rebind(a,b,"defined","isArea","size","xDomain","yDomain","xRange","yRange","forceX","forceY","interactive","clipEdge","clipVoronoi","id");a.options=r.utils.optionsFunc.bind(a);a.x=function(f){if(!arguments.length)return b.x;b.x(f);m.x(f);return a};a.y=function(f){if(!arguments.length)return b.y;b.y(f);m.y(f);return a};a.margin=function(b){if(!arguments.length)return I;I.top="undefined"!=typeof b.top?b.top:I.top;I.right="undefined"!=
typeof b.right?b.right:I.right;I.bottom="undefined"!=typeof b.bottom?b.bottom:I.bottom;I.left="undefined"!=typeof b.left?b.left:I.left;return a};a.margin2=function(b){if(!arguments.length)return G;G=b;return a};a.width=function(b){if(!arguments.length)return H;H=b;return a};a.height=function(b){if(!arguments.length)return E;E=b;return a};a.height2=function(b){if(!arguments.length)return M;M=b;return a};a.color=function(b){if(!arguments.length)return D;D=r.utils.getColor(b);v.color(D);return a};a.showLegend=
function(b){if(!arguments.length)return J;J=b;return a};a.tooltips=function(b){if(!arguments.length)return P;P=b;return a};a.tooltipContent=function(b){if(!arguments.length)return O;O=b;return a};a.interpolate=function(f){if(!arguments.length)return b.interpolate();b.interpolate(f);m.interpolate(f);return a};a.noData=function(b){if(!arguments.length)return w;w=b;return a};a.xTickFormat=function(b){if(!arguments.length)return B.tickFormat();B.tickFormat(b);f.tickFormat(b);return a};a.yTickFormat=function(b){if(!arguments.length)return p.tickFormat();
p.tickFormat(b);l.tickFormat(b);return a};a.brushExtent=function(b){if(!arguments.length)return R;R=b;return a};a.transitionDuration=function(b){if(!arguments.length)return A;A=b;return a};return a};r.models.linePlusBarWithFocusChart=function(){function a(k){k.each(function(k){function la(){H.empty()||H.extent(O);rb.data([H.empty()?q.domain():O]).each(function(a,b){var k=q(a[0])-q.range()[0],f=q.range()[1]-q(a[1]);d3.select(this).select(".left").attr("width",0>k?0:k);d3.select(this).select(".right").attr("x",
q(a[1])).attr("width",0>f?0:f)})}function ga(){O=H.empty()?null:H.extent();P=H.empty()?q.domain():H.extent();V.brush({extent:P,brush:H});la();B.width(ea).height(ha).color(k.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!k[b].disabled&&k[b].bar}));b.width(ea).height(ha).color(k.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!k[b].disabled&&!k[b].bar}));var a=oa.select(".nv-focus .nv-barsWrap").datum(na.length?na.map(function(a,b){return{key:a.key,values:a.values.filter(function(a,
b){return B.x()(a,b)>=P[0]&&B.x()(a,b)<=P[1]})}}):[{values:[]}]),l=oa.select(".nv-focus .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa.map(function(a,k){return{key:a.key,values:a.values.filter(function(a,k){return b.x()(a,k)>=P[0]&&b.x()(a,k)<=P[1]})}}));A=na.length?B.xScale():b.xScale();f.scale(A).ticks(ea/100).tickSize(-ha,0);f.domain([Math.ceil(P[0]),Math.floor(P[1])]);oa.select(".nv-x.nv-axis").transition().duration(0).call(f);a.transition().duration(0).call(B);l.transition().duration(0).call(b);
oa.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+S.range()[0]+")");v.scale(S).ticks(ha/36).tickSize(-ea,0);oa.select(".nv-focus .nv-y1.nv-axis").style("opacity",na.length?1:0);u.scale(X).ticks(ha/36).tickSize(na.length?0:-ea,0);oa.select(".nv-focus .nv-y2.nv-axis").style("opacity",fa.length?1:0).attr("transform","translate("+A.range()[1]+",0)");oa.select(".nv-focus .nv-y1.nv-axis").transition().duration(0).call(v);oa.select(".nv-focus .nv-y2.nv-axis").transition().duration(0).call(u)}
var ma=d3.select(this),Y=this,ea=(T||parseInt(ma.style("width"))||960)-E.left-E.right,ha=(C||parseInt(ma.style("height"))||400)-E.top-E.bottom-100,ca=100-M.top-M.bottom;a.update=function(){ma.transition().duration(0).call(a)};a.container=this;if(k&&k.length&&k.filter(function(a){return a.values.length}).length)ma.selectAll(".nv-noData").remove();else{var ba=ma.selectAll(".nv-noData").data([Z]);ba.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");
ba.attr("x",E.left+ea/2).attr("y",E.top+ha/2).text(function(a){return a});return a}var na=k.filter(function(a){return!a.disabled&&a.bar}),fa=k.filter(function(a){return!a.bar});A=B.xScale();q=l.scale();S=B.yScale();X=b.yScale();U=p.yScale();L=m.yScale();var ba=k.filter(function(a){return!a.disabled&&a.bar}).map(function(a){return a.values.map(function(a,b){return{x:N(a,b),y:Q(a,b)}})}),W=k.filter(function(a){return!a.disabled&&!a.bar}).map(function(a){return a.values.map(function(a,b){return{x:N(a,
b),y:Q(a,b)}})});A.range([0,ea]);q.domain(d3.extent(d3.merge(ba.concat(W)),function(a){return a.x})).range([0,ea]);var ba=ma.selectAll("g.nv-wrap.nv-linePlusBar").data([k]),W=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),oa=ba.select("g");W.append("g").attr("class","nv-legendWrap");var za=W.append("g").attr("class","nv-focus");za.append("g").attr("class","nv-x nv-axis");za.append("g").attr("class","nv-y1 nv-axis");za.append("g").attr("class","nv-y2 nv-axis");za.append("g").attr("class",
"nv-barsWrap");za.append("g").attr("class","nv-linesWrap");W=W.append("g").attr("class","nv-context");W.append("g").attr("class","nv-x nv-axis");W.append("g").attr("class","nv-y1 nv-axis");W.append("g").attr("class","nv-y2 nv-axis");W.append("g").attr("class","nv-barsWrap");W.append("g").attr("class","nv-linesWrap");W.append("g").attr("class","nv-brushBackground");W.append("g").attr("class","nv-x nv-brush");R&&(D.width(ea/2),oa.select(".nv-legendWrap").datum(k.map(function(a){a.originalKey=void 0===
a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(a.bar?" (left axis)":" (right axis)");return a})).call(D),E.top!=D.height()&&(E.top=D.height(),ha=(C||parseInt(ma.style("height"))||400)-E.top-E.bottom-100),oa.select(".nv-legendWrap").attr("transform","translate("+ea/2+","+-E.top+")"));ba.attr("transform","translate("+E.left+","+E.top+")");p.width(ea).height(ca).color(k.map(function(a,b){return a.color||J(a,b)}).filter(function(a,b){return!k[b].disabled&&k[b].bar}));m.width(ea).height(ca).color(k.map(function(a,
b){return a.color||J(a,b)}).filter(function(a,b){return!k[b].disabled&&!k[b].bar}));ba=oa.select(".nv-context .nv-barsWrap").datum(na.length?na:[{values:[]}]);W=oa.select(".nv-context .nv-linesWrap").datum(fa[0].disabled?[{values:[]}]:fa);oa.select(".nv-context").attr("transform","translate(0,"+(ha+E.bottom+M.top)+")");ba.transition().call(p);W.transition().call(m);H.x(q).on("brush",ga);O&&H.extent(O);var rb=oa.select(".nv-brushBackground").selectAll("g").data([O||H.extent()]),ba=rb.enter().append("g");
ba.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ca);ba.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",ca);ba=oa.select(".nv-x.nv-brush").call(H);ba.selectAll("rect").attr("height",ca);ba.selectAll(".resize").append("path").attr("d",function(a){var b=(a=+("e"==a))?1:-1,k=ca/3;return"M"+.5*b+","+k+"A6,6 0 0 "+a+" "+6.5*b+","+(k+6)+"V"+(2*k-6)+"A6,6 0 0 "+a+" "+.5*b+","+2*k+"ZM"+2.5*b+","+(k+8)+"V"+(2*k-8)+"M"+4.5*b+","+(k+8)+"V"+(2*k-8)});l.ticks(ea/
100).tickSize(-ca,0);oa.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+U.range()[0]+")");oa.select(".nv-context .nv-x.nv-axis").transition().call(l);I.scale(U).ticks(ca/36).tickSize(-ea,0);oa.select(".nv-context .nv-y1.nv-axis").style("opacity",na.length?1:0).attr("transform","translate(0,"+q.range()[0]+")");oa.select(".nv-context .nv-y1.nv-axis").transition().call(I);G.scale(L).ticks(ca/36).tickSize(na.length?0:-ea,0);oa.select(".nv-context .nv-y2.nv-axis").style("opacity",fa.length?
1:0).attr("transform","translate("+q.range()[1]+",0)");oa.select(".nv-context .nv-y2.nv-axis").transition().call(G);D.dispatch.on("stateChange",function(b){a.update()});V.on("tooltipShow",function(k){if(w){var l=Y.parentNode;P&&(k.pointIndex+=Math.ceil(P[0]));var m=k.pos[0]+(l.offsetLeft||0),q=k.pos[1]+(l.offsetTop||0),p=f.tickFormat()(b.x()(k.point,k.pointIndex)),y=(k.series.bar?v:u).tickFormat()(b.y()(k.point,k.pointIndex)),p=F(k.series.key,p,y,k,a);r.tooltip.show([m,q],p,0>k.value?"n":"s",null,
l)}});ga()});return a}var b=r.models.line(),m=r.models.line(),B=r.models.historicalBar(),p=r.models.historicalBar(),f=r.models.axis(),l=r.models.axis(),v=r.models.axis(),u=r.models.axis(),I=r.models.axis(),G=r.models.axis(),D=r.models.legend(),H=d3.svg.brush(),E={top:30,right:30,bottom:30,left:60},M={top:0,right:30,bottom:20,left:60},T=null,C=null,N=function(a){return a.x},Q=function(a){return a.y},J=r.utils.defaultColor(),R=!0,P,O=null,w=!0,F=function(a,b,f,l,m){return"<h3>"+a+"</h3><p>"+f+" at "+
b+"</p>"},A,q,S,X,U,L,Z="No Data Available.",V=d3.dispatch("tooltipShow","tooltipHide","brush");b.clipEdge(!0);m.interactive(!1);f.orient("bottom").tickPadding(5);v.orient("left");u.orient("right");l.orient("bottom").tickPadding(5);I.orient("left");G.orient("right");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+E.left,a.pos[1]+E.top];V.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){V.tooltipHide(a)});B.dispatch.on("elementMouseover.tooltip",function(a){a.pos=
[a.pos[0]+E.left,a.pos[1]+E.top];V.tooltipShow(a)});B.dispatch.on("elementMouseout.tooltip",function(a){V.tooltipHide(a)});V.on("tooltipHide",function(){w&&r.tooltip.cleanup()});a.dispatch=V;a.legend=D;a.lines=b;a.lines2=m;a.bars=B;a.bars2=p;a.xAxis=f;a.x2Axis=l;a.y1Axis=v;a.y2Axis=u;a.y3Axis=I;a.y4Axis=G;d3.rebind(a,b,"defined","size","clipVoronoi","interpolate");a.options=r.utils.optionsFunc.bind(a);a.x=function(k){if(!arguments.length)return N;N=k;b.x(k);B.x(k);return a};a.y=function(k){if(!arguments.length)return Q;
Q=k;b.y(k);B.y(k);return a};a.margin=function(b){if(!arguments.length)return E;E.top="undefined"!=typeof b.top?b.top:E.top;E.right="undefined"!=typeof b.right?b.right:E.right;E.bottom="undefined"!=typeof b.bottom?b.bottom:E.bottom;E.left="undefined"!=typeof b.left?b.left:E.left;return a};a.width=function(b){if(!arguments.length)return T;T=b;return a};a.height=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return J;J=r.utils.getColor(b);D.color(J);
return a};a.showLegend=function(b){if(!arguments.length)return R;R=b;return a};a.tooltips=function(b){if(!arguments.length)return w;w=b;return a};a.tooltipContent=function(b){if(!arguments.length)return F;F=b;return a};a.noData=function(b){if(!arguments.length)return Z;Z=b;return a};a.brushExtent=function(b){if(!arguments.length)return O;O=b;return a};return a};r.models.multiBar=function(){function a(r){r.each(function(a){var r=m-b.left-b.right,A=B-b.top-b.bottom,U=d3.select(this);M&&a.length&&(M=
[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);D&&(a=d3.layout.stack().offset(H).values(function(a){return a.values}).y(u)(!a.length&&M?M:a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});D&&a[0].values.map(function(b,f){var l=0,m=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=m,m-=a.size):(a.y1=a.size+l,l+=a.size)})});var L=Q&&J?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:u(a,b),y0:a.y0,y1:a.y1}})});
p.domain(Q||d3.merge(L).map(function(a){return a.x})).rangeBands(R||[0,r],O);f.domain(J||d3.extent(d3.merge(L).map(function(a){return D?0<a.y?a.y1:a.y1+a.y:a.y}).concat(I))).range(P||[A,0]);p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]-.01*p.domain()[0],p.domain()[1]+.01*p.domain()[1]]):p.domain([-1,1]));f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));F=F||f;var U=U.selectAll("g.nv-wrap.nv-multibar").data([a]),
Z=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),L=Z.append("defs"),Z=Z.append("g"),V=U.select("g");Z.append("g").attr("class","nv-groups");U.attr("transform","translate("+b.left+","+b.top+")");L.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect");U.select("#nv-edge-clip-"+l+" rect").attr("width",r).attr("height",A);V.attr("clip-path",G?"url(#nv-edge-clip-"+l+")":"");r=U.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});r.enter().append("g").style("stroke-opacity",
1E-6).style("fill-opacity",1E-6);r.exit().transition().selectAll("rect.nv-bar").delay(function(b,f){return f*N/a[0].values.length}).attr("y",function(a){return D?F(a.y0):F(0)}).attr("height",0).remove();r.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return E(a,b)}).style("stroke",function(a,b){return E(a,b)});r.transition().style("stroke-opacity",1).style("fill-opacity",.75);r=r.selectAll("rect.nv-bar").data(function(b){return M&&
!a.length?M.values:b.values});r.exit().remove();r.enter().append("rect").attr("class",function(a,b){return 0>u(a,b)?"nv-bar negative":"nv-bar positive"}).attr("x",function(b,f,l){return D?0:l*p.rangeBand()/a.length}).attr("y",function(a){return F(D?a.y0:0)}).attr("height",0).attr("width",p.rangeBand()/(D?1:a.length)).attr("transform",function(a,b){return"translate("+p(v(a,b))+",0)"});r.style("fill",function(a,b,f){return E(a,f,b)}).style("stroke",function(a,b,f){return E(a,f,b)}).on("mouseover",function(b,
l){d3.select(this).classed("hover",!0);w.elementMouseover({value:u(b,l),point:b,series:a[b.series],pos:[p(v(b,l))+p.rangeBand()*(D?a.length/2:b.series+.5)/a.length,f(u(b,l)+(D?b.y0:0))],pointIndex:l,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);w.elementMouseout({value:u(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,l){w.elementClick({value:u(b,l),point:b,series:a[b.series],pos:[p(v(b,l))+
p.rangeBand()*(D?a.length/2:b.series+.5)/a.length,f(u(b,l)+(D?b.y0:0))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",function(b,l){w.elementDblClick({value:u(b,l),point:b,series:a[b.series],pos:[p(v(b,l))+p.rangeBand()*(D?a.length/2:b.series+.5)/a.length,f(u(b,l)+(D?b.y0:0))],pointIndex:l,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});r.attr("class",function(a,b){return 0>u(a,b)?"nv-bar negative":"nv-bar positive"}).transition().attr("transform",
function(a,b){return"translate("+p(v(a,b))+",0)"});T&&(C||(C=a.map(function(){return!0})),r.style("fill",function(a,b,f){return d3.rgb(T(a,b)).darker(C.map(function(a,b){return b}).filter(function(a,b){return!C[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(T(a,b)).darker(C.map(function(a,b){return b}).filter(function(a,b){return!C[b]})[f]).toString()}));D?r.transition().delay(function(b,f){return f*N/a[0].values.length}).attr("y",function(a,b){return f(D?a.y1:0)}).attr("height",
function(a,b){return Math.max(Math.abs(f(a.y+(D?a.y0:0))-f(D?a.y0:0)),1)}).attr("x",function(b,f){return D?0:b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/(D?1:a.length)):r.transition().delay(function(b,f){return f*N/a[0].values.length}).attr("x",function(b,f){return b.series*p.rangeBand()/a.length}).attr("width",p.rangeBand()/a.length).attr("y",function(a,b){return 0>u(a,b)?f(0):1>f(0)-f(u(a,b))?f(0)-1:f(u(a,b))||0}).attr("height",function(a,b){return Math.max(Math.abs(f(u(a,b))-f(0)),
1)||0});p.copy();F=f.copy()});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=d3.scale.ordinal(),f=d3.scale.linear(),l=Math.floor(1E4*Math.random()),v=function(a){return a.x},u=function(a){return a.y},I=[0],G=!0,D=!1,H="zero",E=r.utils.defaultColor(),M=!1,T=null,C,N=1200,Q,J,R,P,O=.1,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=w;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};
a.y=function(b){if(!arguments.length)return u;u=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return p;
p=b;return a};a.yScale=function(b){if(!arguments.length)return f;f=b;return a};a.xDomain=function(b){if(!arguments.length)return Q;Q=b;return a};a.yDomain=function(b){if(!arguments.length)return J;J=b;return a};a.xRange=function(b){if(!arguments.length)return R;R=b;return a};a.yRange=function(b){if(!arguments.length)return P;P=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return D;D=b;return a};a.stackOffset=function(b){if(!arguments.length)return H;
H=b;return a};a.clipEdge=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return E;E=r.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return T;T=r.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return C;C=b;return a};a.id=function(b){if(!arguments.length)return l;l=b;return a};a.hideable=function(b){if(!arguments.length)return M;M=b;return a};a.delay=function(b){if(!arguments.length)return N;N=b;return a};
a.groupSpacing=function(b){if(!arguments.length)return O;O=b;return a};return a};r.models.multiBarChart=function(){function a(S){S.each(function(S){var U=d3.select(this),L=this,Z=(v||parseInt(U.style("width"))||960)-l.left-l.right,V=(u||parseInt(U.style("height"))||400)-l.top-l.bottom;a.update=function(){U.transition().duration(q).call(a)};a.container=this;O.disabled=S.map(function(a){return!!a.disabled});if(!w){var k;w={};for(k in O)w[k]=O[k]instanceof Array?O[k].slice(0):O[k]}if(S&&S.length&&S.filter(function(a){return a.values.length}).length)U.selectAll(".nv-noData").remove();
else return k=U.selectAll(".nv-noData").data([F]),k.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),k.attr("x",l.left+Z/2).attr("y",l.top+V/2).text(function(a){return a}),a;R=b.xScale();P=b.yScale();var y=U.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([S]),la=y.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g");k=y.select("g");la.append("g").attr("class","nv-x nv-axis");la.append("g").attr("class","nv-y nv-axis");
la.append("g").attr("class","nv-barsWrap");la.append("g").attr("class","nv-legendWrap");la.append("g").attr("class","nv-controlsWrap");D&&(p.width(Z-(G?180:0)),b.barColor()&&S.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),k.select(".nv-legendWrap").datum(S).call(p),l.top!=p.height()&&(l.top=p.height(),V=(u||parseInt(U.style("height"))||400)-l.top-l.bottom),k.select(".nv-legendWrap").attr("transform","translate("+(G?180:0)+","+-l.top+")"));if(G){var ga=[{key:"Grouped",disabled:b.stacked()},
{key:"Stacked",disabled:!b.stacked()}];f.width(G?180:0).color(["#444","#444","#444"]);k.select(".nv-controlsWrap").datum(ga).attr("transform","translate(0,"+-l.top+")").call(f)}y.attr("transform","translate("+l.left+","+l.top+")");M&&k.select(".nv-y.nv-axis").attr("transform","translate("+Z+",0)");b.disabled(S.map(function(a){return a.disabled})).width(Z).height(V).color(S.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!S[b].disabled}));k.select(".nv-barsWrap").datum(S.filter(function(a){return!a.disabled})).transition().call(b);
if(H){m.scale(R).ticks(Z/100).tickSize(-V,0);k.select(".nv-x.nv-axis").attr("transform","translate(0,"+P.range()[0]+")");k.select(".nv-x.nv-axis").transition().call(m);y=k.select(".nv-x.nv-axis > g").selectAll("g");y.selectAll("line, text").style("opacity",1);if(C){y.selectAll("text").attr("transform",function(a,b,f){return"translate(0,"+(0==f%2?5:17)+")"});var W=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;k.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,
b){return"translate(0,"+(0===b||0!==W%2?17:5)+")"})}T&&y.filter(function(a,b){return 0!==b%Math.ceil(S[0].values.length/(Z/100))}).selectAll("text, line").style("opacity",0);N&&y.selectAll(".tick text").attr("transform","rotate("+N+" 0,0)").style("text-anchor",0<N?"start":"end");k.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}E&&(B.scale(P).ticks(V/36).tickSize(-Z,0),k.select(".nv-y.nv-axis").transition().call(B));p.dispatch.on("stateChange",function(b){O=b;A.stateChange(O);
a.update()});f.dispatch.on("legendClick",function(f,k){if(f.disabled){ga=ga.map(function(a){a.disabled=!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}O.stacked=b.stacked();A.stateChange(O);a.update()}});A.on("tooltipShow",function(f){if(Q){var k=L.parentNode,l=f.pos[0]+(k.offsetLeft||0),q=f.pos[1]+(k.offsetTop||0),p=m.tickFormat()(b.x()(f.point,f.pointIndex)),u=B.tickFormat()(b.y()(f.point,f.pointIndex)),p=J(f.series.key,p,u,f,a);r.tooltip.show([l,
q],p,0>f.value?"n":"s",null,k)}});A.on("changeState",function(f){"undefined"!==typeof f.disabled&&(S.forEach(function(a,b){a.disabled=f.disabled[b]}),O.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),O.stacked=f.stacked);a.update()})});return a}var b=r.models.multiBar(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f=r.models.legend(),l={top:30,right:20,bottom:50,left:60},v=null,u=null,I=r.utils.defaultColor(),G=!0,D=!0,H=!0,E=!0,M=!1,T=!0,C=!1,N=0,Q=!0,J=function(a,
b,f,l,m){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},R,P,O={stacked:!1},w=null,F="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),q=250;b.stacked(!1);m.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(a){return a});B.orient(M?"right":"left").tickFormat(d3.format(",.1f"));f.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top];A.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",
function(a){A.tooltipHide(a)});A.on("tooltipHide",function(){Q&&r.tooltip.cleanup()});a.dispatch=A;a.multibar=b;a.legend=p;a.xAxis=m;a.yAxis=B;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","stacked","stackOffset","delay","barColor","groupSpacing");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=
typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:l.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return u;u=b;return a};a.color=function(b){if(!arguments.length)return I;I=r.utils.getColor(b);p.color(I);return a};a.showControls=function(b){if(!arguments.length)return G;G=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return H;
H=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;E=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return M;M=b;B.orient(b?"right":"left");return a};a.reduceXTicks=function(b){if(!arguments.length)return T;T=b;return a};a.rotateLabels=function(b){if(!arguments.length)return N;N=b;return a};a.staggerLabels=function(b){if(!arguments.length)return C;C=b;return a};a.tooltip=function(b){if(!arguments.length)return J;J=b;return a};a.tooltips=function(b){if(!arguments.length)return Q;
Q=b;return a};a.tooltipContent=function(b){if(!arguments.length)return J;J=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return w;w=b;return a};a.noData=function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return q;q=b;return a};return a};r.models.multiBarHorizontal=function(){function a(p){p.each(function(a){var p=m-b.left-b.right,r=B-b.top-b.bottom;d3.select(this);
E&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(u)(a));a.forEach(function(a,b){a.values.forEach(function(a){a.series=b})});E&&a[0].values.map(function(b,f){var l=0,k=0;a.map(function(a){a=a.values[f];a.size=Math.abs(a.y);0>a.y?(a.y1=k-a.size,k-=a.size):(a.y1=l,l+=a.size)})});var A=J&&R?[]:a.map(function(a){return a.values.map(function(a,b){return{x:v(a,b),y:u(a,b),y0:a.y0,y1:a.y1}})});f.domain(J||d3.merge(A).map(function(a){return a.x})).rangeBands(P||[0,r],.1);l.domain(R||
d3.extent(d3.merge(A).map(function(a){return E?0<a.y?a.y1+a.y:a.y1:a.y}).concat(I)));M&&!E?l.range(O||[0>l.domain()[0]?C:0,p-(0<l.domain()[1]?C:0)]):l.range(O||[0,p]);F=F||d3.scale.linear().domain(l.domain()).range([l(0),l(0)]);p=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);r=p.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");r.append("defs");r=r.append("g");p.select("g");r.append("g").attr("class","nv-groups");p.attr("transform","translate("+b.left+
","+b.top+")");p=p.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,b){return b});p.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);p.exit().transition().style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();p.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover}).style("fill",function(a,b){return G(a,b)}).style("stroke",function(a,b){return G(a,b)});p.transition().style("stroke-opacity",
1).style("fill-opacity",.75);p=p.selectAll("g.nv-bar").data(function(a){return a.values});p.exit().remove();r=p.enter().append("g").attr("transform",function(b,l,m){return"translate("+F(E?b.y0:0)+","+(E?0:m*f.rangeBand()/a.length+f(v(b,l)))+")"});r.append("rect").attr("width",0).attr("height",f.rangeBand()/(E?1:a.length));p.on("mouseover",function(b,m){d3.select(this).classed("hover",!0);w.elementMouseover({value:u(b,m),point:b,series:a[b.series],pos:[l(u(b,m)+(E?b.y0:0)),f(v(b,m))+f.rangeBand()*
(E?a.length/2:b.series+.5)/a.length],pointIndex:m,seriesIndex:b.series,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);w.elementMouseout({value:u(b,f),point:b,series:a[b.series],pointIndex:f,seriesIndex:b.series,e:d3.event})}).on("click",function(b,m){w.elementClick({value:u(b,m),point:b,series:a[b.series],pos:[f(v(b,m))+f.rangeBand()*(E?a.length/2:b.series+.5)/a.length,l(u(b,m)+(E?b.y0:0))],pointIndex:m,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()}).on("dblclick",
function(b,m){w.elementDblClick({value:u(b,m),point:b,series:a[b.series],pos:[f(v(b,m))+f.rangeBand()*(E?a.length/2:b.series+.5)/a.length,l(u(b,m)+(E?b.y0:0))],pointIndex:m,seriesIndex:b.series,e:d3.event});d3.event.stopPropagation()});r.append("text");M&&!E?(p.select("text").attr("text-anchor",function(a,b){return 0>u(a,b)?"end":"start"}).attr("y",f.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return N(u(a,b))}),p.transition().select("text").attr("x",function(a,b){return 0>u(a,
b)?-4:l(u(a,b))-l(0)+4})):p.selectAll("text").text("");T&&!E?(r.append("text").classed("nv-bar-label",!0),p.select("text.nv-bar-label").attr("text-anchor",function(a,b){return 0>u(a,b)?"start":"end"}).attr("y",f.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,b){return v(a,b)}),p.transition().select("text.nv-bar-label").attr("x",function(a,b){return 0>u(a,b)?l(0)-l(u(a,b))+4:-4})):p.selectAll("text.nv-bar-label").text("");p.attr("class",function(a,b){return 0>u(a,b)?"nv-bar negative":
"nv-bar positive"});D&&(H||(H=a.map(function(){return!0})),p.style("fill",function(a,b,f){return d3.rgb(D(a,b)).darker(H.map(function(a,b){return b}).filter(function(a,b){return!H[b]})[f]).toString()}).style("stroke",function(a,b,f){return d3.rgb(D(a,b)).darker(H.map(function(a,b){return b}).filter(function(a,b){return!H[b]})[f]).toString()}));E?p.transition().attr("transform",function(a,b){return"translate("+l(a.y1)+","+f(v(a,b))+")"}).select("rect").attr("width",function(a,b){return Math.abs(l(u(a,
b)+a.y0)-l(a.y0))}).attr("height",f.rangeBand()):p.transition().attr("transform",function(b,m){return"translate("+(0>u(b,m)?l(u(b,m)):l(0))+","+(b.series*f.rangeBand()/a.length+f(v(b,m)))+")"}).select("rect").attr("height",f.rangeBand()/a.length).attr("width",function(a,b){return Math.max(Math.abs(l(u(a,b))-l(0)),1)});f.copy();F=l.copy()});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=Math.floor(1E4*Math.random()),f=d3.scale.ordinal(),l=d3.scale.linear(),v=function(a){return a.x},u=
function(a){return a.y},I=[0],G=r.utils.defaultColor(),D=null,H,E=!1,M=!1,T=!1,C=60,N=d3.format(",.2f"),Q=1200,J,R,P,O,w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout"),F;a.dispatch=w;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return u;u=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=
typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return l;l=b;return a};a.xDomain=function(b){if(!arguments.length)return J;J=b;return a};a.yDomain=function(b){if(!arguments.length)return R;
R=b;return a};a.xRange=function(b){if(!arguments.length)return P;P=b;return a};a.yRange=function(b){if(!arguments.length)return O;O=b;return a};a.forceY=function(b){if(!arguments.length)return I;I=b;return a};a.stacked=function(b){if(!arguments.length)return E;E=b;return a};a.color=function(b){if(!arguments.length)return G;G=r.utils.getColor(b);return a};a.barColor=function(b){if(!arguments.length)return D;D=r.utils.getColor(b);return a};a.disabled=function(b){if(!arguments.length)return H;H=b;return a};
a.id=function(b){if(!arguments.length)return p;p=b;return a};a.delay=function(b){if(!arguments.length)return Q;Q=b;return a};a.showValues=function(b){if(!arguments.length)return M;M=b;return a};a.showBarLabels=function(b){if(!arguments.length)return T;T=b;return a};a.valueFormat=function(b){if(!arguments.length)return N;N=b;return a};a.valuePadding=function(b){if(!arguments.length)return C;C=b;return a};return a};r.models.multiBarHorizontalChart=function(){function a(w){w.each(function(w){var A=d3.select(this),
q=this,S=(v||parseInt(A.style("width"))||960)-l.left-l.right,X=(u||parseInt(A.style("height"))||400)-l.top-l.bottom;a.update=function(){A.transition().duration(O).call(a)};a.container=this;Q.disabled=w.map(function(a){return!!a.disabled});if(!J){var U;J={};for(U in Q)J[U]=Q[U]instanceof Array?Q[U].slice(0):Q[U]}if(w&&w.length&&w.filter(function(a){return a.values.length}).length)A.selectAll(".nv-noData").remove();else return U=A.selectAll(".nv-noData").data([R]),U.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),U.attr("x",l.left+S/2).attr("y",l.top+X/2).text(function(a){return a}),a;C=b.xScale();N=b.yScale();U=A.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([w]);var L=U.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),Z=U.select("g");L.append("g").attr("class","nv-x nv-axis");L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");L.append("g").attr("class",
"nv-barsWrap");L.append("g").attr("class","nv-legendWrap");L.append("g").attr("class","nv-controlsWrap");D&&(p.width(S-(G?180:0)),b.barColor()&&w.forEach(function(a,b){a.color=d3.rgb("#ccc").darker(1.5*b).toString()}),Z.select(".nv-legendWrap").datum(w).call(p),l.top!=p.height()&&(l.top=p.height(),X=(u||parseInt(A.style("height"))||400)-l.top-l.bottom),Z.select(".nv-legendWrap").attr("transform","translate("+(G?180:0)+","+-l.top+")"));if(G){var V=[{key:"Grouped",disabled:b.stacked()},{key:"Stacked",
disabled:!b.stacked()}];f.width(G?180:0).color(["#444","#444","#444"]);Z.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-l.top+")").call(f)}U.attr("transform","translate("+l.left+","+l.top+")");b.disabled(w.map(function(a){return a.disabled})).width(S).height(X).color(w.map(function(a,b){return a.color||I(a,b)}).filter(function(a,b){return!w[b].disabled}));Z.select(".nv-barsWrap").datum(w.filter(function(a){return!a.disabled})).transition().call(b);H&&(m.scale(C).ticks(X/24).tickSize(-S,
0),Z.select(".nv-x.nv-axis").transition().call(m),Z.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));E&&(B.scale(N).ticks(S/100).tickSize(-X,0),Z.select(".nv-y.nv-axis").attr("transform","translate(0,"+X+")"),Z.select(".nv-y.nv-axis").transition().call(B));Z.select(".nv-zeroLine line").attr("x1",N(0)).attr("x2",N(0)).attr("y1",0).attr("y2",-X);p.dispatch.on("stateChange",function(b){Q=b;P.stateChange(Q);a.update()});f.dispatch.on("legendClick",function(f,l){if(f.disabled){V=V.map(function(a){a.disabled=
!0;return a});f.disabled=!1;switch(f.key){case "Grouped":b.stacked(!1);break;case "Stacked":b.stacked(!0)}Q.stacked=b.stacked();P.stateChange(Q);a.update()}});P.on("tooltipShow",function(f){if(M){var l=q.parentNode,p=f.pos[0]+(l.offsetLeft||0),u=f.pos[1]+(l.offsetTop||0),w=m.tickFormat()(b.x()(f.point,f.pointIndex)),v=B.tickFormat()(b.y()(f.point,f.pointIndex)),w=T(f.series.key,w,v,f,a);r.tooltip.show([p,u],w,0>f.value?"e":"w",null,l)}});P.on("changeState",function(f){"undefined"!==typeof f.disabled&&
(w.forEach(function(a,b){a.disabled=f.disabled[b]}),Q.disabled=f.disabled);"undefined"!==typeof f.stacked&&(b.stacked(f.stacked),Q.stacked=f.stacked);a.update()})});return a}var b=r.models.multiBarHorizontal(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend().height(30),f=r.models.legend().height(30),l={top:30,right:20,bottom:50,left:60},v=null,u=null,I=r.utils.defaultColor(),G=!0,D=!0,H=!0,E=!0,M=!0,T=function(a,b,f,l,m){return"<h3>"+a+" - "+b+"</h3><p>"+f+"</p>"},C,N,Q={stacked:!1},J=null,
R="No Data Available.",P=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),O=250;b.stacked(!1);m.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(a){return a});B.orient("bottom").tickFormat(d3.format(",.1f"));f.updateState(!1);b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+l.left,a.pos[1]+l.top];P.tooltipShow(a)});b.dispatch.on("elementMouseout.tooltip",function(a){P.tooltipHide(a)});P.on("tooltipHide",function(){M&&r.tooltip.cleanup()});
a.dispatch=P;a.multibar=b;a.legend=p;a.xAxis=m;a.yAxis=B;d3.rebind(a,b,"x","y","xDomain","yDomain","xRange","yRange","forceX","forceY","clipEdge","id","delay","showValues","showBarLabels","valueFormat","stacked","barColor");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return l;l.top="undefined"!=typeof b.top?b.top:l.top;l.right="undefined"!=typeof b.right?b.right:l.right;l.bottom="undefined"!=typeof b.bottom?b.bottom:l.bottom;l.left="undefined"!=typeof b.left?b.left:
l.left;return a};a.width=function(b){if(!arguments.length)return v;v=b;return a};a.height=function(b){if(!arguments.length)return u;u=b;return a};a.color=function(b){if(!arguments.length)return I;I=r.utils.getColor(b);p.color(I);return a};a.showControls=function(b){if(!arguments.length)return G;G=b;return a};a.showLegend=function(b){if(!arguments.length)return D;D=b;return a};a.showXAxis=function(b){if(!arguments.length)return H;H=b;return a};a.showYAxis=function(b){if(!arguments.length)return E;
E=b;return a};a.tooltip=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return M;M=b;return a};a.tooltipContent=function(b){if(!arguments.length)return T;T=b;return a};a.state=function(b){if(!arguments.length)return Q;Q=b;return a};a.defaultState=function(b){if(!arguments.length)return J;J=b;return a};a.noData=function(b){if(!arguments.length)return R;R=b;return a};a.transitionDuration=function(b){if(!arguments.length)return O;O=b;return a};return a};
r.models.multiChart=function(){function a(F){F.each(function(F){var q=d3.select(this),S=this;a.update=function(){q.transition().call(a)};a.container=this;var X=(B||parseInt(q.style("width"))||960)-b.left-b.right,U=(p||parseInt(q.style("height"))||400)-b.top-b.bottom,L=F.filter(function(a){return!a.disabled&&"line"==a.type&&1==a.yAxis}),Z=F.filter(function(a){return!a.disabled&&"line"==a.type&&2==a.yAxis}),V=F.filter(function(a){return!a.disabled&&"bar"==a.type&&1==a.yAxis}),k=F.filter(function(a){return!a.disabled&&
"bar"==a.type&&2==a.yAxis}),y=F.filter(function(a){return!a.disabled&&"area"==a.type&&1==a.yAxis}),la=F.filter(function(a){return!a.disabled&&"area"==a.type&&2==a.yAxis}),ga=F.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})}),W=F.filter(function(a){return!a.disabled&&2==a.yAxis}).map(function(a){return a.values.map(function(a,b){return{x:a.x,y:a.y}})});u.domain(d3.extent(d3.merge(ga.concat(W)),function(a){return a.x})).range([0,
X]);var Y=q.selectAll("g.wrap.multiChart").data([F]),ea=Y.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ea.append("g").attr("class","x axis");ea.append("g").attr("class","y1 axis");ea.append("g").attr("class","y2 axis");ea.append("g").attr("class","lines1Wrap");ea.append("g").attr("class","lines2Wrap");ea.append("g").attr("class","bars1Wrap");ea.append("g").attr("class","bars2Wrap");ea.append("g").attr("class","stack1Wrap");ea.append("g").attr("class","stack2Wrap");ea.append("g").attr("class",
"legendWrap");Y=Y.select("g");f&&(O.width(X/2),Y.select(".legendWrap").datum(F.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":" (right axis)");return a})).call(O),b.top!=O.height()&&(b.top=O.height(),U=(p||parseInt(q.style("height"))||400)-b.top-b.bottom),Y.select(".legendWrap").attr("transform","translate("+X/2+","+-b.top+")"));E.width(X).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,
b){return!F[b].disabled&&1==F[b].yAxis&&"line"==F[b].type}));M.width(X).height(U).interpolate("monotone").color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"line"==F[b].type}));T.width(X).height(U).color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"bar"==F[b].type}));C.width(X).height(U).color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,b){return!F[b].disabled&&
2==F[b].yAxis&&"bar"==F[b].type}));N.width(X).height(U).color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,b){return!F[b].disabled&&1==F[b].yAxis&&"area"==F[b].type}));Q.width(X).height(U).color(F.map(function(a,b){return a.color||m[b%m.length]}).filter(function(a,b){return!F[b].disabled&&2==F[b].yAxis&&"area"==F[b].type}));Y.attr("transform","translate("+b.left+","+b.top+")");var ea=Y.select(".lines1Wrap").datum(L),ha=Y.select(".bars1Wrap").datum(V),ca=Y.select(".stack1Wrap").datum(y),
ba=Y.select(".lines2Wrap").datum(Z),na=Y.select(".bars2Wrap").datum(k),fa=Y.select(".stack2Wrap").datum(la),Aa=y.length?y.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[],oa=la.length?la.map(function(a){return a.values}).reduce(function(a,b){return a.map(function(a,f){return{x:a.x,y:a.y+b[f].y}})}).concat([{x:0,y:0}]):[];D.domain(I||d3.extent(d3.merge(ga).concat(Aa),function(a){return a.y})).range([0,U]);H.domain(G||
d3.extent(d3.merge(W).concat(oa),function(a){return a.y})).range([0,U]);E.yDomain(D.domain());T.yDomain(D.domain());N.yDomain(D.domain());M.yDomain(H.domain());C.yDomain(H.domain());Q.yDomain(H.domain());y.length&&d3.transition(ca).call(N);la.length&&d3.transition(fa).call(Q);V.length&&d3.transition(ha).call(T);k.length&&d3.transition(na).call(C);L.length&&d3.transition(ea).call(E);Z.length&&d3.transition(ba).call(M);J.ticks(X/100).tickSize(-U,0);Y.select(".x.axis").attr("transform","translate(0,"+
U+")");d3.transition(Y.select(".x.axis")).call(J);R.ticks(U/36).tickSize(-X,0);d3.transition(Y.select(".y1.axis")).call(R);P.ticks(U/36).tickSize(-X,0);d3.transition(Y.select(".y2.axis")).call(P);Y.select(".y2.axis").style("opacity",W.length?1:0).attr("transform","translate("+u.range()[1]+",0)");O.dispatch.on("stateChange",function(b){a.update()});w.on("tooltipShow",function(b){if(l){var f=S.parentNode,k=b.pos[0]+(f.offsetLeft||0),m=b.pos[1]+(f.offsetTop||0),p=J.tickFormat()(E.x()(b.point,b.pointIndex)),
q=(2==b.series.yAxis?P:R).tickFormat()(E.y()(b.point,b.pointIndex));b=v(b.series.key,p,q,b,a);r.tooltip.show([k,m],b,void 0,void 0,f.offsetParent)}})});return a}var b={top:30,right:20,bottom:50,left:60},m=d3.scale.category20().range(),B=null,p=null,f=!0,l=!0,v=function(a,b,f,l,m){return"<h3>"+a+"</h3><p>"+f+" at "+b+"</p>"},u,I,G;u=d3.scale.linear();var D=d3.scale.linear(),H=d3.scale.linear(),E=r.models.line().yScale(D),M=r.models.line().yScale(H),T=r.models.multiBar().stacked(!1).yScale(D),C=r.models.multiBar().stacked(!1).yScale(H),
N=r.models.stackedArea().yScale(D),Q=r.models.stackedArea().yScale(H),J=r.models.axis().scale(u).orient("bottom").tickPadding(5),R=r.models.axis().scale(D).orient("left"),P=r.models.axis().scale(H).orient("right"),O=r.models.legend().height(30),w=d3.dispatch("tooltipShow","tooltipHide");E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",
function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});T.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});T.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});C.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});C.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});
N.dispatch.on("tooltipShow",function(a){if(!Math.round(100*N.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});N.dispatch.on("tooltipHide",function(a){w.tooltipHide(a)});Q.dispatch.on("tooltipShow",function(a){if(!Math.round(100*Q.y()(a.point)))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});Q.dispatch.on("tooltipHide",
function(a){w.tooltipHide(a)});E.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});E.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});M.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];w.tooltipShow(a)});M.dispatch.on("elementMouseout.tooltip",function(a){w.tooltipHide(a)});w.on("tooltipHide",function(){l&&r.tooltip.cleanup()});a.dispatch=w;a.lines1=E;a.lines2=M;a.bars1=T;a.bars2=
C;a.stack1=N;a.stack2=Q;a.xAxis=J;a.yAxis1=R;a.yAxis2=P;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return getX;getX=b;E.x(b);T.x(b);return a};a.y=function(b){if(!arguments.length)return getY;getY=b;E.y(b);T.y(b);return a};a.yDomain1=function(b){if(!arguments.length)return I;I=b;return a};a.yDomain2=function(b){if(!arguments.length)return G;G=b;return a};a.margin=function(f){if(!arguments.length)return b;b=f;return a};a.width=function(b){if(!arguments.length)return B;
B=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return m;m=b;O.color(b);return a};a.showLegend=function(b){if(!arguments.length)return f;f=b;return a};a.tooltips=function(b){if(!arguments.length)return l;l=b;return a};a.tooltipContent=function(b){if(!arguments.length)return v;v=b;return a};return a};r.models.ohlcBar=function(){function a(r){r.each(function(a){var r=m-b.left-b.right,q=B-b.top-b.bottom,w=d3.select(this);f.domain(Q||
d3.extent(a[0].values.map(v).concat(E)));T?f.range(R||[.5*r/a[0].values.length,r*(a[0].values.length-.5)/a[0].values.length]):f.range(R||[0,r]);l.domain(J||[d3.min(a[0].values.map(H).concat(M)),d3.max(a[0].values.map(D).concat(M))]).range(P||[q,0]);f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1]));l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]+.01*l.domain()[0],l.domain()[1]-.01*l.domain()[1]]):
l.domain([-1,1]));var N=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),U=N.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),L=U.append("defs"),U=U.append("g"),Z=N.select("g");U.append("g").attr("class","nv-ticks");N.attr("transform","translate("+b.left+","+b.top+")");w.on("click",function(a,b){O.chartClick({data:a,index:b,pos:d3.event,id:p})});L.append("clipPath").attr("id","nv-chart-clip-path-"+p).append("rect");N.select("#nv-chart-clip-path-"+p+" rect").attr("width",
r).attr("height",q);Z.attr("clip-path",C?"url(#nv-chart-clip-path-"+p+")":"");q=N.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});q.exit().remove();q.enter().append("path").attr("class",function(a,b,f){return(I(a,b)>G(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b}).attr("d",function(b,f){var m=r/a[0].values.length*.9;return"m0,0l0,"+(l(I(b,f))-l(D(b,f)))+"l"+-m/2+",0l"+m/2+",0l0,"+(l(H(b,f))-l(I(b,f)))+"l0,"+(l(G(b,f))-l(H(b,f)))+"l"+m/2+",0l"+-m/2+",0z"}).attr("transform",
function(a,b){return"translate("+f(v(a,b))+","+l(D(a,b))+")"}).on("mouseover",function(b,k){d3.select(this).classed("hover",!0);O.elementMouseover({point:b,series:a[0],pos:[f(v(b,k)),l(u(b,k))],pointIndex:k,seriesIndex:0,e:d3.event})}).on("mouseout",function(b,f){d3.select(this).classed("hover",!1);O.elementMouseout({point:b,series:a[0],pointIndex:f,seriesIndex:0,e:d3.event})}).on("click",function(a,b){O.elementClick({value:u(a,b),data:a,index:b,pos:[f(v(a,b)),l(u(a,b))],e:d3.event,id:p});d3.event.stopPropagation()}).on("dblclick",
function(a,b){O.elementDblClick({value:u(a,b),data:a,index:b,pos:[f(v(a,b)),l(u(a,b))],e:d3.event,id:p});d3.event.stopPropagation()});q.attr("class",function(a,b,f){return(I(a,b)>G(a,b)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+f+"-"+b});d3.transition(q).attr("transform",function(a,b){return"translate("+f(v(a,b))+","+l(D(a,b))+")"}).attr("d",function(b,f){var m=r/a[0].values.length*.9;return"m0,0l0,"+(l(I(b,f))-l(D(b,f)))+"l"+-m/2+",0l"+m/2+",0l0,"+(l(H(b,f))-l(I(b,f)))+"l0,"+(l(G(b,f))-
l(H(b,f)))+"l"+m/2+",0l"+-m/2+",0z"})});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=Math.floor(1E4*Math.random()),f=d3.scale.linear(),l=d3.scale.linear(),v=function(a){return a.x},u=function(a){return a.y},I=function(a){return a.open},G=function(a){return a.close},D=function(a){return a.high},H=function(a){return a.low},E=[],M=[],T=!1,C=!0,N=r.utils.defaultColor(),Q,J,R,P,O=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=
O;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return v;v=b;return a};a.y=function(b){if(!arguments.length)return u;u=b;return a};a.open=function(b){if(!arguments.length)return I;I=b;return a};a.close=function(b){if(!arguments.length)return G;G=b;return a};a.high=function(b){if(!arguments.length)return D;D=b;return a};a.low=function(b){if(!arguments.length)return H;H=b;return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:
b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return l;l=b;return a};a.xDomain=function(b){if(!arguments.length)return Q;Q=b;return a};a.yDomain=
function(b){if(!arguments.length)return J;J=b;return a};a.xRange=function(b){if(!arguments.length)return R;R=b;return a};a.yRange=function(b){if(!arguments.length)return P;P=b;return a};a.forceX=function(b){if(!arguments.length)return E;E=b;return a};a.forceY=function(b){if(!arguments.length)return M;M=b;return a};a.padData=function(b){if(!arguments.length)return T;T=b;return a};a.clipEdge=function(b){if(!arguments.length)return C;C=b;return a};a.color=function(b){if(!arguments.length)return N;N=
r.utils.getColor(b);return a};a.id=function(b){if(!arguments.length)return p;p=b;return a};return a};r.models.pie=function(){function a(l){l.each(function(a){var l=m-b.left-b.right,r=B-b.top-b.bottom,A=Math.min(l,r)/2,q=A-A/5,I=d3.select(this);a=I.selectAll(".nv-wrap.nv-pie").data(a);var P=a.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+v).append("g"),U=a.select("g");P.append("g").attr("class","nv-pie");P.append("g").attr("class","nv-pieLabels");a.attr("transform","translate("+
b.left+","+b.top+")");U.select(".nv-pie").attr("transform","translate("+l/2+","+r/2+")");U.select(".nv-pieLabels").attr("transform","translate("+l/2+","+r/2+")");I.on("click",function(a,b){R.chartClick({data:a,index:b,pos:d3.event,id:v})});var L=d3.svg.arc().outerRadius(q);N&&L.startAngle(N);Q&&L.endAngle(Q);T&&L.innerRadius(A*J);r=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:f(a)});l=a.select(".nv-pie").selectAll(".nv-slice").data(r);a=a.select(".nv-pieLabels").selectAll(".nv-label").data(r);
l.exit().remove();a.exit().remove();r=l.enter().append("g").attr("class","nv-slice").on("mouseover",function(a,b){d3.select(this).classed("hover",!0);R.elementMouseover({label:p(a.data),value:f(a.data),point:a.data,pointIndex:b,pos:[d3.event.pageX,d3.event.pageY],id:v})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);R.elementMouseout({label:p(a.data),value:f(a.data),point:a.data,index:b,id:v})}).on("click",function(a,b){R.elementClick({label:p(a.data),value:f(a.data),point:a.data,
index:b,pos:d3.event,id:v});d3.event.stopPropagation()}).on("dblclick",function(a,b){R.elementDblClick({label:p(a.data),value:f(a.data),point:a.data,index:b,pos:d3.event,id:v});d3.event.stopPropagation()});l.attr("fill",function(a,b){return u(a,b)}).attr("stroke",function(a,b){return u(a,b)});r.append("path").each(function(a){this._current=a});l.select("path").transition().attr("d",L).attrTween("d",function(a){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;
T||(a.innerRadius=0);var b=d3.interpolate(this._current,a);this._current=b(0);return function(a){return L(b(a))}});if(G){var Z=d3.svg.arc().innerRadius(0);D&&(Z=L);H&&(Z=d3.svg.arc().outerRadius(L.outerRadius()));a.enter().append("g").classed("nv-label",!0).each(function(a,b){var f=d3.select(this);f.attr("transform",function(a){if(C){a.outerRadius=q+10;a.innerRadius=q+15;var b=(a.startAngle+a.endAngle)/2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+Z.centroid(a)+
") rotate("+b+")"}a.outerRadius=A+10;a.innerRadius=A+15;return"translate("+Z.centroid(a)+")"});f.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);f.append("text").style("text-anchor",C?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var V={},k=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};a.transition().attr("transform",function(a){if(C){a.outerRadius=q+10;a.innerRadius=q+15;var b=(a.startAngle+a.endAngle)/
2*(180/Math.PI),b=(a.startAngle+a.endAngle)/2<Math.PI?b-90:b+90;return"translate("+Z.centroid(a)+") rotate("+b+")"}a.outerRadius=A+10;a.innerRadius=A+15;a=Z.centroid(a);b=k(a);V[b]&&(a[1]-=14);V[k(a)]=!0;return"translate("+a+")"});a.select(".nv-label text").style("text-anchor",C?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(a,b){var k=(a.endAngle-a.startAngle)/(2*Math.PI),l={key:p(a.data),value:f(a.data),percent:d3.format("%")(k)};return a.value&&k>M?l[E]:""})}});return a}
var b={top:0,right:0,bottom:0,left:0},m=500,B=500,p=function(a){return a.x},f=function(a){return a.y},l=function(a){return a.description},v=Math.floor(1E4*Math.random()),u=r.utils.defaultColor(),I=d3.format(",.2f"),G=!0,D=!0,H=!1,E="key",M=.02,T=!1,C=!1,N=!1,Q=!1,J=.5,R=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");a.dispatch=R;a.options=r.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.values=function(b){r.log("pie.values() is no longer supported.");return a};a.x=function(b){if(!arguments.length)return p;p=b;return a};a.y=function(b){if(!arguments.length)return f;f=d3.functor(b);
return a};a.description=function(b){if(!arguments.length)return l;l=b;return a};a.showLabels=function(b){if(!arguments.length)return G;G=b;return a};a.labelSunbeamLayout=function(b){if(!arguments.length)return C;C=b;return a};a.donutLabelsOutside=function(b){if(!arguments.length)return H;H=b;return a};a.pieLabelsOutside=function(b){if(!arguments.length)return D;D=b;return a};a.labelType=function(b){if(!arguments.length)return E;E=(E=b)||"key";return a};a.donut=function(b){if(!arguments.length)return T;
T=b;return a};a.donutRatio=function(b){if(!arguments.length)return J;J=b;return a};a.startAngle=function(b){if(!arguments.length)return N;N=b;return a};a.endAngle=function(b){if(!arguments.length)return Q;Q=b;return a};a.id=function(b){if(!arguments.length)return v;v=b;return a};a.color=function(b){if(!arguments.length)return u;u=r.utils.getColor(b);return a};a.valueFormat=function(b){if(!arguments.length)return I;I=b;return a};a.labelThreshold=function(b){if(!arguments.length)return M;M=b;return a};
return a};r.models.pieChart=function(){function a(u){u.each(function(u){var r=d3.select(this),v=(p||parseInt(r.style("width"))||960)-B.left-B.right,M=(f||parseInt(r.style("height"))||400)-B.top-B.bottom;a.update=function(){r.transition().call(a)};a.container=this;G.disabled=u.map(function(a){return!!a.disabled});if(!D){var J;D={};for(J in G)D[J]=G[J]instanceof Array?G[J].slice(0):G[J]}if(u&&u.length)r.selectAll(".nv-noData").remove();else return J=r.selectAll(".nv-noData").data([H]),J.enter().append("text").attr("class",
"nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),J.attr("x",B.left+v/2).attr("y",B.top+M/2).text(function(a){return a}),a;J=r.selectAll("g.nv-wrap.nv-pieChart").data([u]);var I=J.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),P=J.select("g");I.append("g").attr("class","nv-pieWrap");I.append("g").attr("class","nv-legendWrap");l&&(m.width(v).key(b.x()),J.select(".nv-legendWrap").datum(u).call(m),B.top!=m.height()&&(B.top=m.height(),M=(f||parseInt(r.style("height"))||
400)-B.top-B.bottom),J.select(".nv-legendWrap").attr("transform","translate(0,"+-B.top+")"));J.attr("transform","translate("+B.left+","+B.top+")");b.width(v).height(M);v=P.select(".nv-pieWrap").datum([u]);d3.transition(v).call(b);m.dispatch.on("stateChange",function(b){G=b;E.stateChange(G);a.update()});b.dispatch.on("elementMouseout.tooltip",function(a){E.tooltipHide(a)});E.on("changeState",function(b){"undefined"!==typeof b.disabled&&(u.forEach(function(a,f){a.disabled=b.disabled[f]}),G.disabled=
b.disabled);a.update()})});return a}var b=r.models.pie(),m=r.models.legend(),B={top:30,right:20,bottom:20,left:20},p=null,f=null,l=!0,v=r.utils.defaultColor(),u=!0,I=function(a,b,f,l){return"<h3>"+a+"</h3><p>"+b+"</p>"},G={},D=null,H="No Data Available.",E=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState");b.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+B.left,a.pos[1]+B.top];E.tooltipShow(a)});E.on("tooltipShow",function(f){if(u){var l=b.description()(f.point)||
b.x()(f.point),m=f.pos[0]+0,p=f.pos[1]+0,v=b.valueFormat()(b.y()(f.point)),l=I(l,v,f,a);r.tooltip.show([m,p],l,0>f.value?"n":"s",null,void 0)}});E.on("tooltipHide",function(){u&&r.tooltip.cleanup()});a.legend=m;a.dispatch=E;a.pie=b;d3.rebind(a,b,"valueFormat","values","x","y","description","id","showLabels","donutLabelsOutside","pieLabelsOutside","labelType","donut","donutRatio","labelThreshold");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return B;B.top="undefined"!=
typeof b.top?b.top:B.top;B.right="undefined"!=typeof b.right?b.right:B.right;B.bottom="undefined"!=typeof b.bottom?b.bottom:B.bottom;B.left="undefined"!=typeof b.left?b.left:B.left;return a};a.width=function(b){if(!arguments.length)return p;p=b;return a};a.height=function(b){if(!arguments.length)return f;f=b;return a};a.color=function(f){if(!arguments.length)return v;v=r.utils.getColor(f);m.color(v);b.color(v);return a};a.showLegend=function(b){if(!arguments.length)return l;l=b;return a};a.tooltips=
function(b){if(!arguments.length)return u;u=b;return a};a.tooltipContent=function(b){if(!arguments.length)return I;I=b;return a};a.state=function(b){if(!arguments.length)return G;G=b;return a};a.defaultState=function(b){if(!arguments.length)return D;D=b;return a};a.noData=function(b){if(!arguments.length)return H;H=b;return a};return a};r.models.scatter=function(){function a(Y){Y.each(function(a){var Y=m-b.left-b.right,ca=B-b.top-b.bottom,ba=d3.select(this);a.forEach(function(a,b){a.values.forEach(function(a){a.series=
b})});var na=A&&q&&U?[]:d3.merge(a.map(function(a){return a.values.map(function(a,b){return{x:I(a,b),y:G(a,b),size:D(a,b)}})}));l.domain(A||d3.extent(na.map(function(a){return a.x}).concat(M)));R&&a[0]?l.range(S||[(Y*P+Y)/(2*a[0].values.length),Y-Y*(1+P)/(2*a[0].values.length)]):l.range(S||[0,Y]);v.domain(q||d3.extent(na.map(function(a){return a.y}).concat(T))).range(X||[ca,0]);u.domain(U||d3.extent(na.map(function(a){return a.size}).concat(C))).range(L||[16,256]);if(l.domain()[0]===l.domain()[1]||
v.domain()[0]===v.domain()[1])Z=!0;l.domain()[0]===l.domain()[1]&&(l.domain()[0]?l.domain([l.domain()[0]-.01*l.domain()[0],l.domain()[1]+.01*l.domain()[1]]):l.domain([-1,1]));v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));isNaN(l.domain()[0])&&l.domain([-1,1]);isNaN(v.domain()[0])&&v.domain([-1,1]);y=y||l;la=la||v;var fa=ba.selectAll("g.nv-wrap.nv-scatter").data([a]),na=fa.enter().append("g").attr("class",
"nvd3 nv-wrap nv-scatter nv-chart-"+f+(Z?" nv-single-point":"")),ba=na.append("defs"),na=na.append("g"),Aa=fa.select("g");na.append("g").attr("class","nv-groups");na.append("g").attr("class","nv-point-paths");fa.attr("transform","translate("+b.left+","+b.top+")");ba.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect");fa.select("#nv-edge-clip-"+f+" rect").attr("width",Y).attr("height",0<ca?ca:0);Aa.attr("clip-path",O?"url(#nv-edge-clip-"+f+")":"");ma=!0;Y=fa.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},
function(a){return a.key});Y.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);Y.exit().remove();Y.attr("class",function(a,b){return"nv-group nv-series-"+b}).classed("hover",function(a){return a.hover});Y.transition().style("fill",function(a,b){return p(a,b)}).style("stroke",function(a,b){return p(a,b)}).style("stroke-opacity",1).style("fill-opacity",.5);E?(ca=Y.selectAll("circle.nv-point").data(function(a){return a.values},Q),ca.enter().append("circle").style("fill",function(a,
b){return a.color}).style("stroke",function(a,b){return a.color}).attr("cx",function(a,b){return r.utils.NaNtoZero(y(I(a,b)))}).attr("cy",function(a,b){return r.utils.NaNtoZero(la(G(a,b)))}).attr("r",function(a,b){return Math.sqrt(u(D(a,b))/Math.PI)}),ca.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("cx",function(a,b){return r.utils.NaNtoZero(l(I(a,b)))}).attr("cy",function(a,b){return r.utils.NaNtoZero(v(G(a,b)))}).remove(),ca.each(function(a,b){d3.select(this).classed("nv-point",
!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ca.transition().attr("cx",function(a,b){return r.utils.NaNtoZero(l(I(a,b)))}).attr("cy",function(a,b){return r.utils.NaNtoZero(v(G(a,b)))}).attr("r",function(a,b){return Math.sqrt(u(D(a,b))/Math.PI)})):(ca=Y.selectAll("path.nv-point").data(function(a){return a.values}),ca.enter().append("path").style("fill",function(a,b){return a.color}).style("stroke",function(a,b){return a.color}).attr("transform",function(a,b){return"translate("+y(I(a,b))+","+
la(G(a,b))+")"}).attr("d",d3.svg.symbol().type(H).size(function(a,b){return u(D(a,b))})),ca.exit().remove(),Y.exit().selectAll("path.nv-point").transition().attr("transform",function(a,b){return"translate("+l(I(a,b))+","+v(G(a,b))+")"}).remove(),ca.each(function(a,b){d3.select(this).classed("nv-point",!0).classed("nv-point-"+b,!0).classed("hover",!1)}),ca.transition().attr("transform",function(a,b){return"translate("+l(I(a,b))+","+v(G(a,b))+")"}).attr("d",d3.svg.symbol().type(H).size(function(a,b){return u(D(a,
b))})));clearTimeout(W);W=setTimeout(function(){if(!N)return!1;var p=d3.merge(a.map(function(a,b){return a.values.map(function(a,f){var k=I(a,f),m=G(a,f);return[l(k)+1E-7*Math.random(),v(m)+1E-7*Math.random(),b,f,a]}).filter(function(a,b){return J(a[4],b)})}));if(!0===k){if(w){fa.select("defs").selectAll(".nv-point-clips").data([f]).enter().append("clipPath").attr("class","nv-point-clips").attr("id","nv-points-clip-"+f);var q=fa.select("#nv-points-clip-"+f).selectAll("circle").data(p);q.enter().append("circle").attr("r",
F);q.exit().remove();q.attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]});fa.select(".nv-point-paths").attr("clip-path","url(#nv-points-clip-"+f+")")}p.length&&(p.push([l.range()[0]-20,v.range()[0]-20,null,null]),p.push([l.range()[1]+20,v.range()[1]+20,null,null]),p.push([l.range()[0]-20,v.range()[0]+20,null,null]),p.push([l.range()[1]+20,v.range()[1]-20,null,null]));var u=d3.geom.polygon([[-10,-10],[-10,B+10],[m+10,B+10],[m+10,-10]]),q=d3.geom.voronoi(p).map(function(a,b){return{data:u.clip(a),
series:p[b][2],point:p[b][3]}}),q=fa.select(".nv-point-paths").selectAll("path").data(q);q.enter().append("path").attr("class",function(a,b){return"nv-path-"+b});q.exit().remove();q.attr("d",function(a){return 0===a.data.length?"M 0 0":"M"+a.data.join("L")+"Z"});var r=function(f,k){if(ma)return 0;var m=a[f.series];if("undefined"!==typeof m){var p=m.values[f.point];k({point:p,series:m,pos:[l(I(p,f.point))+b.left,v(G(p,f.point))+b.top],seriesIndex:f.series,pointIndex:f.point})}};q.on("click",function(a){r(a,
V.elementClick)}).on("mouseover",function(a){r(a,V.elementMouseover)}).on("mouseout",function(a,b){r(a,V.elementMouseout)})}else fa.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(f,k){if(ma||!a[f.series])return 0;var m=a[f.series],p=m.values[k];V.elementClick({point:p,series:m,pos:[l(I(p,k))+b.left,v(G(p,k))+b.top],seriesIndex:f.series,pointIndex:k})}).on("mouseover",function(f,k){if(ma||!a[f.series])return 0;var m=a[f.series],p=m.values[k];V.elementMouseover({point:p,
series:m,pos:[l(I(p,k))+b.left,v(G(p,k))+b.top],seriesIndex:f.series,pointIndex:k})}).on("mouseout",function(b,f){if(ma||!a[b.series])return 0;var k=a[b.series];V.elementMouseout({point:k.values[f],series:k,seriesIndex:b.series,pointIndex:f})});ma=!1},300);y=l.copy();la=v.copy();u.copy()});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=r.utils.defaultColor(),f=Math.floor(1E5*Math.random()),l=d3.scale.linear(),v=d3.scale.linear(),u=d3.scale.linear(),I=function(a){return a.x},G=function(a){return a.y},
D=function(a){return a.size||1},H=function(a){return a.shape||"circle"},E=!0,M=[],T=[],C=[],N=!0,Q=null,J=function(a){return!a.notActive},R=!1,P=.1,O=!1,w=!0,F=function(){return 25},A=null,q=null,S=null,X=null,U=null,L=null,Z=!1,V=d3.dispatch("elementClick","elementMouseover","elementMouseout"),k=!0,y,la,W,ma=!1;a.clearHighlights=function(){d3.selectAll(".nv-chart-"+f+" .nv-point.hover").classed("hover",!1)};a.highlightPoint=function(a,b,k){d3.select(".nv-chart-"+f+" .nv-series-"+a+" .nv-point-"+
b).classed("hover",k)};V.on("elementMouseover.point",function(b){N&&a.highlightPoint(b.seriesIndex,b.pointIndex,!0)});V.on("elementMouseout.point",function(b){N&&a.highlightPoint(b.seriesIndex,b.pointIndex,!1)});a.dispatch=V;a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return I;I=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return G;G=d3.functor(b);return a};a.size=function(b){if(!arguments.length)return D;D=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;
b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.xScale=function(b){if(!arguments.length)return l;l=b;return a};a.yScale=function(b){if(!arguments.length)return v;v=b;return a};a.zScale=function(b){if(!arguments.length)return u;
u=b;return a};a.xDomain=function(b){if(!arguments.length)return A;A=b;return a};a.yDomain=function(b){if(!arguments.length)return q;q=b;return a};a.sizeDomain=function(b){if(!arguments.length)return U;U=b;return a};a.xRange=function(b){if(!arguments.length)return S;S=b;return a};a.yRange=function(b){if(!arguments.length)return X;X=b;return a};a.sizeRange=function(b){if(!arguments.length)return L;L=b;return a};a.forceX=function(b){if(!arguments.length)return M;M=b;return a};a.forceY=function(b){if(!arguments.length)return T;
T=b;return a};a.forceSize=function(b){if(!arguments.length)return C;C=b;return a};a.interactive=function(b){if(!arguments.length)return N;N=b;return a};a.pointKey=function(b){if(!arguments.length)return Q;Q=b;return a};a.pointActive=function(b){if(!arguments.length)return J;J=b;return a};a.padData=function(b){if(!arguments.length)return R;R=b;return a};a.padDataOuter=function(b){if(!arguments.length)return P;P=b;return a};a.clipEdge=function(b){if(!arguments.length)return O;O=b;return a};a.clipVoronoi=
function(b){if(!arguments.length)return w;w=b;return a};a.useVoronoi=function(b){if(!arguments.length)return k;k=b;!1===k&&(w=!1);return a};a.clipRadius=function(b){if(!arguments.length)return F;F=b;return a};a.color=function(b){if(!arguments.length)return p;p=r.utils.getColor(b);return a};a.shape=function(b){if(!arguments.length)return H;H=b;return a};a.onlyCircles=function(b){if(!arguments.length)return E;E=b;return a};a.id=function(b){if(!arguments.length)return f;f=b;return a};a.singlePoint=function(b){if(!arguments.length)return Z;
Z=b;return a};return a};r.models.scatterChart=function(){function a(la){la.each(function(la){function W(){if(F)return fa.select(".nv-point-paths").style("pointer-events","all"),!1;fa.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);H.distortion(w).focus(a[0]);E.distortion(w).focus(a[1]);fa.select(".nv-scatterWrap").call(b);J&&fa.select(".nv-x.nv-axis").call(m);R&&fa.select(".nv-y.nv-axis").call(B);fa.select(".nv-distributionX").datum(la.filter(function(a){return!a.disabled})).call(l);
fa.select(".nv-distributionY").datum(la.filter(function(a){return!a.disabled})).call(v)}var Y=d3.select(this),ea=this,ha=(I||parseInt(Y.style("width"))||960)-u.left-u.right,ca=(G||parseInt(Y.style("height"))||400)-u.top-u.bottom;a.update=function(){Y.transition().duration(k).call(a)};a.container=this;U.disabled=la.map(function(a){return!!a.disabled});if(!L){var ba;L={};for(ba in U)L[ba]=U[ba]instanceof Array?U[ba].slice(0):U[ba]}if(la&&la.length&&la.filter(function(a){return a.values.length}).length)Y.selectAll(".nv-noData").remove();
else return ba=Y.selectAll(".nv-noData").data([V]),ba.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ba.attr("x",u.left+ha/2).attr("y",u.top+ca/2).text(function(a){return a}),a;ba=Y.selectAll("g.nv-wrap.nv-scatterChart").data([la]);var na=ba.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g"),fa=ba.select("g");na.append("rect").attr("class","nvd3 nv-background");na.append("g").attr("class","nv-x nv-axis");
na.append("g").attr("class","nv-y nv-axis");na.append("g").attr("class","nv-scatterWrap");na.append("g").attr("class","nv-distWrap");na.append("g").attr("class","nv-legendWrap");na.append("g").attr("class","nv-controlsWrap");if(Q){var Aa=O?ha/2:ha;p.width(Aa);ba.select(".nv-legendWrap").datum(la).call(p);u.top!=p.height()&&(u.top=p.height(),ca=(G||parseInt(Y.style("height"))||400)-u.top-u.bottom);ba.select(".nv-legendWrap").attr("transform","translate("+(ha-Aa)+","+-u.top+")")}O&&(f.width(180).color(["#444"]),
fa.select(".nv-controlsWrap").datum(y).attr("transform","translate(0,"+-u.top+")").call(f));ba.attr("transform","translate("+u.left+","+u.top+")");P&&fa.select(".nv-y.nv-axis").attr("transform","translate("+ha+",0)");b.width(ha).height(ca).color(la.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!la[b].disabled}));0!==M&&b.xDomain(null);0!==T&&b.yDomain(null);ba.select(".nv-scatterWrap").datum(la.filter(function(a){return!a.disabled})).call(b);0!==M&&(Aa=H.domain()[1]-H.domain()[0],
b.xDomain([H.domain()[0]-M*Aa,H.domain()[1]+M*Aa]));0!==T&&(Aa=E.domain()[1]-E.domain()[0],b.yDomain([E.domain()[0]-T*Aa,E.domain()[1]+T*Aa]));0===T&&0===M||ba.select(".nv-scatterWrap").datum(la.filter(function(a){return!a.disabled})).call(b);J&&(m.scale(H).ticks(m.ticks()&&m.ticks().length?m.ticks():ha/100).tickSize(-ca,0),fa.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(m));R&&(B.scale(E).ticks(B.ticks()&&B.ticks().length?B.ticks():ca/36).tickSize(-ha,0),fa.select(".nv-y.nv-axis").call(B));
C&&(l.getData(b.x()).scale(H).width(ha).color(la.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!la[b].disabled})),na.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),fa.select(".nv-distributionX").attr("transform","translate(0,"+E.range()[0]+")").datum(la.filter(function(a){return!a.disabled})).call(l));N&&(v.getData(b.y()).scale(E).width(ca).color(la.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!la[b].disabled})),na.select(".nv-distWrap").append("g").attr("class",
"nv-distributionY"),fa.select(".nv-distributionY").attr("transform","translate("+(P?ha:-v.size())+",0)").datum(la.filter(function(a){return!a.disabled})).call(v));d3.fisheye&&(fa.select(".nv-background").attr("width",ha).attr("height",ca),fa.select(".nv-background").on("mousemove",W),fa.select(".nv-background").on("click",function(){F=!F}),b.dispatch.on("elementClick.freezeFisheye",function(){F=!F}));f.dispatch.on("legendClick",function(f,k){f.disabled=!f.disabled;w=f.disabled?0:2.5;fa.select(".nv-background").style("pointer-events",
f.disabled?"none":"all");fa.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(H.distortion(w).focus(0),E.distortion(w).focus(0),fa.select(".nv-scatterWrap").call(b),fa.select(".nv-x.nv-axis").call(m),fa.select(".nv-y.nv-axis").call(B)):F=!1;a.update()});p.dispatch.on("stateChange",function(b){U.disabled=b.disabled;Z.stateChange(U);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+
a.pointIndex).attr("y1",function(b,f){return a.pos[1]-ca});d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+l.size());a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];Z.tooltipShow(a)});Z.on("tooltipShow",function(f){if(A){var k=ea.parentNode,l=f.pos[0]+(k.offsetLeft||0),p=f.pos[1]+(k.offsetTop||0),v=f.pos[0]+(k.offsetLeft||0),w=E.range()[0]+u.top+(k.offsetTop||0),y=H.range()[0]+u.left+(k.offsetLeft||0),F=f.pos[1]+(k.offsetTop||0),C=m.tickFormat()(b.x()(f.point,
f.pointIndex)),D=B.tickFormat()(b.y()(f.point,f.pointIndex));null!=q&&r.tooltip.show([v,w],q(f.series.key,C,D,f,a),"n",1,k,"x-nvtooltip");null!=S&&r.tooltip.show([y,F],S(f.series.key,C,D,f,a),"e",1,k,"y-nvtooltip");null!=X&&r.tooltip.show([l,p],X(f.series.key,C,D,f,a),0>f.value?"n":"s",null,k)}});Z.on("changeState",function(b){"undefined"!==typeof b.disabled&&(la.forEach(function(a,f){a.disabled=b.disabled[f]}),U.disabled=b.disabled);a.update()});H.copy();E.copy()});return a}var b=r.models.scatter(),
m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f=r.models.legend(),l=r.models.distribution(),v=r.models.distribution(),u={top:30,right:20,bottom:50,left:75},I=null,G=null,D=r.utils.defaultColor(),H=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=0,T=0,C=!1,N=!1,Q=!0,J=!0,R=!0,P=!1,O=!!d3.fisheye,w=0,F=!1,A=!0,q=function(a,b,f){return"<strong>"+b+"</strong>"},S=function(a,b,f){return"<strong>"+
f+"</strong>"},X=null,U={},L=null,Z=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),V="No Data Available.",k=250;b.xScale(H).yScale(E);m.orient("bottom").tickPadding(10);B.orient(P?"right":"left").tickPadding(10);l.axis("x");v.axis("y");f.updateState(!1);var y=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){Z.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+
b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",v.size())});Z.on("tooltipHide",function(){A&&r.tooltip.cleanup()});a.dispatch=Z;a.scatter=b;a.legend=p;a.controls=f;a.xAxis=m;a.yAxis=B;a.distX=l;a.distY=v;d3.rebind(a,b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=r.utils.optionsFunc.bind(a);a.margin=
function(b){if(!arguments.length)return u;u.top="undefined"!=typeof b.top?b.top:u.top;u.right="undefined"!=typeof b.right?b.right:u.right;u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom;u.left="undefined"!=typeof b.left?b.left:u.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return D;D=r.utils.getColor(b);p.color(D);l.color(D);v.color(D);return a};a.showDistX=
function(b){if(!arguments.length)return C;C=b;return a};a.showDistY=function(b){if(!arguments.length)return N;N=b;return a};a.showControls=function(b){if(!arguments.length)return O;O=b;return a};a.showLegend=function(b){if(!arguments.length)return Q;Q=b;return a};a.showXAxis=function(b){if(!arguments.length)return J;J=b;return a};a.showYAxis=function(b){if(!arguments.length)return R;R=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return P;P=b;B.orient(b?"right":"left");return a};
a.fisheye=function(b){if(!arguments.length)return w;w=b;return a};a.xPadding=function(b){if(!arguments.length)return M;M=b;return a};a.yPadding=function(b){if(!arguments.length)return T;T=b;return a};a.tooltips=function(b){if(!arguments.length)return A;A=b;return a};a.tooltipContent=function(b){if(!arguments.length)return X;X=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return q;q=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return S;S=b;return a};a.state=function(b){if(!arguments.length)return U;
U=b;return a};a.defaultState=function(b){if(!arguments.length)return L;L=b;return a};a.noData=function(b){if(!arguments.length)return V;V=b;return a};a.transitionDuration=function(b){if(!arguments.length)return k;k=b;return a};return a};r.models.scatterPlusLineChart=function(){function a(k){k.each(function(k){function W(){if(O)return ba.select(".nv-point-paths").style("pointer-events","all"),!1;ba.select(".nv-point-paths").style("pointer-events","none");var a=d3.mouse(this);H.distortion(P).focus(a[0]);
E.distortion(P).focus(a[1]);ba.select(".nv-scatterWrap").datum(k.filter(function(a){return!a.disabled})).call(b);N&&ba.select(".nv-x.nv-axis").call(m);Q&&ba.select(".nv-y.nv-axis").call(B);ba.select(".nv-distributionX").datum(k.filter(function(a){return!a.disabled})).call(l);ba.select(".nv-distributionY").datum(k.filter(function(a){return!a.disabled})).call(v)}var ga=d3.select(this),ma=this,Y=(I||parseInt(ga.style("width"))||960)-u.left-u.right,ea=(G||parseInt(ga.style("height"))||400)-u.top-u.bottom;
a.update=function(){ga.transition().duration(Z).call(a)};a.container=this;S.disabled=k.map(function(a){return!!a.disabled});if(!X){var ha;X={};for(ha in S)X[ha]=S[ha]instanceof Array?S[ha].slice(0):S[ha]}if(k&&k.length&&k.filter(function(a){return a.values.length}).length)ga.selectAll(".nv-noData").remove();else return ha=ga.selectAll(".nv-noData").data([L]),ha.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ha.attr("x",u.left+Y/2).attr("y",u.top+
ea/2).text(function(a){return a}),a;H=b.xScale();E=b.yScale();var ca=ga.selectAll("g.nv-wrap.nv-scatterChart").data([k]);ha=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+b.id()).append("g");var ba=ca.select("g");ha.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");ha.append("g").attr("class","nv-x nv-axis");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-scatterWrap");ha.append("g").attr("class","nv-regressionLinesWrap");
ha.append("g").attr("class","nv-distWrap");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");ca.attr("transform","translate("+u.left+","+u.top+")");J&&ba.select(".nv-y.nv-axis").attr("transform","translate("+Y+",0)");C&&(p.width(Y/2),ca.select(".nv-legendWrap").datum(k).call(p),u.top!=p.height()&&(u.top=p.height(),ea=(G||parseInt(ga.style("height"))||400)-u.top-u.bottom),ca.select(".nv-legendWrap").attr("transform","translate("+Y/2+","+-u.top+")"));R&&(f.width(180).color(["#444"]),
ba.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-u.top+")").call(f));b.width(Y).height(ea).color(k.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!k[b].disabled}));ca.select(".nv-scatterWrap").datum(k.filter(function(a){return!a.disabled})).call(b);ca.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+b.id()+")");ca=ca.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});ca.enter().append("g").attr("class",
"nv-regLines");ca=ca.selectAll(".nv-regLine").data(function(a){return[a]});ca.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);ca.transition().attr("x1",H.range()[0]).attr("x2",H.range()[1]).attr("y1",function(a,b){return E(H.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,b){return E(H.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,b,f){return D(a,f)}).style("stroke-opacity",function(a,b){return a.disabled||"undefined"===typeof a.slope||"undefined"===
typeof a.intercept?0:1});N&&(m.scale(H).ticks(m.ticks()?m.ticks():Y/100).tickSize(-ea,0),ba.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")").call(m));Q&&(B.scale(E).ticks(B.ticks()?B.ticks():ea/36).tickSize(-Y,0),ba.select(".nv-y.nv-axis").call(B));M&&(l.getData(b.x()).scale(H).width(Y).color(k.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!k[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),ba.select(".nv-distributionX").attr("transform",
"translate(0,"+E.range()[0]+")").datum(k.filter(function(a){return!a.disabled})).call(l));T&&(v.getData(b.y()).scale(E).width(ea).color(k.map(function(a,b){return a.color||D(a,b)}).filter(function(a,b){return!k[b].disabled})),ha.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),ba.select(".nv-distributionY").attr("transform","translate("+(J?Y:-v.size())+",0)").datum(k.filter(function(a){return!a.disabled})).call(v));d3.fisheye&&(ba.select(".nv-background").attr("width",Y).attr("height",
ea),ba.select(".nv-background").on("mousemove",W),ba.select(".nv-background").on("click",function(){O=!O}),b.dispatch.on("elementClick.freezeFisheye",function(){O=!O}));f.dispatch.on("legendClick",function(f,k){f.disabled=!f.disabled;P=f.disabled?0:2.5;ba.select(".nv-background").style("pointer-events",f.disabled?"none":"all");ba.select(".nv-point-paths").style("pointer-events",f.disabled?"all":"none");f.disabled?(H.distortion(P).focus(0),E.distortion(P).focus(0),ba.select(".nv-scatterWrap").call(b),
ba.select(".nv-x.nv-axis").call(m),ba.select(".nv-y.nv-axis").call(B)):O=!1;a.update()});p.dispatch.on("stateChange",function(b){S=b;U.stateChange(S);a.update()});b.dispatch.on("elementMouseover.tooltip",function(a){d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.pos[1]-ea);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.pos[0]+l.size());a.pos=[a.pos[0]+u.left,a.pos[1]+u.top];U.tooltipShow(a)});U.on("tooltipShow",
function(f){if(w){var k=ma.parentNode,l=f.pos[0]+(k.offsetLeft||0),p=f.pos[1]+(k.offsetTop||0),v=f.pos[0]+(k.offsetLeft||0),y=E.range()[0]+u.top+(k.offsetTop||0),C=H.range()[0]+u.left+(k.offsetLeft||0),D=f.pos[1]+(k.offsetTop||0),J=m.tickFormat()(b.x()(f.point,f.pointIndex)),L=B.tickFormat()(b.y()(f.point,f.pointIndex));null!=F&&r.tooltip.show([v,y],F(f.series.key,J,L,f,a),"n",1,k,"x-nvtooltip");null!=A&&r.tooltip.show([C,D],A(f.series.key,J,L,f,a),"e",1,k,"y-nvtooltip");null!=q&&r.tooltip.show([l,
p],q(f.series.key,J,L,f.point.tooltip,f,a),0>f.value?"n":"s",null,k)}});U.on("changeState",function(b){"undefined"!==typeof b.disabled&&(k.forEach(function(a,f){a.disabled=b.disabled[f]}),S.disabled=b.disabled);a.update()});H.copy();E.copy()});return a}var b=r.models.scatter(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f=r.models.legend(),l=r.models.distribution(),v=r.models.distribution(),u={top:30,right:20,bottom:50,left:75},I=null,G=null,D=r.utils.defaultColor(),H=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):
b.xScale(),E=d3.fisheye?d3.fisheye.scale(d3.scale.linear).distortion(0):b.yScale(),M=!1,T=!1,C=!0,N=!0,Q=!0,J=!1,R=!!d3.fisheye,P=0,O=!1,w=!0,F=function(a,b,f){return"<strong>"+b+"</strong>"},A=function(a,b,f){return"<strong>"+f+"</strong>"},q=function(a,b,f,l){return"<h3>"+a+"</h3><p>"+l+"</p>"},S={},X=null,U=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),L="No Data Available.",Z=250;b.xScale(H).yScale(E);m.orient("bottom").tickPadding(10);B.orient(J?"right":"left").tickPadding(10);
l.axis("x");v.axis("y");f.updateState(!1);var V=[{key:"Magnify",disabled:!0}];b.dispatch.on("elementMouseout.tooltip",function(a){U.tooltipHide(a);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);d3.select(".nv-chart-"+b.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",v.size())});U.on("tooltipHide",function(){w&&r.tooltip.cleanup()});a.dispatch=U;a.scatter=b;a.legend=p;a.controls=f;a.xAxis=m;a.yAxis=B;a.distX=l;a.distY=v;d3.rebind(a,
b,"id","interactive","pointActive","x","y","shape","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","sizeRange","forceX","forceY","forceSize","clipVoronoi","clipRadius","useVoronoi");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return u;u.top="undefined"!=typeof b.top?b.top:u.top;u.right="undefined"!=typeof b.right?b.right:u.right;u.bottom="undefined"!=typeof b.bottom?b.bottom:u.bottom;u.left="undefined"!=typeof b.left?b.left:
u.left;return a};a.width=function(b){if(!arguments.length)return I;I=b;return a};a.height=function(b){if(!arguments.length)return G;G=b;return a};a.color=function(b){if(!arguments.length)return D;D=r.utils.getColor(b);p.color(D);l.color(D);v.color(D);return a};a.showDistX=function(b){if(!arguments.length)return M;M=b;return a};a.showDistY=function(b){if(!arguments.length)return T;T=b;return a};a.showControls=function(b){if(!arguments.length)return R;R=b;return a};a.showLegend=function(b){if(!arguments.length)return C;
C=b;return a};a.showXAxis=function(b){if(!arguments.length)return N;N=b;return a};a.showYAxis=function(b){if(!arguments.length)return Q;Q=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return J;J=b;B.orient(b?"right":"left");return a};a.fisheye=function(b){if(!arguments.length)return P;P=b;return a};a.tooltips=function(b){if(!arguments.length)return w;w=b;return a};a.tooltipContent=function(b){if(!arguments.length)return q;q=b;return a};a.tooltipXContent=function(b){if(!arguments.length)return F;
F=b;return a};a.tooltipYContent=function(b){if(!arguments.length)return A;A=b;return a};a.state=function(b){if(!arguments.length)return S;S=b;return a};a.defaultState=function(b){if(!arguments.length)return X;X=b;return a};a.noData=function(b){if(!arguments.length)return L;L=b;return a};a.transitionDuration=function(b){if(!arguments.length)return Z;Z=b;return a};return a};r.models.sparkline=function(){function a(p){p.each(function(a){var p=m-b.left-b.right,r=B-b.top-b.bottom,M=d3.select(this);f.domain(G||
d3.extent(a,v)).range(H||[0,p]);l.domain(D||d3.extent(a,u)).range(E||[r,0]);a=M.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+b.left+","+b.top+")");p=a.selectAll("path").data(function(a){return[a]});p.enter().append("path");p.exit().remove();p.style("stroke",function(a,b){return a.color||I(a,b)}).attr("d",d3.svg.line().x(function(a,b){return f(v(a,b))}).y(function(a,b){return l(u(a,
b))}));a=a.selectAll("circle.nv-point").data(function(a){function b(f){if(-1!=f){var l=a[f];l.pointIndex=f;return l}return null}var f=a.map(function(a,b){return u(a,b)}),m=b(f.lastIndexOf(l.domain()[1])),p=b(f.indexOf(l.domain()[0])),f=b(f.length-1);return[p,m,f].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();a.attr("cx",function(a,b){return f(v(a,a.pointIndex))}).attr("cy",function(a,b){return l(u(a,a.pointIndex))}).attr("r",2).attr("class",function(a,b){return v(a,
a.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":u(a,a.pointIndex)==l.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});return a}var b={top:2,right:0,bottom:2,left:0},m=400,B=32,p=!0,f=d3.scale.linear(),l=d3.scale.linear(),v=function(a){return a.x},u=function(a){return a.y},I=r.utils.getColor(["#000"]),G,D,H,E;a.options=r.utils.optionsFunc.bind(a);a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?f.top:b.top;b.right="undefined"!=typeof f.right?f.right:
b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.x=function(b){if(!arguments.length)return v;v=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return u;u=d3.functor(b);return a};a.xScale=function(b){if(!arguments.length)return f;f=b;return a};a.yScale=function(b){if(!arguments.length)return l;
l=b;return a};a.xDomain=function(b){if(!arguments.length)return G;G=b;return a};a.yDomain=function(b){if(!arguments.length)return D;D=b;return a};a.xRange=function(b){if(!arguments.length)return H;H=b;return a};a.yRange=function(b){if(!arguments.length)return E;E=b;return a};a.animate=function(b){if(!arguments.length)return p;p=b;return a};a.color=function(b){if(!arguments.length)return I;I=r.utils.getColor(b);return a};return a};r.models.sparklinePlus=function(){function a(r){r.each(function(C){function D(){if(!u){var a=
w.selectAll(".nv-hoverValue").data(v),l=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+f(b.x()(C[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);v.length&&(l.append("line").attr("x1",0).attr("y1",-m.top).attr("x2",0).attr("y2",R),l.append("text").attr("class",
"nv-xValue").attr("x",-6).attr("y",-m.top).attr("text-anchor","end").attr("dy",".9em"),w.select(".nv-hoverValue .nv-xValue").text(I(b.x()(C[v[0]],v[0]))),l.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-m.top).attr("text-anchor","start").attr("dy",".9em"),w.select(".nv-hoverValue .nv-yValue").text(G(b.y()(C[v[0]],v[0]))))}}var Q=d3.select(this),J=(B||parseInt(Q.style("width"))||960)-m.left-m.right,R=(p||parseInt(Q.style("height"))||400)-m.top-m.bottom;a.update=function(){a(r)};a.container=
this;if(C&&C.length)Q.selectAll(".nv-noData").remove();else{var P=Q.selectAll(".nv-noData").data([M]);P.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");P.attr("x",m.left+J/2).attr("y",m.top+R/2).text(function(a){return a});return a}P=b.y()(C[C.length-1],C.length-1);f=b.xScale();l=b.yScale();var O=Q.selectAll("g.nv-wrap.nv-sparklineplus").data([C]),Q=O.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),w=O.select("g");
Q.append("g").attr("class","nv-sparklineWrap");Q.append("g").attr("class","nv-valueWrap");Q.append("g").attr("class","nv-hoverArea");O.attr("transform","translate("+m.left+","+m.top+")");O=w.select(".nv-sparklineWrap");b.width(J).height(R);O.call(b);O=w.select(".nv-valueWrap").selectAll(".nv-currentValue").data([P]);O.enter().append("text").attr("class","nv-currentValue").attr("dx",E?-8:8).attr("dy",".9em").style("text-anchor",E?"end":"start");O.attr("x",J+(E?m.right:0)).attr("y",H?function(a){return l(a)}:
0).style("fill",b.color()(C[C.length-1],C.length-1)).text(G(P));Q.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!u){for(var a=d3.mouse(this)[0]-m.left,a=Math.round(f.invert(a)),l=Math.abs(b.x()(C[0],0)-a),p=0,r=0;r<C.length;r++)Math.abs(b.x()(C[r],r)-a)<l&&(l=Math.abs(b.x()(C[r],r)-a),p=r);v=[p];D()}}).on("click",function(){u=!u}).on("mouseout",function(){v=[];D()});w.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-m.left+","+-m.top+")"}).attr("width",
J+m.left+m.right).attr("height",R+m.top)});return a}var b=r.models.sparkline(),m={top:15,right:100,bottom:10,left:50},B=null,p=null,f,l,v=[],u=!1,I=d3.format(",r"),G=d3.format(",.2f"),D=!0,H=!0,E=!1,M="No Data Available.";a.sparkline=b;d3.rebind(a,b,"x","y","xScale","yScale","color");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return m;m.top="undefined"!=typeof b.top?b.top:m.top;m.right="undefined"!=typeof b.right?b.right:m.right;m.bottom="undefined"!=typeof b.bottom?
b.bottom:m.bottom;m.left="undefined"!=typeof b.left?b.left:m.left;return a};a.width=function(b){if(!arguments.length)return B;B=b;return a};a.height=function(b){if(!arguments.length)return p;p=b;return a};a.xTickFormat=function(b){if(!arguments.length)return I;I=b;return a};a.yTickFormat=function(b){if(!arguments.length)return G;G=b;return a};a.showValue=function(b){if(!arguments.length)return D;D=b;return a};a.alignValue=function(b){if(!arguments.length)return H;H=b;return a};a.rightAlignValue=function(b){if(!arguments.length)return E;
E=b;return a};a.noData=function(b){if(!arguments.length)return M;M=b;return a};return a};r.models.stackedArea=function(){function a(r){r.each(function(r){var u=m-b.left-b.right,N=B-b.top-b.bottom,P=d3.select(this);E=T.xScale();M=T.yScale();var O=r;r.forEach(function(a,b){a.seriesIndex=b;a.values=a.values.map(function(a,f){a.index=f;a.seriesIndex=b;return a})});r=r.filter(function(a){return!a.disabled});r=d3.layout.stack().order(G).offset(I).values(function(a){return a.values}).x(l).y(v).out(function(a,
b,f){f=0===v(a)?0:f;a.display={y:f,y0:b}})(r);var P=P.selectAll("g.nv-wrap.nv-stackedarea").data([r]),w=P.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),F=w.append("defs"),w=w.append("g"),A=P.select("g");w.append("g").attr("class","nv-areaWrap");w.append("g").attr("class","nv-scatterWrap");P.attr("transform","translate("+b.left+","+b.top+")");T.width(u).height(N).x(l).y(function(a){return a.display.y+a.display.y0}).forceY([0]).color(r.map(function(a,b){return a.color||p(a,a.seriesIndex)}));
A.select(".nv-scatterWrap").datum(r).call(T);F.append("clipPath").attr("id","nv-edge-clip-"+f).append("rect");P.select("#nv-edge-clip-"+f+" rect").attr("width",u).attr("height",N);A.attr("clip-path",H?"url(#nv-edge-clip-"+f+")":"");var q=d3.svg.area().x(function(a,b){return E(l(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y+a.display.y0)}).interpolate(D),S=d3.svg.area().x(function(a,b){return E(l(a,b))}).y0(function(a){return M(a.display.y0)}).y1(function(a){return M(a.display.y0)}),
u=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});u.enter().append("path").attr("class",function(a,b){return"nv-area nv-area-"+b}).attr("d",function(a,b){return S(a.values,a.seriesIndex)}).on("mouseover",function(a,b){d3.select(this).classed("hover",!0);C.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,b){d3.select(this).classed("hover",!1);C.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,
d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,b){d3.select(this).classed("hover",!1);C.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});u.exit().remove();u.style("fill",function(a,b){return a.color||p(a,a.seriesIndex)}).style("stroke",function(a,b){return a.color||p(a,a.seriesIndex)});u.transition().attr("d",function(a,b){return q(a.values,b)});T.dispatch.on("elementMouseover.area",function(a){A.select(".nv-chart-"+f+" .nv-area-"+
a.seriesIndex).classed("hover",!0)});T.dispatch.on("elementMouseout.area",function(a){A.select(".nv-chart-"+f+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var b=a.length,f=a[0].length,l=1/b,m,k,p,q=[];for(k=0;k<f;++k){for(p=m=0;m<O.length;m++)p+=v(O[m].values[k]);if(p)for(m=0;m<b;m++)a[m][k][1]/=p;else for(m=0;m<b;m++)a[m][k][1]=l}for(k=0;k<f;++k)q[k]=0;return q}});return a}var b={top:0,right:0,bottom:0,left:0},m=960,B=500,p=r.utils.defaultColor(),
f=Math.floor(1E5*Math.random()),l=function(a){return a.x},v=function(a){return a.y},u="stack",I="zero",G="default",D="linear",H=!1,E,M,T=r.models.scatter(),C=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout");T.size(2.2).sizeDomain([2.2,2.2]);T.dispatch.on("elementClick.area",function(a){C.areaClick(a)});T.dispatch.on("elementMouseover.tooltip",function(a){a.pos=[a.pos[0]+b.left,a.pos[1]+b.top];C.tooltipShow(a)});T.dispatch.on("elementMouseout.tooltip",function(a){C.tooltipHide(a)});
a.dispatch=C;a.scatter=T;d3.rebind(a,T,"interactive","size","xScale","yScale","zScale","xDomain","yDomain","xRange","yRange","sizeDomain","forceX","forceY","forceSize","clipVoronoi","useVoronoi","clipRadius","highlightPoint","clearHighlights");a.options=r.utils.optionsFunc.bind(a);a.x=function(b){if(!arguments.length)return l;l=d3.functor(b);return a};a.y=function(b){if(!arguments.length)return v;v=d3.functor(b);return a};a.margin=function(f){if(!arguments.length)return b;b.top="undefined"!=typeof f.top?
f.top:b.top;b.right="undefined"!=typeof f.right?f.right:b.right;b.bottom="undefined"!=typeof f.bottom?f.bottom:b.bottom;b.left="undefined"!=typeof f.left?f.left:b.left;return a};a.width=function(b){if(!arguments.length)return m;m=b;return a};a.height=function(b){if(!arguments.length)return B;B=b;return a};a.clipEdge=function(b){if(!arguments.length)return H;H=b;return a};a.color=function(b){if(!arguments.length)return p;p=r.utils.getColor(b);return a};a.offset=function(b){if(!arguments.length)return I;
I=b;return a};a.order=function(b){if(!arguments.length)return G;G=b;return a};a.style=function(b){if(!arguments.length)return u;u=b;switch(u){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}return a};a.interpolate=function(b){if(!arguments.length)return D;
D=b;return a};return a};r.models.stackedAreaChart=function(){function a(L){L.each(function(L){var V=d3.select(this),k=this,y=(u||parseInt(V.style("width"))||960)-v.left-v.right,W=(I||parseInt(V.style("height"))||400)-v.top-v.bottom;a.update=function(){V.transition().duration(U).call(a)};a.container=this;O.disabled=L.map(function(a){return!!a.disabled});if(!w){var ga;w={};for(ga in O)w[ga]=O[ga]instanceof Array?O[ga].slice(0):O[ga]}if(L&&L.length&&L.filter(function(a){return a.values.length}).length)V.selectAll(".nv-noData").remove();
else return ga=V.selectAll(".nv-noData").data([F]),ga.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),ga.attr("x",v.left+y/2).attr("y",v.top+W/2).text(function(a){return a}),a;J=b.xScale();R=b.yScale();ga=V.selectAll("g.nv-wrap.nv-stackedAreaChart").data([L]);var ma=ga.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),Y=ga.select("g");ma.append("rect").style("opacity",0);ma.append("g").attr("class","nv-x nv-axis");
ma.append("g").attr("class","nv-y nv-axis");ma.append("g").attr("class","nv-stackedWrap");ma.append("g").attr("class","nv-legendWrap");ma.append("g").attr("class","nv-controlsWrap");ma.append("g").attr("class","nv-interactive");Y.select("rect").attr("width",y).attr("height",W);H&&(ma=D?y-q:y,p.width(ma),Y.select(".nv-legendWrap").datum(L).call(p),v.top!=p.height()&&(v.top=p.height(),W=(I||parseInt(V.style("height"))||400)-v.top-v.bottom),Y.select(".nv-legendWrap").attr("transform","translate("+(y-
ma)+","+-v.top+")"));if(D){var ea=[{key:X.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=b.style(),style:"stack"},{key:X.stream||"Stream",metaKey:"Stream",disabled:"stream"!=b.style(),style:"stream"},{key:X.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=b.style(),style:"expand"},{key:X.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=b.style(),style:"stack_percent"}];q=S.length/3*260;ea=ea.filter(function(a){return-1!==S.indexOf(a.metaKey)});f.width(q).color(["#444",
"#444","#444"]);Y.select(".nv-controlsWrap").datum(ea).call(f);v.top!=Math.max(f.height(),p.height())&&(v.top=Math.max(f.height(),p.height()),W=(I||parseInt(V.style("height"))||400)-v.top-v.bottom);Y.select(".nv-controlsWrap").attr("transform","translate(0,"+-v.top+")")}ga.attr("transform","translate("+v.left+","+v.top+")");T&&Y.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");C&&(l.width(y).height(W).margin({left:v.left,top:v.top}).svgContainer(V).xScale(J),ga.select(".nv-interactive").call(l));
b.width(y).height(W);Y.select(".nv-stackedWrap").datum(L).transition().call(b);E&&(m.scale(J).ticks(y/100).tickSize(-W,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+W+")"),Y.select(".nv-x.nv-axis").transition().duration(0).call(m));M&&(B.scale(R).ticks("wiggle"==b.offset()?0:W/36).tickSize(-y,0).setTickFormat("expand"==b.style()||"stack_percent"==b.style()?d3.format("%"):P),Y.select(".nv-y.nv-axis").transition().duration(0).call(B));b.dispatch.on("areaClick.toggle",function(b){1===
L.filter(function(a){return!a.disabled}).length?L.forEach(function(a){a.disabled=!1}):L.forEach(function(a,f){a.disabled=f!=b.seriesIndex});O.disabled=L.map(function(a){return!!a.disabled});A.stateChange(O);a.update()});p.dispatch.on("stateChange",function(b){O.disabled=b.disabled;A.stateChange(O);a.update()});f.dispatch.on("legendClick",function(f,k){f.disabled&&(ea=ea.map(function(a){a.disabled=!0;return a}),f.disabled=!1,b.style(f.style),O.style=b.style(),A.stateChange(O),a.update())});l.dispatch.on("elementMousemove",
function(f){b.clearHighlights();var p,q,u,w=[];L.filter(function(a,b){a.seriesIndex=b;return!a.disabled}).forEach(function(k,l){q=r.interactiveBisect(k.values,f.pointXValue,a.x());b.highlightPoint(l,q,!0);var m=k.values[q];if("undefined"!==typeof m){"undefined"===typeof p&&(p=m);"undefined"===typeof u&&(u=a.xScale()(a.x()(m,q)));var v="expand"==b.style()?m.display.y:a.y()(m,q);w.push({key:k.key,value:v,color:G(k,k.seriesIndex),stackedValue:m.display})}});w.reverse();if(2<w.length){var y=a.yScale().invert(f.mouseY),
A=null;w.forEach(function(a,b){y=Math.abs(y);var f=Math.abs(a.stackedValue.y0),k=Math.abs(a.stackedValue.y);y>=f&&y<=k+f&&(A=b)});null!=A&&(w[A].highlight=!0)}var C=m.tickFormat()(a.x()(p,q)),D="expand"==b.style()?function(a,b){return d3.format(".1%")(a)}:function(a,b){return B.tickFormat()(a)};l.tooltip.position({left:u+v.left,top:f.mouseY+v.top}).chartContainer(k.parentNode).enabled(N).valueFormatter(D).data({value:C,series:w})();l.renderGuideLine(u)});l.dispatch.on("elementMouseout",function(a){A.tooltipHide();
b.clearHighlights()});A.on("tooltipShow",function(f){if(N){var l=k.parentNode,p=f.pos[0]+(l.offsetLeft||0),q=f.pos[1]+(l.offsetTop||0),u=m.tickFormat()(b.x()(f.point,f.pointIndex)),v=B.tickFormat()(b.y()(f.point,f.pointIndex)),u=Q(f.series.key,u,v,f,a);r.tooltip.show([p,q],u,0>f.value?"n":"s",null,l)}});A.on("changeState",function(f){"undefined"!==typeof f.disabled&&L.length===f.disabled.length&&(L.forEach(function(a,b){a.disabled=f.disabled[b]}),O.disabled=f.disabled);"undefined"!==typeof f.style&&
b.style(f.style);a.update()})});return a}var b=r.models.stackedArea(),m=r.models.axis(),B=r.models.axis(),p=r.models.legend(),f=r.models.legend(),l=r.interactiveGuideline(),v={top:30,right:25,bottom:50,left:60},u=null,I=null,G=r.utils.defaultColor(),D=!0,H=!0,E=!0,M=!0,T=!1,C=!1,N=!0,Q=function(a,b,f,k,l){return"<h3>"+a+"</h3><p>"+f+" on "+b+"</p>"},J,R,P=d3.format(",.2f"),O={style:b.style()},w=null,F="No Data Available.",A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState"),q=250,
S=["Stacked","Stream","Expanded"],X={},U=250;m.orient("bottom").tickPadding(7);B.orient(T?"right":"left");f.updateState(!1);b.dispatch.on("tooltipShow",function(a){a.pos=[a.pos[0]+v.left,a.pos[1]+v.top];A.tooltipShow(a)});b.dispatch.on("tooltipHide",function(a){A.tooltipHide(a)});A.on("tooltipHide",function(){N&&r.tooltip.cleanup()});a.dispatch=A;a.stacked=b;a.legend=p;a.controls=f;a.xAxis=m;a.yAxis=B;a.interactiveLayer=l;d3.rebind(a,b,"x","y","size","xScale","yScale","xDomain","yDomain","xRange",
"yRange","sizeDomain","interactive","useVoronoi","offset","order","style","clipEdge","forceX","forceY","forceSize","interpolate");a.options=r.utils.optionsFunc.bind(a);a.margin=function(b){if(!arguments.length)return v;v.top="undefined"!=typeof b.top?b.top:v.top;v.right="undefined"!=typeof b.right?b.right:v.right;v.bottom="undefined"!=typeof b.bottom?b.bottom:v.bottom;v.left="undefined"!=typeof b.left?b.left:v.left;return a};a.width=function(b){if(!arguments.length)return u;u=b;return a};a.height=
function(b){if(!arguments.length)return I;I=b;return a};a.color=function(f){if(!arguments.length)return G;G=r.utils.getColor(f);p.color(G);b.color(G);return a};a.showControls=function(b){if(!arguments.length)return D;D=b;return a};a.showLegend=function(b){if(!arguments.length)return H;H=b;return a};a.showXAxis=function(b){if(!arguments.length)return E;E=b;return a};a.showYAxis=function(b){if(!arguments.length)return M;M=b;return a};a.rightAlignYAxis=function(b){if(!arguments.length)return T;T=b;B.orient(b?
"right":"left");return a};a.useInteractiveGuideline=function(b){if(!arguments.length)return C;C=b;!0===b&&(a.interactive(!1),a.useVoronoi(!1));return a};a.tooltip=function(b){if(!arguments.length)return Q;Q=b;return a};a.tooltips=function(b){if(!arguments.length)return N;N=b;return a};a.tooltipContent=function(b){if(!arguments.length)return Q;Q=b;return a};a.state=function(b){if(!arguments.length)return O;O=b;return a};a.defaultState=function(b){if(!arguments.length)return w;w=b;return a};a.noData=
function(b){if(!arguments.length)return F;F=b;return a};a.transitionDuration=function(b){if(!arguments.length)return U;U=b;return a};a.controlsData=function(b){if(!arguments.length)return S;S=b;return a};a.controlLabels=function(b){if(!arguments.length||"object"!==typeof b)return X;X=b;return a};B.setTickFormat=B.tickFormat;B.tickFormat=function(a){if(!arguments.length)return P;P=a;return B};return a}})();
(function(W,r){var a=0;W.widget("s3.timeplot",{options:{ajaxURL:null,autoSubmit:1E3,burnDown:!1,emptyMessage:"No data available",thousandSeparator:" ",thousandGrouping:"3",precision:null,defaultChartType:"linechart",defaultChartAxis:"totals"},_create:function(){this.id=a;a+=1},_init:function(){var a=W(this.element),m=this.options;this.widget_id=a.attr("id");this.input=a.find('input[type="hidden"][name="tp-data"]').first();this.svg=this.data=null;a=a.find(".tp-chart");this.chart=a.length?a.first():
null;this.currentChart={type:null,chart:null,container:null};m.numberFormatter=function(a){var b=m.precision;if(null===a||"undefined"==typeof a)return"-";b=b||0==b?a.toFixed(b):a.toString();b=b.split(".");a=b[0];b=1<b.length?"."+b[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+m.thousandGrouping+"})+(?!\\d))","g"),m.thousandSeparator);return a+b};this.refresh()},_destroy:function(){var a=this.element;this._unbindEvents();this.svg&&(this.svg.remove(),this.svg=null,a.find(".tp-chart").empty());this.data=
null;W.Widget.prototype.destroy.call(this)},refresh:function(){var a=this.element;this._unbindEvents();this._renderChart();this._renderChartOptions();this.options.autoSubmit?a.find(".tp-submit").hide():a.find(".tp-submit").show();this._bindEvents();a.find(".tp-throbber").hide()},_renderChartOptions:function(){var a=W(this.element),m=a.find(".tp-chart-controls").first().empty();if(!this.data.e){var r=a.attr("id"),a=W('<div class="pt-chart-opts">'),p=r+"-bchart-totals",r=r+"-lchart-totals";W(a).append(W('<span id="'+
r+'" class="tp-chart-icon tp-lchart"/><span class="tp-chart-label">Line Chart</span>'));W(a).append(W('<span id="'+p+'" class="tp-chart-icon tp-bchart"/><span class="tp-chart-label">Bar Chart</span>'));W(m).append(a)}},_renderChart:function(a){var m=this.chart;if(m){var r=this.options,p=this.currentChart,f=null,l=null;a?(f=a.type,l=a.axis):(p&&(f=p.type,l=p.axis),f&&l||(f=r.defaultChartType,l=r.defaultChartAxis));p.type==f&&p.axis==l||this._removeChart();a=this.element;r=a.find(".tp-empty");p=this.data;
null===p&&(p=JSON.parse(this.input.val()));p||(p={e:!0});this.data=p;if(p.e)this._removeChart(),a.find(".tp-empty").show();else switch(r.hide(),m.show(),l){case "totals":switch(f){case "barchart":this._renderBarChart(m,p.f,p.p);break;default:this._renderLineChart(m,p.f,p.p)}}}},_removeChart:function(){var a=this.chart;a&&(a.empty().hide(),a=this.currentChart,a.container=null,a.chart=null,a.type=null,a.axis=null,W(window).off("resize.tp"))},_renderBarChart:function(a,m,r){var p=[];for(m=0;m<r.length;m++){var f=
r[m];p.push({start:(new Date(f.t[0])).getTime(),value:f.v[0]})}r=this.currentChart;var l,v;r.chart?(v=r.container,l=r.chart,v.datum([{key:"reportChart",values:p}]).transition().duration(500).call(l)):(W(a).closest(".tp-chart-contents").show().css({width:"96%"}),W(a).css({height:"360px"}),v=d3.select(W(a).get(0)).append("svg").attr("class","nv"),l=nv.models.discreteBarChart().x(function(a){return a.start}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).tooltips(!1).showValues(!0).forceY([0,
1]),a=this.options.numberFormatter,l.valueFormat(a),l.yAxis.tickFormat(a),l.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){v.datum([{key:"reportChart",values:p}]).transition().duration(500).call(l);W(window).off("resize.tp").on("resize.tp",function(a){l.update(a)});return l}),r.container=v,r.chart=l,r.type="barchart",r.axis="totals")},_renderLineChart:function(a,m,r){var p=[],f={},l,v=0,u=1==m.length,I;for(I=0;I<m.length;I++){l=m[I][0];f.hasOwnProperty(l)&&
(v=f[l]+1);(f[l]=v)&&(l+=" ["+(v+1)+"]");var G={key:l,label:m[I][0],area:u},D,H=[];for(l=0;l<r.length;l++)D=r[l],H.push({start:(new Date(D.t[0])).getTime(),value:D.v[I]});G.values=H;p.push(G)}m=this.currentChart;var E,M;m.chart?(M=m.container,E=m.chart,M.datum(p).transition().duration(250).call(E)):(W(a).closest(".tp-chart-contents").show().css({width:"96%"}),W(a).css({height:"360px"}),M=d3.select(W(a).get(0)).append("svg").attr("class","nv"),E=nv.models.lineChart().x(function(a){return a.start}).y(function(a){return a.value}).margin({right:50}).transitionDuration(250).showLegend(!0).useInteractiveGuideline(!0).forceY([0,
1]),E.yAxis.tickFormat(this.options.numberFormatter),E.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){M.datum(p).transition().duration(500).call(E);W(window).off("resize.tp").on("resize.tp",function(a){E.update(a)});return E}),m.container=M,m.chart=E,m.type="linechart",m.axis="totals")},reload:function(a,m,r){r="undefined"!=typeof r?r:!0;"undefined"==typeof m&&(m=this._getFilters());var p=this,f=!1;W(this.element).find(".tp-throbber").show();if(a||m)f=
this._updateAjaxURL(a,m);f||r?W.ajax({url:this.options.ajaxURL,dataType:"json"}).done(function(a){p.input.val(JSON.stringify(a));p.data=a;p.refresh()}).fail(function(a,b,f){msg="UNAUTHORIZED"==f?i18n.gis_requires_login:a.responseText;console.log(msg)}):p.refresh()},_getOptions:function(){var a="#"+W(this.element).attr("id"),m=W(a+"-time").val(),r=a=null,p=null;"custom"!=m&&(m=m.split("|"),3==m.length&&(a=m[0],r=m[1],p=m[2]));return{start:a,end:r,slots:p}},_getFilters:function(){var a=W("#"+this.widget_id+
"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(m){return null}},_updateAjaxURL:function(a,m){var r=this.options.ajaxURL;if(!r)return!1;var p,f=r.split("?"),l;1<f.length?(p=f[1],l=p.split("&")):l=[];var v=[],r=!1;if(a)for(var u in a)p=a[u],p=u+"="+p,r||-1!=W.inArray(p,l)||(r=!0),v.push(p);u={};p={};var I,G,D,H;if(m)for(G=0,D=m.length;G<D;G++)I=m[G],H=I[0],I=I[1],null===I?u[H]||(p[H]=!0):(p[H]&&(p[H]=!1),I=H+"="+encodeURIComponent(I),u[H]?u[H].push(I):u[H]=[I]);G=
0;for(D=l.length;G<D;G++)I=l[G].split("="),1<I.length&&(H=decodeURIComponent(I[0]),I=decodeURIComponent(I[1]),p[H]?r=!0:u[H]?r||-1!=W.inArray(H+"="+I,u[H])||(r=!0):a&&a.hasOwnProperty(H)||v.push(l[G]));for(H in u)for(G=0,D=u[H].length;G<D;G++)r||-1!=W.inArray(u[H][G],l)||(r=!0),v.push(u[H][G]);H=v.join("&");f=f[0];H&&(f=f+"?"+H);this.options.ajaxURL=f;return r},_parseDate:function(a){return d3.time.format("%Y-%m-%dT%H:%M:%S+00:00").parse(a)},_bindEvents:function(){var a=this,m="#"+this.widget_id;
W(m+"-options legend").click(function(){W(this).siblings().toggle();W(this).children().toggle()});W(m+"-filters legend").click(function(){W(this).siblings().toggle();W(this).children().toggle()});W(m+"-time").on("change.autosubmit",function(){W(m+"-tp-form").trigger("optionChanged")});if(this.options.autoSubmit){var r=this.options.autoSubmit;W(m+"-tp-form").on("optionChanged",function(){var m=W(this);if(!m.data("noAutoSubmit")){var f=m.data("autoSubmitTimeout");f&&clearTimeout(f);f=setTimeout(function(){var f=
a._getOptions(),m=a._getFilters();a.reload(f,m,!1)},r);m.data("autoSubmitTimeout",f)}})}else W(m+"-tp-form input.tp-submit").on("click.timeplot",function(){var m=a._getOptions(),f=a._getFilters();a.reload(m,f,!1)});W(m+"-lchart-totals").click(function(){a._renderChart({type:"linechart",axis:"totals"})});W(m+"-bchart-totals").click(function(){a._renderChart({type:"barchart",axis:"totals"})})},_unbindEvents:function(){var a="#"+this.widget_id;W(window).off("resize.timeplot");W(a+"-tp-form").off("optionChanged");
W(a+"-tp-form input.tp-submit").off("click.timeplot");W(a+"-time").unbind("change.autosubmit");W(a+"-options legend").unbind("click");W(a+"-filters legend").unbind("click");W(a+"-lchart-totals,"+a+"-bchart-totals").unbind("click")}})})(jQuery);
