/*
 2013-2018 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
 requires D3.js 3.4.9+
 requires NVD3.js

*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,a,c){e!=Array.prototype&&e!=Object.prototype&&(e[a]=c.value)};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var e=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+e++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var a=0;return $jscomp.iteratorPrototype(function(){return a<e.length?{done:!1,value:e[a++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.iteratorFromArray=function(e,a){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var c=0,f={next:function(){if(c<e.length){var p=c++;return{value:a(p,e[p]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill=function(e,a,c,f){if(a){c=$jscomp.global;e=e.split(".");for(f=0;f<e.length-1;f++){var p=e[f];p in c||(c[p]={});c=c[p]}e=e[e.length-1];f=c[e];a=a(f);a!=f&&null!=a&&$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:a})}};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
$jscomp.polyfill("Array.prototype.values",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a,c){return c})}},"es8","es3");$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var a=e[Symbol.iterator];return a?a.call(e):$jscomp.arrayIterator(e)};$jscomp.owns=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)};
$jscomp.polyfill("WeakMap",function(e){function a(a){$jscomp.owns(a,f)||$jscomp.defineProperty(a,f,{value:{}})}function c(c){var e=Object[c];e&&(Object[c]=function(c){a(c);return e(c)})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),c=Object.seal({}),f=new e([[a,2],[c,3]]);if(2!=f.get(a)||3!=f.get(c))return!1;f.delete(a);f.set(c,4);return!f.has(a)&&4==f.get(c)}catch(w){return!1}}())return e;var f="$jscomp_hidden_"+Math.random().toString().substring(2);c("freeze");c("preventExtensions");
c("seal");var p=0,h=function(a){this.id_=(p+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};h.prototype.set=function(c,e){a(c);if(!$jscomp.owns(c,f))throw Error("WeakMap key fail: "+c);c[f][this.id_]=e;return this};h.prototype.get=function(a){return $jscomp.owns(a,f)?a[f][this.id_]:void 0};h.prototype.has=function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)};h.prototype.delete=
function(a){return $jscomp.owns(a,f)&&$jscomp.owns(a[f],this.id_)?delete a[f][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(e){if(!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),c=new e($jscomp.makeIterator([[a,"s"]]));if("s"!=c.get(a)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var f=c.entries(),h=f.next();if(h.done||h.value[0]!=a||"s"!=h.value[1])return!1;h=f.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!f.next().done?!1:!0}catch(E){return!1}}())return e;$jscomp.initSymbol();
$jscomp.initSymbolIterator();var a=new WeakMap,c=function(a){this.data_={};this.head_=h();this.size=0;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}};c.prototype.set=function(a,c){var e=f(this,a);e.list||(e.list=this.data_[e.id]=[]);e.entry?e.entry.value=c:(e.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:a,value:c},e.list.push(e.entry),this.head_.previous.next=e.entry,this.head_.previous=e.entry,this.size++);return this};c.prototype.delete=
function(a){a=f(this,a);return a.entry&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.data_[a.id],a.entry.previous.next=a.entry.next,a.entry.next.previous=a.entry.previous,a.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=h();this.size=0};c.prototype.has=function(a){return!!f(this,a).entry};c.prototype.get=function(a){return(a=f(this,a).entry)&&a.value};c.prototype.entries=function(){return p(this,function(a){return[a.key,
a.value]})};c.prototype.keys=function(){return p(this,function(a){return a.key})};c.prototype.values=function(){return p(this,function(a){return a.value})};c.prototype.forEach=function(a,c){for(var e=this.entries(),f;!(f=e.next()).done;)f=f.value,a.call(c,f[1],f[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var f=function(c,e){var f=e&&typeof e;"object"==f||"function"==f?a.has(e)?f=a.get(e):(f=""+ ++q,a.set(e,f)):f="p_"+e;var h=c.data_[f];if(h&&$jscomp.owns(c.data_,f))for(c=0;c<h.length;c++){var k=
h[c];if(e!==e&&k.key!==k.key||e===k.key)return{id:f,list:h,index:c,entry:k}}return{id:f,list:h,index:-1,entry:void 0}},p=function(a,c){var e=a.head_;return $jscomp.iteratorPrototype(function(){if(e){for(;e.head!=a.head_;)e=e.previous;for(;e.next!=e.head;)return e=e.next,{done:!1,value:c(e)};e=null}return{done:!0,value:void 0}})},h=function(){var a={};return a.previous=a.next=a.head=a},q=0;return c},"es6","es3");
$jscomp.polyfill("Set",function(e){if(!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var a=Object.seal({x:4}),f=new e($jscomp.makeIterator([a]));if(!f.has(a)||1!=f.size||f.add(a)!=f||1!=f.size||f.add({x:4})!=f||2!=f.size)return!1;var p=f.entries(),h=p.next();if(h.done||h.value[0]!=a||h.value[1]!=a)return!1;h=p.next();return h.done||h.value[0]==a||4!=h.value[0].x||h.value[1]!=h.value[0]?!1:p.next().done}catch(q){return!1}}())return e;
$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map;if(a){a=$jscomp.makeIterator(a);for(var c;!(c=a.next()).done;)this.add(c.value)}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype.delete=function(a){a=this.map_.delete(a);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};
a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(a,e){var c=this;this.map_.forEach(function(f){return a.call(e,f,f,c)})};return a},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(a,c){return[a,c]})}},"es6","es3");
$jscomp.findInternal=function(e,a,c){e instanceof String&&(e=String(e));for(var f=e.length,p=0;p<f;p++){var h=e[p];if(a.call(c,h,p,e))return{i:p,v:h}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(e){return e?e:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
!function(){function e(b){return b&&(b.ownerDocument&&b.ownerDocument.defaultView||b.document&&b||b.defaultView)}function a(b,d){return b<d?-1:b>d?1:b>=d?0:NaN}function c(b){return null===b?NaN:+b}function f(b){return!isNaN(b)}function p(b){return{left:function(d,g,m,x){3>arguments.length&&(m=0);4>arguments.length&&(x=d.length);for(;m<x;){var a=m+x>>>1;0>b(d[a],g)?m=a+1:x=a}return m},right:function(d,g,m,x){3>arguments.length&&(m=0);4>arguments.length&&(x=d.length);for(;m<x;){var a=m+x>>>1;0<b(d[a],
g)?x=a:m=a+1}return m}}}function h(b){return b.length}function q(b,d){for(var g in d)Object.defineProperty(b.prototype,g,{value:d[g],enumerable:!1})}function v(){this._=Object.create(null)}function k(b){return"__proto__"===(b+="")||"\x00"===b[0]?"\x00"+b:b}function w(b){return"\x00"===(b+="")[0]?b.slice(1):b}function A(b){return k(b)in this._}function E(b){return(b=k(b))in this._&&delete this._[b]}function I(){var b=[],d;for(d in this._)b.push(w(d));return b}function J(){var b=0,d;for(d in this._)++b;
return b}function G(){for(var b in this._)return!1;return!0}function D(){this._=Object.create(null)}function H(b){return b}function P(b,d,g){return function(){var m=g.apply(d,arguments);return m===d?b:m}}function B(b,d){if(d in b)return d;d=d.charAt(0).toUpperCase()+d.slice(1);for(var g=0,m=de.length;g<m;++g){var x=de[g]+d;if(x in b)return x}}function M(){}function u(){}function n(b){function d(){for(var d=g,m=-1,a=d.length,C;++m<a;)(C=d[m].on)&&C.apply(this,arguments);return b}var g=[],m=new v;d.on=
function(d,a){var x=m.get(d),O;if(2>arguments.length)return x&&x.on;x&&(x.on=null,g=g.slice(0,O=g.indexOf(x)).concat(g.slice(O+1)),m.remove(d));a&&g.push(m.set(d,{on:a}));return b};return d}function S(){z.event.preventDefault()}function R(){for(var b=z.event,d;d=b.sourceEvent;)b=d;return b}function N(b){for(var d=new u,g=0,m=arguments.length;++g<m;)d[arguments[g]]=n(d);d.of=function(g,m){return function(x){try{var a=x.sourceEvent=z.event;x.target=b;z.event=x;d[x.type].apply(g,m)}finally{z.event=a}}};
return d}function F(b){Zb(b,sa);return b}function y(b){return"function"===typeof b?b:function(){return ad(b,this)}}function L(b){return"function"===typeof b?b:function(){return bd(b,this)}}function Q(b,d){function g(){this.removeAttribute(b)}function m(){this.removeAttributeNS(b.space,b.local)}function x(){this.setAttribute(b,d)}function a(){this.setAttributeNS(b.space,b.local,d)}function c(){var g=d.apply(this,arguments);null==g?this.removeAttribute(b):this.setAttribute(b,g)}function C(){var g=d.apply(this,
arguments);null==g?this.removeAttributeNS(b.space,b.local):this.setAttributeNS(b.space,b.local,g)}b=z.ns.qualify(b);return null==d?b.local?m:g:"function"===typeof d?b.local?C:c:b.local?a:x}function K(b){return new RegExp("(?:^|\\s+)"+z.requote(b)+"(?:\\s+|$)","g")}function t(b,d){function g(){for(var g=-1;++g<x;)b[g](this,d)}function m(){for(var g=-1,m=d.apply(this,arguments);++g<x;)b[g](this,m)}b=(b+"").trim().split(/^|\s+/).map(l);var x=b.length;return"function"===typeof d?m:g}function l(b){var d=
K(b);return function(g,m){if(x=g.classList)return m?x.add(b):x.remove(b);var x=g.getAttribute("class")||"";m?(d.lastIndex=0,d.test(x)||g.setAttribute("class",(x+" "+b).trim().replace(/\s+/g," "))):g.setAttribute("class",x.replace(d," ").trim().replace(/\s+/g," "))}}function Z(b,d,g){function m(){this.style.removeProperty(b)}function x(){this.style.setProperty(b,d,g)}function a(){var m=d.apply(this,arguments);null==m?this.style.removeProperty(b):this.style.setProperty(b,m,g)}return null==d?m:"function"===
typeof d?a:x}function aa(b,d){function g(){delete this[b]}function m(){this[b]=d}function x(){var g=d.apply(this,arguments);null==g?delete this[b]:this[b]=g}return null==d?g:"function"===typeof d?x:m}function X(b){function d(){var d=this.ownerDocument,g=this.namespaceURI;return"http://www.w3.org/1999/xhtml"===g&&"http://www.w3.org/1999/xhtml"===d.documentElement.namespaceURI?d.createElement(b):d.createElementNS(g,b)}function g(){return this.ownerDocument.createElementNS(b.space,b.local)}return"function"===
typeof b?b:(b=z.ns.qualify(b)).local?g:d}function T(){var b=this.parentNode;b&&b.removeChild(this)}function r(b){return function(){return $b(this,b)}}function U(b){arguments.length||(b=a);return function(d,g){return d&&g?b(d.__data__,g.__data__):!d-!g}}function V(b,d){for(var g=0,m=b.length;g<m;g++)for(var x=b[g],a=0,c=x.length,C;a<c;a++)(C=x[a])&&d(C,a,g);return b}function ra(b){Zb(b,Ya);return b}function Fa(b){var d,g;return function(m,x,a){m=b[a].update;var O=m.length;a!=g&&(g=a,d=0);for(x>=d&&
(d=x+1);!(x=m[d])&&++d<O;);return x}}function ca(b,d,g){function m(){var d=this[c];d&&(this.removeEventListener(b,d,d.$),delete this[c])}function x(){var a=e(d,Va(arguments));m.call(this);this.addEventListener(b,this[c]=a,a.$=g);a._=d}function a(){var d=new RegExp("^__on([^.]+)"+z.requote(b)+"$"),g,m;for(m in this)if(g=m.match(d)){var a=this[m];this.removeEventListener(g[1],a,a.$);delete this[m]}}var c="__on"+b,C=b.indexOf("."),e=na;0<C&&(b=b.slice(0,C));var Y=cd.get(b);Y&&(b=Y,e=ma);return C?d?x:
m:d?M:a}function na(b,d){return function(g){var m=z.event;z.event=g;d[0]=this.__data__;try{b.apply(this,d)}finally{z.event=m}}}function ma(b,d){var g=na(b,d);return function(b){var d=b.relatedTarget;d&&(d===this||d.compareDocumentPosition(this)&8)||g.call(this,b)}}function ya(b){var d=".dragsuppress-"+ ++qg,g="click"+d,m=z.select(e(b)).on("touchmove"+d,S).on("dragstart"+d,S).on("selectstart"+d,S);null==kb&&(kb="onselectstart"in b?!1:B(b.style,"userSelect"));if(kb){var a=(b&&(b.ownerDocument||b.document||
b).documentElement).style,O=a[kb];a[kb]="none"}return function(b){m.on(d,null);kb&&(a[kb]=O);if(b){var x=function(){m.on(g,null)};m.on(g,function(){S();x()},!0);setTimeout(x,0)}}}function za(b,d){d.changedTouches&&(d=d.changedTouches[0]);var g=b.ownerSVGElement||b;if(g.createSVGPoint){var m=g.createSVGPoint();if(0>dd&&(g=e(b),g.scrollX||g.scrollY)){g=z.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=g[0][0].getScreenCTM();dd=
!(a.f||a.e);g.remove()}dd?(m.x=d.pageX,m.y=d.pageY):(m.x=d.clientX,m.y=d.clientY);m=m.matrixTransform(b.getScreenCTM().inverse());return[m.x,m.y]}m=b.getBoundingClientRect();return[d.clientX-m.left-b.clientLeft,d.clientY-m.top-b.clientTop]}function ia(){return z.event.changedTouches[0].identifier}function da(b,d,g){return(d[0]-b[0])*(g[1]-b[1])-(d[1]-b[1])*(g[0]-b[0])}function ha(b){return 1<b?0:-1>b?ja:Math.acos(b)}function Aa(b){return 1<b?Da:-1>b?-Da:Math.asin(b)}function xa(b){return((b=Math.exp(b))+
1/b)/2}function va(b){return(b=Math.sin(b/2))*b}function ta(){}function Ka(b,d,g){return this instanceof Ka?void(this.h=+b,this.s=+d,this.l=+g):2>arguments.length?b instanceof Ka?new Ka(b.h,b.s,b.l):bc(""+b,cc,Ka):new Ka(b,d,g)}function ua(b,d,g){function m(b){360<b?b-=360:0>b&&(b+=360);return 60>b?O+(a-O)*b/60:180>b?a:240>b?O+(a-O)*(240-b)/60:O}b=isNaN(b)?0:0>(b%=360)?b+360:b;d=isNaN(d)?0:0>d?0:1<d?1:d;g=0>g?0:1<g?1:g;var a=.5>=g?g*(1+d):g+d-g*d;var O=2*g-a;return new La(Math.round(255*m(b+120)),
Math.round(255*m(b)),Math.round(255*m(b-120)))}function pa(b,d,g){return this instanceof pa?void(this.h=+b,this.c=+d,this.l=+g):2>arguments.length?b instanceof pa?new pa(b.h,b.c,b.l):b instanceof qa?ea(b.l,b.a,b.b):ea((b=dc((b=z.rgb(b)).r,b.g,b.b)).l,b.a,b.b):new pa(b,d,g)}function Ia(b,d,g){isNaN(b)&&(b=0);isNaN(d)&&(d=0);return new qa(g,Math.cos(b*=ka)*d,Math.sin(b)*d)}function qa(b,d,g){return this instanceof qa?void(this.l=+b,this.a=+d,this.b=+g):2>arguments.length?b instanceof qa?new qa(b.l,
b.a,b.b):b instanceof pa?Ia(b.h,b.c,b.l):dc((b=La(b)).r,b.g,b.b):new qa(b,d,g)}function Ba(b,d,g){b=(b+16)/116;g=b-g/200;d=Ga(b+d/500)*ee;b=Ga(b)*fe;g=Ga(g)*ge;return new La(lb(3.2404542*d-1.5371385*b-.4985314*g),lb(-.969266*d+1.8760108*b+.041556*g),lb(.0556434*d-.2040259*b+1.0572252*g))}function ea(b,d,g){return 0<b?new pa(Math.atan2(g,d)*Ca,Math.sqrt(d*d+g*g),b):new pa(NaN,NaN,b)}function Ga(b){return.206893034<b?b*b*b:(b-4/29)/7.787037}function Ha(b){return.008856<b?Math.pow(b,1/3):7.787037*b+
4/29}function lb(b){return Math.round(255*(.00304>=b?12.92*b:1.055*Math.pow(b,1/2.4)-.055))}function La(b,d,g){return this instanceof La?void(this.r=~~b,this.g=~~d,this.b=~~g):2>arguments.length?b instanceof La?new La(b.r,b.g,b.b):bc(""+b,La,ua):new La(b,d,g)}function wb(b){return new La(b>>16,b>>8&255,b&255)+""}function cb(b){return 16>b?"0"+Math.max(0,b).toString(16):Math.min(255,b).toString(16)}function bc(b,d,g){var m=0,a=0,O=0,c;if(c=/([a-z]+)\((.*)\)/.exec(b=b.toLowerCase())){var C=c[2].split(",");
switch(c[1]){case "hsl":return g(parseFloat(C[0]),parseFloat(C[1])/100,parseFloat(C[2])/100);case "rgb":return d(ed(C[0]),ed(C[1]),ed(C[2]))}}if(g=ec.get(b))return d(g.r,g.g,g.b);null==b||"#"!==b.charAt(0)||isNaN(g=parseInt(b.slice(1),16))||(4===b.length?(m=(g&3840)>>4,m|=m>>4,a=g&240,a|=a>>4,O=g&15,O|=O<<4):7===b.length&&(m=(g&16711680)>>16,a=(g&65280)>>8,O=g&255));return d(m,a,O)}function cc(b,d,g){var m=Math.min(b/=255,d/=255,g/=255),a=Math.max(b,d,g),O=a-m,c=(a+m)/2;O?(m=.5>c?O/(a+m):O/(2-a-m),
b=60*(b==a?(d-g)/O+(d<g?6:0):d==a?(g-b)/O+2:(b-d)/O+4)):(b=NaN,m=0<c&&1>c?0:b);return new Ka(b,m,c)}function dc(b,d,g){b=Ib(b);d=Ib(d);g=Ib(g);var m=Ha((.4124564*b+.3575761*d+.1804375*g)/ee),a=Ha((.2126729*b+.7151522*d+.072175*g)/fe);b=Ha((.0193339*b+.119192*d+.9503041*g)/ge);return qa(116*a-16,500*(m-a),200*(a-b))}function Ib(b){return.04045>=(b/=255)?b/12.92:Math.pow((b+.055)/1.055,2.4)}function ed(b){var d=parseFloat(b);return"%"===b.charAt(b.length-1)?Math.round(2.55*d):d}function wa(b){return"function"===
typeof b?b:function(){return b}}function fd(b){return function(d,g,m){2===arguments.length&&"function"===typeof g&&(m=g,g=null);return Jb(d,g,b,m)}}function Jb(b,d,g,m){function a(){var b=e.status,d;if(d=!b)d=(d=e.responseType)&&"text"!==d?e.response:e.responseText;if(d||200<=b&&300>b||304===b){try{var m=g.call(O,e)}catch(pg){c.error.call(O,pg);return}c.load.call(O,m)}else c.error.call(O,e)}var O={},c=z.dispatch("beforesend","progress","load","error"),C={},e=new XMLHttpRequest,Y=null;!this.XDomainRequest||
"withCredentials"in e||!/^(http(s)?:)?\/\//.test(b)||(e=new XDomainRequest);"onload"in e?e.onload=e.onerror=a:e.onreadystatechange=function(){3<e.readyState&&a()};e.onprogress=function(b){var d=z.event;z.event=b;try{c.progress.call(O,e)}finally{z.event=d}};O.header=function(b,d){b=(b+"").toLowerCase();if(2>arguments.length)return C[b];null==d?delete C[b]:C[b]=d+"";return O};O.mimeType=function(b){if(!arguments.length)return d;d=null==b?null:b+"";return O};O.responseType=function(b){if(!arguments.length)return Y;
Y=b;return O};O.response=function(b){g=b;return O};["get","post"].forEach(function(b){O[b]=function(){return O.send.apply(O,[b].concat(Va(arguments)))}});O.send=function(g,m,a){2===arguments.length&&"function"===typeof m&&(a=m,m=null);e.open(g,b,!0);null==d||"accept"in C||(C.accept=d+",*/*");if(e.setRequestHeader)for(var x in C)e.setRequestHeader(x,C[x]);null!=d&&e.overrideMimeType&&e.overrideMimeType(d);null!=Y&&(e.responseType=Y);if(null!=a)O.on("error",a).on("load",function(b){a(null,b)});c.beforesend.call(O,
e);e.send(null==m?null:m);return O};O.abort=function(){e.abort();return O};z.rebind(O,c,"on");return null==m?O:O.get(rg(m))}function rg(b){return 1===b.length?function(d,g){b(null==d?g:null)}:b}function fc(b,d,g){var m=arguments.length;2>m&&(d=0);3>m&&(g=Date.now());m={c:b,t:g+d,n:null};gc?gc.n=m:hc=m;gc=m;ic||(jc=clearTimeout(jc),ic=1,he(kc));return m}function kc(){var b=ie();b=je()-b;24<b?(isFinite(b)&&(clearTimeout(jc),jc=setTimeout(kc,b)),ic=0):(ic=1,he(kc))}function ie(){for(var b=Date.now(),
d=hc;d;)b>=d.t&&d.c(b-d.t)&&(d.c=null),d=d.n;return b}function je(){for(var b,d=hc,g=Infinity;d;)d.c?(d.t<g&&(g=d.t),d=(b=d).n):d=b?b.n=d.n:hc=d.n;gc=b;return g}function gd(b,d){return d-(b?Math.ceil(Math.log(b)/Math.LN10):1)}function sg(b){var d=b.decimal,g=b.thousands,m=b.grouping,a=b.currency,O=m&&g?function(b,d){for(var a=b.length,x=[],O=0,c=m[0],e=0;0<a&&0<c;){e+c+1>d&&(c=Math.max(1,d-e));x.push(b.substring(a-=c,a+c));if((e+=c+1)>d)break;c=m[O=(O+1)%m.length]}return x.reverse().join(g)}:H;return function(b){b=
ke.exec(b);var g=b[1]||" ",m=b[2]||">",x=b[3]||"-",c=b[4]||"",e=b[5],fa=+b[6],f=b[7],h=b[8],l=b[9],n=1,t="",k="",r=!1,p=!0;h&&(h=+h.substring(1));if(e||"0"===g&&"="===m)e=g="0",m="=";switch(l){case "n":f=!0;l="g";break;case "%":n=100;k="%";l="f";break;case "p":n=100;k="%";l="r";break;case "b":case "o":case "x":case "X":"#"===c&&(t="0"+l.toLowerCase());case "c":p=!1;case "d":r=!0;h=0;break;case "s":n=-1,l="r"}"$"===c&&(t=a[0],k=a[1]);"r"!=l||h||(l="g");if(null!=h)if("g"==l)h=Math.max(1,Math.min(21,
h));else if("e"==l||"f"==l)h=Math.max(0,Math.min(20,h));l=tg.get(l)||ug;var y=e&&f;return function(b){var a=k;if(r&&b%1)return"";var c=0>b||0===b&&0>1/b?(b=-b,"-"):"-"===x?"":x;0>n?(a=z.formatPrefix(b,h),b=a.scale(b),a=a.symbol+k):b*=n;b=l(b,h);var C=b.lastIndexOf(".");if(0>C)if(C=p?b.lastIndexOf("e"):-1,0>C){var W=b;b=""}else W=b.substring(0,C),b=b.substring(C);else W=b.substring(0,C),b=d+b.substring(C+1);!e&&f&&(W=O(W,Infinity));C=t.length+W.length+b.length+(y?0:c.length);var Y=C<fa?Array(C=fa-
C+1).join(g):"";y&&(W=O(Y+W,Y.length?fa-b.length:Infinity));c+=t;b=W+b;return("<"===m?c+b+Y:">"===m?Y+c+b:"^"===m?Y.substring(0,C>>=1)+c+b+Y.substring(C):c+(y?b:Y+b))+a}}}function ug(b){return b+""}function Za(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function mb(b,d,g){function m(d){var g=b(d),m=O(g,1);return d-g<m-d?g:m}function a(g){d(g=b(new Ma(g-1)),1);return g}function O(b,g){d(b=new Ma(+b),g);return b}function c(b,m,x){b=a(b);var O=[];if(1<x)for(;b<m;)g(b)%
x||O.push(new Date(+b)),d(b,1);else for(;b<m;)O.push(new Date(+b)),d(b,1);return O}b.floor=b;b.round=m;b.ceil=a;b.offset=O;b.range=c;var e=b.utc=mc(b);e.floor=e;e.round=mc(m);e.ceil=mc(a);e.offset=mc(O);e.range=function(b,d,g){try{Ma=Za;var m=new Za;m._=b;return c(m,d,g)}finally{Ma=Date}};return b}function mc(b){return function(d,g){try{Ma=Za;var m=new Za;m._=d;return b(m,g)._}finally{Ma=Date}}}function vg(b){function d(b){function d(d){for(var g=[],a=-1,x=0,O,c;++a<m;)if(37===b.charCodeAt(a)){g.push(b.slice(x,
a));null!=(O=le[x=b.charAt(++a)])&&(x=b.charAt(++a));if(c=u[x])x=c(d,null==O?"e"===x?" ":"0":O);g.push(x);x=a+1}g.push(b.slice(x,a));return g.join("")}var m=b.length;d.parse=function(d){var m={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(g(m,b,d,0)!=d.length)return null;"p"in m&&(m.H=m.H%12+12*m.p);d=null!=m.Z&&Ma!==Za;var a=new (d?Za:Ma);"j"in m?a.setFullYear(m.y,0,m.j):"W"in m||"U"in m?("w"in m||(m.w="W"in m?1:0),a.setFullYear(m.y,0,1),a.setFullYear(m.y,0,"W"in m?(m.w+6)%7+7*m.W-(a.getDay()+5)%7:m.w+
7*m.U-(a.getDay()+6)%7)):a.setFullYear(m.y,m.m,m.d);a.setHours(m.H+(m.Z/100|0),m.M+m.Z%100,m.S,m.L);return d?a._:a};d.toString=function(){return b};return d}function g(b,d,g,m){for(var a,x=0,O=d.length,c=g.length;x<O;){if(m>=c)return-1;a=d.charCodeAt(x++);if(37===a){if(a=d.charAt(x++),a=K[a in le?d.charAt(x++):a],!a||0>(m=a(b,g,m)))return-1}else if(a!=g.charCodeAt(m++))return-1}return m}var m=b.dateTime,a=b.date,O=b.time,c=b.periods,e=b.days,W=b.shortDays,Y=b.months,f=b.shortMonths;d.utc=function(b){function g(b){try{Ma=
Za;var d=new Ma;d._=b;return m(d)}finally{Ma=Date}}var m=d(b);g.parse=function(b){try{Ma=Za;var d=m.parse(b);return d&&d._}finally{Ma=Date}};g.toString=m.toString;return g};d.multi=d.utc.multi=wg;var h=z.map(),l=nc(e),n=oc(e),k=nc(W),t=oc(W),r=nc(Y),p=oc(Y),y=nc(f),q=oc(f);c.forEach(function(b,d){h.set(b.toLowerCase(),d)});var u={a:function(b){return W[b.getDay()]},A:function(b){return e[b.getDay()]},b:function(b){return f[b.getMonth()]},B:function(b){return Y[b.getMonth()]},c:d(m),d:function(b,d){return Oa(b.getDate(),
d,2)},e:function(b,d){return Oa(b.getDate(),d,2)},H:function(b,d){return Oa(b.getHours(),d,2)},I:function(b,d){return Oa(b.getHours()%12||12,d,2)},j:function(b,d){return Oa(1+ba.dayOfYear(b),d,3)},L:function(b,d){return Oa(b.getMilliseconds(),d,3)},m:function(b,d){return Oa(b.getMonth()+1,d,2)},M:function(b,d){return Oa(b.getMinutes(),d,2)},p:function(b){return c[+(12<=b.getHours())]},S:function(b,d){return Oa(b.getSeconds(),d,2)},U:function(b,d){return Oa(ba.sundayOfYear(b),d,2)},w:function(b){return b.getDay()},
W:function(b,d){return Oa(ba.mondayOfYear(b),d,2)},x:d(a),X:d(O),y:function(b,d){return Oa(b.getFullYear()%100,d,2)},Y:function(b,d){return Oa(b.getFullYear()%1E4,d,4)},Z:xg,"%":function(){return"%"}},K={a:function(b,d,g){k.lastIndex=0;return(d=k.exec(d.slice(g)))?(b.w=t.get(d[0].toLowerCase()),g+d[0].length):-1},A:function(b,d,g){l.lastIndex=0;return(d=l.exec(d.slice(g)))?(b.w=n.get(d[0].toLowerCase()),g+d[0].length):-1},b:function(b,d,g){y.lastIndex=0;return(d=y.exec(d.slice(g)))?(b.m=q.get(d[0].toLowerCase()),
g+d[0].length):-1},B:function(b,d,g){r.lastIndex=0;return(d=r.exec(d.slice(g)))?(b.m=p.get(d[0].toLowerCase()),g+d[0].length):-1},c:function(b,d,m){return g(b,u.c.toString(),d,m)},d:me,e:me,H:ne,I:ne,j:yg,L:zg,m:Ag,M:Bg,p:function(b,d,g){d=h.get(d.slice(g,g+=2).toLowerCase());return null==d?-1:(b.p=d,g)},S:Cg,U:Dg,w:Eg,W:Fg,x:function(b,d,m){return g(b,u.x.toString(),d,m)},X:function(b,d,m){return g(b,u.X.toString(),d,m)},y:Gg,Y:Hg,Z:Ig,"%":Jg};return d}function Oa(b,d,g){var m=0>b?"-":"";b=(m?-b:
b)+"";var a=b.length;return m+(a<g?Array(g-a+1).join(d)+b:b)}function nc(b){return new RegExp("^(?:"+b.map(z.requote).join("|")+")","i")}function oc(b){for(var d=new v,g=-1,m=b.length;++g<m;)d.set(b[g].toLowerCase(),g);return d}function Eg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+1)))?(b.w=+d[0],g+d[0].length):-1}function Dg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g)))?(b.U=+d[0],g+d[0].length):-1}function Fg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g)))?(b.W=+d[0],g+d[0].length):
-1}function Hg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+4)))?(b.y=+d[0],g+d[0].length):-1}function Gg(b,d,g){Ea.lastIndex=0;if(d=Ea.exec(d.slice(g,g+2))){var m=+d[0];b=(b.y=m+(68<m?1900:2E3),g+d[0].length)}else b=-1;return b}function Ig(b,d,g){return/^[+-]\d{4}$/.test(d=d.slice(g,g+5))?(b.Z=-d,g+5):-1}function Ag(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+2)))?(b.m=d[0]-1,g+d[0].length):-1}function me(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+2)))?(b.d=+d[0],g+d[0].length):
-1}function yg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+3)))?(b.j=+d[0],g+d[0].length):-1}function ne(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+2)))?(b.H=+d[0],g+d[0].length):-1}function Bg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+2)))?(b.M=+d[0],g+d[0].length):-1}function Cg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+2)))?(b.S=+d[0],g+d[0].length):-1}function zg(b,d,g){Ea.lastIndex=0;return(d=Ea.exec(d.slice(g,g+3)))?(b.L=+d[0],g+d[0].length):-1}function xg(b){var d=
b.getTimezoneOffset();b=0<d?"-":"+";var g=la(d)/60|0;d=la(d)%60;return b+Oa(g,"0",2)+Oa(d,"0",2)}function Jg(b,d,g){oe.lastIndex=0;return(b=oe.exec(d.slice(g,g+1)))?g+b[0].length:-1}function wg(b){for(var d=b.length,g=-1;++g<d;)b[g][0]=this(b[g][0]);return function(d){for(var g=0,m=b[g];!m[1](d);)m=b[++g];return m[0](d)}}function hd(){}function pe(b,d,g){var m=g.s=b+d,a=m-b;g.t=b-(m-a)+(d-a)}function pc(b,d){if(b&&qe.hasOwnProperty(b.type))qe[b.type](b,d)}function id(b,d,g){var m=-1;g=b.length-g;
for(d.lineStart();++m<g;){var a=b[m];d.point(a[0],a[1],a[2])}d.lineEnd()}function re(b,d){var g=-1,m=b.length;for(d.polygonStart();++g<m;)id(b[g],d,1);d.polygonEnd()}function Kg(){function b(b,d){b*=ka;d=d*ka/2+ja/4;var g=b-m,x=0<=g?1:-1;g*=x;var c=Math.cos(d);d=Math.sin(d);var e=O*d;nb.add(Math.atan2(e*x*Math.sin(g),a*c+e*Math.cos(g)));m=b;a=c;O=d}var d,g,m,a,O;Pa.point=function(x,c){Pa.point=b;m=(d=x)*ka;a=Math.cos(c=(g=c)*ka/2+ja/4);O=Math.sin(c)};Pa.lineEnd=function(){b(d,g)}}function ob(b){var d=
b[0];b=b[1];var g=Math.cos(b);return[g*Math.cos(d),g*Math.sin(d),Math.sin(b)]}function qc(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]}function xb(b,d){return[b[1]*d[2]-b[2]*d[1],b[2]*d[0]-b[0]*d[2],b[0]*d[1]-b[1]*d[0]]}function jd(b,d){b[0]+=d[0];b[1]+=d[1];b[2]+=d[2]}function rc(b,d){return[b[0]*d,b[1]*d,b[2]*d]}function sc(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]+b[2]*b[2]);b[0]/=d;b[1]/=d;b[2]/=d}function tc(b){return[Math.atan2(b[1],b[0]),Aa(b[2])]}function uc(b,d){return 1E-6>la(b[0]-d[0])&&1E-6>
la(b[1]-d[1])}function kd(b,d){b*=ka;var g=Math.cos(d*=ka);Kb(g*Math.cos(b),g*Math.sin(b),Math.sin(d))}function Kb(b,d,g){++Lb;pb+=(b-pb)/Lb;qb+=(d-qb)/Lb;$a+=(g-$a)/Lb}function se(){function b(b,a){b*=ka;var x=Math.cos(a*=ka),O=x*Math.cos(b);b=x*Math.sin(b);a=Math.sin(a);var c=Math.atan2(Math.sqrt((c=g*a-m*b)*c+(c=m*O-d*a)*c+(c=d*b-g*O)*c),d*O+g*b+m*a);vc+=c;db+=c*(d+(d=O));eb+=c*(g+(g=b));Wa+=c*(m+(m=a));Kb(d,g,m)}var d,g,m;Sa.point=function(a,O){a*=ka;var x=Math.cos(O*=ka);d=x*Math.cos(a);g=x*
Math.sin(a);m=Math.sin(O);Sa.point=b;Kb(d,g,m)}}function te(){Sa.point=kd}function Lg(){function b(b,d){b*=ka;var g=Math.cos(d*=ka),x=g*Math.cos(b);b=g*Math.sin(b);d=Math.sin(d);g=a*d-O*b;var c=O*x-m*d,e=m*b-a*x,C=Math.sqrt(g*g+c*c+e*e),fa=m*x+a*b+O*d,f=C&&-ha(fa)/C;C=Math.atan2(C,fa);yb+=f*g;zb+=f*c;fb+=f*e;vc+=C;db+=C*(m+(m=x));eb+=C*(a+(a=b));Wa+=C*(O+(O=d));Kb(m,a,O)}var d,g,m,a,O;Sa.point=function(x,c){d=x;g=c;Sa.point=b;x*=ka;var e=Math.cos(c*=ka);m=e*Math.cos(x);a=e*Math.sin(x);O=Math.sin(c);
Kb(m,a,O)};Sa.lineEnd=function(){b(d,g);Sa.lineEnd=te;Sa.point=kd}}function ue(b,d){function g(g,a){return g=b(g,a),d(g[0],g[1])}b.invert&&d.invert&&(g.invert=function(g,a){return g=d.invert(g,a),g&&b.invert(g[0],g[1])});return g}function Mb(){return!0}function ve(b,d,g,m,a){var x=[],c=[];b.forEach(function(b){if(!(0>=(d=b.length-1))){var d,g=b[0],m=b[d];if(uc(g,m)){a.lineStart();for(m=0;m<d;++m)a.point((g=b[m])[0],g[1]);a.lineEnd()}else d=new wc(g,b,null,!0),g=new wc(g,null,d,!1),d.o=g,x.push(d),
c.push(g),d=new wc(m,b,null,!1),g=new wc(m,null,d,!0),d.o=g,x.push(d),c.push(g)}});c.sort(d);we(x);we(c);if(x.length){b=0;d=g;for(g=c.length;b<g;++b)c[b].e=d=!d;d=x[0];for(var e,W;;){for(var f=d,oa=!0;f.v;)if((f=f.n)===d)return;e=f.z;a.lineStart();do{f.v=f.o.v=!0;if(f.e){if(oa)for(b=0,g=e.length;b<g;++b)a.point((W=e[b])[0],W[1]);else m(f.x,f.n.x,1,a);f=f.n}else{if(oa)for(e=f.p.z,b=e.length-1;0<=b;--b)a.point((W=e[b])[0],W[1]);else m(f.x,f.p.x,-1,a);f=f.p}f=f.o;e=f.z;oa=!oa}while(!f.v);a.lineEnd()}}}
function we(b){if(d=b.length){for(var d,g=0,m=b[0],a;++g<d;)m.n=a=b[g],a.p=m,m=a;m.n=a=b[0];a.p=m}}function wc(b,d,g,m){this.x=b;this.z=d;this.o=g;this.e=m;this.v=!1;this.n=this.p=null}function xe(b,d,g,m){return function(a,O){function x(d,g){var m=a(d,g);b(d=m[0],g=m[1])&&O.point(d,g)}function c(b,d){b=a(b,d);n.point(b[0],b[1])}function e(){t.point=c;n.lineStart()}function f(){t.point=x;n.lineEnd()}function oa(b,d){K.push([b,d]);b=a(b,d);y.point(b[0],b[1])}function h(){y.lineStart();K=[]}function l(){oa(K[0][0],
K[0][1]);y.lineEnd();var b=y.clean(),d=p.buffer(),g=d.length;K.pop();q.push(K);K=null;if(g)if(b&1){b=d[0];g=b.length-1;d=-1;var m;if(0<g){u||(O.polygonStart(),u=!0);for(O.lineStart();++d<g;)O.point((m=b[d])[0],m[1]);O.lineEnd()}}else 1<g&&b&2&&d.push(d.pop().concat(d.shift())),r.push(d.filter(Mg))}var n=d(O),k=a.invert(m[0],m[1]),t={point:x,lineStart:e,lineEnd:f,polygonStart:function(){t.point=oa;t.lineStart=h;t.lineEnd=l;r=[];q=[]},polygonEnd:function(){t.point=x;t.lineStart=e;t.lineEnd=f;r=z.merge(r);
var b=k;var d=q;var m=b[0],a=b[1],c=[Math.sin(m),-Math.cos(m),0],C=0,W=0;nb.reset();for(var fa=0,Y=d.length;fa<Y;++fa){var oa=d[fa],h=oa.length;if(h){var l=oa[0],n=l[0];b=l[1]/2+ja/4;for(var p=Math.sin(b),y=Math.cos(b),ac=1;;){ac===h&&(ac=0);b=oa[ac];var K=b[0],N=b[1]/2+ja/4,v=Math.sin(N);N=Math.cos(N);var B=K-n,F=0<=B?1:-1,T=F*B,L=T>ja;p*=v;nb.add(Math.atan2(p*F*Math.sin(T),y*N+p*Math.cos(T)));C+=L?B+F*Qa:B;L^n>=m^K>=m&&(l=xb(ob(l),ob(b)),sc(l),n=xb(c,l),sc(n),n=(L^0<=B?-1:1)*Aa(n[2]),a>n||a===n&&
(l[0]||l[1]))&&(W+=L^0<=B?1:-1);if(!ac++)break;n=K;p=v;y=N;l=b}}}d=(-1E-6>C||1E-6>C&&-1E-6>nb)^W&1;r.length?(u||(O.polygonStart(),u=!0),ve(r,Ng,d,g,O)):d&&(u||(O.polygonStart(),u=!0),O.lineStart(),g(null,null,1,O),O.lineEnd());u&&(O.polygonEnd(),u=!1);r=q=null},sphere:function(){O.polygonStart();O.lineStart();g(null,null,1,O);O.lineEnd();O.polygonEnd()}},r,p=ye(),y=d(p),u=!1,q,K;return t}}function Mg(b){return 1<b.length}function ye(){var b=[],d;return{lineStart:function(){b.push(d=[])},point:function(b,
m){d.push([b,m])},lineEnd:M,buffer:function(){var g=b;b=[];d=null;return g},rejoin:function(){1<b.length&&b.push(b.pop().concat(b.shift()))}}}function Ng(b,d){return(0>(b=b.x)[0]?b[1]-Da-1E-6:Da-b[1])-(0>(d=d.x)[0]?d[1]-Da-1E-6:Da-d[1])}function Og(b){function d(b,d){return Math.cos(b)*Math.cos(d)>a}function g(b,d,g){var m=ob(b),x=ob(d),c=[1,0,0];x=xb(m,x);var O=qc(x,x);m=x[0];var e=O-m*m;if(!e)return!g&&b;O=a*O/e;e=-a*m/e;m=xb(c,x);c=rc(c,O);x=rc(x,e);jd(c,x);x=qc(c,m);O=qc(m,m);e=x*x-O*(qc(c,c)-
1);if(!(0>e)){var C=Math.sqrt(e);e=rc(m,(-x-C)/O);jd(e,c);e=tc(e);if(!g)return e;g=b[0];var W=d[0];b=b[1];d=d[1];if(W<g){var f=g;g=W;W=f}var fa=W-g,Y=1E-6>la(fa-ja);!Y&&d<b&&(f=b,b=d,d=f);if(Y||1E-6>fa?Y?0<b+d^e[1]<(1E-6>la(e[0]-g)?b:d):b<=e[1]&&e[1]<=d:fa>ja^(g<=e[0]&&e[0]<=W))return d=rc(m,(-x+C)/O),jd(d,c),[e,tc(d)]}}function m(d,g){var m=c?b:ja-b,a=0;d<-m?a|=1:d>m&&(a|=2);g<-m?a|=4:g>m&&(a|=8);return a}var a=Math.cos(b),c=0<a,e=1E-6<la(a),C=ld(b,6*ka);return xe(d,function(b){var a,x,O,C,f;return{lineStart:function(){C=
O=!1;f=1},point:function(fa,W){var Y=[fa,W],oa=d(fa,W);W=c?oa?0:m(fa,W):oa?m(fa+(0>fa?ja:-ja),W):0;!a&&(C=O=oa)&&b.lineStart();oa!==O&&(fa=g(a,Y),uc(a,fa)||uc(Y,fa))&&(Y[0]+=1E-6,Y[1]+=1E-6,oa=d(Y[0],Y[1]));if(oa!==O)f=0,oa?(b.lineStart(),fa=g(Y,a),b.point(fa[0],fa[1])):(fa=g(a,Y),b.point(fa[0],fa[1]),b.lineEnd()),a=fa;else if(e&&a&&c^oa){var h;W&x||!(h=g(Y,a,!0))||(f=0,c?(b.lineStart(),b.point(h[0][0],h[0][1]),b.point(h[1][0],h[1][1]),b.lineEnd()):(b.point(h[1][0],h[1][1]),b.lineEnd(),b.lineStart(),
b.point(h[0][0],h[0][1])))}!oa||a&&uc(a,Y)||b.point(Y[0],Y[1]);a=Y;O=oa;x=W},lineEnd:function(){O&&b.lineEnd();a=null},clean:function(){return f|(C&&O)<<1}}},C,c?[0,-b]:[-ja,b-ja])}function ze(b,d,g,m){return function(a){var x=a.a,c=a.b,e=x.x;x=x.y;var f=0,Y=1,oa=c.x-e;c=c.y-x;var h=b-e;if(oa||!(0<h)){h/=oa;if(0>oa){if(h<f)return;h<Y&&(Y=h)}else if(0<oa){if(h>Y)return;h>f&&(f=h)}h=g-e;if(oa||!(0>h)){h/=oa;if(0>oa){if(h>Y)return;h>f&&(f=h)}else if(0<oa){if(h<f)return;h<Y&&(Y=h)}h=d-x;if(c||!(0<h)){h/=
c;if(0>c){if(h<f)return;h<Y&&(Y=h)}else if(0<c){if(h>Y)return;h>f&&(f=h)}h=m-x;if(c||!(0>h)){h/=c;if(0>c){if(h>Y)return;h>f&&(f=h)}else if(0<c){if(h<f)return;h<Y&&(Y=h)}0<f&&(a.a={x:e+f*oa,y:x+f*c});1>Y&&(a.b={x:e+Y*oa,y:x+Y*c});return a}}}}}}function Ae(b,d,g,m){function a(m,a){return 1E-6>la(m[0]-b)?0<a?0:3:1E-6>la(m[0]-g)?0<a?2:1:1E-6>la(m[1]-d)?0<a?1:0:0<a?3:2}function c(b,d){return e(b.x,d.x)}function e(b,d){var g=a(b,1),m=a(d,1);return g!==m?g-m:0===g?d[1]-b[1]:1===g?b[0]-d[0]:2===g?b[1]-d[1]:
d[0]-b[0]}return function(x){function O(x,c,O,C){var f=0,fa=0;if(null==x||(f=a(x,O))!==(fa=a(c,O))||0>e(x,c)^0<O){do C.point(0===f||3===f?b:g,1<f?m:d);while((f=(f+O+4)%4)!==fa)}else C.point(c[0],c[1])}function C(a,c){b<=a&&a<=g&&d<=c&&c<=m&&x.point(a,c)}function f(a,c){a=Math.max(-1E9,Math.min(1E9,a));c=Math.max(-1E9,Math.min(1E9,c));var O=b<=a&&a<=g&&d<=c&&c<=m;t&&r.push([a,c]);if(B)p=a,y=c,u=O,B=!1,O&&(x.lineStart(),x.point(a,c));else if(O&&N)x.point(a,c);else{var e={a:{x:q,y:K},b:{x:a,y:c}};l(e)?
(N||(x.lineStart(),x.point(e.a.x,e.a.y)),x.point(e.b.x,e.b.y),O||x.lineEnd(),v=!1):O&&(x.lineStart(),x.point(a,c),v=!1)}q=a;K=c;N=O}var fa=x,h=ye(),l=ze(b,d,g,m),n,t,r,k={point:C,lineStart:function(){k.point=f;t&&t.push(r=[]);B=!0;N=!1;q=K=NaN},lineEnd:function(){n&&(f(p,y),u&&N&&h.rejoin(),n.push(h.buffer()));k.point=C;N&&x.lineEnd()},polygonStart:function(){x=h;n=[];t=[];v=!0},polygonEnd:function(){x=fa;n=z.merge(n);var d=[b,m];for(var g=0,a=t.length,e=d[1],C=0;C<a;++C)for(var f=1,W=t[C],Y=W.length,
h=W[0],oa;f<Y;++f)oa=W[f],h[1]<=e?oa[1]>e&&0<da(h,oa,d)&&++g:oa[1]<=e&&0>da(h,oa,d)&&--g,h=oa;d=0!==g;g=v&&d;a=n.length;if(g||a)x.polygonStart(),g&&(x.lineStart(),O(null,null,1,x),x.lineEnd()),a&&ve(n,c,d,O,x),x.polygonEnd();n=t=r=null}},p,y,u,q,K,N,B,v;return k}}function md(b){var d=0,g=ja/3,m=nd(b);b=m(d,g);b.parallels=function(b){return arguments.length?m(d=b[0]*ja/180,g=b[1]*ja/180):[d/ja*180,g/ja*180]};return b}function Be(b,d){function g(b,d){d=Math.sqrt(a-2*m*Math.sin(d))/m;return[d*Math.sin(b*=
m),c-d*Math.cos(b)]}b=Math.sin(b);var m=(b+Math.sin(d))/2,a=1+b*(2*m-b),c=Math.sqrt(a)/m;g.invert=function(b,d){d=c-d;return[Math.atan2(b,d)/m,Aa((a-(b*b+d*d)*m*m)/(2*m))]};return g}function Pg(){function b(b,d){od+=a*b-m*d;m=b;a=d}var d,g,m,a;gb.point=function(x,c){gb.point=b;d=m=x;g=a=c};gb.lineEnd=function(){b(d,g)}}function Qg(){function b(b,d){e.push("M",b,",",d,c)}function d(b,d){e.push("M",b,",",d);C.point=g}function g(b,d){e.push("L",b,",",d)}function m(){C.point=b}function a(){e.push("Z")}
var c=Ce(4.5),e=[],C={point:b,lineStart:function(){C.point=d},lineEnd:m,polygonStart:function(){C.lineEnd=a},polygonEnd:function(){C.lineEnd=m;C.point=b},pointRadius:function(b){c=Ce(b);return C},result:function(){if(e.length){var b=e.join("");e=[];return b}}};return C}function Ce(b){return"m0,"+b+"a"+b+","+b+" 0 1,1 0,"+-2*b+"a"+b+","+b+" 0 1,1 0,"+2*b+"z"}function rb(b,d){pb+=b;qb+=d;++$a}function De(){function b(b,a){var m=b-d,x=a-g;m=Math.sqrt(m*m+x*x);db+=m*(d+b)/2;eb+=m*(g+a)/2;Wa+=m;rb(d=b,
g=a)}var d,g;Ta.point=function(m,a){Ta.point=b;rb(d=m,g=a)}}function Ee(){Ta.point=rb}function Rg(){function b(b,d){var g=b-m,x=d-a;g=Math.sqrt(g*g+x*x);db+=g*(m+b)/2;eb+=g*(a+d)/2;Wa+=g;g=a*b-m*d;yb+=g*(m+b);zb+=g*(a+d);fb+=3*g;rb(m=b,a=d)}var d,g,m,a;Ta.point=function(x,c){Ta.point=b;rb(d=m=x,g=a=c)};Ta.lineEnd=function(){b(d,g)}}function Sg(b){function d(d,g){b.moveTo(d+e,g);b.arc(d,g,e,0,Qa)}function g(d,g){b.moveTo(d,g);C.point=m}function m(d,g){b.lineTo(d,g)}function a(){C.point=d}function c(){b.closePath()}
var e=4.5,C={point:d,lineStart:function(){C.point=g},lineEnd:a,polygonStart:function(){C.lineEnd=c},polygonEnd:function(){C.lineEnd=a;C.point=d},pointRadius:function(b){e=b;return C},result:M};return C}function Fe(b){function d(b){return(C?m:g)(b)}function g(d){return Ge(d,function(g,m){g=b(g,m);d.point(g[0],g[1])})}function m(d){function g(g,m){g=b(g,m);d.point(g[0],g[1])}function m(){k=NaN;K.point=c;d.lineStart()}function c(g,m){var c=ob([g,m]);m=b(g,m);a(k,p,r,y,u,q,k=m[0],p=m[1],r=g,y=c[0],u=
c[1],q=c[2],C,d);d.point(k,p)}function x(){K.point=g;d.lineEnd()}function e(){m();K.point=O;K.lineEnd=f}function O(b,d){c(fa=b,d);W=k;h=p;l=y;n=u;t=q;K.point=c}function f(){a(k,p,r,y,u,q,W,h,fa,l,n,t,C,d);K.lineEnd=x;x()}var fa,W,h,l,n,t,r,k,p,y,u,q,K={point:g,lineStart:m,lineEnd:x,polygonStart:function(){d.polygonStart();K.lineStart=e},polygonEnd:function(){d.polygonEnd();K.lineStart=m}};return K}function a(d,g,m,x,O,C,f,fa,h,l,n,t,k,r){var W=f-d,Y=fa-g,oa=W*W+Y*Y;if(oa>4*c&&k--){var p=x+l,y=O+n,
u=C+t,q=Math.sqrt(p*p+y*y+u*u),K=Math.asin(u/=q),N=1E-6>la(la(u)-1)||1E-6>la(m-h)?(m+h)/2:Math.atan2(y,p),B=b(N,K);K=B[0];B=B[1];var v=K-d,F=B-g,T=Y*v-W*F;if(T*T/oa>c||.3<la((W*v+Y*F)/oa-.5)||x*l+O*n+C*t<e)a(d,g,m,x,O,C,K,B,N,p/=q,y/=q,u,k,r),r.point(K,B),a(K,B,N,p,y,u,f,fa,h,l,n,t,k,r)}}var c=.5,e=Math.cos(30*ka),C=16;d.precision=function(b){if(!arguments.length)return Math.sqrt(c);C=0<(c=b*b)&&16;return d};return d}function Tg(b){var d=Fe(function(d,m){return b([d*Ca,m*Ca])});return function(b){return He(d(b))}}
function Ie(b){this.stream=b}function Ge(b,d){return{point:d,sphere:function(){b.sphere()},lineStart:function(){b.lineStart()},lineEnd:function(){b.lineEnd()},polygonStart:function(){b.polygonStart()},polygonEnd:function(){b.polygonEnd()}}}function hb(b){return nd(function(){return b})()}function nd(b){function d(b){b=C(b[0]*ka,b[1]*ka);return[b[0]*Y+y,u-b[1]*Y]}function g(b){return(b=C.invert((b[0]-y)/Y,(u-b[1])/Y))&&[b[0]*Ca,b[1]*Ca]}function m(){C=ue(e=pd(k,r,p),c);var b=c(n,t);y=h-b[0]*Y;u=l+
b[1]*Y;return a()}function a(){v&&(v.valid=!1,v=null);return d}var c,e,C,f=Fe(function(b,d){b=c(b,d);return[b[0]*Y+y,u-b[1]*Y]}),Y=150,h=480,l=250,n=0,t=0,k=0,r=0,p=0,y,u,q=Je,K=H,N=null,B=null,v;d.stream=function(b){v&&(v.valid=!1);v=He(q(e,f(K(b))));v.valid=!0;return v};d.clipAngle=function(b){if(!arguments.length)return N;q=null==b?(N=b,Je):Og((N=+b)*ka);return a()};d.clipExtent=function(b){if(!arguments.length)return B;K=(B=b)?Ae(b[0][0],b[0][1],b[1][0],b[1][1]):H;return a()};d.scale=function(b){if(!arguments.length)return Y;
Y=+b;return m()};d.translate=function(b){if(!arguments.length)return[h,l];h=+b[0];l=+b[1];return m()};d.center=function(b){if(!arguments.length)return[n*Ca,t*Ca];n=b[0]%360*ka;t=b[1]%360*ka;return m()};d.rotate=function(b){if(!arguments.length)return[k*Ca,r*Ca,p*Ca];k=b[0]%360*ka;r=b[1]%360*ka;p=2<b.length?b[2]%360*ka:0;return m()};z.rebind(d,f,"precision");return function(){c=b.apply(this,arguments);d.invert=c.invert&&g;return m()}}function He(b){return Ge(b,function(d,g){b.point(d*ka,g*ka)})}function Nb(b,
d){return[b,d]}function Ke(b,d){return[b>ja?b-Qa:b<-ja?b+Qa:b,d]}function pd(b,d,g){return b?d||g?ue(Le(b),Me(d,g)):Le(b):d||g?Me(d,g):Ke}function Ne(b){return function(d,g){return d+=b,[d>ja?d-Qa:d<-ja?d+Qa:d,g]}}function Le(b){var d=Ne(b);d.invert=Ne(-b);return d}function Me(b,d){function g(b,d){var g=Math.cos(d),x=Math.cos(b)*g;b=Math.sin(b)*g;d=Math.sin(d);g=d*m+x*a;return[Math.atan2(b*c-g*e,x*m-d*a),Aa(g*c+b*e)]}var m=Math.cos(b),a=Math.sin(b),c=Math.cos(d),e=Math.sin(d);g.invert=function(b,
d){var g=Math.cos(d),x=Math.cos(b)*g;b=Math.sin(b)*g;d=Math.sin(d);g=d*c-b*e;return[Math.atan2(b*c+d*e,x*m+g*a),Aa(g*m-x*a)]};return g}function ld(b,d){var g=Math.cos(b),m=Math.sin(b);return function(a,c,e,C){var x=e*d;if(null!=a){if(a=Oe(g,a),c=Oe(g,c),0<e?a<c:a>c)a+=e*Qa}else a=b+e*Qa,c=b-.5*x;for(var O;0<e?a>c:a<c;a-=x)C.point((O=tc([g,-m*Math.cos(a),-m*Math.sin(a)]))[0],O[1])}}function Oe(b,d){d=ob(d);d[0]-=b;sc(d);b=ha(-d[1]);return((0>-d[2]?-b:b)+2*Math.PI-1E-6)%(2*Math.PI)}function Pe(b,d,
g){var a=z.range(b,d-1E-6,g).concat(d);return function(b){return a.map(function(d){return[b,d]})}}function Qe(b,d,g){var a=z.range(b,d-1E-6,g).concat(d);return function(b){return a.map(function(d){return[d,b]})}}function qd(b){return b.source}function rd(b){return b.target}function Ug(b,d,g,a){var m=Math.cos(d),c=Math.sin(d),e=Math.cos(a),C=Math.sin(a),f=m*Math.cos(b),Y=m*Math.sin(b),h=e*Math.cos(g),l=e*Math.sin(g),n=2*Math.asin(Math.sqrt(va(a-d)+m*e*va(g-b))),t=1/Math.sin(n);g=n?function(b){var d=
Math.sin(b*=n)*t;b=Math.sin(n-b)*t;var g=b*f+d*h,a=b*Y+d*l;return[Math.atan2(a,g)*Ca,Math.atan2(b*c+d*C,Math.sqrt(g*g+a*a))*Ca]}:function(){return[b*Ca,d*Ca]};g.distance=n;return g}function Ob(b,d){function g(d,g){var a=Math.cos(g),m=b(Math.cos(d)*a);return[m*a*Math.sin(d),m*Math.sin(g)]}g.invert=function(b,g){var a=Math.sqrt(b*b+g*g),m=d(a),c=Math.sin(m);return[Math.atan2(b*c,a*Math.cos(m)),Math.asin(a&&g*c/a)]};return g}function Re(b,d){function g(b,d){0<e?d<-Da+1E-6&&(d=-Da+1E-6):d>Da-1E-6&&(d=
Da-1E-6);d=e/Math.pow(Math.tan(ja/4+d/2),c);return[d*Math.sin(c*b),e-d*Math.cos(c*b)]}var a=Math.cos(b),c=b===d?Math.sin(b):Math.log(a/Math.cos(d))/Math.log(Math.tan(ja/4+d/2)/Math.tan(ja/4+b/2)),e=a*Math.pow(Math.tan(ja/4+b/2),c)/c;if(!c)return xc;g.invert=function(b,d){d=e-d;return[Math.atan2(b,d)/c,2*Math.atan(Math.pow(e/((0<c?1:0>c?-1:0)*Math.sqrt(b*b+d*d)),1/c))-Da]};return g}function Se(b,d){function g(b,d){d=e-d;return[d*Math.sin(c*b),e-d*Math.cos(c*b)]}var a=Math.cos(b),c=b===d?Math.sin(b):
(a-Math.cos(d))/(d-b),e=a/c+b;if(1E-6>la(c))return Nb;g.invert=function(b,d){d=e-d;return[Math.atan2(b,d)/c,e-(0<c?1:0>c?-1:0)*Math.sqrt(b*b+d*d)]};return g}function xc(b,d){return[b,Math.log(Math.tan(ja/4+d/2))]}function Te(b){var d=hb(b),g=d.scale,a=d.translate,c=d.clipExtent,e;d.scale=function(){var b=g.apply(d,arguments);return b===d?e?d.clipExtent(null):d:b};d.translate=function(){var b=a.apply(d,arguments);return b===d?e?d.clipExtent(null):d:b};d.clipExtent=function(b){var m=c.apply(d,arguments);
if(m===d){if(e=null==b){var x=ja*g(),O=a();c([[O[0]-x,O[1]-x],[O[0]+x,O[1]+x]])}}else e&&(m=null);return m};return d.clipExtent(null)}function sd(b,d){return[Math.log(Math.tan(ja/4+d/2)),-b]}function Ab(b){return b[0]}function Pb(b){return b[1]}function Ue(b){for(var d=b.length,g=[0,1],a=2,c=2;c<d;c++){for(;1<a&&0>=da(b[g[a-2]],b[g[a-1]],b[c]);)--a;g[a++]=c}return g.slice(0,a)}function Vg(b,d){return b[0]-d[0]||b[1]-d[1]}function td(b,d,g){return(g[0]-d[0])*(b[1]-d[1])<(g[1]-d[1])*(b[0]-d[0])}function ud(b,
d,g,a){var m=b[0],c=g[0],e=d[0]-m,C=a[0]-c;b=b[1];g=g[1];d=d[1]-b;a=a[1]-g;c=(C*(b-g)-a*(m-c))/(a*e-C*d);return[m+c*e,b+c*d]}function Ve(b){var d=b[0];b=b[b.length-1];return!(d[0]-b[0]||d[1]-b[1])}function Wg(){yc(this);this.edge=this.site=this.circle=null}function We(b){var d=Xe.pop()||new Wg;d.site=b;return d}function vd(b){Bb(b);Cb.remove(b);Xe.push(b);yc(b)}function Ye(b,d){var g=b.site,a=g.x,c=g.y,e=c-d;if(!e)return a;b=b.P;if(!b)return-Infinity;g=b.site;b=g.x;g=g.y;d=g-d;if(!d)return b;var f=
b-a,C=1/e-1/d,W=f/d;return C?(-W+Math.sqrt(W*W-2*C*(f*f/(-2*d)-g+d/2+c-e/2)))/C+a:(a+b)/2}function Ze(b){this.site=b;this.edges=[]}function $e(b,d){return d.angle-b.angle}function Xg(){yc(this);this.x=this.y=this.arc=this.site=this.cy=null}function Db(b){var d=b.P,g=b.N;if(d&&g){var a=d.site;d=b.site;var c=g.site;if(a!==c){g=d.x;var e=d.y,f=a.x-g,C=a.y-e;a=c.x-g;c=c.y-e;var W=2*(f*c-C*a);if(!(-1E-12<=W)){var h=f*f+C*C,l=a*a+c*c;C=(c*h-C*l)/W;f=(f*l-a*h)/W;c=f+e;e=af.pop()||new Xg;e.arc=b;e.site=d;
e.x=C+g;e.y=c+Math.sqrt(C*C+f*f);e.cy=c;b.circle=e;b=null;for(d=Qb._;d;)if(e.y<d.y||e.y===d.y&&e.x<=d.x)if(d.L)d=d.L;else{b=d.P;break}else if(d.R)d=d.R;else{b=d;break}Qb.insert(b,e);b||(wd=e)}}}}function Bb(b){var d=b.circle;d&&(d.P||(wd=d.N),Qb.remove(d),af.push(d),yc(d),b.circle=null)}function Yg(b,d){var g=b.b;if(g)return!0;var a=b.a;g=d[0][0];var c=d[1][0],e=d[0][1];d=d[1][1];var f=b.l,C=b.r,W=f.x;f=f.y;var h=C.x;C=C.y;var l=(W+h)/2;if(C===f){if(l<g||l>=c)return;if(W>h){if(!a)a={x:l,y:e};else if(a.y>=
d)return;g={x:l,y:d}}else{if(!a)a={x:l,y:d};else if(a.y<e)return;g={x:l,y:e}}}else{var n=(W-h)/(C-f);l=(f+C)/2-n*l;if(-1>n||1<n)if(W>h){if(!a)a={x:(e-l)/n,y:e};else if(a.y>=d)return;g={x:(d-l)/n,y:d}}else{if(!a)a={x:(d-l)/n,y:d};else if(a.y<e)return;g={x:(e-l)/n,y:e}}else if(f<C){if(!a)a={x:g,y:n*g+l};else if(a.x>=c)return;g={x:c,y:n*c+l}}else{if(!a)a={x:c,y:n*c+l};else if(a.x<g)return;g={x:g,y:n*g+l}}}b.a=a;b.b=g;return!0}function bf(b,d){this.l=b;this.r=d;this.a=this.b=null}function Rb(b,d,g,a){var m=
new bf(b,d);Eb.push(m);g&&zc(m,b,d,g);a&&zc(m,d,b,a);sb[b.i].edges.push(new Ac(m,b,d));sb[d.i].edges.push(new Ac(m,d,b));return m}function Zg(b,d,g){b=new bf(b,null);b.a=d;b.b=g;Eb.push(b);return b}function zc(b,d,g,a){b.a||b.b?b.l===g?b.b=a:b.a=a:(b.a=a,b.l=d,b.r=g)}function Ac(b,d,g){var a=b.a,c=b.b;this.edge=b;this.site=d;this.angle=g?Math.atan2(g.y-d.y,g.x-d.x):b.l===d?Math.atan2(c.x-a.x,a.y-c.y):Math.atan2(a.x-c.x,c.y-a.y)}function xd(){this._=null}function yc(b){b.U=b.C=b.L=b.R=b.P=b.N=null}
function Sb(b,d){var g=d.R,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.R=g.L;d.R&&(d.R.U=d);g.L=d}function Tb(b,d){var g=d.L,a=d.U;a?a.L===d?a.L=g:a.R=g:b._=g;g.U=a;d.U=g;d.L=g.R;d.L&&(d.L.U=d);g.R=d}function cf(b){for(;b.L;)b=b.L;return b}function yd(b,d){var g=b.sort($g).pop(),a;Eb=[];sb=Array(b.length);Cb=new xd;for(Qb=new xd;;){var c=wd;if(g&&(!c||g.y<c.y||g.y===c.y&&g.x<c.x)){if(g.x!==a||g.y!==e){sb[g.i]=new Ze(g);var e=a=void 0;c=g;for(var f=c.x,C=c.y,W=Cb._;W;){var h=Ye(W,C)-f;if(1E-6<
h)W=W.L;else{var l=W;var n=C;var t=l.N;t?n=Ye(t,n):(l=l.site,n=l.y===n?l.x:Infinity);n=f-n;if(1E-6<n){if(!W.R){e=W;break}W=W.R}else{-1E-6<h?(e=W.P,a=W):-1E-6<n?(e=W,a=W.N):e=a=W;break}}}h=We(c);Cb.insert(e,h);if(e||a)if(e===a)Bb(e),a=We(e.site),Cb.insert(h,a),h.edge=a.edge=Rb(e.site,h.site),Db(e),Db(a);else if(a){Bb(e);Bb(a);f=e.site;W=f.x;n=f.y;l=c.x-W;t=c.y-n;C=a.site;var k=C.x-W,r=C.y-n,p=2*(l*r-t*k),y=l*l+t*t,u=k*k+r*r;W={x:(r*y-t*u)/p+W,y:(l*u-k*y)/p+n};zc(a.edge,f,C,W);h.edge=Rb(f,c,null,W);
a.edge=Rb(c,C,null,W);Db(e);Db(a)}else h.edge=Rb(e.site,h.site);a=g.x;e=g.y}g=b.pop()}else if(c){C=c.arc;c=C.circle;f=c.x;W=c.cy;c={x:f,y:W};l=C.P;n=C.N;h=[C];vd(C);for(C=l;C.circle&&1E-6>la(f-C.circle.x)&&1E-6>la(W-C.circle.cy);)l=C.P,h.unshift(C),vd(C),C=l;h.unshift(C);Bb(C);for(l=n;l.circle&&1E-6>la(f-l.circle.x)&&1E-6>la(W-l.circle.cy);)n=l.N,h.push(l),vd(l),l=n;h.push(l);Bb(l);W=h.length;for(f=1;f<W;++f)l=h[f],C=h[f-1],zc(l.edge,C.site,l.site,c);C=h[0];l=h[W-1];l.edge=Rb(C.site,l.site,null,c);
Db(C);Db(l)}else break}if(d){b=Eb;g=ze(d[0][0],d[0][1],d[1][0],d[1][1]);for(a=b.length;a--;)if(e=b[a],!Yg(e,d)||!g(e)||1E-6>la(e.a.x-e.b.x)&&1E-6>la(e.a.y-e.b.y))e.a=e.b=null,b.splice(a,1);b=d[0][0];g=d[1][0];a=d[0][1];d=d[1][1];f=sb;for(C=f.length;C--;)if((W=f[C])&&W.prepare())for(l=W.edges,t=l.length,n=0;n<t;)if(k=l[n].end(),c=k.x,h=k.y,r=l[++n%t].start(),e=r.x,r=r.y,1E-6<la(c-e)||1E-6<la(h-r))l.splice(n,0,new Ac(Zg(W.site,k,1E-6>la(c-b)&&1E-6<d-h?{x:b,y:1E-6>la(e-b)?r:d}:1E-6>la(h-d)&&1E-6<g-c?
{x:1E-6>la(r-d)?e:g,y:d}:1E-6>la(c-g)&&1E-6<h-a?{x:g,y:1E-6>la(e-g)?r:a}:1E-6>la(h-a)&&1E-6<c-b?{x:1E-6>la(r-a)?e:b,y:a}:null),W.site,null)),++t}d={cells:sb,edges:Eb};Cb=Qb=Eb=sb=null;return d}function $g(b,d){return d.y-b.y||d.x-b.x}function ah(b){return b.x}function bh(b){return b.y}function df(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ub(b,d,g,a,c,e){if(!b(d,g,a,c,e)){var m=.5*(g+c),x=.5*(a+e);d=d.nodes;d[0]&&Ub(b,d[0],g,a,m,x);d[1]&&Ub(b,d[1],m,a,c,x);d[2]&&Ub(b,d[2],g,x,m,
e);d[3]&&Ub(b,d[3],m,x,c,e)}}function ch(b,d,g,a,c,e,f){var m=Infinity,x;(function lc(b,O,C,h,W){if(!(O>e||C>f||h<a||W<c)){if(l=b.point){var l,fa=d-b.x,n=g-b.y;fa=fa*fa+n*n;fa<m&&(fa=Math.sqrt(m=fa),a=d-fa,c=g-fa,e=d+fa,f=g+fa,x=l)}l=b.nodes;fa=.5*(O+h);n=.5*(C+W);for(var t=(g>=n)<<1|d>=fa,r=t+4;t<r;++t)if(b=l[t&3])switch(t&3){case 0:lc(b,O,C,fa,n);break;case 1:lc(b,fa,C,h,n);break;case 2:lc(b,O,n,fa,W);break;case 3:lc(b,fa,n,h,W)}}})(b,a,c,e,f);return x}function zd(b,d){b=z.rgb(b);d=z.rgb(d);var g=
b.r,a=b.g,c=b.b,e=d.r-g,f=d.g-a,C=d.b-c;return function(b){return"#"+cb(Math.round(g+e*b))+cb(Math.round(a+f*b))+cb(Math.round(c+C*b))}}function ef(b,d){var g={},a={},c;for(c in b)c in d?g[c]=tb(b[c],d[c]):a[c]=b[c];for(c in d)c in b||(a[c]=d[c]);return function(b){for(c in g)a[c]=g[c](b);return a}}function ab(b,d){b=+b;d=+d;return function(g){return b*(1-g)+d*g}}function ff(b,d){var g=Ad.lastIndex=Bd.lastIndex=0,a,c,e,f=-1,C=[],h=[];b+="";for(d+="";(a=Ad.exec(b))&&(c=Bd.exec(d));)(e=c.index)>g&&
(e=d.slice(g,e),C[f]?C[f]+=e:C[++f]=e),(a=a[0])===(c=c[0])?C[f]?C[f]+=c:C[++f]=c:(C[++f]=null,h.push({i:f,x:ab(a,c)})),g=Bd.lastIndex;g<d.length&&(e=d.slice(g),C[f]?C[f]+=e:C[++f]=e);return 2>C.length?h[0]?(d=h[0].x,function(b){return d(b)+""}):function(){return d}:(d=h.length,function(b){for(var g=0,a;g<d;++g)C[(a=h[g]).i]=a.x(b);return C.join("")})}function tb(b,d){for(var g=z.interpolators.length,a;0<=--g&&!(a=z.interpolators[g](b,d)););return a}function Bc(b,d){var g=[],a=[],c=b.length,e=d.length,
f=Math.min(b.length,d.length),C;for(C=0;C<f;++C)g.push(tb(b[C],d[C]));for(;C<c;++C)a[C]=b[C];for(;C<e;++C)a[C]=d[C];return function(b){for(C=0;C<f;++C)a[C]=g[C](b);return a}}function dh(b){return function(d){return 0>=d?0:1<=d?1:b(d)}}function gf(b){return function(d){return 1-b(1-d)}}function hf(b){return function(d){return.5*(.5>d?b(2*d):2-b(2-2*d))}}function eh(b){return b*b}function fh(b){return b*b*b}function gh(b){if(0>=b)return 0;if(1<=b)return 1;var d=b*b,g=d*b;return 4*(.5>b?g:3*(b-d)+g-
.75)}function hh(b){return 1-Math.cos(b*Da)}function ih(b){return Math.pow(2,10*(b-1))}function jh(b){return 1-Math.sqrt(1-b*b)}function kh(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+.9375:7.5625*(b-=2.625/2.75)*b+.984375}function jf(b,d){d-=b;return function(g){return Math.round(b+d*g)}}function kf(b){var d=[b.a,b.b],g=[b.c,b.d],a=lf(d),c=d[0]*g[0]+d[1]*g[1],e=-c;g[0]+=e*d[0];g[1]+=e*d[1];e=lf(g)||0;d[0]*g[1]<g[0]*d[1]&&(d[0]*=-1,d[1]*=-1,
a*=-1,c*=-1);this.rotate=(a?Math.atan2(d[1],d[0]):Math.atan2(-g[0],g[1]))*Ca;this.translate=[b.e,b.f];this.scale=[a,e];this.skew=e?Math.atan2(c,e)*Ca:0}function lf(b){var d=Math.sqrt(b[0]*b[0]+b[1]*b[1]);d&&(b[0]/=d,b[1]/=d);return d}function Fb(b){return b.length?b.pop()+",":""}function lh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push("translate(",null,",",null,")"),a.push({i:g-4,x:ab(b[0],d[0])},{i:g-2,x:ab(b[1],d[1])})):(d[0]||d[1])&&g.push("translate("+d+")")}function mh(b,d,g,a){b!==d?(180<b-d?
d+=360:180<d-b&&(b+=360),a.push({i:g.push(Fb(g)+"rotate(",null,")")-2,x:ab(b,d)})):d&&g.push(Fb(g)+"rotate("+d+")")}function nh(b,d,g,a){b!==d?a.push({i:g.push(Fb(g)+"skewX(",null,")")-2,x:ab(b,d)}):d&&g.push(Fb(g)+"skewX("+d+")")}function oh(b,d,g,a){b[0]!==d[0]||b[1]!==d[1]?(g=g.push(Fb(g)+"scale(",null,",",null,")"),a.push({i:g-4,x:ab(b[0],d[0])},{i:g-2,x:ab(b[1],d[1])})):1===d[0]&&1===d[1]||g.push(Fb(g)+"scale("+d+")")}function mf(b,d){var g=[],a=[];b=z.transform(b);d=z.transform(d);lh(b.translate,
d.translate,g,a);mh(b.rotate,d.rotate,g,a);nh(b.skew,d.skew,g,a);oh(b.scale,d.scale,g,a);b=d=null;return function(b){for(var d=-1,c=a.length,m;++d<c;)g[(m=a[d]).i]=m.x(b);return g.join("")}}function ph(b,d){d=(d-=b=+b)||1/d;return function(g){return(g-b)/d}}function qh(b,d){d=(d-=b=+b)||1/d;return function(g){return Math.max(0,Math.min(1,(g-b)/d))}}function rh(b){var d=b.source;b=b.target;var g=b;if(d===g)var a=d;else{a=nf(d);g=nf(g);for(var c=a.pop(),e=g.pop(),f=null;c===e;)f=c,c=a.pop(),e=g.pop();
a=f}for(g=[d];d!==a;)d=d.parent,g.push(d);for(d=g.length;b!==a;)g.splice(d,0,b),b=b.parent;return g}function nf(b){for(var d=[],g=b.parent;null!=g;)d.push(b),b=g,g=g.parent;d.push(b);return d}function sh(b){b.fixed|=2}function th(b){b.fixed&=-7}function uh(b){b.fixed|=4;b.px=b.x;b.py=b.y}function vh(b){b.fixed&=-5}function of(b,d,g){var a=0,c=0;b.charge=0;if(!b.leaf)for(var e=b.nodes,f=e.length,C=-1,h;++C<f;)h=e[C],null!=h&&(of(h,d,g),b.charge+=h.charge,a+=h.charge*h.cx,c+=h.charge*h.cy);b.point&&
(b.leaf||(b.point.x+=Math.random()-.5,b.point.y+=Math.random()-.5),d*=g[b.point.index],b.charge+=b.pointCharge=d,a+=d*b.point.x,c+=d*b.point.y);b.cx=a/b.charge;b.cy=c/b.charge}function Vb(b,d){z.rebind(b,d,"sort","children","value");b.nodes=b;b.links=wh;return b}function Wb(b,d){for(var g=[b];null!=(b=g.pop());)if(d(b),(c=b.children)&&(a=c.length))for(var a,c;0<=--a;)g.push(c[a])}function Xa(b,d){for(var g=[b],a=[];null!=(b=g.pop());)if(a.push(b),(e=b.children)&&(c=e.length)){b=-1;for(var c,e;++b<
c;)g.push(e[b])}for(;null!=(b=a.pop());)d(b)}function xh(b){return b.children}function yh(b){return b.value}function zh(b,d){return d.value-b.value}function wh(b){return z.merge(b.map(function(b){return(b.children||[]).map(function(d){return{source:b,target:d}})}))}function Ah(b){return b.x}function Bh(b){return b.y}function Ch(b,d,g){b.y0=d;b.y=g}function Cd(b){return z.range(b.length)}function Dd(b){var d=-1;b=b[0].length;for(var g=[];++d<b;)g[d]=0;return g}function Dh(b){for(var d=1,g=0,a=b[0][1],
c,e=b.length;d<e;++d)(c=b[d][1])>a&&(g=d,a=c);return g}function Eh(b){return b.reduce(Fh,0)}function Fh(b,d){return b+d[1]}function Gh(b,d){return pf(b,Math.ceil(Math.log(d.length)/Math.LN2+1))}function pf(b,d){var g=-1,a=+b[0];b=(b[1]-a)/d;for(var c=[];++g<=d;)c[g]=b*g+a;return c}function Hh(b){return[z.min(b),z.max(b)]}function Ih(b,d){return b.value-d.value}function Ed(b,d){var g=b._pack_next;b._pack_next=d;d._pack_prev=b;d._pack_next=g;g._pack_prev=d}function qf(b,d){b._pack_next=d;d._pack_prev=
b}function rf(b,d){var g=d.x-b.x,a=d.y-b.y;b=b.r+d.r;return.999*b*b>g*g+a*a}function sf(b){function d(b){a=Math.min(b.x-b.r,a);c=Math.max(b.x+b.r,c);e=Math.min(b.y-b.r,e);f=Math.max(b.y+b.r,f)}if((g=b.children)&&(n=g.length)){var g,a=Infinity,c=-Infinity,e=Infinity,f=-Infinity,C,h,l,n;g.forEach(Jh);var t=g[0];t.x=-t.r;t.y=0;d(t);if(1<n){var r=g[1];r.x=r.r;r.y=0;d(r);if(2<n){var k=g[2];tf(t,r,k);d(k);Ed(t,k);t._pack_prev=k;Ed(k,r);r=t._pack_next;for(C=3;C<n;C++){tf(t,r,k=g[C]);var p=0,y=1,u=1;for(h=
r._pack_next;h!==r;h=h._pack_next,y++)if(rf(h,k)){p=1;break}if(1==p)for(l=t._pack_prev;l!==h._pack_prev&&!rf(l,k);l=l._pack_prev,u++);p?(y<u||y==u&&r.r<t.r?qf(t,r=h):qf(t=l,r),C--):(Ed(t,k),r=k,d(k))}}}t=(a+c)/2;r=(e+f)/2;for(C=h=0;C<n;C++)k=g[C],k.x-=t,k.y-=r,h=Math.max(h,k.r+Math.sqrt(k.x*k.x+k.y*k.y));b.r=h;g.forEach(Kh)}}function Jh(b){b._pack_next=b._pack_prev=b}function Kh(b){delete b._pack_next;delete b._pack_prev}function uf(b,d,g,a){var c=b.children;b.x=d+=a*b.x;b.y=g+=a*b.y;b.r*=a;if(c){b=
-1;for(var m=c.length;++b<m;)uf(c[b],d,g,a)}}function tf(b,d,g){var a=b.r+g.r,c=d.x-b.x,e=d.y-b.y;if(a&&(c||e)){var f=d.r+g.r,C=c*c+e*e;f*=f;a*=a;d=.5+(a-f)/(2*C);f=Math.sqrt(Math.max(0,2*f*(a+C)-(a-=C)*a-f*f))/(2*C);g.x=b.x+d*c+f*e;g.y=b.y+d*e-f*c}else g.x=b.x+a,g.y=b.y}function vf(b,d){return b.parent==d.parent?1:2}function Fd(b){var d=b.children;return d.length?d[0]:b.t}function Gd(b){var d=b.children,g;return(g=d.length)?d[g-1]:b.t}function Lh(b){return 1+z.max(b,function(b){return b.y})}function Mh(b){return b.reduce(function(b,
g){return b+g.x},0)/b.length}function wf(b){var d=b.children;return d&&d.length?wf(d[0]):b}function xf(b){var d=b.children,g;return d&&(g=d.length)?xf(d[g-1]):b}function Hd(b){return{x:b.x,y:b.y,dx:b.dx,dy:b.dy}}function yf(b,d){var g=b.x+d[3],a=b.y+d[0],c=b.dx-d[1]-d[3];b=b.dy-d[0]-d[2];0>c&&(g+=c/2,c=0);0>b&&(a+=b/2,b=0);return{x:g,y:a,dx:c,dy:b}}function Gb(b){var d=b[0];b=b[b.length-1];return d<b?[d,b]:[b,d]}function Cc(b){return b.rangeExtent?b.rangeExtent():Gb(b.range())}function Nh(b,d,g,a){var c=
g(b[0],b[1]),m=a(d[0],d[1]);return function(b){return m(c(b))}}function Dc(b,d){var g=0,a=b.length-1,c=b[g],e=b[a];if(e<c){var f=g;g=a;a=f;f=c;c=e;e=f}b[g]=d.floor(c);b[a]=d.ceil(e);return b}function zf(b){return b?{floor:function(d){return Math.floor(d/b)*b},ceil:function(d){return Math.ceil(d/b)*b}}:Oh}function Ph(b,d,g,a){var c=[],e=[],m=0,f=Math.min(b.length,d.length)-1;b[f]<b[0]&&(b=b.slice().reverse(),d=d.slice().reverse());for(;++m<=f;)c.push(g(b[m-1],b[m])),e.push(a(d[m-1],d[m]));return function(d){var g=
z.bisect(b,d,1,f)-1;return e[g](c[g](d))}}function Af(b,d,g,a){function c(){var c=2<Math.min(b.length,d.length)?Ph:Nh,x=a?qh:ph;m=c(b,d,x,g);f=c(d,b,x,tb);return e}function e(b){return m(b)}var m,f;e.invert=function(b){return f(b)};e.domain=function(d){if(!arguments.length)return b;b=d.map(Number);return c()};e.range=function(b){if(!arguments.length)return d;d=b;return c()};e.rangeRound=function(b){return e.range(b).interpolate(jf)};e.clamp=function(b){if(!arguments.length)return a;a=b;return c()};
e.interpolate=function(b){if(!arguments.length)return g;g=b;return c()};e.ticks=function(d){return z.range.apply(z,ib(b,d))};e.tickFormat=function(d,g){return Id(b,d,g)};e.nice=function(d){Bf(b,d);return c()};e.copy=function(){return Af(b,d,g,a)};return c()}function Jd(b,d){return z.rebind(b,d,"range","rangeRound","interpolate","clamp")}function Bf(b,d){Dc(b,zf(ib(b,d)[2]));Dc(b,zf(ib(b,d)[2]));return b}function ib(b,d){null==d&&(d=10);b=Gb(b);var g=b[1]-b[0],a=Math.pow(10,Math.floor(Math.log(g/d)/
Math.LN10));d=d/g*a;.15>=d?a*=10:.35>=d?a*=5:.75>=d&&(a*=2);b[0]=Math.ceil(b[0]/a)*a;b[1]=Math.floor(b[1]/a)*a+.5*a;b[2]=a;return b}function Id(b,d,g){b=ib(b,d);if(g){d=ke.exec(g);d.shift();if("s"===d[8]){var a=z.formatPrefix(Math.max(la(b[0]),la(b[1])));d[7]||(d[7]="."+Ec(a.scale(b[2])));d[8]="f";g=z.format(d.join(""));return function(b){return g(a.scale(b))+a.symbol}}d[7]||(d[7]="."+Qh(d[8],b));g=d.join("")}else g=",."+Ec(b[2])+"f";return z.format(g)}function Ec(b){return-Math.floor(Math.log(b)/
Math.LN10+.01)}function Qh(b,d){var g=Ec(d[2]);return b in Rh?Math.abs(g-Ec(Math.max(la(d[0]),la(d[1]))))+ +("e"!==b):g-2*("%"===b)}function Cf(b,d,g,a){function c(b){return(g?Math.log(0>b?0:b):-Math.log(0<b?0:-b))/Math.log(d)}function e(b){return g?Math.pow(d,b):-Math.pow(d,-b)}function m(d){return b(c(d))}m.invert=function(d){return e(b.invert(d))};m.domain=function(d){if(!arguments.length)return a;g=0<=d[0];b.domain((a=d.map(Number)).map(c));return m};m.base=function(g){if(!arguments.length)return d;
d=+g;b.domain(a.map(c));return m};m.nice=function(){var d=Dc(a.map(c),g?Math:Sh);b.domain(d);a=d.map(e);return m};m.ticks=function(){var b=Gb(a),m=[],f=b[0];b=b[1];var x=Math.floor(c(f)),O=Math.ceil(c(b)),h=d%1?2:d;if(isFinite(O-x)){if(g){for(;x<O;x++)for(var l=1;l<h;l++)m.push(e(x)*l);m.push(e(x))}else for(m.push(e(x));x++<O;)for(l=h-1;0<l;l--)m.push(e(x)*l);for(x=0;m[x]<f;x++);for(O=m.length;m[O-1]>b;O--);m=m.slice(x,O)}return m};m.tickFormat=function(b,g){if(!arguments.length)return Df;2>arguments.length?
g=Df:"function"!==typeof g&&(g=z.format(g));var a=Math.max(1,d*b/m.ticks().length);return function(b){var m=b/e(Math.round(c(b)));m*d<d-.5&&(m*=d);return m<=a?g(b):""}};m.copy=function(){return Cf(b.copy(),d,g,a)};return Jd(m,b)}function Ef(b,d,g){function a(d){return b(c(d))}var c=Fc(d),e=Fc(1/d);a.invert=function(d){return e(b.invert(d))};a.domain=function(d){if(!arguments.length)return g;b.domain((g=d.map(Number)).map(c));return a};a.ticks=function(b){return z.range.apply(z,ib(g,b))};a.tickFormat=
function(b,d){return Id(g,b,d)};a.nice=function(b){return a.domain(Bf(g,b))};a.exponent=function(m){if(!arguments.length)return d;c=Fc(d=m);e=Fc(1/d);b.domain(g.map(c));return a};a.copy=function(){return Ef(b.copy(),d,g)};return Jd(a,b)}function Fc(b){return function(d){return 0>d?-Math.pow(-d,b):Math.pow(d,b)}}function Ff(b,d){function g(g){return e[((c.get(g)||("range"===d.t?c.set(g,b.push(g)):NaN))-1)%e.length]}function a(d,g){return z.range(b.length).map(function(b){return d+g*b})}var c,e,f;g.domain=
function(a){if(!arguments.length)return b;b=[];c=new v;for(var e=-1,m=a.length,f;++e<m;)c.has(f=a[e])||c.set(f,b.push(f));return g[d.t].apply(g,d.a)};g.range=function(b){if(!arguments.length)return e;e=b;f=0;d={t:"range",a:arguments};return g};g.rangePoints=function(c,m){2>arguments.length&&(m=0);var x=c[0],O=c[1];O=2>b.length?(x=(x+O)/2,0):(O-x)/(b.length-1+m);e=a(x+O*m/2,O);f=0;d={t:"rangePoints",a:arguments};return g};g.rangeRoundPoints=function(c,m){2>arguments.length&&(m=0);var x=c[0],O=c[1],
C=2>b.length?(x=O=Math.round((x+O)/2),0):(O-x)/(b.length-1+m)|0;e=a(x+Math.round(C*m/2+(O-x-(b.length-1+m)*C)/2),C);f=0;d={t:"rangeRoundPoints",a:arguments};return g};g.rangeBands=function(c,m,x){2>arguments.length&&(m=0);3>arguments.length&&(x=m);var O=c[1]<c[0],C=c[O-0],h=(c[1-O]-C)/(b.length-m+2*x);e=a(C+h*x,h);O&&e.reverse();f=h*(1-m);d={t:"rangeBands",a:arguments};return g};g.rangeRoundBands=function(c,m,x){2>arguments.length&&(m=0);3>arguments.length&&(x=m);var O=c[1]<c[0],C=c[O-0],h=c[1-O],
l=Math.floor((h-C)/(b.length-m+2*x));e=a(C+Math.round((h-C-(b.length-m)*l)/2),l);O&&e.reverse();f=Math.round(l*(1-m));d={t:"rangeRoundBands",a:arguments};return g};g.rangeBand=function(){return f};g.rangeExtent=function(){return Gb(d.a[0])};g.copy=function(){return Ff(b,d)};return g.domain(b)}function Gf(b,d){function g(){var g=0,a=d.length;for(x=[];++g<a;)x[g-1]=z.quantile(b,g/a);return e}function e(b){if(!isNaN(b=+b))return d[z.bisect(x,b)]}var x;e.domain=function(d){if(!arguments.length)return b;
b=d.map(c).filter(f).sort(a);return g()};e.range=function(b){if(!arguments.length)return d;d=b;return g()};e.quantiles=function(){return x};e.invertExtent=function(g){g=d.indexOf(g);return 0>g?[NaN,NaN]:[0<g?x[g-1]:b[0],g<x.length?x[g]:b[b.length-1]]};e.copy=function(){return Gf(b,d)};return g()}function Hf(b,d,g){function a(d){return g[Math.max(0,Math.min(f,Math.floor(e*(d-b))))]}function c(){e=g.length/(d-b);f=g.length-1;return a}var e,f;a.domain=function(g){if(!arguments.length)return[b,d];b=+g[0];
d=+g[g.length-1];return c()};a.range=function(b){if(!arguments.length)return g;g=b;return c()};a.invertExtent=function(d){d=g.indexOf(d);d=0>d?NaN:d/e+b;return[d,d+1/e]};a.copy=function(){return Hf(b,d,g)};return c()}function If(b,d){function g(g){if(g<=g)return d[z.bisect(b,g)]}g.domain=function(d){if(!arguments.length)return b;b=d;return g};g.range=function(b){if(!arguments.length)return d;d=b;return g};g.invertExtent=function(g){g=d.indexOf(g);return[b[g-1],b[g]]};g.copy=function(){return If(b,
d)};return g}function Jf(b){function d(b){return+b}d.invert=d;d.domain=d.range=function(g){if(!arguments.length)return b;b=g.map(d);return d};d.ticks=function(d){return z.range.apply(z,ib(b,d))};d.tickFormat=function(d,a){return Id(b,d,a)};d.copy=function(){return Jf(b)};return d}function Th(){return 0}function Uh(b){return b.innerRadius}function Vh(b){return b.outerRadius}function Kf(b){return b.startAngle}function Lf(b){return b.endAngle}function Wh(b){return b&&b.padAngle}function Gc(b,d,g,a){return 0<
(b-g)*d-(d-a)*b?0:1}function Hc(b,d,g,a,c){var e=b[0]-d[0],m=b[1]-d[1];c=(c?a:-a)/Math.sqrt(e*e+m*m);m*=c;e*=-c;var f=b[0]+m,x=b[1]+e,h=d[0]+m,l=d[1]+e;b=(f+h)/2;d=(x+l)/2;c=h-f;var n=l-x,t=c*c+n*n;a=g-a;l=f*l-h*x;var r=(0>n?-1:1)*Math.sqrt(Math.max(0,a*a*t-l*l));f=(l*n-c*r)/t;x=(-l*c-n*r)/t;h=(l*n+c*r)/t;c=(-l*c+n*r)/t;n=f-b;t=x-d;b=h-b;d=c-d;n*n+t*t>b*b+d*d&&(f=h,x=c);return[[f-m,x-e],[f*g/a,x*g/a]]}function Mf(b){function d(d){function m(){f.push("M",e(b(x),h))}for(var f=[],x=[],O=-1,C=d.length,
l,n=wa(g),t=wa(a);++O<C;)c.call(this,l=d[O],O)?x.push([+n.call(this,l,O),+t.call(this,l,O)]):x.length&&(m(),x=[]);x.length&&m();return f.length?f.join(""):null}var g=Ab,a=Pb,c=Mb,e=Ua,f=e.key,h=.7;d.x=function(b){if(!arguments.length)return g;g=b;return d};d.y=function(b){if(!arguments.length)return a;a=b;return d};d.defined=function(b){if(!arguments.length)return c;c=b;return d};d.interpolate=function(b){if(!arguments.length)return f;f="function"===typeof b?e=b:(e=Kd.get(b)||Ua).key;return d};d.tension=
function(b){if(!arguments.length)return h;h=b;return d};return d}function Ua(b){return 1<b.length?b.join("L"):b+"Z"}function Nf(b){return b.join("L")+"Z"}function Ld(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("V",(a=b[d])[1],"H",a[0]);return c.join("")}function Md(b){for(var d=0,g=b.length,a=b[0],c=[a[0],",",a[1]];++d<g;)c.push("H",(a=b[d])[0],"V",a[1]);return c.join("")}function Ic(b,d){if(1>d.length||b.length!=d.length&&b.length!=d.length+2)return Ua(b);var g=b.length!=d.length,
a="",c=b[0],e=b[1],f=d[0],h=f,l=1;g&&(a+="Q"+(e[0]-2*f[0]/3)+","+(e[1]-2*f[1]/3)+","+e[0]+","+e[1],c=b[1],l=2);if(1<d.length)for(h=d[1],e=b[l],l++,a+="C"+(c[0]+f[0])+","+(c[1]+f[1])+","+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1],c=2;c<d.length;c++,l++)e=b[l],h=d[c],a+="S"+(e[0]-h[0])+","+(e[1]-h[1])+","+e[0]+","+e[1];g&&(b=b[l],a+="Q"+(e[0]+2*h[0]/3)+","+(e[1]+2*h[1]/3)+","+b[0]+","+b[1]);return a}function Nd(b,d){var a=[];d=(1-d)/2;for(var c,e=b[0],f=b[1],h=1,C=b.length;++h<C;)c=e,e=f,f=b[h],
a.push([d*(f[0]-c[0]),d*(f[1]-c[1])]);return a}function Of(b){if(3>b.length)return Ua(b);var d=1,a=b.length,c=b[0],e=c[0],f=c[1],h=[e,e,e,(c=b[1])[0]],C=[f,f,f,c[1]];e=[e,",",f,"L",Ra(jb,h),",",Ra(jb,C)];for(b.push(b[a-1]);++d<=a;)c=b[d],h.shift(),h.push(c[0]),C.shift(),C.push(c[1]),Od(e,h,C);b.pop();e.push("L",c);return e.join("")}function Ra(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]}function Od(b,d,a){b.push("C",Ra(Pf,d),",",Ra(Pf,a),",",Ra(Qf,d),",",Ra(Qf,a),",",Ra(jb,d),",",Ra(jb,a))}
function Pd(b,d){return(d[1]-b[1])/(d[0]-b[0])}function Rf(b){for(var d,a=-1,c=b.length,e,f;++a<c;)d=b[a],e=d[0],f=d[1]-Da,d[0]=e*Math.cos(f),d[1]=e*Math.sin(f);return b}function Sf(b){function d(d){function g(){m.push("M",C(b(O),r),t,n(b(x.reverse()),r),"Z")}for(var m=[],x=[],O=[],l=-1,k=d.length,Y,p=wa(a),y=wa(e),W=a===c?function(){return fa}:wa(c),u=e===f?function(){return q}:wa(f),fa,q;++l<k;)h.call(this,Y=d[l],l)?(x.push([fa=+p.call(this,Y,l),q=+y.call(this,Y,l)]),O.push([+W.call(this,Y,l),+u.call(this,
Y,l)])):x.length&&(g(),x=[],O=[]);x.length&&g();return m.length?m.join(""):null}var a=Ab,c=Ab,e=0,f=Pb,h=Mb,C=Ua,l=C.key,n=C,t="L",r=.7;d.x=function(b){if(!arguments.length)return c;a=c=b;return d};d.x0=function(b){if(!arguments.length)return a;a=b;return d};d.x1=function(b){if(!arguments.length)return c;c=b;return d};d.y=function(b){if(!arguments.length)return f;e=f=b;return d};d.y0=function(b){if(!arguments.length)return e;e=b;return d};d.y1=function(b){if(!arguments.length)return f;f=b;return d};
d.defined=function(b){if(!arguments.length)return h;h=b;return d};d.interpolate=function(b){if(!arguments.length)return l;l="function"===typeof b?C=b:(C=Kd.get(b)||Ua).key;n=C.reverse||C;t=C.closed?"M":"L";return d};d.tension=function(b){if(!arguments.length)return r;r=b;return d};return d}function Xh(b){return b.radius}function Tf(b){return[b.x,b.y]}function Yh(b){return function(){var d=b.apply(this,arguments),a=d[0];d=d[1]-Da;return[a*Math.cos(d),a*Math.sin(d)]}}function Zh(){return 64}function $h(){return"circle"}
function Uf(b){b=Math.sqrt(b/ja);return"M0,"+b+"A"+b+","+b+" 0 1,1 0,"+-b+"A"+b+","+b+" 0 1,1 0,"+b+"Z"}function Vf(b){return function(){var d,a,c;(d=this[b])&&(c=d[a=d.active])&&(c.timer.c=null,c.timer.t=NaN,--d.count?delete d[a]:delete this[b],d.active+=.5,c.event&&c.event.interrupt.call(this,this.__data__,c.index))}}function Xb(b,d,a){Zb(b,Ja);b.namespace=d;b.id=a;return b}function Qd(b,d,a,c){var g=b.id,e=b.namespace;return V(b,"function"===typeof a?function(b,m,f){b[e][g].tween.set(d,c(a.call(b,
b.__data__,m,f)))}:(a=c(a),function(b){b[e][g].tween.set(d,a)}))}function ai(b){null==b&&(b="");return function(){this.textContent=b}}function Rd(b){return null==b?"__transition__":"__transition_"+b+"__"}function Jc(b,d,a,c,e){function g(b){var d=h.delay;k.t=d+r;if(d<=b)return m(b-d);k.c=m}function m(a){var g=x.active,e=x[g];e&&(e.timer.c=null,e.timer.t=NaN,--x.count,delete x[g],e.event&&e.event.interrupt.call(b,b.__data__,e.index));for(var m in x)+m<c&&(g=x[m],g.timer.c=null,g.timer.t=NaN,--x.count,
delete x[m]);k.c=f;fc(function(){k.c&&f(a||1)&&(k.c=null,k.t=NaN);return 1},0,r);x.active=c;h.event&&h.event.start.call(b,b.__data__,d);t=[];h.tween.forEach(function(a,g){(g=g.call(b,b.__data__,d))&&t.push(g)});n=h.ease;l=h.duration}function f(g){g/=l;for(var e=n(g),m=t.length;0<m;)t[--m].call(b,e);if(1<=g)return h.event&&h.event.end.call(b,b.__data__,d),--x.count?delete x[c]:delete b[a],1}var x=b[a]||(b[a]={active:0,count:0}),h=x[c],l,n,t;if(!h){var r=e.time;var k=fc(g,0,r);h=x[c]={tween:new v,time:r,
timer:k,delay:e.delay,duration:e.duration,ease:e.ease,index:d};e=null;++x.count}}function bi(b,d,a){b.attr("transform",function(b){var g=d(b);return"translate("+(isFinite(g)?g:a(b))+",0)"})}function ci(b,d,a){b.attr("transform",function(b){var g=d(b);return"translate(0,"+(isFinite(g)?g:a(b))+")"})}function Sd(b){return b.toISOString()}function Td(b,d,a){function g(d){return b(d)}function c(b,a){var g=(b[1]-b[0])/a,c=z.bisect(Kc,g);return c==Kc.length?[d.year,ib(b.map(function(b){return b/31536E6}),
a)[2]]:c?d[g/Kc[c-1]<Kc[c]/g?c-1:c]:[di,ib(b,a)[2]]}g.invert=function(d){return ub(b.invert(d))};g.domain=function(d){if(!arguments.length)return b.domain().map(ub);b.domain(d);return g};g.nice=function(b,d){function a(a){return!isNaN(a)&&!b.range(a,ub(+a+1),d).length}var e=g.domain(),m=Gb(e);if(m=null==b?c(m,10):"number"===typeof b&&c(m,b))b=m[0],d=m[1];return g.domain(Dc(e,1<d?{floor:function(d){for(;a(d=b.floor(d));)d=ub(d-1);return d},ceil:function(d){for(;a(d=b.ceil(d));)d=ub(+d+1);return d}}:
b))};g.ticks=function(b,d){var a=Gb(g.domain()),e=null==b?c(a,10):"number"===typeof b?c(a,b):!b.range&&[{range:b},d];e&&(b=e[0],d=e[1]);return b.range(a[0],ub(+a[1]+1),1>d?1:d)};g.tickFormat=function(){return a};g.copy=function(){return Td(b.copy(),d,a)};return Jd(g,b)}function ub(b){return new Date(b)}function ei(b){return JSON.parse(b.responseText)}function fi(b){var d=Na.createRange();d.selectNode(Na.body);return d.createContextualFragment(b.responseText)}var z={version:"3.5.17"},Wf=[].slice,Va=
function(b){return Wf.call(b)},Na=this.document;if(Na)try{Va(Na.documentElement.childNodes)[0].nodeType}catch(b){Va=function(b){for(var d=b.length,a=Array(d);d--;)a[d]=b[d];return a}}Date.now||(Date.now=function(){return+new Date});if(Na)try{Na.createElement("DIV").style.setProperty("opacity",0,"")}catch(b){var Lc=this.Element.prototype,gi=Lc.setAttribute,hi=Lc.setAttributeNS,Xf=this.CSSStyleDeclaration.prototype,ii=Xf.setProperty;Lc.setAttribute=function(b,a){gi.call(this,b,a+"")};Lc.setAttributeNS=
function(b,a,c){hi.call(this,b,a,c+"")};Xf.setProperty=function(b,a,c){ii.call(this,b,a+"",c)}}z.ascending=a;z.descending=function(b,d){return d<b?-1:d>b?1:d>=b?0:NaN};z.min=function(b,d){var a=-1,c=b.length,e;if(1===arguments.length){for(;++a<c;)if(null!=(e=b[a])&&e>=e){var f=e;break}for(;++a<c;)null!=(e=b[a])&&f>e&&(f=e)}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&f>e&&(f=e)}return f};z.max=function(b,d){var a=-1,c=b.length,e;if(1===arguments.length){for(;++a<
c;)if(null!=(e=b[a])&&e>=e){var f=e;break}for(;++a<c;)null!=(e=b[a])&&e>f&&(f=e)}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&e>f&&(f=e)}return f};z.extent=function(b,d){var a=-1,c=b.length,e,f;if(1===arguments.length){for(;++a<c;)if(null!=(e=b[a])&&e>=e){var h=f=e;break}for(;++a<c;)null!=(e=b[a])&&(h>e&&(h=e),f<e&&(f=e))}else{for(;++a<c;)if(null!=(e=d.call(b,b[a],a))&&e>=e){h=f=e;break}for(;++a<c;)null!=(e=d.call(b,b[a],a))&&(h>e&&(h=e),
f<e&&(f=e))}return[h,f]};z.sum=function(b,d){var a=0,c=b.length,e,f=-1;if(1===arguments.length)for(;++f<c;)isNaN(e=+b[f])||(a+=e);else for(;++f<c;)isNaN(e=+d.call(b,b[f],f))||(a+=e);return a};z.mean=function(b,d){var a=0,e=b.length,f,h=-1,l=e;if(1===arguments.length)for(;++h<e;)isNaN(f=c(b[h]))?--l:a+=f;else for(;++h<e;)isNaN(f=c(d.call(b,b[h],h)))?--l:a+=f;if(l)return a/l};z.quantile=function(b,d){var a=(b.length-1)*d+1;d=Math.floor(a);var c=+b[d-1];return(a-=d)?c+a*(b[d]-c):c};z.median=function(b,
d){var g=[],e=b.length,f,h=-1;if(1===arguments.length)for(;++h<e;)isNaN(f=c(b[h]))||g.push(f);else for(;++h<e;)isNaN(f=c(d.call(b,b[h],h)))||g.push(f);if(g.length)return z.quantile(g.sort(a),.5)};z.variance=function(b,d){var a=b.length,e=0,f,h=0,l=-1,C=0;if(1===arguments.length)for(;++l<a;){if(!isNaN(f=c(b[l]))){var n=f-e;e+=n/++C;h+=n*(f-e)}}else for(;++l<a;)isNaN(f=c(d.call(b,b[l],l)))||(n=f-e,e+=n/++C,h+=n*(f-e));if(1<C)return h/(C-1)};z.deviation=function(){var b=z.variance.apply(this,arguments);
return b?Math.sqrt(b):b};var Yf=p(a);z.bisectLeft=Yf.left;z.bisect=z.bisectRight=Yf.right;z.bisector=function(b){return p(1===b.length?function(d,g){return a(b(d),g)}:b)};z.shuffle=function(b,d,a){3>(g=arguments.length)&&(a=b.length,2>g&&(d=0));for(var g=a-d,c,e;g;)e=Math.random()*g--|0,c=b[g+d],b[g+d]=b[e+d],b[e+d]=c;return b};z.permute=function(b,d){for(var a=d.length,c=Array(a);a--;)c[a]=b[d[a]];return c};z.pairs=function(b){for(var d=0,a=b.length-1,c=b[0],e=Array(0>a?0:a);d<a;)e[d]=[c,c=b[++d]];
return e};z.transpose=function(b){if(!(f=b.length))return[];for(var d=-1,a=z.min(b,h),c=Array(a);++d<a;)for(var e=-1,f,l=c[d]=Array(f);++e<f;)l[e]=b[e][d];return c};z.zip=function(){return z.transpose(arguments)};z.keys=function(b){var d=[],a;for(a in b)d.push(a);return d};z.values=function(b){var d=[],a;for(a in b)d.push(b[a]);return d};z.entries=function(b){var d=[],a;for(a in b)d.push({key:a,value:b[a]});return d};z.merge=function(b){var d=b.length;var a=-1;for(var c=0,e,f;++a<d;)c+=b[a].length;
for(e=Array(c);0<=--d;)for(f=b[d],a=f.length;0<=--a;)e[--c]=f[a];return e};var la=Math.abs;z.range=function(b,d,a){3>arguments.length&&(a=1,2>arguments.length&&(d=b,b=0));if(Infinity===(d-b)/a)throw Error("infinite range");var g=[];var c=la(a);for(var e=1;c*e%1;)e*=10;c=e;e=-1;var f;b*=c;d*=c;a*=c;if(0>a)for(;(f=b+a*++e)>d;)g.push(f/c);else for(;(f=b+a*++e)<d;)g.push(f/c);return g};z.map=function(b,d){var a=new v;if(b instanceof v)b.forEach(function(b,d){a.set(b,d)});else if(Array.isArray(b)){var c=
-1,e=b.length,f;if(1===arguments.length)for(;++c<e;)a.set(c,b[c]);else for(;++c<e;)a.set(d.call(b,f=b[c],c),f)}else for(c in b)a.set(c,b[c]);return a};q(v,{has:A,get:function(b){return this._[k(b)]},set:function(b,d){return this._[k(b)]=d},remove:E,keys:I,values:function(){var b=[],d;for(d in this._)b.push(this._[d]);return b},entries:function(){var b=[],d;for(d in this._)b.push({key:w(d),value:this._[d]});return b},size:J,empty:G,forEach:function(b){for(var d in this._)b.call(this,w(d),this._[d])}});
z.nest=function(){function b(d,g,e){if(e>=c.length)return h?h.call(a,g):f?g.sort(f):g;for(var m=-1,x=g.length,l=c[e++],C,O,n=new v,t;++m<x;)(t=n.get(C=l(O=g[m])))?t.push(O):n.set(C,[O]);d?(O=d(),g=function(a,g){O.set(a,b(d,g,e))}):(O={},g=function(a,g){O[a]=b(d,g,e)});n.forEach(g);return O}function d(b,a){if(a>=c.length)return b;var g=[],m=e[a++];b.forEach(function(b,c){g.push({key:b,values:d(c,a)})});return m?g.sort(function(b,d){return m(b.key,d.key)}):g}var a={},c=[],e=[],f,h;a.map=function(d,
a){return b(a,d,0)};a.entries=function(a){return d(b(z.map,a,0),0)};a.key=function(b){c.push(b);return a};a.sortKeys=function(b){e[c.length-1]=b;return a};a.sortValues=function(b){f=b;return a};a.rollup=function(b){h=b;return a};return a};z.set=function(b){var d=new D;if(b)for(var a=0,c=b.length;a<c;++a)d.add(b[a]);return d};q(D,{has:A,add:function(b){this._[k(b+="")]=!0;return b},remove:E,values:I,size:J,empty:G,forEach:function(b){for(var d in this._)b.call(this,w(d))}});z.behavior={};z.rebind=
function(b,d){for(var a=1,c=arguments.length,e;++a<c;)b[e=arguments[a]]=P(b,d,d[e]);return b};var de="webkit ms moz Moz o O".split(" ");z.dispatch=function(){for(var b=new u,d=-1,a=arguments.length;++d<a;)b[arguments[d]]=n(b);return b};u.prototype.on=function(b,d){var a=b.indexOf("."),c="";0<=a&&(c=b.slice(a+1),b=b.slice(0,a));if(b)return 2>arguments.length?this[b].on(c):this[b].on(c,d);if(2===arguments.length){if(null==d)for(b in this)if(this.hasOwnProperty(b))this[b].on(c,null);return this}};z.event=
null;z.requote=function(b){return b.replace(ji,"\\$&")};var ji=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Zb={}.__proto__?function(b,d){b.__proto__=d}:function(b,d){for(var a in d)b[a]=d[a]},ad=function(b,d){return d.querySelector(b)},bd=function(b,d){return d.querySelectorAll(b)},$b=function(b,d){var a=b.matches||b[B(b,"matchesSelector")];$b=function(b,d){return a.call(b,d)};return $b(b,d)};"function"===typeof Sizzle&&(ad=function(b,d){return Sizzle(b,d)[0]||null},bd=Sizzle,$b=Sizzle.matchesSelector);z.selection=
function(){return z.select(Na.documentElement)};var sa=z.selection.prototype=[];sa.select=function(b){var d=[],a,c,e,f;b=y(b);for(var h=-1,l=this.length;++h<l;){d.push(a=[]);a.parentNode=(e=this[h]).parentNode;for(var n=-1,t=e.length;++n<t;)(f=e[n])?(a.push(c=b.call(f,f.__data__,n,h)),c&&"__data__"in f&&(c.__data__=f.__data__)):a.push(null)}return F(d)};sa.selectAll=function(b){var d=[],a,c;b=L(b);for(var e=-1,f=this.length;++e<f;)for(var h=this[e],l=-1,n=h.length;++l<n;)if(c=h[l])d.push(a=Va(b.call(c,
c.__data__,l,e))),a.parentNode=c;return F(d)};var Ud={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};z.ns={prefix:Ud,qualify:function(b){var d=b.indexOf(":"),a=b;0<=d&&"xmlns"!==(a=b.slice(0,d))&&(b=b.slice(d+1));return Ud.hasOwnProperty(a)?{space:Ud[a],local:b}:b}};sa.attr=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node();b=z.ns.qualify(b);
return b.local?a.getAttributeNS(b.space,b.local):a.getAttribute(b)}for(d in b)this.each(Q(d,b[d]));return this}return this.each(Q(b,d))};sa.classed=function(b,d){if(2>arguments.length){if("string"===typeof b){var a=this.node(),c=(b=(b+"").trim().split(/^|\s+/)).length,e=-1;if(d=a.classList)for(;++e<c;){if(!d.contains(b[e]))return!1}else for(d=a.getAttribute("class");++e<c;)if(!K(b[e]).test(d))return!1;return!0}for(d in b)this.each(t(d,b[d]));return this}return this.each(t(b,d))};sa.style=function(b,
d,a){var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.each(Z(a,b[a],d));return this}if(2>g)return g=this.node(),e(g).getComputedStyle(g,null).getPropertyValue(b);a=""}return this.each(Z(b,d,a))};sa.property=function(b,d){if(2>arguments.length){if("string"===typeof b)return this.node()[b];for(d in b)this.each(aa(d,b[d]));return this}return this.each(aa(b,d))};sa.text=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,
arguments);this.textContent=null==d?"":d}:null==b?function(){this.textContent=""}:function(){this.textContent=b}):this.node().textContent};sa.html=function(b){return arguments.length?this.each("function"===typeof b?function(){var d=b.apply(this,arguments);this.innerHTML=null==d?"":d}:null==b?function(){this.innerHTML=""}:function(){this.innerHTML=b}):this.node().innerHTML};sa.append=function(b){b=X(b);return this.select(function(){return this.appendChild(b.apply(this,arguments))})};sa.insert=function(b,
d){b=X(b);d=y(d);return this.select(function(){return this.insertBefore(b.apply(this,arguments),d.apply(this,arguments)||null)})};sa.remove=function(){return this.each(T)};sa.data=function(b,d){function a(b,a){var g,c=b.length,e=a.length,f=Math.min(c,e),m=Array(e),h=Array(e),x=Array(c),C,O;if(d){f=new v;var r=Array(c),k;for(g=-1;++g<c;)if(C=b[g])f.has(k=d.call(C,C.__data__,g))?x[g]=C:f.set(k,C),r[g]=k;for(g=-1;++g<e;)(C=f.get(k=d.call(a,O=a[g],g)))?!0!==C&&(m[g]=C,C.__data__=O):h[g]={__data__:O},
f.set(k,!0);for(g=-1;++g<c;)g in r&&!0!==f.get(r[g])&&(x[g]=b[g])}else{for(g=-1;++g<f;)C=b[g],O=a[g],C?(C.__data__=O,m[g]=C):h[g]={__data__:O};for(;g<e;++g)h[g]={__data__:a[g]};for(;g<c;++g)x[g]=b[g]}h.update=m;h.parentNode=m.parentNode=x.parentNode=b.parentNode;l.push(h);n.push(m);t.push(x)}var c=-1,e=this.length,f,h;if(!arguments.length){for(b=Array(e=(f=this[0]).length);++c<e;)if(h=f[c])b[c]=h.__data__;return b}var l=ra([]),n=F([]),t=F([]);if("function"===typeof b)for(;++c<e;)a(f=this[c],b.call(f,
f.parentNode.__data__,c));else for(;++c<e;)a(f=this[c],b);n.enter=function(){return l};n.exit=function(){return t};return n};sa.datum=function(b){return arguments.length?this.property("__data__",b):this.property("__data__")};sa.filter=function(b){var d=[],a,c,e;"function"!==typeof b&&(b=r(b));for(var f=0,h=this.length;f<h;f++){d.push(a=[]);a.parentNode=(c=this[f]).parentNode;for(var l=0,n=c.length;l<n;l++)(e=c[l])&&b.call(e,e.__data__,l,f)&&a.push(e)}return F(d)};sa.order=function(){for(var b=-1,
d=this.length;++b<d;)for(var a=this[b],c=a.length-1,e=a[c],f;0<=--c;)if(f=a[c])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};sa.sort=function(b){b=U.apply(this,arguments);for(var d=-1,a=this.length;++d<a;)this[d].sort(b);return this.order()};sa.each=function(b){return V(this,function(d,a,c){b.call(d,d.__data__,a,c)})};sa.call=function(b){var d=Va(arguments);b.apply(d[0]=this,d);return this};sa.empty=function(){return!this.node()};sa.node=function(){for(var b=0,d=this.length;b<
d;b++)for(var a=this[b],c=0,e=a.length;c<e;c++){var f=a[c];if(f)return f}return null};sa.size=function(){var b=0;V(this,function(){++b});return b};var Ya=[];z.selection.enter=ra;z.selection.enter.prototype=Ya;Ya.append=sa.append;Ya.empty=sa.empty;Ya.node=sa.node;Ya.call=sa.call;Ya.size=sa.size;Ya.select=function(b){for(var d=[],a,c,e,f,h,l=-1,n=this.length;++l<n;){e=(f=this[l]).update;d.push(a=[]);a.parentNode=f.parentNode;for(var t=-1,r=f.length;++t<r;)(h=f[t])?(a.push(e[t]=c=b.call(f.parentNode,
h.__data__,t,l)),c.__data__=h.__data__):a.push(null)}return F(d)};Ya.insert=function(b,d){2>arguments.length&&(d=Fa(this));return sa.insert.call(this,b,d)};z.select=function(b){if("string"===typeof b){var d=[ad(b,Na)];d.parentNode=Na.documentElement}else d=[b],d.parentNode=b&&(b.ownerDocument||b.document||b).documentElement;return F([d])};z.selectAll=function(b){"string"===typeof b?(b=Va(bd(b,Na)),b.parentNode=Na.documentElement):(b=Va(b),b.parentNode=null);return F([b])};sa.on=function(b,d,a){var g=
arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d=!1);for(a in b)this.each(ca(a,b[a],d));return this}if(2>g)return(g=this.node()["__on"+b])&&g._;a=!1}return this.each(ca(b,d,a))};var cd=z.map({mouseenter:"mouseover",mouseleave:"mouseout"});Na&&cd.forEach(function(b){"on"+b in Na&&cd.remove(b)});var kb,qg=0;z.mouse=function(b){return za(b,R())};var dd=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;z.touch=function(b,d,a){3>arguments.length&&(a=d,d=R().changedTouches);if(d)for(var g=
0,c=d.length,e;g<c;++g)if((e=d[g]).identifier===a)return za(b,e)};z.behavior.drag=function(){function b(){this.on("mousedown.drag",f).on("touchstart.drag",h)}function d(b,d,g,e,f){return function(){var m=z.event.target.correspondingElement||z.event.target,h=this.parentNode,l=a.of(this,arguments),x=0,n=b(),C=".drag"+(null==n?"":"-"+n),O=z.select(g(m)).on(e+C,function(){var b=d(h,n);if(b){var a=b[0]-r[0];var g=b[1]-r[1];x|=a|g;r=b;l({type:"drag",x:b[0]+k[0],y:b[1]+k[1],dx:a,dy:g})}}).on(f+C,function(){d(h,
n)&&(O.on(e+C,null).on(f+C,null),t(x),l({type:"dragend"}))}),t=ya(m),r=d(h,n);if(c){var k=c.apply(this,arguments);k=[k.x-r[0],k.y-r[1]]}else k=[0,0];l({type:"dragstart"})}}var a=N(b,"drag","dragstart","dragend"),c=null,f=d(M,z.mouse,e,"mousemove","mouseup"),h=d(ia,z.touch,H,"touchmove","touchend");b.origin=function(d){if(!arguments.length)return c;c=d;return b};return z.rebind(b,a,"on")};z.touches=function(b,d){2>arguments.length&&(d=R().touches);return d?Va(d).map(function(d){var a=za(b,d);a.identifier=
d.identifier;return a}):[]};var ja=Math.PI,Qa=2*ja,ki=Qa-1E-6,Da=ja/2,ka=ja/180,Ca=180/ja,Yb=Math.SQRT2;z.interpolateZoom=function(b,d){var a=b[0],c=b[1],e=b[2];b=d[2];var f=d[0]-a,h=d[1]-c,l=f*f+h*h;if(1E-12>l){var n=Math.log(b/e)/Yb;b=function(b){return[a+b*f,c+b*h,e*Math.exp(Yb*b*n)]}}else{var t=Math.sqrt(l);d=(b*b-e*e+4*l)/(4*e*t);b=(b*b-e*e-4*l)/(4*b*t);var r=Math.log(Math.sqrt(d*d+1)-d);n=(Math.log(Math.sqrt(b*b+1)-b)-r)/Yb;b=function(b){b*=n;var d=xa(r),g=Yb*b+r;var m=((g=Math.exp(2*g))-1)/
(g+1);var l=r;g=((l=Math.exp(l))-1/l)/2;m=e/(2*t)*(d*m-g);return[a+m*f,c+m*h,e*d/xa(Yb*b+r)]}}b.duration=1E3*n;return b};z.behavior.zoom=function(){function b(b){b.on("mousedown.zoom",r).on(Vd+".zoom",p).on("dblclick.zoom",y).on("touchstart.zoom",k)}function d(b){return[(b[0]-u.x)/u.k,(b[1]-u.y)/u.k]}function a(b){u.k=Math.max(F[0],Math.min(F[1],b))}function c(b,d){d=[d[0]*u.k+u.x,d[1]*u.k+u.y];u.x+=b[0]-d[0];u.y+=b[1]-d[1]}function f(d,g,e,f){d.__chart__={x:u.x,y:u.y,k:u.k};a(Math.pow(2,f));c(K=
g,e);d=z.select(d);0<T&&(d=d.transition().duration(T));d.call(b.event)}function h(){U&&U.domain(Q.range().map(function(b){return(b-u.x)/u.k}).map(Q.invert));M&&M.domain(Z.range().map(function(b){return(b-u.y)/u.k}).map(Z.invert))}function l(b){L++||b({type:"zoomstart"})}function n(b){h();b({type:"zoom",scale:u.k,translate:[u.x,u.y]})}function t(b){--L||(b({type:"zoomend"}),K=null)}function r(){var b=this,a=V.of(b,arguments),g=0,f=z.select(e(b)).on("mousemove.zoom",function(){g=1;c(z.mouse(b),m);n(a)}).on("mouseup.zoom",
function(){f.on("mousemove.zoom",null).on("mouseup.zoom",null);h(g);t(a)}),m=d(z.mouse(b)),h=ya(b);Mc.call(b);l(a)}function k(){function b(){var b=z.touches(h);p=u.k;b.forEach(function(b){b.identifier in C&&(C[b.identifier]=d(b))});return b}function g(){var d=z.event.target;z.select(d).on(q,e).on(Y,m);K.push(d);d=z.event.changedTouches;for(var a=0,g=d.length;a<g;++a)C[d[a].identifier]=null;a=b();g=Date.now();1===a.length?(500>g-w&&(d=a[0],f(h,d,C[d.identifier],Math.floor(Math.log(u.k)/Math.LN2)+1),
S()),w=g):1<a.length&&(d=a[0],g=a[1],a=d[0]-g[0],d=d[1]-g[1],O=a*a+d*d)}function e(){var b=z.touches(h),d;Mc.call(h);for(var g=0,e=b.length;g<e;++g,d=null){var f=b[g];if(d=C[f.identifier]){if(l)break;var m=f;var l=d}}if(d){var t=(t=f[0]-m[0])*t+(t=f[1]-m[1])*t;b=O&&Math.sqrt(t/O);m=[(m[0]+f[0])/2,(m[1]+f[1])/2];l=[(l[0]+d[0])/2,(l[1]+d[1])/2];a(b*p)}w=null;c(m,l);n(x)}function m(){if(z.event.touches.length){for(var d=z.event.changedTouches,a=0,g=d.length;a<g;++a)delete C[d[a].identifier];for(var c in C)return void b()}z.selectAll(K).on(y,
null);B.on("mousedown.zoom",r).on("touchstart.zoom",k);v();t(x)}var h=this,x=V.of(h,arguments),C={},O=0,p,y=".zoom-"+z.event.changedTouches[0].identifier,q="touchmove"+y,Y="touchend"+y,K=[],B=z.select(h),v=ya(h);g();l(x);B.on("mousedown.zoom",null).on("touchstart.zoom",g)}function p(){var b=V.of(this,arguments);ca?clearTimeout(ca):(Mc.call(this),q=d(K=B||z.mouse(this)),l(b));ca=setTimeout(function(){ca=null;t(b)},50);S();a(Math.pow(2,.002*Nc())*u.k);c(K,q);n(b)}function y(){var b=z.mouse(this),a=
Math.log(u.k)/Math.LN2;f(this,b,d(b),z.event.shiftKey?Math.ceil(a)-1:Math.floor(a)+1)}var u={x:0,y:0,k:1},q,K,B,v=[960,500],F=Zf,T=250,L=0,ca,w,V=N(b,"zoomstart","zoom","zoomend"),Q,U,Z,M;Vd||(Vd="onwheel"in Na?(Nc=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Na?(Nc=function(){return z.event.wheelDelta},"mousewheel"):(Nc=function(){return-z.event.detail},"MozMousePixelScroll"));b.event=function(b){b.each(function(){var b=V.of(this,arguments),d=u;vb?z.select(this).transition().each("start.zoom",
function(){u=this.__chart__||{x:0,y:0,k:1};l(b)}).tween("zoom:zoom",function(){var a=v[0],g=v[1],c=K?K[0]:a/2,e=K?K[1]:g/2,f=z.interpolateZoom([(c-u.x)/u.k,(e-u.y)/u.k,a/u.k],[(c-d.x)/d.k,(e-d.y)/d.k,a/d.k]);return function(d){d=f(d);var g=a/d[2];this.__chart__=u={x:c-d[0]*g,y:e-d[1]*g,k:g};n(b)}}).each("interrupt.zoom",function(){t(b)}).each("end.zoom",function(){t(b)}):(this.__chart__=u,l(b),n(b),t(b))})};b.translate=function(d){if(!arguments.length)return[u.x,u.y];u={x:+d[0],y:+d[1],k:u.k};h();
return b};b.scale=function(d){if(!arguments.length)return u.k;u={x:u.x,y:u.y,k:null};a(+d);h();return b};b.scaleExtent=function(d){if(!arguments.length)return F;F=null==d?Zf:[+d[0],+d[1]];return b};b.center=function(d){if(!arguments.length)return B;B=d&&[+d[0],+d[1]];return b};b.size=function(d){if(!arguments.length)return v;v=d&&[+d[0],+d[1]];return b};b.duration=function(d){if(!arguments.length)return T;T=+d;return b};b.x=function(d){if(!arguments.length)return U;U=d;Q=d.copy();u={x:0,y:0,k:1};
return b};b.y=function(d){if(!arguments.length)return M;M=d;Z=d.copy();u={x:0,y:0,k:1};return b};return z.rebind(b,V,"on")};var Zf=[0,Infinity],Nc,Vd;z.color=ta;ta.prototype.toString=function(){return this.rgb()+""};z.hsl=Ka;var Wd=Ka.prototype=new ta;Wd.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ka(this.h,this.s,this.l/b)};Wd.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new Ka(this.h,this.s,b*this.l)};Wd.rgb=function(){return ua(this.h,this.s,this.l)};z.hcl=
pa;var Xd=pa.prototype=new ta;Xd.brighter=function(b){return new pa(this.h,this.c,Math.min(100,this.l+Oc*(arguments.length?b:1)))};Xd.darker=function(b){return new pa(this.h,this.c,Math.max(0,this.l-Oc*(arguments.length?b:1)))};Xd.rgb=function(){return Ia(this.h,this.c,this.l).rgb()};z.lab=qa;var Oc=18,ee=.95047,fe=1,ge=1.08883,Yd=qa.prototype=new ta;Yd.brighter=function(b){return new qa(Math.min(100,this.l+Oc*(arguments.length?b:1)),this.a,this.b)};Yd.darker=function(b){return new qa(Math.max(0,
this.l-Oc*(arguments.length?b:1)),this.a,this.b)};Yd.rgb=function(){return Ba(this.l,this.a,this.b)};z.rgb=La;var Pc=La.prototype=new ta;Pc.brighter=function(b){b=Math.pow(.7,arguments.length?b:1);var d=this.r,a=this.g,c=this.b;if(!d&&!a&&!c)return new La(30,30,30);d&&30>d&&(d=30);a&&30>a&&(a=30);c&&30>c&&(c=30);return new La(Math.min(255,d/b),Math.min(255,a/b),Math.min(255,c/b))};Pc.darker=function(b){b=Math.pow(.7,arguments.length?b:1);return new La(b*this.r,b*this.g,b*this.b)};Pc.hsl=function(){return cc(this.r,
this.g,this.b)};Pc.toString=function(){return"#"+cb(this.r)+cb(this.g)+cb(this.b)};var ec=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,
darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,
gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,
lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,
orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,
slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ec.forEach(function(b,d){ec.set(b,new La(d>>16,d>>8&255,d&255))});z.functor=wa;z.xhr=fd(H);z.dsv=function(b,d){function a(b,a,g){3>arguments.length&&(g=a,a=null);var f=Jb(b,d,null==a?c:e(a),g);f.row=function(b){return arguments.length?f.response(null==(a=
b)?c:e(b)):a};return f}function c(b){return a.parse(b.responseText)}function e(b){return function(d){return a.parse(d.responseText,b)}}function f(d){return d.map(h).join(b)}function h(b){return l.test(b)?'"'+b.replace(/"/g,'""')+'"':b}var l=new RegExp('["'+b+"\n]"),n=b.charCodeAt(0);a.parse=function(b,d){var g;return a.parseRows(b,function(b,a){if(g)return g(b,a-1);var c=new Function("d","return {"+b.map(function(b,d){return JSON.stringify(b)+": d["+d+"]"}).join(",")+"}");g=d?function(b,a){return d(c(b),
a)}:c})};a.parseRows=function(b,d){function a(){if(m>=f)return c;if(x)return x=!1,g;var d=m;if(34===b.charCodeAt(d)){for(var a=d;a++<f;)if(34===b.charCodeAt(a)){if(34!==b.charCodeAt(a+1))break;++a}m=a+2;var e=b.charCodeAt(a+1);13===e?(x=!0,10===b.charCodeAt(a+2)&&++m):10===e&&(x=!0);return b.slice(d+1,a).replace(/""/g,'"')}for(;m<f;){e=b.charCodeAt(m++);a=1;if(10===e)x=!0;else if(13===e)x=!0,10===b.charCodeAt(m)&&(++m,++a);else if(e!==n)continue;return b.slice(d,m-a)}return b.slice(d)}for(var g={},
c={},e=[],f=b.length,m=0,h=0,l,x;(l=a())!==c;){for(var C=[];l!==g&&l!==c;)C.push(l),l=a();d&&null==(C=d(C,h++))||e.push(C)}return e};a.format=function(d){if(Array.isArray(d[0]))return a.formatRows(d);var g=new D,c=[];d.forEach(function(b){for(var d in b)g.has(d)||c.push(g.add(d))});return[c.map(h).join(b)].concat(d.map(function(d){return c.map(function(b){return h(d[b])}).join(b)})).join("\n")};a.formatRows=function(b){return b.map(f).join("\n")};return a};z.csv=z.dsv(",","text/csv");z.tsv=z.dsv("\t",
"text/tab-separated-values");var hc,gc,ic,jc,he=this[B(this,"requestAnimationFrame")]||function(b){setTimeout(b,17)};z.timer=function(){fc.apply(this,arguments)};z.timer.flush=function(){ie();je()};z.round=function(b,d){return d?Math.round(b*(d=Math.pow(10,d)))/d:Math.round(b)};var li="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(b,d){var a=Math.pow(10,3*la(8-d));return{scale:8<d?function(b){return b/a}:function(b){return b*a},symbol:b}});z.formatPrefix=function(b,d){var a=0;if(b=
+b)0>b&&(b*=-1),d&&(b=z.round(b,gd(b,d))),a=1+Math.floor(1E-12+Math.log(b)/Math.LN10),a=Math.max(-24,Math.min(24,3*Math.floor((a-1)/3)));return li[8+a/3]};var ke=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,tg=z.map({b:function(b){return b.toString(2)},c:function(b){return String.fromCharCode(b)},o:function(b){return b.toString(8)},x:function(b){return b.toString(16)},X:function(b){return b.toString(16).toUpperCase()},g:function(b,d){return b.toPrecision(d)},e:function(b,
d){return b.toExponential(d)},f:function(b,d){return b.toFixed(d)},r:function(b,d){return(b=z.round(b,gd(b,d))).toFixed(Math.max(0,Math.min(20,gd(b*(1+1E-15),d))))}}),ba=z.time={},Ma=Date;Za.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},
getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){bb.setUTCDate.apply(this._,arguments)},setDay:function(){bb.setUTCDay.apply(this._,arguments)},setFullYear:function(){bb.setUTCFullYear.apply(this._,arguments)},setHours:function(){bb.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){bb.setUTCMilliseconds.apply(this._,
arguments)},setMinutes:function(){bb.setUTCMinutes.apply(this._,arguments)},setMonth:function(){bb.setUTCMonth.apply(this._,arguments)},setSeconds:function(){bb.setUTCSeconds.apply(this._,arguments)},setTime:function(){bb.setTime.apply(this._,arguments)}};var bb=Date.prototype;ba.year=mb(function(b){b=ba.day(b);b.setMonth(0,1);return b},function(b,d){b.setFullYear(b.getFullYear()+d)},function(b){return b.getFullYear()});ba.years=ba.year.range;ba.years.utc=ba.year.utc.range;ba.day=mb(function(b){var d=
new Ma(2E3,0);d.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());return d},function(b,d){b.setDate(b.getDate()+d)},function(b){return b.getDate()-1});ba.days=ba.day.range;ba.days.utc=ba.day.utc.range;ba.dayOfYear=function(b){var d=ba.year(b);return Math.floor((b-d-6E4*(b.getTimezoneOffset()-d.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(b,d){d=7-d;var a=ba[b]=mb(function(b){(b=ba.day(b)).setDate(b.getDate()-(b.getDay()+d)%
7);return b},function(b,d){b.setDate(b.getDate()+7*Math.floor(d))},function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+(a+d)%7)/7)-(a!==d)});ba[b+"s"]=a.range;ba[b+"s"].utc=a.utc.range;ba[b+"OfYear"]=function(b){var a=ba.year(b).getDay();return Math.floor((ba.dayOfYear(b)+(a+d)%7)/7)}});ba.week=ba.sunday;ba.weeks=ba.sunday.range;ba.weeks.utc=ba.sunday.utc.range;ba.weekOfYear=ba.sundayOfYear;var le={"-":"",_:" ",0:"0"},Ea=/^\s*\d+/,oe=/^%/;z.locale=function(b){return{numberFormat:sg(b),
timeFormat:vg(b)}};var $f=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});z.format=$f.numberFormat;
z.geo={};hd.prototype={s:0,t:0,add:function(b){pe(b,this.t,Qc);pe(Qc.s,this.s,this);this.s?this.t+=Qc.t:this.s=Qc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Qc=new hd;z.geo.stream=function(b,d){if(b&&ag.hasOwnProperty(b.type))ag[b.type](b,d);else pc(b,d)};var ag={Feature:function(b,d){pc(b.geometry,d)},FeatureCollection:function(b,d){b=b.features;for(var a=-1,c=b.length;++a<c;)pc(b[a].geometry,d)}},qe={Sphere:function(b,d){d.sphere()},Point:function(b,d){b=b.coordinates;
d.point(b[0],b[1],b[2])},MultiPoint:function(b,d){for(var a=b.coordinates,c=-1,e=a.length;++c<e;)b=a[c],d.point(b[0],b[1],b[2])},LineString:function(b,d){id(b.coordinates,d,0)},MultiLineString:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)id(b[a],d,0)},Polygon:function(b,d){re(b.coordinates,d)},MultiPolygon:function(b,d){b=b.coordinates;for(var a=-1,c=b.length;++a<c;)re(b[a],d)},GeometryCollection:function(b,d){b=b.geometries;for(var a=-1,c=b.length;++a<c;)pc(b[a],d)}};z.geo.area=function(b){Rc=
0;z.geo.stream(b,Pa);return Rc};var Rc,nb=new hd,Pa={sphere:function(){Rc+=4*ja},point:M,lineStart:M,lineEnd:M,polygonStart:function(){nb.reset();Pa.lineStart=Kg},polygonEnd:function(){var b=2*nb;Rc+=0>b?4*ja+b:b;Pa.lineStart=Pa.lineEnd=Pa.point=M}};z.geo.bounds=function(){function b(b,d){N.push(F=[r=b,u=b]);d<k&&(k=d);d>p&&(p=d)}function d(d,a){var c=ob([d*ka,a*ka]);if(B){var g=xb(B,c);g=xb([g[1],-g[0],0],g);sc(g);g=tc(g);var e=d-y,f=0<e?1:-1,m=g[0]*Ca*f;e=180<la(e);e^(f*y<m&&m<f*d)?(a=g[1]*Ca,a>
p&&(p=a)):(m=(m+360)%360-180,e^(f*y<m&&m<f*d))?(a=-g[1]*Ca,a<k&&(k=a)):(a<k&&(k=a),a>p&&(p=a));e?d<y?l(r,d)>l(r,u)&&(u=d):l(d,u)>l(r,u)&&(r=d):u>=r?(d<r&&(r=d),d>u&&(u=d)):d>y?l(r,d)>l(r,u)&&(u=d):l(d,u)>l(r,u)&&(r=d)}else b(d,a);B=c;y=d}function a(){T.point=d}function c(){F[0]=r;F[1]=u;T.point=b;B=null}function e(b,a){if(B){var c=b-y;v+=180<la(c)?c+(0<c?360:-360):c}else q=b,K=a;Pa.point(b,a);d(b,a)}function f(){Pa.lineStart()}function h(){e(q,K);Pa.lineEnd();1E-6<la(v)&&(r=-(u=180));F[0]=r;F[1]=
u;B=null}function l(b,d){return 0>(d-=b)?d+360:d}function n(b,d){return b[0]-d[0]}function t(b,d){return d[0]<=d[1]?d[0]<=b&&b<=d[1]:b<d[0]||d[1]<b}var r,k,u,p,y,q,K,B,v,N,F,T={point:b,lineStart:a,lineEnd:c,polygonStart:function(){T.point=e;T.lineStart=f;T.lineEnd=h;v=0;Pa.polygonStart()},polygonEnd:function(){Pa.polygonEnd();T.point=b;T.lineStart=a;T.lineEnd=c;0>nb?(r=-(u=180),k=-(p=90)):1E-6<v?p=90:-1E-6>v&&(k=-90);F[0]=r;F[1]=u}};return function(b){p=u=-(r=k=Infinity);N=[];z.geo.stream(b,T);if(b=
N.length){N.sort(n);for(var d=1,a=N[0],c,g=[a];d<b;++d)c=N[d],t(c[0],a)||t(c[1],a)?(l(a[0],c[1])>l(a[0],a[1])&&(a[1]=c[1]),l(c[0],a[1])>l(a[0],a[1])&&(a[0]=c[0])):g.push(a=c);var e=-Infinity,f;b=g.length-1;d=0;for(a=g[b];d<=b;a=c,++d)c=g[d],(f=l(a[1],c[0]))>e&&(e=f,r=c[0],u=a[1])}N=F=null;return Infinity===r||Infinity===k?[[NaN,NaN],[NaN,NaN]]:[[r,k],[u,p]]}}();z.geo.centroid=function(b){Lb=vc=pb=qb=$a=db=eb=Wa=yb=zb=fb=0;z.geo.stream(b,Sa);b=yb;var d=zb,a=fb,c=b*b+d*d+a*a;return 1E-12>c&&(b=db,d=
eb,a=Wa,1E-6>vc&&(b=pb,d=qb,a=$a),c=b*b+d*d+a*a,1E-12>c)?[NaN,NaN]:[Math.atan2(d,b)*Ca,Aa(a/Math.sqrt(c))*Ca]};var Lb,vc,pb,qb,$a,db,eb,Wa,yb,zb,fb,Sa={sphere:M,point:kd,lineStart:se,lineEnd:te,polygonStart:function(){Sa.lineStart=Lg},polygonEnd:function(){Sa.lineStart=se}},Je=xe(Mb,function(b){var d=NaN,a=NaN,c=NaN,e;return{lineStart:function(){b.lineStart();e=1},point:function(g,f){var m=0<g?ja:-ja,h=la(g-d);if(1E-6>la(h-ja))b.point(d,a=0<(a+f)/2?Da:-Da),b.point(c,a),b.lineEnd(),b.lineStart(),b.point(m,
a),b.point(g,a),e=0;else if(c!==m&&h>=ja){1E-6>la(d-c)&&(d-=1E-6*c);1E-6>la(g-m)&&(g-=1E-6*m);h=d;var l=a,x=g,n,t,r=Math.sin(h-x);a=1E-6<la(r)?Math.atan((Math.sin(l)*(t=Math.cos(f))*Math.sin(x)-Math.sin(f)*(n=Math.cos(l))*Math.sin(h))/(n*t*r)):(l+f)/2;b.point(c,a);b.lineEnd();b.lineStart();b.point(m,a);e=0}b.point(d=g,a=f);c=m},lineEnd:function(){b.lineEnd();d=a=NaN},clean:function(){return 2-e}}},function(b,d,a,c){null==b?(a*=Da,c.point(-ja,a),c.point(0,a),c.point(ja,a),c.point(ja,0),c.point(ja,
-a),c.point(0,-a),c.point(-ja,-a),c.point(-ja,0),c.point(-ja,a)):1E-6<la(b[0]-d[0])?(b=b[0]<d[0]?ja:-ja,a=a*b/2,c.point(-b,a),c.point(0,a),c.point(b,a)):c.point(d[0],d[1])},[-ja,-ja/2]);z.geo.clipExtent=function(){var b,d,a,c,e,f,h={stream:function(b){e&&(e.valid=!1);e=f(b);e.valid=!0;return e},extent:function(g){if(!arguments.length)return[[b,d],[a,c]];f=Ae(b=+g[0][0],d=+g[0][1],a=+g[1][0],c=+g[1][1]);e&&(e.valid=!1,e=null);return h}};return h.extent([[0,0],[960,500]])};(z.geo.conicEqualArea=function(){return md(Be)}).raw=
Be;z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};z.geo.albersUsa=function(){function b(b){var d=b[0];b=b[1];e=null;(h(d,b),e)||(l(d,b),e)||n(d,b);return e}var d=z.geo.albers(),a=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(b,d){e=[b,d]}},h,l,n;b.invert=function(b){var g=d.scale(),e=d.translate(),
f=(b[0]-e[0])/g;g=(b[1]-e[1])/g;return(.12<=g&&.234>g&&-.425<=f&&-.214>f?a:.166<=g&&.234>g&&-.214<=f&&-.115>f?c:d).invert(b)};b.stream=function(b){var g=d.stream(b),e=a.stream(b),f=c.stream(b);return{point:function(b,d){g.point(b,d);e.point(b,d);f.point(b,d)},sphere:function(){g.sphere();e.sphere();f.sphere()},lineStart:function(){g.lineStart();e.lineStart();f.lineStart()},lineEnd:function(){g.lineEnd();e.lineEnd();f.lineEnd()},polygonStart:function(){g.polygonStart();e.polygonStart();f.polygonStart()},
polygonEnd:function(){g.polygonEnd();e.polygonEnd();f.polygonEnd()}}};b.precision=function(g){if(!arguments.length)return d.precision();d.precision(g);a.precision(g);c.precision(g);return b};b.scale=function(g){if(!arguments.length)return d.scale();d.scale(g);a.scale(.35*g);c.scale(g);return b.translate(d.translate())};b.translate=function(g){if(!arguments.length)return d.translate();var e=d.scale(),m=+g[0],x=+g[1];h=d.translate(g).clipExtent([[m-.455*e,x-.238*e],[m+.455*e,x+.238*e]]).stream(f).point;
l=a.translate([m-.307*e,x+.201*e]).clipExtent([[m-.425*e+1E-6,x+.12*e+1E-6],[m-.214*e-1E-6,x+.234*e-1E-6]]).stream(f).point;n=c.translate([m-.205*e,x+.212*e]).clipExtent([[m-.214*e+1E-6,x+.166*e+1E-6],[m-.115*e-1E-6,x+.234*e-1E-6]]).stream(f).point;return b};return b.scale(1070)};var Zd,od,gb={point:M,lineStart:M,lineEnd:M,polygonStart:function(){od=0;gb.lineStart=Pg},polygonEnd:function(){gb.lineStart=gb.lineEnd=gb.point=M;Zd+=la(od/2)}},Sc,Tc,Uc,Vc,mi={point:function(b,d){b<Sc&&(Sc=b);b>Uc&&(Uc=
b);d<Tc&&(Tc=d);d>Vc&&(Vc=d)},lineStart:M,lineEnd:M,polygonStart:M,polygonEnd:M},Ta={point:rb,lineStart:De,lineEnd:Ee,polygonStart:function(){Ta.lineStart=Rg},polygonEnd:function(){Ta.point=rb;Ta.lineStart=De;Ta.lineEnd=Ee}};z.geo.path=function(){function b(b){b&&("function"===typeof a&&h.pointRadius(+a.apply(this,arguments)),l&&l.valid||(l=f(h)),z.geo.stream(b,l));return h.result()}function d(){l=null;return b}var a=4.5,c,e,f,h,l;b.area=function(b){Zd=0;z.geo.stream(b,f(gb));return Zd};b.centroid=
function(b){pb=qb=$a=db=eb=Wa=yb=zb=fb=0;z.geo.stream(b,f(Ta));return fb?[yb/fb,zb/fb]:Wa?[db/Wa,eb/Wa]:$a?[pb/$a,qb/$a]:[NaN,NaN]};b.bounds=function(b){Uc=Vc=-(Sc=Tc=Infinity);z.geo.stream(b,f(mi));return[[Sc,Tc],[Uc,Vc]]};b.projection=function(b){if(!arguments.length)return c;f=(c=b)?b.stream||Tg(b):H;return d()};b.context=function(b){if(!arguments.length)return e;h=null==(e=b)?new Qg:new Sg(b);"function"!==typeof a&&h.pointRadius(a);return d()};b.pointRadius=function(d){if(!arguments.length)return a;
a="function"===typeof d?d:(h.pointRadius(+d),+d);return b};return b.projection(z.geo.albersUsa()).context(null)};z.geo.transform=function(b){return{stream:function(d){d=new Ie(d);for(var a in b)d[a]=b[a];return d}}};Ie.prototype={point:function(b,d){this.stream.point(b,d)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
z.geo.projection=hb;z.geo.projectionMutator=nd;(z.geo.equirectangular=function(){return hb(Nb)}).raw=Nb.invert=Nb;z.geo.rotation=function(b){function d(d){d=b(d[0]*ka,d[1]*ka);return d[0]*=Ca,d[1]*=Ca,d}b=pd(b[0]%360*ka,b[1]*ka,2<b.length?b[2]*ka:0);d.invert=function(d){d=b.invert(d[0]*ka,d[1]*ka);return d[0]*=Ca,d[1]*=Ca,d};return d};Ke.invert=Nb;z.geo.circle=function(){function b(){var b="function"===typeof d?d.apply(this,arguments):d,a=pd(-b[0]*ka,-b[1]*ka,0).invert,c=[];e(null,null,1,{point:function(b,
d){c.push(b=a(b,d));b[0]*=Ca;b[1]*=Ca}});return{type:"Polygon",coordinates:[c]}}var d=[0,0],a,c=6,e;b.origin=function(a){if(!arguments.length)return d;d=a;return b};b.angle=function(d){if(!arguments.length)return a;e=ld((a=+d)*ka,c*ka);return b};b.precision=function(d){if(!arguments.length)return c;e=ld(a*ka,(c=+d)*ka);return b};return b.angle(90)};z.geo.distance=function(b,d){var a=(d[0]-b[0])*ka,c=b[1]*ka,e=d[1]*ka;d=Math.cos(a);b=Math.sin(c);c=Math.cos(c);var f=Math.sin(e);e=Math.cos(e);var h;
return Math.atan2(Math.sqrt((h=e*Math.sin(a))*h+(h=c*f-b*e*d)*h),b*f+c*e*d)};z.geo.graticule=function(){function b(){return{type:"MultiLineString",coordinates:d()}}function d(){return z.range(Math.ceil(f/u)*u,e,u).map(K).concat(z.range(Math.ceil(t/p)*p,n,p).map(B)).concat(z.range(Math.ceil(c/r)*r,a,r).filter(function(b){return 1E-6<la(b%u)}).map(y)).concat(z.range(Math.ceil(l/k)*k,h,k).filter(function(b){return 1E-6<la(b%p)}).map(q))}var a,c,e,f,h,l,n,t,r=10,k=r,u=90,p=360,y,q,K,B,v=2.5;b.lines=function(){return d().map(function(b){return{type:"LineString",
coordinates:b}})};b.outline=function(){return{type:"Polygon",coordinates:[K(f).concat(B(n).slice(1),K(e).reverse().slice(1),B(t).reverse().slice(1))]}};b.extent=function(d){return arguments.length?b.majorExtent(d).minorExtent(d):b.minorExtent()};b.majorExtent=function(d){if(!arguments.length)return[[f,t],[e,n]];f=+d[0][0];e=+d[1][0];t=+d[0][1];n=+d[1][1];f>e&&(d=f,f=e,e=d);t>n&&(d=t,t=n,n=d);return b.precision(v)};b.minorExtent=function(d){if(!arguments.length)return[[c,l],[a,h]];c=+d[0][0];a=+d[1][0];
l=+d[0][1];h=+d[1][1];c>a&&(d=c,c=a,a=d);l>h&&(d=l,l=h,h=d);return b.precision(v)};b.step=function(d){return arguments.length?b.majorStep(d).minorStep(d):b.minorStep()};b.majorStep=function(d){if(!arguments.length)return[u,p];u=+d[0];p=+d[1];return b};b.minorStep=function(d){if(!arguments.length)return[r,k];r=+d[0];k=+d[1];return b};b.precision=function(d){if(!arguments.length)return v;v=+d;y=Pe(l,h,90);q=Qe(c,a,v);K=Pe(t,n,90);B=Qe(f,e,v);return b};return b.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};z.geo.greatArc=function(){function b(){return{type:"LineString",coordinates:[a||d.apply(this,arguments),e||c.apply(this,arguments)]}}var d=qd,a,c=rd,e;b.distance=function(){return z.geo.distance(a||d.apply(this,arguments),e||c.apply(this,arguments))};b.source=function(c){if(!arguments.length)return d;d=c;a="function"===typeof c?null:c;return b};b.target=function(d){if(!arguments.length)return c;c=d;e="function"===typeof d?null:d;return b};b.precision=function(){return arguments.length?
b:0};return b};z.geo.interpolate=function(b,d){return Ug(b[0]*ka,b[1]*ka,d[0]*ka,d[1]*ka)};z.geo.length=function(b){$d=0;z.geo.stream(b,Hb);return $d};var $d,Hb={sphere:M,point:M,lineStart:function(){function b(b,e){var g=Math.sin(e*=ka);e=Math.cos(e);var f=la((b*=ka)-d),m=Math.cos(f);$d+=Math.atan2(Math.sqrt((f=e*Math.sin(f))*f+(f=c*g-a*e*m)*f),a*g+c*e*m);d=b;a=g;c=e}var d,a,c;Hb.point=function(e,g){d=e*ka;a=Math.sin(g*=ka);c=Math.cos(g);Hb.point=b};Hb.lineEnd=function(){Hb.point=Hb.lineEnd=M}},
lineEnd:M,polygonStart:M,polygonEnd:M},bg=Ob(function(b){return Math.sqrt(2/(1+b))},function(b){return 2*Math.asin(b/2)});(z.geo.azimuthalEqualArea=function(){return hb(bg)}).raw=bg;var cg=Ob(function(b){return(b=Math.acos(b))&&b/Math.sin(b)},H);(z.geo.azimuthalEquidistant=function(){return hb(cg)}).raw=cg;(z.geo.conicConformal=function(){return md(Re)}).raw=Re;(z.geo.conicEquidistant=function(){return md(Se)}).raw=Se;var dg=Ob(function(b){return 1/b},Math.atan);(z.geo.gnomonic=function(){return hb(dg)}).raw=
dg;xc.invert=function(b,d){return[b,2*Math.atan(Math.exp(d))-Da]};(z.geo.mercator=function(){return Te(xc)}).raw=xc;var eg=Ob(function(){return 1},Math.asin);(z.geo.orthographic=function(){return hb(eg)}).raw=eg;var fg=Ob(function(b){return 1/(1+b)},function(b){return 2*Math.atan(b)});(z.geo.stereographic=function(){return hb(fg)}).raw=fg;sd.invert=function(b,d){return[-d,2*Math.atan(Math.exp(b))-Da]};(z.geo.transverseMercator=function(){var b=Te(sd),d=b.center,a=b.rotate;b.center=function(b){return b?
d([-b[1],b[0]]):(b=d(),[b[1],-b[0]])};b.rotate=function(b){return b?a([b[0],b[1],2<b.length?b[2]+90:90]):(b=a(),[b[0],b[1],b[2]-90])};return a([0,0,90])}).raw=sd;z.geom={};z.geom.hull=function(b){function d(b){if(3>b.length)return[];var d=wa(a),e=wa(c),g,f=b.length,m=[],h=[];for(g=0;g<f;g++)m.push([+d.call(this,b[g],g),+e.call(this,b[g],g),g]);m.sort(Vg);for(g=0;g<f;g++)h.push([m[g][0],-m[g][1]]);d=Ue(m);h=Ue(h);e=h[0]===d[0];f=h[h.length-1]===d[d.length-1];var l=[];for(g=d.length-1;0<=g;--g)l.push(b[m[d[g]][2]]);
for(g=+e;g<h.length-f;++g)l.push(b[m[h[g]][2]]);return l}var a=Ab,c=Pb;if(arguments.length)return d(b);d.x=function(b){return arguments.length?(a=b,d):a};d.y=function(b){return arguments.length?(c=b,d):c};return d};z.geom.polygon=function(b){Zb(b,Wc);return b};var Wc=z.geom.polygon.prototype=[];Wc.area=function(){for(var b=-1,d=this.length,a,c=this[d-1],e=0;++b<d;)a=c,c=this[b],e+=a[1]*c[0]-a[0]*c[1];return.5*e};Wc.centroid=function(b){var d=-1,a=this.length,c=0,e=0,f=this[a-1];for(arguments.length||
(b=-1/(6*this.area()));++d<a;){var h=f;f=this[d];var l=h[0]*f[1]-f[0]*h[1];c+=(h[0]+f[0])*l;e+=(h[1]+f[1])*l}return[c*b,e*b]};Wc.clip=function(b){for(var d,a=Ve(b),c=-1,e=this.length-Ve(this),f,h,l=this[e-1],n,t,r;++c<e;){d=b.slice();b.length=0;n=this[c];t=d[(h=d.length-a)-1];for(f=-1;++f<h;)r=d[f],td(r,l,n)?(td(t,l,n)||b.push(ud(t,r,l,n)),b.push(r)):td(t,l,n)&&b.push(ud(t,r,l,n)),t=r;a&&b.push(b[0]);l=n}return b};var Eb,sb,Cb,Xe=[],wd,Qb,af=[];Ze.prototype.prepare=function(){for(var b=this.edges,
d=b.length,a;d--;)a=b[d].edge,a.b&&a.a||b.splice(d,1);b.sort($e);return b.length};Ac.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};xd.prototype={insert:function(b,d){var a;if(b){d.P=b;if(d.N=b.N)b.N.P=d;b.N=d;if(b.R){for(b=b.R;b.L;)b=b.L;b.L=d}else b.R=d;var c=b}else this._?(b=cf(this._),d.P=null,d.N=b,b.P=b.L=d,c=b):(d.P=d.N=null,this._=d,c=null);d.L=d.R=null;d.U=c;d.C=!0;for(b=d;c&&c.C;)d=
c.U,c===d.L?(a=d.R)&&a.C?(c.C=a.C=!1,d.C=!0,b=d):(b===c.R&&(Sb(this,c),b=c,c=b.U),c.C=!1,d.C=!0,Tb(this,d)):(a=d.L)&&a.C?(c.C=a.C=!1,d.C=!0,b=d):(b===c.L&&(Tb(this,c),b=c,c=b.U),c.C=!1,d.C=!0,Sb(this,d)),c=b.U;this._.C=!1},remove:function(b){b.N&&(b.N.P=b.P);b.P&&(b.P.N=b.N);b.N=b.P=null;var d=b.U,a=b.L,c=b.R;var e=a?c?cf(c):a:c;d?d.L===b?d.L=e:d.R=e:this._=e;if(a&&c){var f=e.C;e.C=b.C;e.L=a;a.U=e;e!==c?(d=e.U,e.U=b.U,b=e.R,d.L=b,e.R=c,c.U=e):(e.U=d,d=e,b=e.R)}else f=b.C,b=e;b&&(b.U=d);if(!f)if(b&&
b.C)b.C=!1;else{do{if(b===this._)break;if(b===d.L){if(b=d.R,b.C&&(b.C=!1,d.C=!0,Sb(this,d),b=d.R),b.L&&b.L.C||b.R&&b.R.C){b.R&&b.R.C||(b.L.C=!1,b.C=!0,Tb(this,b),b=d.R);b.C=d.C;d.C=b.R.C=!1;Sb(this,d);b=this._;break}}else if(b=d.L,b.C&&(b.C=!1,d.C=!0,Tb(this,d),b=d.L),b.L&&b.L.C||b.R&&b.R.C){b.L&&b.L.C||(b.R.C=!1,b.C=!0,Sb(this,b),b=d.L);b.C=d.C;d.C=b.L.C=!1;Tb(this,d);b=this._;break}b.C=!0;b=d;d=d.U}while(!b.C);b&&(b.C=!1)}}};z.geom.voronoi=function(b){function d(b){var d=Array(b.length),c=l[0][0],
e=l[0][1],g=l[1][0],f=l[1][1];yd(a(b),l).cells.forEach(function(a,h){var m=a.edges;a=a.site;(d[h]=m.length?m.map(function(b){b=b.start();return[b.x,b.y]}):a.x>=c&&a.x<=g&&a.y>=e&&a.y<=f?[[c,f],[g,f],[g,e],[c,e]]:[]).point=b[h]});return d}function a(b){return b.map(function(b,d){return{x:1E-6*Math.round(f(b,d)/1E-6),y:1E-6*Math.round(h(b,d)/1E-6),i:d}})}var c=Ab,e=Pb,f=c,h=e,l=Xc;if(b)return d(b);d.links=function(b){return yd(a(b)).edges.filter(function(b){return b.l&&b.r}).map(function(d){return{source:b[d.l.i],
target:b[d.r.i]}})};d.triangles=function(b){var d=[];yd(a(b)).cells.forEach(function(a,c){var e=a.site;a=a.edges.sort($e);var g=-1,f=a.length,h=a[f-1].edge;for(h=h.l===e?h.r:h.l;++g<f;){var m=h;h=a[g].edge;h=h.l===e?h.r:h.l;c<m.i&&c<h.i&&0>(e.x-h.x)*(m.y-e.y)-(e.x-m.x)*(h.y-e.y)&&d.push([b[c],b[m.i],b[h.i]])}});return d};d.x=function(b){return arguments.length?(f=wa(c=b),d):c};d.y=function(b){return arguments.length?(h=wa(e=b),d):e};d.clipExtent=function(b){if(!arguments.length)return l===Xc?null:
l;l=null==b?Xc:b;return d};d.size=function(b){return arguments.length?d.clipExtent(b&&[[0,0],b]):l===Xc?null:l&&l[1]};return d};var Xc=[[-1E6,-1E6],[1E6,1E6]];z.geom.delaunay=function(b){return z.geom.voronoi().triangles(b)};z.geom.quadtree=function(b,d,a,c,e){function g(b){function g(b,d,a,c,e,g,f,h){if(!isNaN(a)&&!isNaN(c))if(b.leaf){var m=b.x,n=b.y;if(null!=m){if(!(.01>la(m-a)+la(n-c))){var r=b.point;b.x=b.y=b.point=null;l(b,r,m,n,e,g,f,h)}l(b,d,a,c,e,g,f,h)}else b.x=a,b.y=c,b.point=d}else l(b,
d,a,c,e,g,f,h)}function l(b,d,a,c,e,f,h,m){var l=.5*(e+h),n=.5*(f+m),r=a>=l,t=c>=n,k=t<<1|r;b.leaf=!1;b=b.nodes[k]||(b.nodes[k]=df());r?e=l:h=l;t?f=n:m=n;g(b,d,a,c,e,f,h,m)}var n=wa(f),t=wa(h),r;if(null!=d){var k=d;var x=a;var u=c;var p=e}else{u=p=-(k=x=Infinity);var C=[];var y=[];var O=b.length;if(m)for(r=0;r<O;++r){var q=b[r];q.x<k&&(k=q.x);q.y<x&&(x=q.y);q.x>u&&(u=q.x);q.y>p&&(p=q.y);C.push(q.x);y.push(q.y)}else for(r=0;r<O;++r){var K=+n(q=b[r],r);q=+t(q,r);K<k&&(k=K);q<x&&(x=q);K>u&&(u=K);q>p&&
(p=q);C.push(K);y.push(q)}}K=u-k;q=p-x;K>q?p=x+K:u=k+q;var B=df();B.add=function(b){g(B,b,+n(b,++r),+t(b,r),k,x,u,p)};B.visit=function(b){Ub(b,B,k,x,u,p)};B.find=function(b){return ch(B,b[0],b[1],k,x,u,p)};r=-1;if(null==d){for(;++r<O;)g(B,b[r],C[r],y[r],k,x,u,p);--r}else b.forEach(B.add);C=y=b=q=null;return B}var f=Ab,h=Pb,m;if(m=arguments.length)return f=ah,h=bh,3===m&&(e=a,c=d,a=d=0),g(b);g.x=function(b){return arguments.length?(f=b,g):f};g.y=function(b){return arguments.length?(h=b,g):h};g.extent=
function(b){if(!arguments.length)return null==d?null:[[d,a],[c,e]];null==b?d=a=c=e=null:(d=+b[0][0],a=+b[0][1],c=+b[1][0],e=+b[1][1]);return g};g.size=function(b){if(!arguments.length)return null==d?null:[c-d,e-a];null==b?d=a=c=e=null:(d=a=0,c=+b[0],e=+b[1]);return g};return g};z.interpolateRgb=zd;z.interpolateObject=ef;z.interpolateNumber=ab;z.interpolateString=ff;var Ad=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bd=new RegExp(Ad.source,"g");z.interpolate=tb;z.interpolators=[function(b,d){var a=
typeof d;return("string"===a?ec.has(d.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(d)?zd:ff:d instanceof ta?zd:Array.isArray(d)?Bc:"object"===a&&isNaN(d)?ef:ab)(b,d)}];z.interpolateArray=Bc;var gg=function(){return H},ni=z.map({linear:gg,poly:function(b){return function(d){return Math.pow(d,b)}},quad:function(){return eh},cubic:function(){return fh},sin:function(){return hh},exp:function(){return ih},circle:function(){return jh},elastic:function(b,d){2>arguments.length&&(d=.45);if(arguments.length)var a=
d/Qa*Math.asin(1/b);else b=1,a=d/4;return function(c){return 1+b*Math.pow(2,-10*c)*Math.sin((c-a)*Qa/d)}},back:function(b){b||(b=1.70158);return function(d){return d*d*((b+1)*d-b)}},bounce:function(){return kh}}),oi=z.map({"in":H,out:gf,"in-out":hf,"out-in":function(b){return hf(gf(b))}});z.ease=function(b){var d=b.indexOf("-"),a=0<=d?b.slice(0,d):b;d=0<=d?b.slice(d+1):"in";a=ni.get(a)||gg;d=oi.get(d)||H;return dh(d(a.apply(null,Wf.call(arguments,1))))};z.interpolateHcl=function(b,d){b=z.hcl(b);d=
z.hcl(d);var a=b.h,c=b.c,e=b.l,f=d.h-a,h=d.c-c,l=d.l-e;isNaN(h)&&(h=0,c=isNaN(c)?d.c:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return Ia(a+f*b,c+h*b,e+l*b)+""}};z.interpolateHsl=function(b,d){b=z.hsl(b);d=z.hsl(d);var a=b.h,c=b.s,e=b.l,f=d.h-a,h=d.s-c,l=d.l-e;isNaN(h)&&(h=0,c=isNaN(c)?d.s:c);isNaN(f)?(f=0,a=isNaN(a)?d.h:a):180<f?f-=360:-180>f&&(f+=360);return function(b){return ua(a+f*b,c+h*b,e+l*b)+""}};z.interpolateLab=function(b,d){b=z.lab(b);d=z.lab(d);
var a=b.l,c=b.a,e=b.b,f=d.l-a,h=d.a-c,l=d.b-e;return function(b){return Ba(a+f*b,c+h*b,e+l*b)+""}};z.interpolateRound=jf;z.transform=function(b){var d=Na.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(b){if(null!=b){d.setAttribute("transform",b);var a=d.transform.baseVal.consolidate()}return new kf(a?a.matrix:pi)})(b)};kf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var pi={a:1,b:0,c:0,d:1,e:0,
f:0};z.interpolateTransform=mf;z.layout={};z.layout.bundle=function(){return function(b){for(var d=[],a=-1,c=b.length;++a<c;)d.push(rh(b[a]));return d}};z.layout.chord=function(){function b(){var b={},a=[],g=z.range(h),m=[],k,u;c=[];e=[];var x=0;for(k=-1;++k<h;){var p=0;for(u=-1;++u<h;)p+=f[k][u];a.push(p);m.push(z.range(h));x+=p}n&&g.sort(function(b,d){return n(a[b],a[d])});r&&m.forEach(function(b,d){b.sort(function(b,a){return r(f[d][b],f[d][a])})});x=(Qa-l*h)/x;p=0;for(k=-1;++k<h;){var C=p;for(u=
-1;++u<h;){var y=g[k],q=m[y][u],K=f[y][q],O=p,B=p+=K*x;b[y+"-"+q]={index:y,subindex:q,startAngle:O,endAngle:B,value:K}}e[y]={index:y,startAngle:C,endAngle:p,value:a[y]};p+=l}for(k=-1;++k<h;)for(u=k-1;++u<h;)g=b[k+"-"+u],m=b[u+"-"+k],(g.value||m.value)&&c.push(g.value<m.value?{source:m,target:g}:{source:g,target:m});t&&d()}function d(){c.sort(function(b,d){return t((b.source.value+b.target.value)/2,(d.source.value+d.target.value)/2)})}var a={},c,e,f,h,l=0,n,r,t;a.matrix=function(b){if(!arguments.length)return f;
h=(f=b)&&f.length;c=e=null;return a};a.padding=function(b){if(!arguments.length)return l;l=b;c=e=null;return a};a.sortGroups=function(b){if(!arguments.length)return n;n=b;c=e=null;return a};a.sortSubgroups=function(b){if(!arguments.length)return r;r=b;c=null;return a};a.sortChords=function(b){if(!arguments.length)return t;t=b;c&&d();return a};a.chords=function(){c||b();return c};a.groups=function(){e||b();return e};return a};z.layout.force=function(){function b(b){return function(d,a,c,e){if(d.point!==
b){c=d.cx-b.x;var g=d.cy-b.y;a=e-a;e=c*c+g*g;if(a*a/y<e)return e<u&&(a=d.charge/e,b.px-=c*a,b.py-=g*a),!0;d.point&&e&&e<u&&(a=d.pointCharge/e,b.px-=c*a,b.py-=g*a)}return!d.charge}}function d(b){b.px=z.event.x;b.py=z.event.y;a.resume()}var a={},c=z.dispatch("start","tick","end"),e,f=[1,1],h,l,n=.9,r=qi,t=ri,k=-30,u=si,p=.1,y=.64,q=[],K=[],B,v,N;a.tick=function(){if(.005>(l*=.99))return e=null,c.end({type:"end",alpha:l=0}),!0;var d=q.length,a=K.length,g,h;for(g=0;g<a;++g){var m=K[g];var r=m.source;
var t=m.target;var u=t.x-r.x;var x=t.y-r.y;if(h=u*u+x*x)h=l*v[g]*((h=Math.sqrt(h))-B[g])/h,u*=h,x*=h,t.x-=u*(h=r.weight+t.weight?r.weight/(r.weight+t.weight):.5),t.y-=x*h,r.x+=u*(h=1-h),r.y+=x*h}if(h=l*p)if(u=f[0]/2,x=f[1]/2,g=-1,h)for(;++g<d;)m=q[g],m.x+=(u-m.x)*h,m.y+=(x-m.y)*h;if(k)for(of(a=z.geom.quadtree(q),l,N),g=-1;++g<d;)(m=q[g]).fixed||a.visit(b(m));for(g=-1;++g<d;)m=q[g],m.fixed?(m.x=m.px,m.y=m.py):(m.x-=(m.px-(m.px=m.x))*n,m.y-=(m.py-(m.py=m.y))*n);c.tick({type:"tick",alpha:l})};a.nodes=
function(b){if(!arguments.length)return q;q=b;return a};a.links=function(b){if(!arguments.length)return K;K=b;return a};a.size=function(b){if(!arguments.length)return f;f=b;return a};a.linkDistance=function(b){if(!arguments.length)return r;r="function"===typeof b?b:+b;return a};a.distance=a.linkDistance;a.linkStrength=function(b){if(!arguments.length)return t;t="function"===typeof b?b:+b;return a};a.friction=function(b){if(!arguments.length)return n;n=+b;return a};a.charge=function(b){if(!arguments.length)return k;
k="function"===typeof b?b:+b;return a};a.chargeDistance=function(b){if(!arguments.length)return Math.sqrt(u);u=b*b;return a};a.gravity=function(b){if(!arguments.length)return p;p=+b;return a};a.theta=function(b){if(!arguments.length)return Math.sqrt(y);y=b*b;return a};a.alpha=function(b){if(!arguments.length)return l;b=+b;l?0<b?l=b:(e.c=null,e.t=NaN,e=null,c.end({type:"end",alpha:l=0})):0<b&&(c.start({type:"start",alpha:l=b}),e=fc(a.tick));return a};a.start=function(){function b(b,a){if(!m){m=Array(c);
for(f=0;f<c;++f)m[f]=[];for(f=0;f<e;++f){var g=K[f];m[g.source.index].push(g.target);m[g.target.index].push(g.source)}}g=m[d];for(var f=-1,h=g.length,l;++f<h;)if(!isNaN(l=g[f][b]))return l;return Math.random()*a}var d,c=q.length,e=K.length,g=f[0],h=f[1],m,l;for(d=0;d<c;++d)(l=q[d]).index=d,l.weight=0;for(d=0;d<e;++d)l=K[d],"number"==typeof l.source&&(l.source=q[l.source]),"number"==typeof l.target&&(l.target=q[l.target]),++l.source.weight,++l.target.weight;for(d=0;d<c;++d)l=q[d],isNaN(l.x)&&(l.x=
b("x",g)),isNaN(l.y)&&(l.y=b("y",h)),isNaN(l.px)&&(l.px=l.x),isNaN(l.py)&&(l.py=l.y);B=[];if("function"===typeof r)for(d=0;d<e;++d)B[d]=+r.call(this,K[d],d);else for(d=0;d<e;++d)B[d]=r;v=[];if("function"===typeof t)for(d=0;d<e;++d)v[d]=+t.call(this,K[d],d);else for(d=0;d<e;++d)v[d]=t;N=[];if("function"===typeof k)for(d=0;d<c;++d)N[d]=+k.call(this,q[d],d);else for(d=0;d<c;++d)N[d]=k;return a.resume()};a.resume=function(){return a.alpha(.1)};a.stop=function(){return a.alpha(0)};a.drag=function(){h||
(h=z.behavior.drag().origin(H).on("dragstart.force",sh).on("drag.force",d).on("dragend.force",th));if(!arguments.length)return h;this.on("mouseover.force",uh).on("mouseout.force",vh).call(h)};return z.rebind(a,c,"on")};var qi=20,ri=1,si=Infinity;z.layout.hierarchy=function(){function b(e){var g=[e],f=[],h;for(e.depth=0;null!=(h=g.pop());)if(f.push(h),(m=a.call(b,h,h.depth))&&(l=m.length)){for(var l,m,n;0<=--l;)g.push(n=m[l]),n.parent=h,n.depth=h.depth+1;c&&(h.value=0);h.children=m}else c&&(h.value=
+c.call(b,h,h.depth)||0),delete h.children;Xa(e,function(b){var a,e;d&&(a=b.children)&&a.sort(d);c&&(e=b.parent)&&(e.value+=b.value)});return f}var d=zh,a=xh,c=yh;b.sort=function(a){if(!arguments.length)return d;d=a;return b};b.children=function(d){if(!arguments.length)return a;a=d;return b};b.value=function(d){if(!arguments.length)return c;c=d;return b};b.revalue=function(d){c&&(Wb(d,function(b){b.children&&(b.value=0)}),Xa(d,function(d){var a;d.children||(d.value=+c.call(b,d,d.depth)||0);if(a=d.parent)a.value+=
d.value}));return d};return b};z.layout.partition=function(){function b(d,a,c,e){var g=d.children;d.x=a;d.y=d.depth*e;d.dx=c;d.dy=e;if(g&&(h=g.length)){var f=-1,h,l;for(c=d.value?c/d.value:0;++f<h;)b(l=g[f],a,d=l.value*c,e),a+=d}}function d(b){b=b.children;var a=0;if(b&&(e=b.length))for(var c=-1,e;++c<e;)a=Math.max(a,d(b[c]));return 1+a}function a(a,g){a=c.call(this,a,g);b(a[0],0,e[0],e[1]/d(a[0]));return a}var c=z.layout.hierarchy(),e=[1,1];a.size=function(b){if(!arguments.length)return e;e=b;return a};
return Vb(a,c)};z.layout.pie=function(){function b(g){var h=g.length,l=g.map(function(a,c){return+d.call(b,a,c)}),m=+("function"===typeof c?c.apply(this,arguments):c),n=("function"===typeof e?e.apply(this,arguments):e)-m,r=Math.min(Math.abs(n)/h,+("function"===typeof f?f.apply(this,arguments):f)),t=r*(0>n?-1:1),k=z.sum(l),u=k?(n-h*t)/k:0;h=z.range(h);var p=[],x;null!=a&&h.sort(a===hg?function(b,d){return l[d]-l[b]}:function(b,d){return a(g[b],g[d])});h.forEach(function(b){p[b]={data:g[b],value:x=
l[b],startAngle:m,endAngle:m+=x*u+t,padAngle:r}});return p}var d=Number,a=hg,c=0,e=Qa,f=0;b.value=function(a){if(!arguments.length)return d;d=a;return b};b.sort=function(d){if(!arguments.length)return a;a=d;return b};b.startAngle=function(d){if(!arguments.length)return c;c=d;return b};b.endAngle=function(d){if(!arguments.length)return e;e=d;return b};b.padAngle=function(d){if(!arguments.length)return f;f=d;return b};return b};var hg={};z.layout.stack=function(){function b(g,l){if(!(t=g.length))return g;
var m=g.map(function(a,c){return d.call(b,a,c)}),n=m.map(function(d){return d.map(function(d,a){return[f.call(b,d,a),h.call(b,d,a)]})}),r=a.call(b,n,l);m=z.permute(m,r);n=z.permute(n,r);l=c.call(b,n,l);r=m[0].length;var t,k,u,p;for(u=0;u<r;++u)for(e.call(b,m[0][u],p=l[u],n[0][u][1]),k=1;k<t;++k)e.call(b,m[k][u],p+=n[k-1][u][1],n[k][u][1]);return g}var d=H,a=Cd,c=Dd,e=Ch,f=Ah,h=Bh;b.values=function(a){if(!arguments.length)return d;d=a;return b};b.order=function(d){if(!arguments.length)return a;a="function"===
typeof d?d:ti.get(d)||Cd;return b};b.offset=function(d){if(!arguments.length)return c;c="function"===typeof d?d:ui.get(d)||Dd;return b};b.x=function(d){if(!arguments.length)return f;f=d;return b};b.y=function(d){if(!arguments.length)return h;h=d;return b};b.out=function(d){if(!arguments.length)return e;e=d;return b};return b};var ti=z.map({"inside-out":function(b){var d=b.length,a=b.map(Dh),c=b.map(Eh),e=z.range(d).sort(function(b,d){return a[b]-a[d]}),f=0,h=0,l=[],n=[];for(b=0;b<d;++b){var r=e[b];
f<h?(f+=c[r],l.push(r)):(h+=c[r],n.push(r))}return n.reverse().concat(l)},reverse:function(b){return z.range(b.length).reverse()},"default":Cd}),ui=z.map({silhouette:function(b){var d=b.length,a=b[0].length,c=[],e=0,f,h,l,n=[];for(h=0;h<a;++h){for(l=f=0;f<d;f++)l+=b[f][h][1];l>e&&(e=l);c.push(l)}for(h=0;h<a;++h)n[h]=(e-c[h])/2;return n},wiggle:function(b){var d=b.length,a=b[0],c=a.length,e,f,h,l,n,r,t,k=[];k[0]=r=t=0;for(f=1;f<c;++f){for(h=e=0;e<d;++e)h+=b[e][f][1];var u=e=0;for(n=a[f][0]-a[f-1][0];e<
d;++e){var p=0;for(l=(b[e][f][1]-b[e][f-1][1])/(2*n);p<e;++p)l+=(b[p][f][1]-b[p][f-1][1])/n;u+=l*b[e][f][1]}k[f]=r-=h?u/h*n:0;r<t&&(t=r)}for(f=0;f<c;++f)k[f]-=t;return k},expand:function(b){var d=b.length,a=b[0].length,c=1/d,e,f,h,l=[];for(f=0;f<a;++f){for(h=e=0;e<d;e++)h+=b[e][f][1];if(h)for(e=0;e<d;e++)b[e][f][1]/=h;else for(e=0;e<d;e++)b[e][f][1]=c}for(f=0;f<a;++f)l[f]=0;return l},zero:Dd});z.layout.histogram=function(){function b(b,g){var f=[],h=b.map(a,this),l=c.call(this,h,g),m=e.call(this,
l,h,g);g=-1;for(var n=h.length,r=m.length-1,t=d?1:1/n;++g<r;){var k=f[g]=[];k.dx=m[g+1]-(k.x=m[g]);k.y=0}if(0<r)for(g=-1;++g<n;)k=h[g],k>=l[0]&&k<=l[1]&&(k=f[z.bisect(m,k,1,r)-1],k.y+=t,k.push(b[g]));return f}var d=!0,a=Number,c=Hh,e=Gh;b.value=function(d){if(!arguments.length)return a;a=d;return b};b.range=function(d){if(!arguments.length)return c;c=wa(d);return b};b.bins=function(d){if(!arguments.length)return e;e="number"===typeof d?function(b){return pf(b,d)}:wa(d);return b};b.frequency=function(a){if(!arguments.length)return d;
d=!!a;return b};return b};z.layout.pack=function(){function b(b,g){b=d.call(this,b,g);g=b[0];var f=c[0],h=c[1],l=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};g.x=g.y=0;Xa(g,function(b){b.r=+l(b.value)});Xa(g,sf);if(a){var m=a*(e?1:Math.max(2*g.r/f,2*g.r/h))/2;Xa(g,function(b){b.r+=m});Xa(g,sf);Xa(g,function(b){b.r-=m})}uf(g,f/2,h/2,e?1:1/Math.max(2*g.r/f,2*g.r/h));return b}var d=z.layout.hierarchy().sort(Ih),a=0,c=[1,1],e;b.size=function(d){if(!arguments.length)return c;c=d;return b};
b.radius=function(d){if(!arguments.length)return e;e=null==d||"function"===typeof d?d:+d;return b};b.padding=function(d){if(!arguments.length)return a;a=+d;return b};return Vb(b,d)};z.layout.tree=function(){function b(b,g){b=f.call(this,b,g);g=b[0];var m=d(g);Xa(m,a);m.parent.m=-m.z;Wb(m,c);if(n)Wb(g,e);else{var r=g,t=g,k=g;Wb(g,function(b){b.x<r.x&&(r=b);b.x>t.x&&(t=b);b.depth>k.depth&&(k=b)});var u=h(r,t)/2-r.x,p=l[0]/(t.x+h(t,r)/2+u),y=l[1]/(k.depth||1);Wb(g,function(b){b.x=(b.x+u)*p;b.y=b.depth*
y})}return b}function d(b){b={A:null,children:[b]};for(var d=[b],a;null!=(a=d.pop());)for(var c=a.children,e,g=0,f=c.length;g<f;++g)d.push((c[g]=e={_:c[g],parent:a,children:(e=c[g].children)&&e.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:g}).a=e);return b.children[0]}function a(b){var d=b.children,a=b.parent.children,c=b.i?a[b.i-1]:null;if(d.length){for(var e=0,g=0,f=b.children,l=f.length,m;0<=--l;)m=f[l],m.z+=e,m.m+=e,e+=m.s+(g+=m.c);d=(d[0].z+d[d.length-1].z)/2;c?(b.z=c.z+h(b._,c._),b.m=
b.z-d):b.z=d}else c&&(b.z=c.z+h(b._,c._));d=b.parent;a=b.parent.A||a[0];if(c){g=e=b;f=e.parent.children[0];l=e.m;m=g.m;for(var n=c.m,r=f.m,t;c=Gd(c),e=Fd(e),c&&e;){f=Fd(f);g=Gd(g);g.a=b;t=c.z+n-e.z-l+h(c._,e._);if(0<t){var k=c.a.parent===b.parent?c.a:a,u=b,p=t,y=p/(u.i-k.i);u.c-=y;u.s+=p;k.c+=y;u.z+=p;u.m+=p;l+=t;m+=t}n+=c.m;l+=e.m;r+=f.m;m+=g.m}c&&!Gd(g)&&(g.t=c,g.m+=n-m);e&&!Fd(f)&&(f.t=e,f.m+=l-r,a=b)}d.A=a}function c(b){b._.x=b.z+b.parent.m;b.m+=b.parent.m}function e(b){b.x*=l[0];b.y=b.depth*
l[1]}var f=z.layout.hierarchy().sort(null).value(null),h=vf,l=[1,1],n=null;b.separation=function(d){if(!arguments.length)return h;h=d;return b};b.size=function(d){if(!arguments.length)return n?null:l;n=null==(l=d)?e:null;return b};b.nodeSize=function(d){if(!arguments.length)return n?l:null;n=null==(l=d)?null:e;return b};return Vb(b,f)};z.layout.cluster=function(){function b(b,g){b=d.call(this,b,g);var f=b[0],h,l=0;Xa(f,function(b){var d=b.children;d&&d.length?(b.x=Mh(d),b.y=Lh(d)):(b.x=h?l+=a(b,h):
0,b.y=0,h=b)});g=wf(f);var m=xf(f),n=g.x-a(g,m)/2,r=m.x+a(m,g)/2;Xa(f,e?function(b){b.x=(b.x-f.x)*c[0];b.y=(f.y-b.y)*c[1]}:function(b){b.x=(b.x-n)/(r-n)*c[0];b.y=(1-(f.y?b.y/f.y:1))*c[1]});return b}var d=z.layout.hierarchy().sort(null).value(null),a=vf,c=[1,1],e=!1;b.separation=function(d){if(!arguments.length)return a;a=d;return b};b.size=function(d){if(!arguments.length)return e?null:c;e=null==(c=d);return b};b.nodeSize=function(d){if(!arguments.length)return e?c:null;e=null!=(c=d);return b};return Vb(b,
d)};z.layout.treemap=function(){function b(b,d){for(var a=-1,c=b.length,e,g;++a<c;)g=(e=b[a]).value*(0>d?0:d),e.area=isNaN(g)||0>=g?0:g}function d(a){var e=a.children;if(e&&e.length){var g=r(a),f=[],h=e.slice(),l=Infinity,m,n="slice"===u?g.dx:"dice"===u?g.dy:"slice-dice"===u?a.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);b(h,g.dx*g.dy/a.value);for(f.area=0;0<(a=h.length);){f.push(a=h[a-1]);f.area+=a.area;if(!(a="squarify"!==u)){a=n;for(var t=f.area,k=0,y=Infinity,q=-1,K=f.length;++q<K;)if(m=f[q].area)m<
y&&(y=m),m>k&&(k=m);t*=t;a*=a;a=(m=t?Math.max(a*k*p/t,t/(a*y*p)):Infinity)<=l}a?(h.pop(),l=m):(f.area-=f.pop().area,c(f,n,g,!1),n=Math.min(g.dx,g.dy),f.length=f.area=0,l=Infinity)}f.length&&(c(f,n,g,!0),f.length=f.area=0);e.forEach(d)}}function a(d){var e=d.children;if(e&&e.length){var g=r(d),f=e.slice(),h=[];b(f,g.dx*g.dy/d.value);for(h.area=0;d=f.pop();)h.push(d),h.area+=d.area,null!=d.z&&(c(h,d.z?g.dx:g.dy,g,!f.length),h.length=h.area=0);e.forEach(a)}}function c(b,d,a,c){var e=-1,g=b.length,f=
a.x,l=a.y,m=d?h(b.area/d):0;if(d==a.dx){if(c||m>a.dy)m=a.dy;for(;++e<g;){var n=b[e];n.x=f;n.y=l;n.dy=m;f+=n.dx=Math.min(a.x+a.dx-f,m?h(n.area/m):0)}n.z=!0;n.dx+=a.x+a.dx-f;a.y+=m;a.dy-=m}else{if(c||m>a.dx)m=a.dx;for(;++e<g;)n=b[e],n.x=f,n.y=l,n.dx=m,l+=n.dy=Math.min(a.y+a.dy-l,m?h(n.area/m):0);n.z=!1;n.dy+=a.y+a.dy-l;a.x+=m;a.dx-=m}}function e(c){c=k||f(c);var e=c[0];e.x=e.y=0;e.value?(e.dx=l[0],e.dy=l[1]):e.dx=e.dy=0;k&&f.revalue(e);b([e],e.dx*e.dy/e.value);(k?a:d)(e);t&&(k=c);return c}var f=z.layout.hierarchy(),
h=Math.round,l=[1,1],n=null,r=Hd,t=!1,k,u="squarify",p=.5*(1+Math.sqrt(5));e.size=function(b){if(!arguments.length)return l;l=b;return e};e.padding=function(b){function d(d){var a=b.call(e,d,d.depth);return null==a?Hd(d):yf(d,"number"===typeof a?[a,a,a,a]:a)}function a(d){return yf(d,b)}if(!arguments.length)return n;var c;r=null==(n=b)?Hd:"function"===(c=typeof b)?d:"number"===c?(b=[b,b,b,b],a):a;return e};e.round=function(b){if(!arguments.length)return h!=Number;h=b?Math.round:Number;return e};e.sticky=
function(b){if(!arguments.length)return t;t=b;k=null;return e};e.ratio=function(b){if(!arguments.length)return p;p=b;return e};e.mode=function(b){if(!arguments.length)return u;u=b+"";return e};return Vb(e,f)};z.random={normal:function(b,d){var a=arguments.length;2>a&&(d=1);1>a&&(b=0);return function(){do{var a=2*Math.random()-1;var c=2*Math.random()-1;c=a*a+c*c}while(!c||1<c);return b+d*a*Math.sqrt(-2*Math.log(c)/c)}},logNormal:function(){var b=z.random.normal.apply(z,arguments);return function(){return Math.exp(b())}},
bates:function(b){var d=z.random.irwinHall(b);return function(){return d()/b}},irwinHall:function(b){return function(){for(var d=0,a=0;a<b;a++)d+=Math.random();return d}}};z.scale={};var Oh={floor:H,ceil:H};z.scale.linear=function(){return Af([0,1],[0,1],tb,!1)};var Rh={s:1,g:1,p:1,r:1,e:1};z.scale.log=function(){return Cf(z.scale.linear().domain([0,1]),10,!0,[1,10])};var Df=z.format(".0e"),Sh={floor:function(b){return-Math.ceil(-b)},ceil:function(b){return-Math.floor(-b)}};z.scale.pow=function(){return Ef(z.scale.linear(),
1,[0,1])};z.scale.sqrt=function(){return z.scale.pow().exponent(.5)};z.scale.ordinal=function(){return Ff([],{t:"range",a:[[]]})};z.scale.category10=function(){return z.scale.ordinal().range(vi)};z.scale.category20=function(){return z.scale.ordinal().range(wi)};z.scale.category20b=function(){return z.scale.ordinal().range(xi)};z.scale.category20c=function(){return z.scale.ordinal().range(yi)};var vi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(wb),wi=[2062260,
11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(wb),xi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(wb),yi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,
6513507,9868950,12434877,14277081].map(wb);z.scale.quantile=function(){return Gf([],[])};z.scale.quantize=function(){return Hf(0,1,[0,1])};z.scale.threshold=function(){return If([.5],[0,1])};z.scale.identity=function(){return Jf([0,1])};z.svg={};z.svg.arc=function(){function b(){var b=Math.max(0,+a.apply(this,arguments)),g=Math.max(0,+c.apply(this,arguments)),m=h.apply(this,arguments)-Da,r=l.apply(this,arguments)-Da,t=Math.abs(r-m),k=m>r?0:1;if(g<b){var u=g;g=b;b=u}if(t>=ki)return d(g,k)+(b?d(b,1-
k):"")+"Z";var p,y=0,q=0,K=[];if(p=(+n.apply(this,arguments)||0)/2){var B=f===Yc?Math.sqrt(b*b+g*g):+f.apply(this,arguments);k||(q*=-1);g&&(q=Aa(B/g*Math.sin(p)));b&&(y=Aa(B/b*Math.sin(p)))}if(g){B=g*Math.cos(m+q);p=g*Math.sin(m+q);var x=g*Math.cos(r-q);var v=g*Math.sin(r-q);var N=Math.abs(r-m-2*q)<=ja?0:1;q&&Gc(B,p,x,v)===k^N&&(x=(m+r)/2,B=g*Math.cos(x),p=g*Math.sin(x),x=v=null)}else B=p=0;if(b){q=b*Math.cos(r-y);var F=b*Math.sin(r-y);var T=b*Math.cos(m+y);var C=b*Math.sin(m+y);var L=Math.abs(m-
r+2*y)<=ja?0:1;y&&Gc(q,F,T,C)===1-k^L&&(T=(m+r)/2,q=b*Math.cos(T),F=b*Math.sin(T),T=C=null)}else q=F=0;1E-6<t&&.001<(u=Math.min(Math.abs(g-b)/2,+e.apply(this,arguments)))?(N=b<g^k?0:1,L=m=u,t<ja&&(t=null==T?[q,F]:null==x?[B,p]:ud([B,p],[T,C],[x,v],[q,F]),L=B-t[0],m=p-t[1],r=x-t[0],y=v-t[1],m=1/Math.sin(Math.acos((L*r+m*y)/(Math.sqrt(L*L+m*m)*Math.sqrt(r*r+y*y)))/2),t=Math.sqrt(t[0]*t[0]+t[1]*t[1]),L=Math.min(u,(b-t)/(m-1)),m=Math.min(u,(g-t)/(m+1))),null!=x?(t=Hc(null==T?[q,F]:[T,C],[B,p],g,m,k),
r=Hc([x,v],[q,F],g,m,k),u===m?K.push("M",t[0],"A",m,",",m," 0 0,",N," ",t[1],"A",g,",",g," 0 ",1-k^Gc(t[1][0],t[1][1],r[1][0],r[1][1]),",",k," ",r[1],"A",m,",",m," 0 0,",N," ",r[0]):K.push("M",t[0],"A",m,",",m," 0 1,",N," ",r[0])):K.push("M",B,",",p),null!=T?(g=Hc([B,p],[T,C],b,-L,k),x=Hc([q,F],null==x?[B,p]:[x,v],b,-L,k),u===L?K.push("L",x[0],"A",L,",",L," 0 0,",N," ",x[1],"A",b,",",b," 0 ",k^Gc(x[1][0],x[1][1],g[1][0],g[1][1]),",",1-k," ",g[1],"A",L,",",L," 0 0,",N," ",g[0]):K.push("L",x[0],"A",
L,",",L," 0 0,",N," ",g[0])):K.push("L",q,",",F)):(K.push("M",B,",",p),null!=x&&K.push("A",g,",",g," 0 ",N,",",k," ",x,",",v),K.push("L",q,",",F),null!=T&&K.push("A",b,",",b," 0 ",L,",",1-k," ",T,",",C));K.push("Z");return K.join("")}function d(b,d){return"M0,"+b+"A"+b+","+b+" 0 1,"+d+" 0,"+-b+"A"+b+","+b+" 0 1,"+d+" 0,"+b}var a=Uh,c=Vh,e=Th,f=Yc,h=Kf,l=Lf,n=Wh;b.innerRadius=function(d){if(!arguments.length)return a;a=wa(d);return b};b.outerRadius=function(d){if(!arguments.length)return c;c=wa(d);
return b};b.cornerRadius=function(d){if(!arguments.length)return e;e=wa(d);return b};b.padRadius=function(d){if(!arguments.length)return f;f=d==Yc?Yc:wa(d);return b};b.startAngle=function(d){if(!arguments.length)return h;h=wa(d);return b};b.endAngle=function(d){if(!arguments.length)return l;l=wa(d);return b};b.padAngle=function(d){if(!arguments.length)return n;n=wa(d);return b};b.centroid=function(){var b=(+a.apply(this,arguments)+ +c.apply(this,arguments))/2,d=(+h.apply(this,arguments)+ +l.apply(this,
arguments))/2-Da;return[Math.cos(d)*b,Math.sin(d)*b]};return b};var Yc="auto";z.svg.line=function(){return Mf(H)};var Kd=z.map({linear:Ua,"linear-closed":Nf,step:function(b){for(var d=0,a=b.length,c=b[0],e=[c[0],",",c[1]];++d<a;)e.push("H",(c[0]+(c=b[d])[0])/2,"V",c[1]);1<a&&e.push("H",c[0]);return e.join("")},"step-before":Ld,"step-after":Md,basis:Of,"basis-open":function(b){if(4>b.length)return Ua(b);for(var d=[],a=-1,c=b.length,e,f=[0],h=[0];3>++a;)e=b[a],f.push(e[0]),h.push(e[1]);d.push(Ra(jb,
f)+","+Ra(jb,h));for(--a;++a<c;)e=b[a],f.shift(),f.push(e[0]),h.shift(),h.push(e[1]),Od(d,f,h);return d.join("")},"basis-closed":function(b){for(var d,a=-1,c=b.length,e=c+4,f,h=[],l=[];4>++a;)f=b[a%c],h.push(f[0]),l.push(f[1]);d=[Ra(jb,h),",",Ra(jb,l)];for(--a;++a<e;)f=b[a%c],h.shift(),h.push(f[0]),l.shift(),l.push(f[1]),Od(d,h,l);return d.join("")},bundle:function(b,d){var a=b.length-1;if(a)for(var c=b[0][0],e=b[0][1],f=b[a][0]-c,h=b[a][1]-e,l=-1,n,r;++l<=a;)n=b[l],r=l/a,n[0]=d*n[0]+(1-d)*(c+r*f),
n[1]=d*n[1]+(1-d)*(e+r*h);return Of(b)},cardinal:function(b,d){return 3>b.length?Ua(b):b[0]+Ic(b,Nd(b,d))},"cardinal-open":function(b,d){return 4>b.length?Ua(b):b[1]+Ic(b.slice(1,-1),Nd(b,d))},"cardinal-closed":function(b,d){return 3>b.length?Nf(b):b[0]+Ic((b.push(b[0]),b),Nd([b[b.length-2]].concat(b,[b[1]]),d))},monotone:function(b){if(3>b.length)b=Ua(b);else{var d=b[0],a=[],c;var e=0;var f=b.length-1;var h=[];var l=b[1];for(c=h[0]=Pd(b[0],l);++e<f;)h[e]=(c+(c=Pd(l,l=b[e+1])))/2;h[e]=c;for(var n=
-1,r=b.length-1;++n<r;)e=Pd(b[n],b[n+1]),1E-6>la(e)?h[n]=h[n+1]=0:(f=h[n]/e,l=h[n+1]/e,c=f*f+l*l,9<c&&(c=3*e/Math.sqrt(c),h[n]=c*f,h[n+1]=c*l));for(n=-1;++n<=r;)c=(b[Math.min(r,n+1)][0]-b[Math.max(0,n-1)][0])/(6*(1+h[n]*h[n])),a.push([c||0,h[n]*c||0]);b=d+Ic(b,a)}return b}});Kd.forEach(function(b,d){d.key=b;d.closed=/-closed$/.test(b)});var Pf=[0,2/3,1/3,0],Qf=[0,1/3,2/3,0],jb=[0,1/6,2/3,1/6];z.svg.line.radial=function(){var b=Mf(Rf);b.radius=b.x;delete b.x;b.angle=b.y;delete b.y;return b};Ld.reverse=
Md;Md.reverse=Ld;z.svg.area=function(){return Sf(H)};z.svg.area.radial=function(){var b=Sf(Rf);b.radius=b.x;delete b.x;b.innerRadius=b.x0;delete b.x0;b.outerRadius=b.x1;delete b.x1;b.angle=b.y;delete b.y;b.startAngle=b.y0;delete b.y0;b.endAngle=b.y1;delete b.y1;return b};z.svg.chord=function(){function b(b,g){var f=d(this,c,b,g);b=d(this,e,b,g);return"M"+f.p0+a(f.r,f.p1,f.a1-f.a0)+(f.a0==b.a0&&f.a1==b.a1?"Q 0,0 "+f.p0:"Q 0,0 "+b.p0+a(b.r,b.p1,b.a1-b.a0)+("Q 0,0 "+f.p0))+"Z"}function d(b,d,a,c){var e=
d.call(b,a,c);d=f.call(b,e,c);a=h.call(b,e,c)-Da;b=l.call(b,e,c)-Da;return{r:d,a0:a,a1:b,p0:[d*Math.cos(a),d*Math.sin(a)],p1:[d*Math.cos(b),d*Math.sin(b)]}}function a(b,d,a){return"A"+b+","+b+" 0 "+ +(a>ja)+",1 "+d}var c=qd,e=rd,f=Xh,h=Kf,l=Lf;b.radius=function(d){if(!arguments.length)return f;f=wa(d);return b};b.source=function(d){if(!arguments.length)return c;c=wa(d);return b};b.target=function(d){if(!arguments.length)return e;e=wa(d);return b};b.startAngle=function(d){if(!arguments.length)return h;
h=wa(d);return b};b.endAngle=function(d){if(!arguments.length)return l;l=wa(d);return b};return b};z.svg.diagonal=function(){function b(b,e){var g=d.call(this,b,e);b=a.call(this,b,e);e=(g.y+b.y)/2;g=[g,{x:g.x,y:e},{x:b.x,y:e},b];g=g.map(c);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var d=qd,a=rd,c=Tf;b.source=function(a){if(!arguments.length)return d;d=wa(a);return b};b.target=function(d){if(!arguments.length)return a;a=wa(d);return b};b.projection=function(d){if(!arguments.length)return c;c=d;return b};
return b};z.svg.diagonal.radial=function(){var b=z.svg.diagonal(),d=Tf,a=b.projection;b.projection=function(b){return arguments.length?a(Yh(d=b)):d};return b};z.svg.symbol=function(){function b(b,c){return(ig.get(d.call(this,b,c))||Uf)(a.call(this,b,c))}var d=$h,a=Zh;b.type=function(a){if(!arguments.length)return d;d=wa(a);return b};b.size=function(d){if(!arguments.length)return a;a=wa(d);return b};return b};var ig=z.map({circle:Uf,cross:function(b){b=Math.sqrt(b/5)/2;return"M"+-3*b+","+-b+"H"+-b+
"V"+-3*b+"H"+b+"V"+-b+"H"+3*b+"V"+b+"H"+b+"V"+3*b+"H"+-b+"V"+b+"H"+-3*b+"Z"},diamond:function(b){b=Math.sqrt(b/(2*jg));var d=b*jg;return"M0,"+-b+"L"+d+",0 0,"+b+" "+-d+",0Z"},square:function(b){b=Math.sqrt(b)/2;return"M"+-b+","+-b+"L"+b+","+-b+" "+b+","+b+" "+-b+","+b+"Z"},"triangle-down":function(b){b=Math.sqrt(b/Zc);var d=b*Zc/2;return"M0,"+d+"L"+b+","+-d+" "+-b+","+-d+"Z"},"triangle-up":function(b){b=Math.sqrt(b/Zc);var d=b*Zc/2;return"M0,"+-d+"L"+b+","+d+" "+-b+","+d+"Z"}});z.svg.symbolTypes=
ig.keys();var Zc=Math.sqrt(3),jg=Math.tan(30*ka);sa.transition=function(b){var d=vb||++kg;b=Rd(b);for(var a=[],c,e,f=$c||{time:Date.now(),ease:gh,delay:0,duration:250},h=-1,l=this.length;++h<l;){a.push(c=[]);for(var n=this[h],r=-1,t=n.length;++r<t;)(e=n[r])&&Jc(e,r,b,d,f),c.push(e)}return Xb(a,b,d)};sa.interrupt=function(b){return this.each(null==b?Mc:Vf(Rd(b)))};var Mc=Vf(Rd()),Ja=[],kg=0,vb,$c;Ja.call=sa.call;Ja.empty=sa.empty;Ja.node=sa.node;Ja.size=sa.size;z.transition=function(b,d){return b&&
b.transition?vb?b.transition(d):b:z.selection().transition(b)};z.transition.prototype=Ja;Ja.select=function(b){var d=this.id,a=this.namespace,c=[],e,f,h;b=y(b);for(var l=-1,n=this.length;++l<n;){c.push(e=[]);for(var r=this[l],t=-1,k=r.length;++t<k;)(h=r[t])&&(f=b.call(h,h.__data__,t,l))?("__data__"in h&&(f.__data__=h.__data__),Jc(f,t,a,d,h[a][d]),e.push(f)):e.push(null)}return Xb(c,a,d)};Ja.selectAll=function(b){var d=this.id,a=this.namespace,c=[],e,f;b=L(b);for(var h=-1,l=this.length;++h<l;)for(var n=
this[h],r=-1,t=n.length;++r<t;)if(e=n[r]){var k=e[a][d];var u=b.call(e,e.__data__,r,h);c.push(e=[]);for(var p=-1,y=u.length;++p<y;)(f=u[p])&&Jc(f,p,a,d,k),e.push(f)}return Xb(c,a,d)};Ja.filter=function(b){var d=[],a,c;"function"!==typeof b&&(b=r(b));for(var e=0,f=this.length;e<f;e++){d.push(a=[]);var h=this[e];for(var l=0,n=h.length;l<n;l++)(c=h[l])&&b.call(c,c.__data__,l,e)&&a.push(c)}return Xb(d,this.namespace,this.id)};Ja.tween=function(b,d){var a=this.id,c=this.namespace;return 2>arguments.length?
this.node()[c][a].tween.get(b):V(this,null==d?function(d){d[c][a].tween.remove(b)}:function(e){e[c][a].tween.set(b,d)})};Ja.attr=function(b,d){function a(){this.removeAttribute(l)}function c(){this.removeAttributeNS(l.space,l.local)}function e(b){return null==b?a:(b+="",function(){var d=this.getAttribute(l),a;return d!==b&&(a=h(d,b),function(b){this.setAttribute(l,a(b))})})}function f(b){return null==b?c:(b+="",function(){var d=this.getAttributeNS(l.space,l.local),a;return d!==b&&(a=h(d,b),function(b){this.setAttributeNS(l.space,
l.local,a(b))})})}if(2>arguments.length){for(d in b)this.attr(d,b[d]);return this}var h="transform"==b?mf:tb,l=z.ns.qualify(b);return Qd(this,"attr."+b,d,l.local?f:e)};Ja.attrTween=function(b,d){function a(b,a){var c=d.call(this,b,a,this.getAttribute(e));return c&&function(b){this.setAttribute(e,c(b))}}function c(b,a){var c=d.call(this,b,a,this.getAttributeNS(e.space,e.local));return c&&function(b){this.setAttributeNS(e.space,e.local,c(b))}}var e=z.ns.qualify(b);return this.tween("attr."+b,e.local?
c:a)};Ja.style=function(b,d,a){function c(){this.style.removeProperty(b)}var g=arguments.length;if(3>g){if("string"!==typeof b){2>g&&(d="");for(a in b)this.style(a,b[a],d);return this}a=""}return Qd(this,"style."+b,d,function(d){return null==d?c:(d+="",function(){var c=e(this).getComputedStyle(this,null).getPropertyValue(b),g;return c!==d&&(g=tb(c,d),function(d){this.style.setProperty(b,g(d),a)})})})};Ja.styleTween=function(b,d,a){3>arguments.length&&(a="");return this.tween("style."+b,function(c,
g){var f=d.call(this,c,g,e(this).getComputedStyle(this,null).getPropertyValue(b));return f&&function(d){this.style.setProperty(b,f(d),a)}})};Ja.text=function(b){return Qd(this,"text",b,ai)};Ja.remove=function(){var b=this.namespace;return this.each("end.transition",function(){var d;2>this[b].count&&(d=this.parentNode)&&d.removeChild(this)})};Ja.ease=function(b){var d=this.id,a=this.namespace;if(1>arguments.length)return this.node()[a][d].ease;"function"!==typeof b&&(b=z.ease.apply(z,arguments));return V(this,
function(c){c[a][d].ease=b})};Ja.delay=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].delay:V(this,"function"===typeof b?function(c,e,g){c[a][d].delay=+b.call(c,c.__data__,e,g)}:(b=+b,function(c){c[a][d].delay=b}))};Ja.duration=function(b){var d=this.id,a=this.namespace;return 1>arguments.length?this.node()[a][d].duration:V(this,"function"===typeof b?function(c,e,g){c[a][d].duration=Math.max(1,b.call(c,c.__data__,e,g))}:(b=Math.max(1,b),function(c){c[a][d].duration=
b}))};Ja.each=function(b,d){var a=this.id,c=this.namespace;if(2>arguments.length){var e=$c,f=vb;try{vb=a,V(this,function(d,e,g){$c=d[c][a];b.call(d,d.__data__,e,g)})}finally{$c=e,vb=f}}else V(this,function(e){e=e[c][a];(e.event||(e.event=z.dispatch("start","end","interrupt"))).on(b,d)});return this};Ja.transition=function(){for(var b=this.id,d=++kg,a=this.namespace,c=[],e,f,h,l,n=0,r=this.length;n<r;n++){c.push(e=[]);f=this[n];for(var t=0,k=f.length;t<k;t++){if(h=f[t])l=h[a][b],Jc(h,t,a,d,{time:l.time,
ease:l.ease,delay:l.delay+l.duration,duration:l.duration});e.push(h)}}return Xb(c,a,d)};z.svg.axis=function(){function b(b){b.each(function(){var b=z.select(this),g=this.__chart__||d,m=this.__chart__=d.copy(),r=null==l?m.ticks?m.ticks.apply(m,h):m.domain():l,t=null==n?m.tickFormat?m.tickFormat.apply(m,h):H:n,k=b.selectAll(".tick").data(r,m);r=k.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6);var u=z.transition(k.exit()).style("opacity",1E-6).remove(),p=z.transition(k.order()).style("opacity",
1),y=Math.max(c,0)+f,q=Cc(m);b=b.selectAll(".domain").data([0]);b=(b.enter().append("path").attr("class","domain"),z.transition(b));r.append("line");r.append("text");var K=r.select("line"),B=p.select("line");k=k.select("text").text(t);var v=r.select("text"),N=p.select("text"),T="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a){t=bi;var F="x";var L="y";var ca="x2";var w="y2";k.attr("dy",0>T?"0em":".71em").style("text-anchor","middle");b.attr("d","M"+q[0]+","+T*e+"V0H"+q[1]+"V"+T*e)}else t=ci,
F="y",L="x",ca="y2",w="x2",k.attr("dy",".32em").style("text-anchor",0>T?"end":"start"),b.attr("d","M"+T*e+","+q[0]+"H0V"+q[1]+"H"+T*e);K.attr(w,T*c);v.attr(L,T*y);B.attr(ca,0).attr(w,T*c);N.attr(F,0).attr(L,T*y);if(m.rangeBand){var x=m,V=x.rangeBand()/2;g=m=function(b){return x(b)+V}}else g.rangeBand?g=m:u.call(t,m,g);r.call(t,g,m);p.call(t,m,m)})}var d=z.scale.linear(),a=lg,c=6,e=6,f=3,h=[10],l=null,n;b.scale=function(a){if(!arguments.length)return d;d=a;return b};b.orient=function(d){if(!arguments.length)return a;
a=d in zi?d+"":lg;return b};b.ticks=function(){if(!arguments.length)return h;h=Va(arguments);return b};b.tickValues=function(d){if(!arguments.length)return l;l=d;return b};b.tickFormat=function(d){if(!arguments.length)return n;n=d;return b};b.tickSize=function(d){var a=arguments.length;if(!a)return c;c=+d;e=+arguments[a-1];return b};b.innerTickSize=function(d){if(!arguments.length)return c;c=+d;return b};b.outerTickSize=function(d){if(!arguments.length)return e;e=+d;return b};b.tickPadding=function(d){if(!arguments.length)return f;
f=+d;return b};b.tickSubdivide=function(){return arguments.length&&b};return b};var lg="bottom",zi={top:1,right:1,bottom:1,left:1};z.svg.brush=function(){function b(e){e.each(function(){var e=z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",f).on("touchstart.brush",f),g=e.selectAll(".background").data([0]);g.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");e.selectAll(".extent").data([0]).enter().append("rect").attr("class",
"extent").style("cursor","move");var h=e.selectAll(".resize").data(q,H);h.exit().remove();h.enter().append("g").attr("class",function(b){return"resize "+b}).style("cursor",function(b){return Ai[b]}).append("rect").attr("x",function(b){return/[ew]$/.test(b)?-3:null}).attr("y",function(b){return/^[ns]/.test(b)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");h.style("display",b.empty()?"none":null);e=z.transition(e);g=z.transition(g);l&&(h=Cc(l),g.attr("x",h[0]).attr("width",
h[1]-h[0]),a(e));n&&(h=Cc(n),g.attr("y",h[0]).attr("height",h[1]-h[0]),c(e));d(e)})}function d(b){b.selectAll(".resize").attr("transform",function(b){return"translate("+r[+/e$/.test(b)]+","+t[+/^s/.test(b)]+")"})}function a(b){b.select(".extent").attr("x",r[0]);b.selectAll(".extent,.n>rect,.s>rect").attr("width",r[1]-r[0])}function c(b){b.select(".extent").attr("y",t[0]);b.selectAll(".extent,.e>rect,.w>rect").attr("height",t[1]-t[0])}function f(){function g(){var b=z.mouse(q),e=!1;U&&(b[0]+=U[0],
b[1]+=U[1]);L||(z.event.altKey?(w||(w=[(r[0]+r[1])/2,(t[0]+t[1])/2]),x[0]=r[+(b[0]<w[0])],x[1]=t[+(b[1]<w[1])]):w=null);T&&f(b,l,0)&&(a(v),e=!0);F&&f(b,n,1)&&(c(v),e=!0);e&&(d(v),B({type:"brush",mode:L?"move":"resize"}))}function f(b,d,a){var c=Cc(d);d=c[0];var e=c[1];c=x[a];var g=a?t:r,f=g[1]-g[0];L&&(d-=c,e-=f+c);b=(a?y:p)?Math.max(d,Math.min(e,b[a])):b[a];L?d=(b+=c)+f:(w&&(c=Math.max(d,Math.min(e,2*w[a]-b))),c<b?(d=b,b=c):d=c);if(g[0]!=b||g[1]!=d)return a?u=null:k=null,g[0]=b,g[1]=d,!0}function m(){g();
v.style("pointer-events","all").selectAll(".resize").style("display",b.empty()?"none":null);z.select("body").style("cursor",null);V.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);ca();B({type:"brushend"})}var q=this,K=z.select(z.event.target),B=h.of(q,arguments),v=z.select(q),N=K.datum(),T=!/^(n|s)$/.test(N)&&l,F=!/^(e|w)$/.test(N)&&n,L=K.classed("extent"),ca=ya(q),w,x=z.mouse(q),V=z.select(e(q)).on("keydown.brush",
function(){32==z.event.keyCode&&(L||(w=null,x[0]-=r[1],x[1]-=t[1],L=2),S())}).on("keyup.brush",function(){32==z.event.keyCode&&2==L&&(x[0]+=r[1],x[1]+=t[1],L=0,S())});if(z.event.changedTouches)V.on("touchmove.brush",g).on("touchend.brush",m);else V.on("mousemove.brush",g).on("mouseup.brush",m);v.interrupt().selectAll("*").interrupt();if(L)x[0]=r[0]-x[0],x[1]=t[0]-x[1];else if(N){var Q=+/w$/.test(N);N=+/^n/.test(N);var U=[r[1-Q]-x[0],t[1-N]-x[1]];x[0]=r[Q];x[1]=t[N]}else z.event.altKey&&(w=x.slice());
v.style("pointer-events","none").selectAll(".resize").style("display",null);z.select("body").style("cursor",K.style("cursor"));B({type:"brushstart"});g()}var h=N(b,"brushstart","brush","brushend"),l=null,n=null,r=[0,0],t=[0,0],k,u,p=!0,y=!0,q=ae[0];b.event=function(b){b.each(function(){var b=h.of(this,arguments),d={x:r,y:t,i:k,j:u},a=this.__chart__||d;this.__chart__=d;vb?z.select(this).transition().each("start.brush",function(){k=a.i;u=a.j;r=a.x;t=a.y;b({type:"brushstart"})}).tween("brush:brush",
function(){var a=Bc(r,d.x),c=Bc(t,d.y);k=u=null;return function(e){r=d.x=a(e);t=d.y=c(e);b({type:"brush",mode:"resize"})}}).each("end.brush",function(){k=d.i;u=d.j;b({type:"brush",mode:"resize"});b({type:"brushend"})}):(b({type:"brushstart"}),b({type:"brush",mode:"resize"}),b({type:"brushend"}))})};b.x=function(d){if(!arguments.length)return l;l=d;q=ae[!l<<1|!n];return b};b.y=function(d){if(!arguments.length)return n;n=d;q=ae[!l<<1|!n];return b};b.clamp=function(d){if(!arguments.length)return l&&
n?[p,y]:l?p:n?y:null;l&&n?(p=!!d[0],y=!!d[1]):l?p=!!d:n&&(y=!!d);return b};b.extent=function(d){if(!arguments.length){if(l)if(k){var a=k[0];var c=k[1]}else if(a=r[0],c=r[1],l.invert&&(a=l.invert(a),c=l.invert(c)),c<a){var e=a;a=c;c=e}if(n)if(u){var g=u[0];var f=u[1]}else g=t[0],f=t[1],n.invert&&(g=n.invert(g),f=n.invert(f)),f<g&&(e=g,g=f,f=e);return l&&n?[[a,g],[c,f]]:l?[a,c]:n&&[g,f]}l&&(a=d[0],c=d[1],n&&(a=a[0],c=c[0]),k=[a,c],l.invert&&(a=l(a),c=l(c)),c<a&&(e=a,a=c,c=e),a!=r[0]||c!=r[1])&&(r=[a,
c]);n&&(g=d[0],f=d[1],l&&(g=g[1],f=f[1]),u=[g,f],n.invert&&(g=n(g),f=n(f)),f<g&&(e=g,g=f,f=e),g!=t[0]||f!=t[1])&&(t=[g,f]);return b};b.clear=function(){b.empty()||(r=[0,0],t=[0,0],k=u=null);return b};b.empty=function(){return!!l&&r[0]==r[1]||!!n&&t[0]==t[1]};return z.rebind(b,h,"on")};var Ai={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ae=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],be=ba.format=$f.timeFormat,
mg=be.utc,ng=mg("%Y-%m-%dT%H:%M:%S.%LZ");be.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Sd:ng;Sd.parse=function(b){b=new Date(b);return isNaN(b)?null:b};Sd.toString=ng.toString;ba.second=mb(function(b){return new Ma(1E3*Math.floor(b/1E3))},function(b,d){b.setTime(b.getTime()+1E3*Math.floor(d))},function(b){return b.getSeconds()});ba.seconds=ba.second.range;ba.seconds.utc=ba.second.utc.range;ba.minute=mb(function(b){return new Ma(6E4*Math.floor(b/6E4))},function(b,d){b.setTime(b.getTime()+
6E4*Math.floor(d))},function(b){return b.getMinutes()});ba.minutes=ba.minute.range;ba.minutes.utc=ba.minute.utc.range;ba.hour=mb(function(b){var d=b.getTimezoneOffset()/60;return new Ma(36E5*(Math.floor(b/36E5-d)+d))},function(b,d){b.setTime(b.getTime()+36E5*Math.floor(d))},function(b){return b.getHours()});ba.hours=ba.hour.range;ba.hours.utc=ba.hour.utc.range;ba.month=mb(function(b){b=ba.day(b);b.setDate(1);return b},function(b,d){b.setMonth(b.getMonth()+d)},function(b){return b.getMonth()});ba.months=
ba.month.range;ba.months.utc=ba.month.utc.range;var Kc=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],ce=[[ba.second,1],[ba.second,5],[ba.second,15],[ba.second,30],[ba.minute,1],[ba.minute,5],[ba.minute,15],[ba.minute,30],[ba.hour,1],[ba.hour,3],[ba.hour,6],[ba.hour,12],[ba.day,1],[ba.day,2],[ba.week,1],[ba.month,1],[ba.month,3],[ba.year,1]],Bi=be.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],
["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%a %d",function(b){return b.getDay()&&1!=b.getDate()}],["%b %d",function(b){return 1!=b.getDate()}],["%B",function(b){return b.getMonth()}],["%Y",Mb]]),di={range:function(b,d,a){return z.range(Math.ceil(b/a)*a,+d,a).map(ub)},floor:H,ceil:H};ce.year=ba.year;ba.scale=function(){return Td(z.scale.linear(),ce,Bi)};var og=ce.map(function(b){return[b[0].utc,b[1]]}),Ci=mg.multi([[".%L",function(b){return b.getUTCMilliseconds()}],
[":%S",function(b){return b.getUTCSeconds()}],["%I:%M",function(b){return b.getUTCMinutes()}],["%I %p",function(b){return b.getUTCHours()}],["%a %d",function(b){return b.getUTCDay()&&1!=b.getUTCDate()}],["%b %d",function(b){return 1!=b.getUTCDate()}],["%B",function(b){return b.getUTCMonth()}],["%Y",Mb]]);og.year=ba.year.utc;ba.scale.utc=function(){return Td(z.scale.linear(),og,Ci)};z.text=fd(function(b){return b.responseText});z.json=function(b,d){return Jb(b,"application/json",ei,d)};z.html=function(b,
d){return Jb(b,"text/html",fi,d)};z.xml=fd(function(b){return b.responseXML});"function"===typeof define&&define.amd?(this.d3=z,define(z)):"object"===typeof module&&module.exports?module.exports=z:this.d3=z}();
(function(){var e={dev:!1};e.tooltip=e.tooltip||{};e.utils=e.utils||{};e.models=e.models||{};e.charts={};e.logs={};e.dom={};"undefined"!==typeof module&&"undefined"!==typeof exports&&"undefined"==typeof d3&&(d3=require("d3"));e.dispatch=d3.dispatch("render_start","render_end");Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var c=Array.prototype.slice.call(arguments,
1),e=this,p=function(){},h=function(){return e.apply(this instanceof p&&a?this:a,c.concat(Array.prototype.slice.call(arguments)))};p.prototype=this.prototype;h.prototype=new p;return h});e.dev&&(e.dispatch.on("render_start",function(a){e.logs.startTime=+new Date}),e.dispatch.on("render_end",function(a){e.logs.endTime=+new Date;e.logs.totalTime=e.logs.endTime-e.logs.startTime;e.log("total",e.logs.totalTime)}));e.log=function(){e.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,
arguments):e.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments);return arguments[arguments.length-1]};e.deprecated=function(a,c){console&&console.warn&&console.warn("nvd3 warning: `"+a+"` has been deprecated. ",c||"")};e.render=function(a){a=a||1;e.render.active=!0;e.dispatch.render_start();var c=function(){for(var f,p,h=0;h<a&&(p=e.render.queue[h]);h++)f=p.generate(),typeof p.callback==typeof Function&&
p.callback(f);e.render.queue.splice(0,h);e.render.queue.length?setTimeout(c):(e.dispatch.render_end(),e.render.active=!1)};setTimeout(c)};e.render.active=!1;e.render.queue=[];e.addGraph=function(a,c){typeof a===typeof Function&&(a={generate:a,callback:c});e.render.queue.push(a);e.render.active||e.render()};"undefined"!==typeof module&&"undefined"!==typeof exports&&(module.exports=e);"undefined"!==typeof window&&(window.nv=e);e.dom.write=function(a){return void 0!==window.fastdom?fastdom.mutate(a):
a()};e.dom.read=function(a){return void 0!==window.fastdom?fastdom.measure(a):a()};e.interactiveGuideline=function(){function a(E){E.each(function(I){function J(){var e=d3.mouse(this),f=e[0];e=e[1];var k=!0,n=!1;A&&(f=d3.event.offsetX,e=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(k=!1),d3.event.target.className.baseVal.match("nv-legend")&&(n=!0));k&&(f-=c.left,e-=c.top);if("mouseout"===d3.event.type||0>f||0>e||f>E||e>H||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||
n)A&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(w.nvPointerEventsClass))||(q.elementMouseout({mouseX:f,mouseY:e}),a.renderGuideLine(null),w.hidden(!0));else{w.hidden(!1);if("function"===typeof h.rangeBands)if(k=d3.bisect(h.range(),f)-1,h.range()[k]+h.rangeBand()>=f)k=h.domain()[d3.bisect(h.range(),f)-1];else{q.elementMouseout({mouseX:f,mouseY:e});a.renderGuideLine(null);w.hidden(!0);return}else k=
h.invert(f);q.elementMousemove({mouseX:f,mouseY:e,pointXValue:k});"dblclick"===d3.event.type&&q.elementDblclick({mouseX:f,mouseY:e,pointXValue:k});"click"===d3.event.type&&q.elementClick({mouseX:f,mouseY:e,pointXValue:k});"mousedown"===d3.event.type&&q.elementMouseDown({mouseX:f,mouseY:e,pointXValue:k});"mouseup"===d3.event.type&&q.elementMouseUp({mouseX:f,mouseY:e,pointXValue:k})}}var G=d3.select(this),E=f||960,H=p||400,P=G.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([I]);P.enter().append("g").attr("class",
" nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine");k&&(k.on("touchmove",J).on("mousemove",J,!0).on("mouseout",J,!0).on("mousedown",J,!0).on("mouseup",J,!0).on("dblclick",J).on("click",J),a.guideLine=null,a.renderGuideLine=function(c){v&&(a.guideLine&&a.guideLine.attr("x1")===c||e.dom.write(function(){var a=P.select(".nv-interactiveGuideLine").selectAll("line").data(null!=c?[e.utils.NaNtoZero(c)]:[],String);a.enter().append("line").attr("class","nv-guideline").attr("x1",
function(a){return a}).attr("x2",function(a){return a}).attr("y1",H).attr("y2",0);a.exit().remove()}))})})}var c={left:0,top:0},f=null,p=null,h=d3.scale.linear(),q=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),v=!0,k=null,w=e.models.tooltip(),A=window.ActiveXObject;w.duration(0).hideDelay(0).hidden(!1);a.dispatch=q;a.tooltip=w;a.margin=function(e){if(!arguments.length)return c;c.top="undefined"!=typeof e.top?e.top:c.top;c.left=
"undefined"!=typeof e.left?e.left:c.left;return a};a.width=function(c){if(!arguments.length)return f;f=c;return a};a.height=function(c){if(!arguments.length)return p;p=c;return a};a.xScale=function(c){if(!arguments.length)return h;h=c;return a};a.showGuideLine=function(c){if(!arguments.length)return v;v=c;return a};a.svgContainer=function(c){if(!arguments.length)return k;k=c;return a};return a};e.interactiveBisect=function(a,c,e){if(!(a instanceof Array))return null;var f="function"!==typeof e?function(a){return a.x}:
e;e=d3.bisector(function(a,c){return f(a)-c}).left;e=d3.max([0,e(a,c)-1]);var h=f(a[e]);"undefined"===typeof h&&(h=e);if(h===c)return e;var q=d3.min([e+1,a.length-1]);a=f(a[q]);"undefined"===typeof a&&(a=q);return Math.abs(a-c)>=Math.abs(h-c)?e:q};e.nearestValueIndex=function(a,c,e){var f=Infinity,h=null;a.forEach(function(a,p){var k=Math.abs(c-a);null!=a&&k<=f&&k<e&&(f=k,h=p)});return h};e.models.tooltip=function(){function a(){if(J&&n(f))return e.dom.write(function(){A&&A.node()||(A=d3.select(document.body).select("#"+
c).data([1]),A.enter().append("div").attr("class","nvtooltip "+(v?v:"xy-tooltip")).attr("id",c).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0).classed("nv-pointer-events-none",!0),A.exit().remove());var a=M(f);a&&(A.node().innerHTML=a);R()}),a}var c="nvtooltip-"+Math.floor(1E5*Math.random()),f=null,p="w",h=25,q=0,v=null,k=!0,w=200,A=null,E=null,I=null,J=!0,G=100,D=!0,H=function(a,c){return a},P=function(a){return a},
B=function(a,c){return a},M=function(a){if(null===a)return"";var c=d3.select(document.createElement("table"));D&&c.selectAll("thead").data([a]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(P(a.value));var e=c.selectAll("tbody").data([a]).enter().append("tbody").selectAll("tr").data(function(a){return a.series}).enter().append("tr").classed("highlight",function(a){return a.highlight});e.append("td").classed("legend-color-guide",!0).append("div").style("background-color",
function(a){return a.color});e.append("td").classed("key",!0).classed("total",function(a){return!!a.total}).html(function(a,c){return B(a.key,c)});e.append("td").classed("value",!0).html(function(a,c){return H(a.value,c)});e.filter(function(a,c){return void 0!==a.percent}).append("td").classed("percent",!0).html(function(a,c){return"("+d3.format("%")(a.percent)+")"});e.selectAll("td").each(function(a){a.highlight&&(a=d3.scale.linear().domain([0,1]).range(["#fff",a.color]),d3.select(this).style("border-bottom-color",
a(.6)).style("border-top-color",a(.6)))});c=c.node().outerHTML;void 0!==a.footer&&(c+="<div class='footer'>"+a.footer+"</div>");return c},u=function(){var a={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var c=document.body.getBoundingClientRect();a.left-=c.left;a.top-=c.top}return a},n=function(a){if(a&&a.series){if(e.utils.isArray(a.series))return!0;if(e.utils.isObject(a.series))return a.series=[a.series],!0}return!1},
S=function(a){var c=A.node().offsetHeight,e=A.node().offsetWidth,f=document.documentElement.clientWidth,n=document.documentElement.clientHeight,k;switch(p){case "e":var t=-e-h;var l=-(c/2);0>a.left+t&&(t=h);0>(k=a.top+l)&&(l-=k);(k=a.top+l+c)>n&&(l-=k-n);break;case "w":t=h;l=-(c/2);a.left+t+e>f&&(t=-e-h);0>(k=a.top+l)&&(l-=k);(k=a.top+l+c)>n&&(l-=k-n);break;case "n":t=-(e/2)-5;l=h;a.top+l+c>n&&(l=-c-h);0>(k=a.left+t)&&(t-=k);(k=a.left+t+e)>f&&(t-=k-f);break;case "s":t=-(e/2);l=-c-h;0>a.top+l&&(l=
h);0>(k=a.left+t)&&(t-=k);(k=a.left+t+e)>f&&(t-=k-f);break;case "center":t=-(e/2);l=-(c/2);break;default:l=t=0}return{left:t,top:l}},R=function(){e.dom.read(function(){var a=u(),c=S(a),e=a.left+c.left;a=a.top+c.top;if(k)A.interrupt().transition().delay(w).duration(0).style("opacity",0);else{c="translate("+Math.round(e)+"px, "+Math.round(a)+"px)";var f=d3.interpolateString("translate("+E+"px, "+I+"px)",c),h=.1>A.style("opacity");A.interrupt().transition().duration(h?0:G).styleTween("transform",function(a){return f},
"important").styleTween("-webkit-transform",function(a){return f}).style("-ms-transform",c).style("opacity",1)}E=e;I=a})};a.nvPointerEventsClass="nv-pointer-events-none";a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{duration:{get:function(){return G},set:function(a){G=a}},gravity:{get:function(){return p},set:function(a){p=a}},distance:{get:function(){return h},set:function(a){h=a}},snapDistance:{get:function(){return q},set:function(a){q=a}},classes:{get:function(){return v},
set:function(a){v=a}},enabled:{get:function(){return J},set:function(a){J=a}},hideDelay:{get:function(){return w},set:function(a){w=a}},contentGenerator:{get:function(){return M},set:function(a){M=a}},valueFormatter:{get:function(){return H},set:function(a){H=a}},headerFormatter:{get:function(){return P},set:function(a){P=a}},keyFormatter:{get:function(){return B},set:function(a){B=a}},headerEnabled:{get:function(){return D},set:function(a){D=a}},position:{get:function(){return u},set:function(a){u=
a}},chartContainer:{get:function(){return document.body},set:function(a){e.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(a){e.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(a){e.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return k},set:function(c){k!=c&&(k=!!c,a())}},data:{get:function(){return f},set:function(a){a.point&&(a.value=
a.point.x,a.series=a.series||{},a.series.value=a.point.y,a.series.color=a.point.color||a.series.color);f=a}},node:{get:function(){return A.node()},set:function(a){}},id:{get:function(){return c},set:function(a){}}});e.utils.initOptions(a);return a};e.utils.windowSize=function(){var a={width:640,height:480};if(window.innerWidth&&window.innerHeight)return a.width=window.innerWidth,a.height=window.innerHeight,a;if("CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth)return a.width=
document.documentElement.offsetWidth,a.height=document.documentElement.offsetHeight,a;document.body&&document.body.offsetWidth&&(a.width=document.body.offsetWidth,a.height=document.body.offsetHeight);return a};e.utils.isArray=Array.isArray;e.utils.isObject=function(a){return null!==a&&"object"===typeof a};e.utils.isFunction=function(a){return"function"===typeof a};e.utils.isDate=function(a){return"[object Date]"===toString.call(a)};e.utils.isNumber=function(a){return!isNaN(a)&&"number"===typeof a};
e.utils.windowResize=function(a){window.addEventListener?window.addEventListener("resize",a):e.log("ERROR: Failed to bind to window.resize with: ",a);return{callback:a,clear:function(){window.removeEventListener("resize",a)}}};e.utils.getColor=function(a){if(void 0===a)return e.utils.defaultColor();if(e.utils.isArray(a)){var c=d3.scale.ordinal().range(a);return function(a,e){return a.color||c(void 0===e?a:e)}}return a};e.utils.defaultColor=function(){return e.utils.getColor(d3.scale.category20().range())};
e.utils.customTheme=function(a,c,f){c=c||function(a){return a.key};f=f||d3.scale.category20().range();var p=f.length;return function(h,q){h=c(h);if(e.utils.isFunction(a[h]))return a[h]();if(void 0!==a[h])return a[h];p||(p=f.length);--p;return f[p]}};e.utils.pjax=function(a,c){var f=function(f){d3.html(f,function(f){var h=d3.select(c).node();h.parentNode.replaceChild(d3.select(f).select(c).node(),h);e.utils.pjax(a,c)})};d3.selectAll(a).on("click",function(){history.pushState(this.href,this.textContent,
this.href);f(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&f(d3.event.state)})};e.utils.calcApproxTextWidth=function(a){if(e.utils.isFunction(a.style)&&e.utils.isFunction(a.text)){var c=parseInt(a.style("font-size").replace("px",""),10);a=a.text().length;return e.utils.NaNtoZero(a*c*.5)}return 0};e.utils.NaNtoZero=function(a){return!e.utils.isNumber(a)||isNaN(a)||null===a||Infinity===a||-Infinity===a?0:a};d3.selection.prototype.watchTransition=function(a){var c=
[this].concat([].slice.call(arguments,1));return a.transition.apply(a,c)};e.utils.renderWatch=function(a,c){if(!(this instanceof e.utils.renderWatch))return new e.utils.renderWatch(a,c);var f=void 0!==c?c:250,p=[],h=this;this.models=function(a){a=[].slice.call(arguments,0);a.forEach(function(a){a.__rendered=!1;(function(a){a.dispatch.on("renderEnd",function(c){a.__rendered=!0;h.renderEnd("model")})})(a);0>p.indexOf(a)&&p.push(a)});return this};this.reset=function(a){void 0!==a&&(f=a);p=[]};this.transition=
function(a,c,e){c=1<arguments.length?[].slice.call(arguments,1):[];e=1<c.length?c.pop():void 0!==f?f:250;a.__rendered=!1;0>p.indexOf(a)&&p.push(a);if(0===e)return a.__rendered=!0,a.delay=function(){return this},a.duration=function(){return this},a;0===a.length?a.__rendered=!0:a.every(function(a){return!a.length})?a.__rendered=!0:a.__rendered=!1;var k=0;return a.transition().duration(e).each(function(){++k}).each("end",function(e,f){0===--k&&(a.__rendered=!0,h.renderEnd.apply(this,c))})};this.renderEnd=
function(){p.every(function(a){return a.__rendered})&&(p.forEach(function(a){a.__rendered=!1}),a.renderEnd.apply(this,arguments))}};e.utils.deepExtend=function(a){(1<arguments.length?[].slice.call(arguments,1):[]).forEach(function(c){for(var f in c){var p=e.utils.isArray(a[f]),h=e.utils.isObject(a[f]),q=e.utils.isObject(c[f]);h&&!p&&q?e.utils.deepExtend(a[f],c[f]):a[f]=c[f]}})};e.utils.state=function(){if(!(this instanceof e.utils.state))return new e.utils.state;var a={},c=function(){},f=function(){return{}},
p=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(a){c(a,!0)});this.getter=function(a){f=a;return this};this.setter=function(a,e){e||(e=function(){});c=function(c,f){a(c);f&&e()};return this};this.init=function(a){p=p||{};e.utils.deepExtend(p,a)};this.update=function(){p&&(c(p,!1),p=null);var e=f();if(JSON.stringify(e)===JSON.stringify(a))e=!1;else{for(var q in e)void 0===a[q]&&(a[q]={}),a[q]=e[q];e=!0}e&&this.dispatch.change(a)}};e.utils.optionsFunc=function(a){a&&
d3.map(a).forEach(function(a,f){if(e.utils.isFunction(this[a]))this[a](f)}.bind(this));return this};e.utils.calcTicksX=function(a,c){for(var f=1,p=0;p<c.length;p+=1){var h=c[p]&&c[p].values?c[p].values.length:0;f=h>f?h:f}e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.calcTicksY=function(a,c){for(var f=1,p=0;p<c.length;p+=1)for(var h=c[p]&&c[p].values?c[p].values:[],q,v=0;v<
h.length;v+=1)q=h[v]&&h[v].value?h[v].value:0,f=q>f?q:f;e.log("Requested number of ticks: ",a);e.log("Calculated max values to be: ",f);a=a>f?a=f-1:a;a=Math.floor(1>a?1:a);e.log("Calculating tick count as: ",a);return a};e.utils.initOption=function(a,c){a._calls&&a._calls[c]?a[c]=a._calls[c]:(a[c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]=!0;a._options[c]=e;return a},a["_"+c]=function(e){if(!arguments.length)return a._options[c];a._overrides[c]||(a._options[c]=e);return a})};
e.utils.initOptions=function(a){a._overrides=a._overrides||{};var c=Object.getOwnPropertyNames(a._options||{}),f=Object.getOwnPropertyNames(a._calls||{});c=c.concat(f);for(var p in c)e.utils.initOption(a,c[p])};e.utils.inheritOptionsD3=function(a,c,e){a._d3options=e.concat(a._d3options||[]);e.unshift(c);e.unshift(a);d3.rebind.apply(this,e)};e.utils.arrayUnique=function(a){return a.sort().filter(function(c,e){return!e||c!=a[e-1]})};e.utils.symbolMap=d3.map();e.utils.symbol=function(){function a(a,
h){var p=c.call(this,a,h);a=f.call(this,a,h);return-1!==d3.svg.symbolTypes.indexOf(p)?d3.svg.symbol().type(p).size(a)():e.utils.symbolMap.get(p)(a)}var c,f=64;a.type=function(e){if(!arguments.length)return c;c=d3.functor(e);return a};a.size=function(c){if(!arguments.length)return f;f=d3.functor(c);return a};return a};e.utils.inheritOptions=function(a,c){var f=Object.getOwnPropertyNames(c._options||{}),p=Object.getOwnPropertyNames(c._calls||{}),h=c._inherited||[],q=c._d3options||[],v=f.concat(p).concat(h).concat(q);
v.unshift(c);v.unshift(a);d3.rebind.apply(this,v);a._inherited=e.utils.arrayUnique(f.concat(p).concat(h).concat(f).concat(a._inherited||[]));a._d3options=e.utils.arrayUnique(q.concat(a._d3options||[]))};e.utils.initSVG=function(a){a.classed({"nvd3-svg":!0})};e.utils.sanitizeHeight=function(a,c){return a||parseInt(c.style("height"),10)||400};e.utils.sanitizeWidth=function(a,c){return a||parseInt(c.style("width"),10)||960};e.utils.availableHeight=function(a,c,f){return Math.max(0,e.utils.sanitizeHeight(a,
c)-f.top-f.bottom)};e.utils.availableWidth=function(a,c,f){return Math.max(0,e.utils.sanitizeWidth(a,c)-f.left-f.right)};e.utils.noData=function(a,c){var f=a.options();a=f.margin();f=f.noData();f=null==f?["No Data Available."]:[f];var p=e.utils.availableHeight(null,c,a),h=e.utils.availableWidth(null,c,a);h=a.left+h/2;a=a.top+p/2;c.selectAll("g").remove();c=c.selectAll(".nv-noData").data(f);c.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");c.attr("x",
h).attr("y",a).text(function(a){return a})};e.utils.wrapTicks=function(a,c){a.each(function(){for(var a=d3.select(this),e=a.text().split(/\s+/).reverse(),h,q=[],v=0,k=a.attr("y"),w=parseFloat(a.attr("dy")),A=a.text(null).append("tspan").attr("x",0).attr("y",k).attr("dy",w+"em");h=e.pop();)q.push(h),A.text(q.join(" ")),A.node().getComputedTextLength()>c&&(q.pop(),A.text(q.join(" ")),q=[h],A=a.append("tspan").attr("x",0).attr("y",k).attr("dy",1.1*++v+w+"em").text(h))})};e.utils.arrayEquals=function(a,
c){if(a===c)return!0;if(!a||!c||a.length!=c.length)return!1;for(var f=0,p=a.length;f<p;f++)if(a[f]instanceof Array&&c[f]instanceof Array){if(!e.arrayEquals(a[f],c[f]))return!1}else if(a[f]!=c[f])return!1;return!0};e.models.axis=function(){function a(u){M.reset();u.each(function(a){var n=d3.select(this);e.utils.initSVG(n);a=n.selectAll("g.nv-wrap.nv-axis").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g");n=a.select("g");null!==J?c.ticks(J):("top"==c.orient()||"bottom"==
c.orient())&&c.ticks(Math.abs(f.range()[1]-f.range()[0])/100);n.watchTransition(M,"axis").call(c);B=B||c.scale();var u=c.tickFormat();null==u&&(u=B.tickFormat());var q=n.selectAll("text.nv-axislabel").data([v||null]);q.exit().remove();void 0!==D&&n.selectAll("g").select("text").style("font-size",D);switch(c.orient()){case "top":q.enter().append("text").attr("class","nv-axislabel");var F=0;1===f.range().length?F=I?2*f.range()[0]+f.rangeBand():0:2===f.range().length?F=I?f.range()[0]+f.range()[1]+f.rangeBand():
f.range()[1]:2<f.range().length&&(F=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));q.attr("text-anchor","middle").attr("y",0).attr("x",F/2);if(k){var y=a.selectAll("g.nv-axisMaxMin").data(f.domain());y.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text");y.exit().remove();y.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a))+",0)"}).select("text").attr("dy","-0.5em").attr("y",
-c.tickPadding()).attr("text-anchor","middle").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a});y.watchTransition(M,"min-max top").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f.range()[c])+",0)"})}break;case "bottom":y=G+36;var L=30,Q=0;F=n.selectAll("g").select("text");var K="";w%360?(F.attr("transform",""),F.each(function(a,c){a=this.getBoundingClientRect();c=a.width;Q=a.height;c>L&&(L=c)}),K="rotate("+w+" 0,"+(Q/2+c.tickPadding())+")",y=Math.abs(Math.sin(w*Math.PI/
180)),y=(y?y*L:L)+30,F.attr("transform",K).style("text-anchor",0<w%360?"start":"end")):E?F.attr("transform",function(a,c){return"translate(0,"+(0==c%2?"0":"12")+")"}):F.attr("transform","translate(0,0)");q.enter().append("text").attr("class","nv-axislabel");F=0;1===f.range().length?F=I?2*f.range()[0]+f.rangeBand():0:2===f.range().length?F=I?f.range()[0]+f.range()[1]+f.rangeBand():f.range()[1]:2<f.range().length&&(F=f.range()[f.range().length-1]+(f.range()[1]-f.range()[0]));q.attr("text-anchor","middle").attr("y",
y).attr("x",F/2);k&&(y=a.selectAll("g.nv-axisMaxMin").data([f.domain()[0],f.domain()[f.domain().length-1]]),y.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-x",0==c?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),y.exit().remove(),y.attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a)+(I?f.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",c.tickPadding()).attr("transform",K).style("text-anchor",w?0<w%360?"start":
"end":"middle").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),y.watchTransition(M,"min-max bottom").attr("transform",function(a,c){return"translate("+e.utils.NaNtoZero(f(a)+(I?f.rangeBand()/2:0))+",0)"}));break;case "right":q.enter().append("text").attr("class","nv-axislabel");q.style("text-anchor",A?"middle":"begin").attr("transform",A?"rotate(90)":"").attr("y",A?-Math.max(p.right,h)+12-(G||0):-10).attr("x",A?d3.max(f.range())/2:c.tickPadding());k&&(y=a.selectAll("g.nv-axisMaxMin").data(f.domain()),
y.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),y.exit().remove(),y.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(f(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",c.tickPadding()).style("text-anchor","start").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),y.watchTransition(M,"min-max right").attr("transform",function(a,c){return"translate(0,"+
e.utils.NaNtoZero(f.range()[c])+")"}).select("text").style("opacity",1));break;case "left":q.enter().append("text").attr("class","nv-axislabel"),q.style("text-anchor",A?"middle":"end").attr("transform",A?"rotate(-90)":"").attr("y",A?-Math.max(p.left,h)+25-(G||0):-10).attr("x",A?-d3.max(f.range())/2:-c.tickPadding()),k&&(y=a.selectAll("g.nv-axisMaxMin").data(f.domain()),y.enter().append("g").attr("class",function(a,c){return["nv-axisMaxMin nv-axisMaxMin-y",0==c?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",
0),y.exit().remove(),y.attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(B(a))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-c.tickPadding()).attr("text-anchor","end").text(function(a,c){a=u(a);return(""+a).match("NaN")?"":a}),y.watchTransition(M,"min-max right").attr("transform",function(a,c){return"translate(0,"+e.utils.NaNtoZero(f.range()[c])+")"}).select("text").style("opacity",1))}q.text(function(a){return a});!k||"left"!==c.orient()&&"right"!==c.orient()||
(n.selectAll("g").each(function(a,c){d3.select(this).select("text").attr("opacity",1);if(f(a)<f.range()[1]+10||f(a)>f.range()[0]-10)(1E-10<a||-1E-10>a)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),f.domain()[0]==f.domain()[1]&&0==f.domain()[0]&&a.selectAll("g.nv-axisMaxMin").style("opacity",function(a,c){return c?0:1}));if(k&&("top"===c.orient()||"bottom"===c.orient())){var t=[];a.selectAll("g.nv-axisMaxMin").each(function(a,c){try{c?t.push(f(a)-this.getBoundingClientRect().width-
4):t.push(f(a)+this.getBoundingClientRect().width+4)}catch(aa){c?t.push(f(a)-4):t.push(f(a)+4)}});n.selectAll("g").each(function(a,c){if(f(a)<t[0]||f(a)>t[1])1E-10<a||-1E-10>a?d3.select(this).remove():d3.select(this).select("text").remove()})}n.selectAll(".tick").filter(function(a){return!parseFloat(Math.round(1E5*a)/1E6)&&void 0!==a}).classed("zero",!0);B=f.copy()});M.renderEnd("axis immediate");return a}var c=d3.svg.axis(),f=d3.scale.linear(),p={top:0,right:0,bottom:0,left:0},h=75,q=60,v=null,k=
!0,w=0,A=!0,E=!1,I=!1,J=null,G=0,D=void 0,H=250,P=d3.dispatch("renderEnd");c.scale(f).orient("bottom").tickFormat(function(a){return a});var B,M=e.utils.renderWatch(P,H);a.axis=c;a.dispatch=P;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{axisLabelDistance:{get:function(){return G},set:function(a){G=a}},staggerLabels:{get:function(){return E},set:function(a){E=a}},rotateLabels:{get:function(){return w},set:function(a){w=a}},rotateYLabel:{get:function(){return A},set:function(a){A=
a}},showMaxMin:{get:function(){return k},set:function(a){k=a}},axisLabel:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return q},set:function(a){q=a}},ticks:{get:function(){return J},set:function(a){J=a}},width:{get:function(){return h},set:function(a){h=a}},fontSize:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return p},set:function(a){p.top=void 0!==a.top?a.top:p.top;p.right=void 0!==a.right?a.right:p.right;p.bottom=void 0!==a.bottom?a.bottom:p.bottom;
p.left=void 0!==a.left?a.left:p.left}},duration:{get:function(){return H},set:function(a){H=a;M.reset(H)}},scale:{get:function(){return f},set:function(h){f=h;c.scale(f);I="function"===typeof f.rangeBands;e.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"])}}});e.utils.initOptions(a);e.utils.inheritOptionsD3(a,c,"orient tickValues tickSubdivide tickSize tickPadding tickFormat".split(" "));e.utils.inheritOptionsD3(a,f,["domain","range","rangeBand","rangeBands"]);return a};e.models.boxPlot=
function(){function a(h){K.reset();h.each(function(a){var h=f-c.left-c.right,l=p-c.top-c.bottom;u=d3.select(this);e.utils.initSVG(u);q.domain(n||a.map(function(a,c){return k(a,c)})).rangeBands(S||[0,h],.1);h=[];if(!R){var t=[];a.forEach(function(a,c){c=w(a);var e=E(a),f=I(a),h=J(a);(a=D(a))&&a.forEach(function(a,c){t.push(H(a,c,void 0))});f&&t.push(f);c&&t.push(c);e&&t.push(e);h&&t.push(h)});h=d3.min(t);var T=d3.max(t);h=[h,T]}v.domain(R||h);v.range(N||[l,0]);Q=Q||v.copy().range([v(0),v(0)]);l=u.selectAll("g.nv-wrap").data([a]);
l.enter().append("g").attr("class","nvd3 nv-wrap");l.attr("transform","translate("+c.left+","+c.top+")");var r=l.selectAll(".nv-boxplot").data(function(a){return a}),U=r.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);r.attr("class","nv-boxplot").attr("transform",function(a,c,e){return"translate("+(q(k(a,c))+.05*q.rangeBand())+", 0)"}).classed("hover",function(a){return a.hover});r.watchTransition(K,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",
.75).delay(function(c,e){return e*y/a.length}).attr("transform",function(a,c){return"translate("+(q(k(a,c))+.05*q.rangeBand())+", 0)"});r.exit().remove();U.each(function(a,c){var e=d3.select(this);[I,J].forEach(function(f){void 0!==f(a)&&null!==f(a)&&(f=f===I?"low":"high",e.append("line").style("stroke",G(a)||M(a,c)).attr("class","nv-boxplot-whisker nv-boxplot-"+f),e.append("line").style("stroke",G(a)||M(a,c)).attr("class","nv-boxplot-tick nv-boxplot-"+f))})});var V=function(){return null===L?.9*
q.rangeBand():Math.min(75,.9*q.rangeBand())},ra=function(){return.45*q.rangeBand()-V()/2},Fa=function(){return.45*q.rangeBand()+V()/2};[I,J].forEach(function(a){var c=a===I?"low":"high",e=a===I?w:E;r.select("line.nv-boxplot-whisker.nv-boxplot-"+c).watchTransition(K,"nv-boxplot: boxplots").attr("x1",.45*q.rangeBand()).attr("y1",function(c,e){return v(a(c))}).attr("x2",.45*q.rangeBand()).attr("y2",function(a,c){return v(e(a))});r.select("line.nv-boxplot-tick.nv-boxplot-"+c).watchTransition(K,"nv-boxplot: boxplots").attr("x1",
ra).attr("y1",function(c,e){return v(a(c))}).attr("x2",Fa).attr("y2",function(c,e){return v(a(c))})});[I,J].forEach(function(a){U.selectAll(".nv-boxplot-"+(a===I?"low":"high")).on("mouseover",function(c,e,f){d3.select(this).classed("hover",!0);F.elementMouseover({series:{key:a(c),color:G(c)||M(c,f)},e:d3.event})}).on("mouseout",function(c,e,f){d3.select(this).classed("hover",!1);F.elementMouseout({series:{key:a(c),color:G(c)||M(c,f)},e:d3.event})}).on("mousemove",function(a,c){F.elementMousemove({e:d3.event})})});
U.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(a,c){d3.select(this).classed("hover",!0);F.elementMouseover({key:k(a),value:k(a),series:[{key:"Q3",value:E(a),color:G(a)||M(a,c)},{key:"Q2",value:A(a),color:G(a)||M(a,c)},{key:"Q1",value:w(a),color:G(a)||M(a,c)}],data:a,index:c,e:d3.event})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);F.elementMouseout({key:k(a),value:k(a),series:[{key:"Q3",value:E(a),color:G(a)||M(a,c)},{key:"Q2",value:A(a),color:G(a)||M(a,
c)},{key:"Q1",value:w(a),color:G(a)||M(a,c)}],data:a,index:c,e:d3.event})}).on("mousemove",function(a,c){F.elementMousemove({e:d3.event})});r.select("rect.nv-boxplot-box").watchTransition(K,"nv-boxplot: boxes").attr("y",function(a,c){return v(E(a))}).attr("width",V).attr("x",ra).attr("height",function(a,c){return Math.abs(v(E(a))-v(w(a)))||1}).style("fill",function(a,c){return G(a)||M(a,c)}).style("stroke",function(a,c){return G(a)||M(a,c)});U.append("line").attr("class","nv-boxplot-median");r.select("line.nv-boxplot-median").watchTransition(K,
"nv-boxplot: boxplots line").attr("x1",ra).attr("y1",function(a,c){return v(A(a))}).attr("x2",Fa).attr("y2",function(a,c){return v(A(a))});l=r.selectAll(".nv-boxplot-outlier").data(function(a){return D(a)||[]});l.enter().append("circle").style("fill",function(a,c,e){return B(a,c,e)||M(a,e)}).style("stroke",function(a,c,e){return B(a,c,e)||M(a,e)}).style("z-index",9E3).on("mouseover",function(a,c,e){d3.select(this).classed("hover",!0);F.elementMouseover({series:{key:P(a,c,e),color:B(a,c,e)||M(a,e)},
e:d3.event})}).on("mouseout",function(a,c,e){d3.select(this).classed("hover",!1);F.elementMouseout({series:{key:P(a,c,e),color:B(a,c,e)||M(a,e)},e:d3.event})}).on("mousemove",function(a,c){F.elementMousemove({e:d3.event})});l.attr("class","nv-boxplot-outlier");l.watchTransition(K,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*q.rangeBand()).attr("cy",function(a,c,e){return v(H(a,c,e))}).attr("r","3");l.exit().remove();q.copy();Q=v.copy()});K.renderEnd("nv-boxplot immediate");return a}var c={top:0,
right:0,bottom:0,left:0},f=960,p=500,h=Math.floor(1E4*Math.random()),q=d3.scale.ordinal(),v=d3.scale.linear(),k=function(a){return a.label},w=function(a){return a.values.Q1},A=function(a){return a.values.Q2},E=function(a){return a.values.Q3},I=function(a){return a.values.whisker_low},J=function(a){return a.values.whisker_high},G=function(a){return a.color},D=function(a){return a.values.outliers},H=function(a,c,e){return a},P=function(a,c,e){return a},B=function(a,c,e){},M=e.utils.defaultColor(),u=
null,n,S,R,N,F=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),y=250,L=null,Q,K=e.utils.renderWatch(F,y);a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},maxBoxWidth:{get:function(){return L},set:function(a){L=a}},x:{get:function(){return k},set:function(a){k=a}},q1:{get:function(){return w},set:function(a){w=a}},q2:{get:function(){return A},
set:function(a){A=a}},q3:{get:function(){return E},set:function(a){E=a}},wl:{get:function(){return I},set:function(a){I=a}},wh:{get:function(){return J},set:function(a){J=a}},itemColor:{get:function(){return G},set:function(a){G=a}},outliers:{get:function(){return D},set:function(a){D=a}},outlierValue:{get:function(){return H},set:function(a){H=a}},outlierLabel:{get:function(){return P},set:function(a){P=a}},outlierColor:{get:function(){return B},set:function(a){B=a}},xScale:{get:function(){return q},
set:function(a){q=a}},yScale:{get:function(){return v},set:function(a){v=a}},xDomain:{get:function(){return n},set:function(a){n=a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return S},set:function(a){S=a}},yRange:{get:function(){return N},set:function(a){N=a}},id:{get:function(){return h},set:function(a){h=a}},y:{get:function(){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.");return{}},set:function(a){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},
margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}},duration:{get:function(){return y},set:function(a){y=a;K.reset(y)}}});e.utils.initOptions(a);return a};e.models.boxPlotChart=function(){function a(k){M.reset();M.models(c);w&&M.models(f);A&&M.models(p);k.each(function(n){var k=
d3.select(this);e.utils.initSVG(k);var u=(q||parseInt(k.style("width"))||960)-h.left-h.right,N=(v||parseInt(k.style("height"))||400)-h.top-h.bottom;a.update=function(){P.beforeUpdate();k.transition().duration(B).call(a)};a.container=this;if(n&&n.length)k.selectAll(".nv-noData").remove();else return n=k.selectAll(".nv-noData").data([H]),n.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),n.attr("x",h.left+u/2).attr("y",h.top+N/2).text(function(a){return a}),
a;G=c.xScale();D=c.yScale().clamp(!0);var F=k.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([n]),y=F.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),L=y.append("defs");F=F.select("g");y.append("g").attr("class","nv-x nv-axis");y.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");y.append("g").attr("class","nv-barsWrap");F.attr("transform","translate("+h.left+","+h.top+")");E&&F.select(".nv-y.nv-axis").attr("transform","translate("+
u+",0)");c.width(u).height(N);F.select(".nv-barsWrap").datum(n.filter(function(a){return!a.disabled})).transition().call(c);L.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");F.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",G.rangeBand()*(I?2:1)).attr("height",16).attr("x",-G.rangeBand()/(I?1:2));w&&(f.scale(G).ticks(e.utils.calcTicksX(u/100,n)).tickSize(-N,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),F.select(".nv-x.nv-axis").call(f),
n=F.select(".nv-x.nv-axis").selectAll("g"),I&&n.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0===e%2?"5":"17")+")"}));A&&(p.scale(D).ticks(Math.floor(N/36)).tickSize(-u,0),F.select(".nv-y.nv-axis").call(p));F.select(".nv-zeroLine line").attr("x1",0).attr("x2",u).attr("y1",D(0)).attr("y2",D(0))});M.renderEnd("nv-boxplot chart immediate");return a}var c=e.models.boxPlot(),f=e.models.axis(),p=e.models.axis(),h={top:15,right:10,bottom:50,left:60},q=null,v=null,k=e.utils.getColor(),
w=!0,A=!0,E=!1,I=!1,J=e.models.tooltip(),G,D,H="No Data Available.",P=d3.dispatch("beforeUpdate","renderEnd"),B=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});p.orient(E?"right":"left").tickFormat(d3.format(",.1f"));J.duration(0);var M=e.utils.renderWatch(P,B);c.dispatch.on("elementMouseover.tooltip",function(a){J.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){J.data(a).hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){J()});a.dispatch=
P;a.boxplot=c;a.xAxis=f;a.yAxis=p;a.tooltip=J;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return q},set:function(a){q=a}},height:{get:function(){return v},set:function(a){v=a}},staggerLabels:{get:function(){return I},set:function(a){I=a}},showXAxis:{get:function(){return w},set:function(a){w=a}},showYAxis:{get:function(){return A},set:function(a){A=a}},tooltipContent:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return H},set:function(a){H=
a}},margin:{get:function(){return h},set:function(a){h.top=void 0!==a.top?a.top:h.top;h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},duration:{get:function(){return B},set:function(a){B=a;M.reset(B);c.duration(B);f.duration(B);p.duration(B)}},color:{get:function(){return k},set:function(a){k=e.utils.getColor(a);c.color(k)}},rightAlignYAxis:{get:function(){return E},set:function(a){E=a;p.orient(a?"right":"left")}}});e.utils.inheritOptions(a,
c);e.utils.initOptions(a);return a};e.models.bullet=function(){function a(a,c){var e=a.slice();a.sort(function(a,f){a=e.indexOf(a);f=e.indexOf(f);return d3.descending(c[a],c[f])})}function c(p){p.each(function(c,n){var p=A-f.left-f.right,u=E-f.top-f.bottom;I=d3.select(this);e.utils.initSVG(I);var N=q.call(this,c,n).slice(),F=v.call(this,c,n).slice(),y=(c.markerLines?c.markerLines:[0]).slice(),L=k.call(this,c,n).slice(),Q=(c.rangeLabels?c.rangeLabels:[]).slice(),K=(c.markerLabels?c.markerLabels:[]).slice(),
t=(c.markerLineLabels?c.markerLineLabels:[]).slice(),l=(c.measureLabels?c.measureLabels:[]).slice();a(Q,N);a(K,F);a(t,y);a(l,L);N.sort(d3.descending);F.sort(d3.descending);y.sort(d3.descending);L.sort(d3.descending);var M=d3.scale.linear().domain(d3.extent(d3.merge([w,N]))).range(h?[p,0]:[0,p]);this.__chart__||d3.scale.linear().domain([0,Infinity]).range(M.range());this.__chart__=M;d3.min(N);d3.max(N);c=I.selectAll("g.nv-wrap.nv-bullet").data([c]);p=c.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g");
var J=c.select("g");n=0;for(var X=N.length;n<X;n++){var T="nv-range nv-range"+n;2>=n&&(T=T+" nv-range"+P[n]);p.append("rect").attr("class",T)}p.append("rect").attr("class","nv-measure");c.attr("transform","translate("+f.left+","+f.top+")");n=0;for(X=N.length;n<X;n++)T=N[n],J.select("rect.nv-range"+n).datum(T).attr("height",u).transition().duration(B).attr("width",Math.abs(M(T)-M(0))).attr("x",0>T?M(T):M(0));J.select("rect.nv-measure").style("fill",G).attr("height",u/3).attr("y",u/3).on("mouseover",
function(){D.elementMouseover({value:L[0],label:l[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){D.elementMousemove({value:L[0],label:l[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){D.elementMouseout({value:L[0],label:l[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(B).attr("width",0>L?M(0)-M(L[0]):M(L[0])-M(0)).attr("x",0>L?M(L):M(0));n=u/6;F=F.map(function(a,c){return{value:a,label:K[c]}});p.selectAll("path.nv-markerTriangle").data(F).enter().append("path").attr("class",
"nv-markerTriangle").attr("d","M0,"+n+"L"+n+","+-n+" "+-n+","+-n+"Z").on("mouseover",function(a){D.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[M(a.value),u/2]})}).on("mousemove",function(a){D.elementMousemove({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});J.selectAll("path.nv-markerTriangle").data(F).transition().duration(B).attr("transform",
function(a){return"translate("+M(a.value)+","+u/2+")"});y=y.map(function(a,c){return{value:a,label:t[c]}});p.selectAll("line.nv-markerLine").data(y).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(a){return M(a.value)}).attr("y1","2").attr("x2",function(a){return M(a.value)}).attr("y2",u-2).on("mouseover",function(a){D.elementMouseover({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill"),pos:[M(a.value),u/2]})}).on("mousemove",function(a){D.elementMousemove({value:a.value,
label:a.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a.value,label:a.label||"Previous",color:d3.select(this).style("fill")})});J.selectAll("line.nv-markerLine").data(y).transition().duration(B).attr("x1",function(a){return M(a.value)}).attr("x2",function(a){return M(a.value)});c.selectAll(".nv-range").on("mouseover",function(a,c){D.elementMouseover({value:a,label:Q[c]||H[c],color:d3.select(this).style("fill")})}).on("mousemove",function(){D.elementMousemove({value:L[0],
label:l[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){D.elementMouseout({value:a,label:Q[c]||H[c],color:d3.select(this).style("fill")})})});return c}var f={top:0,right:0,bottom:0,left:0},p="left",h=!1,q=function(a){return a.ranges},v=function(a){return a.markers?a.markers:[]},k=function(a){return a.measures},w=[0],A=380,E=30,I=null,J=null,G=e.utils.getColor(["#1f77b4"]),D=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),H=["Maximum","Mean",
"Minimum"],P=["Max","Avg","Min"],B=1E3;c.dispatch=D;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{ranges:{get:function(){return q},set:function(a){q=a}},markers:{get:function(){return v},set:function(a){v=a}},measures:{get:function(){return k},set:function(a){k=a}},forceX:{get:function(){return w},set:function(a){w=a}},width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return E},set:function(a){E=a}},tickFormat:{get:function(){return J},set:function(a){J=
a}},duration:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},orient:{get:function(){return p},set:function(a){p=a;h="right"==p||"bottom"==p}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a)}}});e.utils.initOptions(c);return c};e.models.bulletChart=function(){function a(f){f.each(function(p,
B){var H=d3.select(this);e.utils.initSVG(H);var u=e.utils.availableWidth(A,H,q),n=E-q.top-q.bottom;a.update=function(){a(f)};a.container=this;if(p&&v.call(this,p,B))H.selectAll(".nv-noData").remove();else return e.utils.noData(a,H),a;var S=v.call(this,p,B).slice().sort(d3.descending),R=k.call(this,p,B).slice().sort(d3.descending);B=w.call(this,p,B).slice().sort(d3.descending);H=H.selectAll("g.nv-wrap.nv-bulletChart").data([p]);var N=H.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g");
p=H.select("g");N.append("g").attr("class","nv-bulletWrap");N.append("g").attr("class","nv-titles");H.attr("transform","translate("+q.left+","+q.top+")");var F=d3.scale.linear().domain([0,Math.max(S[0],R[0]||0,B[0])]).range(h?[u,0]:[0,u]),y=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(F.range());this.__chart__=F;S=N.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(E-q.top-q.bottom)/2+")");S.append("text").attr("class","nv-title").text(function(a){return a.title});
S.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(a){return a.subtitle});c.width(u).height(n);S=p.select(".nv-bulletWrap");d3.transition(S).call(c);var L=I||F.tickFormat(u/100);u=p.selectAll("g.nv-tick").data(F.ticks(J?J:u/50),function(a){return this.textContent||L(a)});S=u.enter().append("g").attr("class","nv-tick").attr("transform",function(a){return"translate("+y(a)+",0)"}).style("opacity",1E-6);S.append("line").attr("y1",n).attr("y2",7*n/6);S.append("text").attr("text-anchor",
"middle").attr("dy","1em").attr("y",7*n/6).text(L);S=d3.transition(u).transition().duration(c.duration()).attr("transform",function(a){return"translate("+F(a)+",0)"}).style("opacity",1);S.select("line").attr("y1",n).attr("y2",7*n/6);S.select("text").attr("y",7*n/6);d3.transition(u.exit()).transition().duration(c.duration()).attr("transform",function(a){return"translate("+F(a)+",0)"}).style("opacity",1E-6).remove()});d3.timer.flush();return a}var c=e.models.bullet(),f=e.models.tooltip(),p="left",h=
!1,q={top:5,right:40,bottom:20,left:120},v=function(a){return a.ranges},k=function(a){return a.markers?a.markers:[]},w=function(a){return a.measures},A=null,E=55,I=null,J=null,G=null,D=d3.dispatch();f.duration(0).headerEnabled(!1);c.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:a.label,value:a.value,color:a.color};f.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){f()});a.bullet=c;a.dispatch=
D;a.tooltip=f;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{ranges:{get:function(){return v},set:function(a){v=a}},markers:{get:function(){return k},set:function(a){k=a}},measures:{get:function(){return w},set:function(a){w=a}},width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return E},set:function(a){E=a}},tickFormat:{get:function(){return I},set:function(a){I=a}},ticks:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return G},
set:function(a){G=a}},margin:{get:function(){return q},set:function(a){q.top=void 0!==a.top?a.top:q.top;q.right=void 0!==a.right?a.right:q.right;q.bottom=void 0!==a.bottom?a.bottom:q.bottom;q.left=void 0!==a.left?a.left:q.left}},orient:{get:function(){return p},set:function(a){p=a;h="right"==p||"bottom"==p}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.candlestickBar=function(){function a(u){u.each(function(a){q=d3.select(this);var u=e.utils.availableWidth(f,q,c),y=e.utils.availableHeight(p,
q,c);e.utils.initSVG(q);var t=u/a[0].values.length*.45;v.domain(n||d3.extent(a[0].values.map(w).concat(D)));P?v.range(R||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):v.range(R||[5+t/2,u-t/2-5]);k.domain(S||[d3.min(a[0].values.map(G).concat(H)),d3.max(a[0].values.map(J).concat(H))]).range(N||[y,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?
k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));a=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([a[0].values]);var l=a.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),L=l.append("defs");l=l.append("g");var M=a.select("g");l.append("g").attr("class","nv-ticks");a.attr("transform","translate("+c.left+","+c.top+")");q.on("click",function(a,c){F.chartClick({data:a,index:c,pos:d3.event,id:h})});L.append("clipPath").attr("id",
"nv-chart-clip-path-"+h).append("rect");a.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",y);M.attr("clip-path",B?"url(#nv-chart-clip-path-"+h+")":"");u=a.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});u.exit().remove();y=u.enter().append("g");u.attr("class",function(a,c,e){return(E(a,c)>I(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c});y.append("line").attr("class","nv-candlestick-lines").attr("transform",function(a,c){return"translate("+
v(w(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(J(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(G(a,c))});y.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(a,c){return"translate("+(v(w(a,c))-t/2)+","+(k(A(a,c))-(E(a,c)>I(a,c)?k(I(a,c))-k(E(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",t).attr("height",function(a,c){var e=E(a,c);a=I(a,c);return e>a?k(a)-k(e):k(e)-k(a)});u.select(".nv-candlestick-lines").transition().attr("transform",
function(a,c){return"translate("+v(w(a,c))+",0)"}).attr("x1",0).attr("y1",function(a,c){return k(J(a,c))}).attr("x2",0).attr("y2",function(a,c){return k(G(a,c))});u.select(".nv-candlestick-rects").transition().attr("transform",function(a,c){return"translate("+(v(w(a,c))-t/2)+","+(k(A(a,c))-(E(a,c)>I(a,c)?k(I(a,c))-k(E(a,c)):0))+")"}).attr("x",0).attr("y",0).attr("width",t).attr("height",function(a,c){var e=E(a,c);a=I(a,c);return e>a?k(a)-k(e):k(e)-k(a)})});return a}var c={top:0,right:0,bottom:0,left:0},
f=null,p=null,h=Math.floor(1E4*Math.random()),q,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},E=function(a){return a.open},I=function(a){return a.close},J=function(a){return a.high},G=function(a){return a.low},D=[],H=[],P=!1,B=!0,M=e.utils.defaultColor(),u=!1,n,S,R,N,F=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();
q.select(".nv-candlestickBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){q.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)};a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return n},set:function(a){n=
a}},yDomain:{get:function(){return S},set:function(a){S=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return N},set:function(a){N=a}},forceX:{get:function(){return D},set:function(a){D=a}},forceY:{get:function(){return H},set:function(a){H=a}},padData:{get:function(){return P},set:function(a){P=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return u},set:function(a){u=a}},
x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return A},set:function(a){A=a}},open:{get:function(){return E()},set:function(a){E=a}},close:{get:function(){return I()},set:function(a){I=a}},high:{get:function(){return J},set:function(a){J=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?
a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.cumulativeLineChart=function(){function a(l){X.reset();X.models(f);H&&X.models(p);P&&X.models(h);l.each(function(l){function w(){Aa.data([aa]);var c=a.duration();a.duration(0);a.update();a.duration(c)}var L=d3.select(this);e.utils.initSVG(L);L.classed("nv-chart-"+N,!0);var V=e.utils.availableWidth(J,L,A),U=e.utils.availableHeight(G,L,A);a.update=function(){0===t?L.call(a):
L.transition().duration(t).call(a)};a.container=this;F.setter(r(l),a.update).getter(T(l)).update();F.disabled=l.map(function(a){return!!a.disabled});if(!y)for(ra in y={},F)y[ra]=F[ra]instanceof Array?F[ra].slice(0):F[ra];var ra=d3.behavior.drag().on("dragstart",function(c,e){d3.select(a.container).style("cursor","ew-resize")}).on("drag",function(a,c){aa.x=d3.event.x;aa.i=Math.round(Z.invert(aa.x));w()}).on("dragend",function(c,e){d3.select(a.container).style("cursor","auto");F.index=aa.i;K.stateChange(F)});
if(l&&l.length&&l.filter(function(a){return a.values.length}).length)L.selectAll(".nv-noData").remove();else return e.utils.noData(a,L),a;S=f.xScale();R=f.yScale();if(n)f.yDomain(null);else{var X=l.filter(function(a){return!a.disabled}).map(function(a,c){a=d3.extent(a.values,f.y());-.95>a[0]&&(a[0]=-.95);return[(a[0]-a[1])/(1+a[1]),(a[1]-a[0])/(1+a[0])]});X=[d3.min(X,function(a){return a[0]}),d3.max(X,function(a){return a[1]})];f.yDomain(X)}Z.domain([0,l[0].values.length-1]).range([0,V]).clamp(!0);
l=c(aa.i,l);var ia=u?"none":"all",da=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([l]),ha=da.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g");X=da.select("g");ha.append("g").attr("class","nv-interactive");ha.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");ha.append("g").attr("class","nv-y nv-axis");ha.append("g").attr("class","nv-background");ha.append("g").attr("class","nv-linesWrap").style("pointer-events",ia);ha.append("g").attr("class",
"nv-avgLinesWrap").style("pointer-events","none");ha.append("g").attr("class","nv-legendWrap");ha.append("g").attr("class","nv-controlsWrap");D?(q.width(V),X.select(".nv-legendWrap").datum(l).call(q),E||q.height()===A.top||(A.top=q.height(),U=e.utils.availableHeight(G,L,A)),X.select(".nv-legendWrap").attr("transform","translate(0,"+-A.top+")")):X.select(".nv-legendWrap").selectAll("*").remove();M?(ia=[{key:"Re-scale y-axis",disabled:!n}],v.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,
right:0,bottom:5,left:20}),X.select(".nv-controlsWrap").datum(ia).attr("transform","translate(0,"+-A.top+")").call(v)):X.select(".nv-controlsWrap").selectAll("*").remove();da.attr("transform","translate("+A.left+","+A.top+")");B&&X.select(".nv-y.nv-axis").attr("transform","translate("+V+",0)");ia=l.filter(function(a){return a.tempDisabled});da.select(".tempDisabled").remove();ia.length&&da.append("text").attr("class","tempDisabled").attr("x",V/2).attr("y","-.71em").style("text-anchor","end").text(ia.map(function(a){return a.key}).join(", ")+
" values cannot be calculated for this time period.");u&&(k.width(V).height(U).margin({left:A.left,top:A.top}).svgContainer(L).xScale(S),da.select(".nv-interactive").call(k));ha.select(".nv-background").append("rect");X.select(".nv-background rect").attr("width",V).attr("height",U);f.y(function(a){return a.display.y}).width(V).height(U).color(l.map(function(a,c){return a.color||I(a,c)}).filter(function(a,c){return!l[c].disabled&&!l[c].tempDisabled}));da=X.select(".nv-linesWrap").datum(l.filter(function(a){return!a.disabled&&
!a.tempDisabled}));da.call(f);l.forEach(function(a,c){a.seriesIndex=c});ha=l.filter(function(a){return!a.disabled&&!!Q(a)});ha=X.select(".nv-avgLinesWrap").selectAll("line").data(ha,function(a){return a.key});ia=function(a){a=R(Q(a));return 0>a?0:a>U?U:a};ha.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(a,c){return f.color()(a,a.seriesIndex)}).attr("x1",0).attr("x2",V).attr("y1",ia).attr("y2",ia);ha.style("stroke-opacity",function(a){a=R(Q(a));
return 0>a||a>U?0:1}).attr("x1",0).attr("x2",V).attr("y1",ia).attr("y2",ia);ha.exit().remove();var Aa=da.selectAll(".nv-indexLine").data([aa]);Aa.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(ra);Aa.attr("transform",function(a){return"translate("+Z(a.i)+",0)"}).attr("height",U);H&&(p.scale(S)._ticks(e.utils.calcTicksX(V/70,l)).tickSize(-U,0),X.select(".nv-x.nv-axis").attr("transform","translate(0,"+
R.range()[0]+")"),X.select(".nv-x.nv-axis").call(p));P&&(h.scale(R)._ticks(e.utils.calcTicksY(U/36,l)).tickSize(-V,0),X.select(".nv-y.nv-axis").call(h));X.select(".nv-background rect").on("click",function(){aa.x=d3.mouse(this)[0];aa.i=Math.round(Z.invert(aa.x));F.index=aa.i;K.stateChange(F);w()});f.dispatch.on("elementClick",function(a){aa.i=a.pointIndex;aa.x=Z(aa.i);F.index=aa.i;K.stateChange(F);w()});v.dispatch.on("legendClick",function(c,e){c.disabled=!c.disabled;n=!c.disabled;F.rescaleY=n;K.stateChange(F);
a.update()});q.dispatch.on("stateChange",function(c){for(var e in c)F[e]=c[e];K.stateChange(F);a.update()});k.dispatch.on("elementMousemove",function(c){f.clearHighlights();var n,r,t,u=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,l){r=e.interactiveBisect(h.values,c.pointXValue,a.x());f.highlightPoint(l,r,!0);l=h.values[r];"undefined"!==typeof l&&("undefined"===typeof n&&(n=l),"undefined"===typeof t&&(t=a.xScale()(a.x()(l,r))),u.push({key:h.key,value:a.y()(l,r),
color:I(h,h.seriesIndex)}))});if(2<u.length){var q=a.yScale().invert(c.mouseY),K=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]);q=e.nearestValueIndex(u.map(function(a){return a.value}),q,K);null!==q&&(u[q].highlight=!0)}q=p.tickFormat()(a.x()(n,r),r);k.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:q,series:u})();k.renderGuideLine(t)});k.dispatch.on("elementMouseout",function(a){f.clearHighlights()});K.on("changeState",function(c){"undefined"!==typeof c.disabled&&
(l.forEach(function(a,e){a.disabled=c.disabled[e]}),F.disabled=c.disabled);"undefined"!==typeof c.index&&(aa.i=c.index,aa.x=Z(aa.i),F.index=c.index,Aa.data([aa]));"undefined"!==typeof c.rescaleY&&(n=c.rescaleY);a.update()})});X.renderEnd("cumulativeLineChart immediate");return a}function c(a,c){U||(U=f.y());return c.map(function(c,e){if(!c.values)return c;e=c.values[a];if(null==e)return c;var f=U(e,a);if(-.95>f&&!l)return c.tempDisabled=!0,c;c.tempDisabled=!1;c.values=c.values.map(function(a,c){a.display=
{y:(U(a,c)-f)/(1+f)};return a});return c})}var f=e.models.line(),p=e.models.axis(),h=e.models.axis(),q=e.models.legend(),v=e.models.legend(),k=e.interactiveGuideline(),w=e.models.tooltip(),A={top:30,right:30,bottom:50,left:60},E=null,I=e.utils.defaultColor(),J=null,G=null,D=!0,H=!0,P=!0,B=!1,M=!0,u=!1,n=!0,S,R,N=f.id(),F=e.utils.state(),y=null,L=null,Q=function(a){return a.average},K=d3.dispatch("stateChange","changeState","renderEnd"),t=250,l=!1;F.index=0;F.rescaleY=n;p.orient("bottom").tickPadding(7);
h.orient(B?"right":"left");w.valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,c){return p.tickFormat()(a,c)});v.updateState(!1);var Z=d3.scale.linear(),aa={i:0,x:0},X=e.utils.renderWatch(K,t),T=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),index:aa.i,rescaleY:n}}},r=function(a){return function(c){void 0!==c.index&&(aa.i=c.index);void 0!==c.rescaleY&&(n=c.rescaleY);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};
f.dispatch.on("elementMouseover.tooltip",function(c){var e={x:a.x()(c.point),y:a.y()(c.point),color:c.point.color};c.point=e;w.data(c).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){w.hidden(!0)});var U=null;a.dispatch=K;a.lines=f;a.legend=q;a.controls=v;a.xAxis=p;a.yAxis=h;a.interactiveLayer=k;a.state=F;a.tooltip=w;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return J},set:function(a){J=a}},height:{get:function(){return G},set:function(a){G=
a}},rescaleY:{get:function(){return n},set:function(a){n=a}},showControls:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return D},set:function(a){D=a}},average:{get:function(){return Q},set:function(a){Q=a}},defaultState:{get:function(){return y},set:function(a){y=a}},noData:{get:function(){return L},set:function(a){L=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return P},set:function(a){P=a}},noErrorCheck:{get:function(){return l},
set:function(a){l=a}},margin:{get:function(){return A},set:function(a){void 0!==a.top&&(E=A.top=a.top);A.right=void 0!==a.right?a.right:A.right;A.bottom=void 0!==a.bottom?a.bottom:A.bottom;A.left=void 0!==a.left?a.left:A.left}},color:{get:function(){return I},set:function(a){I=e.utils.getColor(a);q.color(I)}},useInteractiveGuideline:{get:function(){return u},set:function(c){u=c;!0===c&&(a.interactive(!1),a.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;h.orient(a?
"right":"left")}},duration:{get:function(){return t},set:function(a){t=a;f.duration(t);p.duration(t);h.duration(t);X.reset(t)}}});e.utils.inheritOptions(a,f);e.utils.initOptions(a);return a};e.models.discreteBar=function(){function a(h){R.reset();h.each(function(a){var h=f-c.left-c.right,n=p-c.top-c.bottom;q=d3.select(this);e.utils.initSVG(q);a.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var F=D&&H?[]:a.map(function(a){return a.values.map(function(a,c){return{x:w(a,c),y:A(a,
c),y0:a.y0}})});v.domain(D||d3.merge(F).map(function(a){return a.x})).rangeBands(P||[0,h],.1);k.domain(H||d3.extent(d3.merge(F).map(function(a){return a.y}).concat(E)));J?k.range(B||[n-(0>k.domain()[0]?12:0),0<k.domain()[1]?12:0]):k.range(B||[n,0]);S=S||k.copy().range([k(0),k(0)]);h=q.selectAll("g.nv-wrap.nv-discretebar").data([a]);n=h.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");h.select("g");n.append("g").attr("class","nv-groups");h.attr("transform","translate("+c.left+
","+c.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(R,"discreteBar: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",function(a){return a.hover});h.watchTransition(R,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",
.75);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();n=h.enter().append("g").attr("transform",function(a,c,e){return"translate("+(v(w(a,c))+.05*v.rangeBand())+", "+k(0)+")"}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);M.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);M.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,
c){M.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){M.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){M.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});n.append("rect").attr("height",0).attr("width",.9*v.rangeBand()/a.length);J?(n.append("text").attr("text-anchor","middle"),h.select("text").text(function(a,
c){return G(A(a,c))}).watchTransition(R,"discreteBar: bars text").attr("x",.9*v.rangeBand()/2).attr("y",function(a,c){return 0>A(a,c)?k(A(a,c))-k(0)+12:-4})):h.selectAll("text").remove();h.attr("class",function(a,c){return 0>A(a,c)?"nv-bar negative":"nv-bar positive"}).style("fill",function(a,c){return a.color||I(a,c)}).style("stroke",function(a,c){return a.color||I(a,c)}).select("rect").attr("class",u).watchTransition(R,"discreteBar: bars rect").attr("width",.9*v.rangeBand()/a.length);h.watchTransition(R,
"discreteBar: bars").attr("transform",function(a,c){var e=v(w(a,c))+.05*v.rangeBand();a=0>A(a,c)?k(0):1>k(0)-k(A(a,c))?k(0)-1:k(A(a,c));return"translate("+e+", "+a+")"}).select("rect").attr("height",function(a,c){return Math.max(Math.abs(k(A(a,c))-k(0)),1)});v.copy();S=k.copy()});R.renderEnd("discreteBar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,p=500,h=Math.floor(1E4*Math.random()),q,v=d3.scale.ordinal(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},
E=[0],I=e.utils.defaultColor(),J=!1,G=d3.format(",.2f"),D,H,P,B,M=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),u="discreteBar",n=250,S,R=e.utils.renderWatch(M,n);a.dispatch=M;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},forceY:{get:function(){return E},set:function(a){E=a}},showValues:{get:function(){return J},
set:function(a){J=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return A},set:function(a){A=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return D},set:function(a){D=a}},yDomain:{get:function(){return H},set:function(a){H=a}},xRange:{get:function(){return P},set:function(a){P=a}},yRange:{get:function(){return B},set:function(a){B=a}},valueFormat:{get:function(){return G},set:function(a){G=
a}},id:{get:function(){return h},set:function(a){h=a}},rectClass:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return I},set:function(a){I=e.utils.getColor(a)}},duration:{get:function(){return n},set:function(a){n=a;R.reset(n)}}});e.utils.initOptions(a);return a};e.models.discreteBarChart=
function(){function a(n){N.reset();N.models(c);J&&N.models(f);G&&N.models(p);n.each(function(n){var q=d3.select(this);e.utils.initSVG(q);var y=e.utils.availableWidth(w,q,v),K=e.utils.availableHeight(A,q,v);a.update=function(){S.beforeUpdate();q.transition().duration(R).call(a)};a.container=this;if(n&&n.length&&n.filter(function(a){return a.values.length}).length)q.selectAll(".nv-noData").remove();else return e.utils.noData(a,q),a;M=c.xScale();u=c.yScale().clamp(!0);var t=q.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([n]),
l=t.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),F=l.append("defs"),N=t.select("g");l.append("g").attr("class","nv-x nv-axis");l.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");l.append("g").attr("class","nv-barsWrap");l.append("g").attr("class","nv-legendWrap");N.attr("transform","translate("+v.left+","+v.top+")");I?(h.width(y),N.select(".nv-legendWrap").datum(n).call(h),k||h.height()===v.top||(v.top=h.height(),
K=e.utils.availableHeight(A,q,v)),t.select(".nv-legendWrap").attr("transform","translate(0,"+-v.top+")")):N.select(".nv-legendWrap").selectAll("*").remove();D&&N.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)");c.width(y).height(K);N.select(".nv-barsWrap").datum(n.filter(function(a){return!a.disabled})).transition().call(c);F.append("clipPath").attr("id","nv-x-label-clip-"+c.id()).append("rect");N.select("#nv-x-label-clip-"+c.id()+" rect").attr("width",M.rangeBand()*(H?2:1)).attr("height",
16).attr("x",-M.rangeBand()/(H?1:2));J&&(f.scale(M)._ticks(e.utils.calcTicksX(y/100,n)).tickSize(-K,0),N.select(".nv-x.nv-axis").attr("transform","translate(0,"+(u.range()[0]+(c.showValues()&&0>u.domain()[0]?16:0))+")"),N.select(".nv-x.nv-axis").call(f),t=N.select(".nv-x.nv-axis").selectAll("g"),H&&t.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?"5":"17")+")"}),B&&t.selectAll(".tick text").attr("transform","rotate("+B+" 0,0)").style("text-anchor",0<B?"start":"end"),
P&&N.selectAll(".tick text").call(e.utils.wrapTicks,a.xAxis.rangeBand()));G&&(p.scale(u)._ticks(e.utils.calcTicksY(K/36,n)).tickSize(-y,0),N.select(".nv-y.nv-axis").call(p));N.select(".nv-zeroLine line").attr("x1",0).attr("x2",D?-y:y).attr("y1",u(0)).attr("y2",u(0))});N.renderEnd("discreteBar chart immediate");return a}var c=e.models.discreteBar(),f=e.models.axis(),p=e.models.axis(),h=e.models.legend(),q=e.models.tooltip(),v={top:15,right:10,bottom:50,left:60},k=null,w=null,A=null,E=e.utils.getColor(),
I=!1,J=!0,G=!0,D=!1,H=!1,P=!1,B=0,M,u,n=null,S=d3.dispatch("beforeUpdate","renderEnd"),R=250;f.orient("bottom").showMaxMin(!1).tickFormat(function(a){return a});p.orient(D?"right":"left").tickFormat(d3.format(",.1f"));q.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return p.tickFormat()(a,c)}).keyFormatter(function(a,c){return f.tickFormat()(a,c)});var N=e.utils.renderWatch(S,R);c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color};
q.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){q.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){q()});a.dispatch=S;a.discretebar=c;a.legend=h;a.xAxis=f;a.yAxis=p;a.tooltip=q;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return w},set:function(a){w=a}},height:{get:function(){return A},set:function(a){A=a}},showLegend:{get:function(){return I},set:function(a){I=a}},staggerLabels:{get:function(){return H},set:function(a){H=
a}},rotateLabels:{get:function(){return B},set:function(a){B=a}},wrapLabels:{get:function(){return P},set:function(a){P=!!a}},showXAxis:{get:function(){return J},set:function(a){J=a}},showYAxis:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return n},set:function(a){n=a}},margin:{get:function(){return v},set:function(a){void 0!==a.top&&(k=v.top=a.top);v.right=void 0!==a.right?a.right:v.right;v.bottom=void 0!==a.bottom?a.bottom:v.bottom;v.left=void 0!==a.left?a.left:v.left}},
duration:{get:function(){return R},set:function(a){R=a;N.reset(R);c.duration(R);f.duration(R);p.duration(R)}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a);c.color(E);h.color(E)}},rightAlignYAxis:{get:function(){return D},set:function(a){D=a;p.orient(a?"right":"left")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.distribution=function(){function a(f){I.reset();f.each(function(a){var f="x"==h?"y":"x",w=d3.select(this);e.utils.initSVG(w);E=E||k;a=
w.selectAll("g.nv-distribution").data([a]);a.enter().append("g").attr("class","nvd3 nv-distribution").append("g");w=a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");a=w.selectAll("g.nv-dist").data(function(a){return a},function(a){return a.key});a.enter().append("g");a.attr("class",function(a,c){return"nv-dist nv-series-"+c}).style("stroke",function(a,c){return v(a,c)});w=a.selectAll("line.nv-dist"+h).data(function(a){return a.values});w.enter().append("line").attr(h+"1",function(a,
c){return E(q(a,c))}).attr(h+"2",function(a,c){return E(q(a,c))});I.transition(a.exit().selectAll("line.nv-dist"+h),"dist exit").attr(h+"1",function(a,c){return k(q(a,c))}).attr(h+"2",function(a,c){return k(q(a,c))}).style("stroke-opacity",0).remove();w.attr("class",function(a,c){return"nv-dist"+h+" nv-dist"+h+"-"+c}).attr(f+"1",0).attr(f+"2",p);I.transition(w,"dist").attr(h+"1",function(a,c){return k(q(a,c))}).attr(h+"2",function(a,c){return k(q(a,c))});E=k.copy()});I.renderEnd("distribution immediate");
return a}var c={top:0,right:0,bottom:0,left:0},f=400,p=8,h="x",q=function(a){return a[h]},v=e.utils.defaultColor(),k=d3.scale.linear(),w=250,A=d3.dispatch("renderEnd"),E,I=e.utils.renderWatch(A,w);a.options=e.utils.optionsFunc.bind(a);a.dispatch=A;a.margin=function(e){if(!arguments.length)return c;c.top="undefined"!=typeof e.top?e.top:c.top;c.right="undefined"!=typeof e.right?e.right:c.right;c.bottom="undefined"!=typeof e.bottom?e.bottom:c.bottom;c.left="undefined"!=typeof e.left?e.left:c.left;return a};
a.width=function(c){if(!arguments.length)return f;f=c;return a};a.axis=function(c){if(!arguments.length)return h;h=c;return a};a.size=function(c){if(!arguments.length)return p;p=c;return a};a.getData=function(c){if(!arguments.length)return q;q=d3.functor(c);return a};a.scale=function(c){if(!arguments.length)return k;k=c;return a};a.color=function(c){if(!arguments.length)return v;v=e.utils.getColor(c);return a};a.duration=function(c){if(!arguments.length)return w;w=c;I.reset(w);return a};return a};
e.models.focus=function(a){function c(u){M.reset();M.models(a);A&&M.models(f);E&&M.models(p);u.each(function(n){function u(){h.empty()||h.extent(D);t.data([h.empty()?J.domain():D]).each(function(a,c){c=J(a[0])-J.range()[0];var e=F-J(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c);d3.select(this).select(".right").attr("x",J(a[1])).attr("width",0>e?0:e)})}function R(a){D=h.empty()?null:h.extent();var c=h.empty()?J.domain():h.extent();P.brush({extent:c,brush:h});u();if(a)P.onBrush(c)}var N=
d3.select(this);e.utils.initSVG(N);var F=e.utils.availableWidth(k,N,q),y=w-q.top-q.bottom;c.update=function(){0===H?N.call(c):N.transition().duration(H).call(c)};c.container=this;J=a.xScale();G=a.yScale();var L=N.selectAll("g.nv-focus").data([n]),Q=L.enter().append("g").attr("class","nvd3 nv-focus").append("g"),K=L.select("g");L.attr("transform","translate("+q.left+","+q.top+")");Q.append("g").attr("class","nv-background").append("rect");Q.append("g").attr("class","nv-x nv-axis");Q.append("g").attr("class",
"nv-y nv-axis");Q.append("g").attr("class","nv-contentWrap");Q.append("g").attr("class","nv-brushBackground");Q.append("g").attr("class","nv-x nv-brush");I&&K.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)");K.select(".nv-background rect").attr("width",F).attr("height",y);a.width(F).height(y).color(n.map(function(a,c){return a.color||v(a,c)}).filter(function(a,c){return!n[c].disabled}));L=K.select(".nv-contentWrap").datum(n.filter(function(a){return!a.disabled}));d3.transition(L).call(a);
h.x(J).on("brush",function(){R(B)});h.on("brushend",function(){if(!B)P.onBrush(h.empty()?J.domain():h.extent())});D&&h.extent(D);var t=K.select(".nv-brushBackground").selectAll("g").data([D||h.extent()]);L=t.enter().append("g");L.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",y);L.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",y);L=K.select(".nv-x.nv-brush").call(h);L.selectAll("rect").attr("height",y);L.selectAll(".resize").append("path").attr("d",
function(a){var c=(a=+("e"==a))?1:-1,e=y/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});R(!0);K.select(".nv-background rect").attr("width",F).attr("height",y);A&&(f.scale(J)._ticks(e.utils.calcTicksX(F/100,n)).tickSize(-y,0),K.select(".nv-x.nv-axis").attr("transform","translate(0,"+G.range()[0]+")"),d3.transition(K.select(".nv-x.nv-axis")).call(f));E&&(p.scale(G)._ticks(e.utils.calcTicksY(y/
36,n)).tickSize(-F,0),d3.transition(K.select(".nv-y.nv-axis")).call(p));K.select(".nv-x.nv-axis").attr("transform","translate(0,"+G.range()[0]+")")});M.renderEnd("focus immediate");return c}a=a||e.models.line();var f=e.models.axis(),p=e.models.axis(),h=d3.svg.brush(),q={top:10,right:0,bottom:30,left:0},v=e.utils.defaultColor(),k=null,w=70,A=!0,E=!1,I=!1,J,G,D=null,H=250,P=d3.dispatch("brush","onBrush","renderEnd"),B=!0;a.interactive(!1);a.pointActive(function(a){return!1});var M=e.utils.renderWatch(P,
H);c.dispatch=P;c.content=a;c.brush=h;c.xAxis=f;c.yAxis=p;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return k},set:function(a){k=a}},height:{get:function(){return w},set:function(a){w=a}},showXAxis:{get:function(){return A},set:function(a){A=a}},showYAxis:{get:function(){return E},set:function(a){E=a}},brushExtent:{get:function(){return D},set:function(a){D=a}},syncBrushing:{get:function(){return B},set:function(a){B=a}},margin:{get:function(){return q},
set:function(a){q.top=void 0!==a.top?a.top:q.top;q.right=void 0!==a.right?a.right:q.right;q.bottom=void 0!==a.bottom?a.bottom:q.bottom;q.left=void 0!==a.left?a.left:q.left}},duration:{get:function(){return H},set:function(c){H=c;M.reset(H);a.duration(H);f.duration(H);p.duration(H)}},color:{get:function(){return v},set:function(c){v=e.utils.getColor(c);a.color(v)}},interpolate:{get:function(){return a.interpolate()},set:function(c){a.interpolate(c)}},xTickFormat:{get:function(){return f.tickFormat()},
set:function(a){f.tickFormat(a)}},yTickFormat:{get:function(){return p.tickFormat()},set:function(a){p.tickFormat(a)}},x:{get:function(){return a.x()},set:function(c){a.x(c)}},y:{get:function(){return a.y()},set:function(c){a.y(c)}},rightAlignYAxis:{get:function(){return I},set:function(a){I=a;p.orient(I?"right":"left")}}});e.utils.inheritOptions(c,a);e.utils.initOptions(c);return c};e.models.forceDirectedGraph=function(){function a(n){u.reset();n.each(function(n){h=d3.select(this);e.utils.initSVG(h);
var u=e.utils.availableWidth(f,h,c),q=e.utils.availableHeight(p,h,c);h.attr("width",u).attr("height",q);if(n&&n.links&&n.nodes)h.selectAll(".nv-noData").remove();else return e.utils.noData(a,h),a;h.selectAll("*").remove();var w=new Set;n.nodes.forEach(function(a){Object.keys(a).forEach(function(a){w.add(a)})});u=d3.layout.force().nodes(n.nodes).links(n.links).size([u,q]).linkStrength(A).friction(E).linkDistance(I).charge(J).gravity(G).theta(D).alpha(H).start();var y=h.selectAll(".link").data(n.links).enter().append("line").attr("class",
"nv-force-link").style("stroke-width",function(a){return Math.sqrt(a.value)}),L=h.selectAll(".node").data(n.nodes).enter().append("g").attr("class","nv-force-node").call(u.drag);L.append("circle").attr("r",P).style("fill",function(a){return v(a)}).on("mouseover",function(a){h.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.py);h.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.px);var c=v(a);a.series=[];w.forEach(function(e){a.series.push({color:c,
key:e,value:a[e]})});k.data(a).hidden(!1)}).on("mouseout",function(a){k.hidden(!0)});k.headerFormatter(function(a){return"Node"});M(y);B(L);u.on("tick",function(){y.attr("x1",function(a){return a.source.x}).attr("y1",function(a){return a.source.y}).attr("x2",function(a){return a.target.x}).attr("y2",function(a){return a.target.y});L.attr("transform",function(a){return"translate("+a.x+", "+a.y+")"})})});return a}var c={top:2,right:0,bottom:2,left:0},f=400,p=32,h=null,q=d3.dispatch("renderEnd"),v=e.utils.getColor(["#000"]),
k=e.models.tooltip(),w=null,A=.1,E=.9,I=30,J=-120,G=.1,D=.8,H=.1,P=5,B=function(a){},M=function(a){},u=e.utils.renderWatch(q);a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},linkStrength:{get:function(){return A},set:function(a){A=a}},friction:{get:function(){return E},set:function(a){E=a}},linkDist:{get:function(){return I},set:function(a){I=a}},charge:{get:function(){return J},
set:function(a){J=a}},gravity:{get:function(){return G},set:function(a){G=a}},theta:{get:function(){return D},set:function(a){D=a}},alpha:{get:function(){return H},set:function(a){H=a}},radius:{get:function(){return P},set:function(a){P=a}},x:{get:function(){return getX},set:function(a){getX=d3.functor(a)}},y:{get:function(){return getY},set:function(a){getY=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}},noData:{get:function(){return w},set:function(a){w=a}},nodeExtras:{get:function(){return B},set:function(a){B=a}},linkExtras:{get:function(){return M},set:function(a){M=a}}});a.dispatch=q;a.tooltip=k;e.utils.initOptions(a);return a};e.models.furiousLegend=function(){function a(P){function B(a,c){if("furious"!=H)return"#000";if(G)return a.disengaged?v(a,
c):"#fff";if(!G)return a.disabled?v(a,c):"#fff"}function M(a,c){return G&&"furious"==H?a.disengaged?"#fff":v(a,c):a.disabled?"#fff":v(a,c)}P.each(function(a){var n=f-c.left-c.right,u=d3.select(this);e.utils.initSVG(u);u=u.selectAll("g.nv-legend").data([a]);u.enter().append("g").attr("class","nvd3 nv-legend").append("g");a=u.select("g");u.attr("transform","translate("+c.left+","+c.top+")");var R=a.selectAll(".nv-series").data(function(a){return"furious"!=H?a:a.filter(function(a){return G?!0:!a.disengaged})});
u=R.enter().append("g").attr("class","nv-series");if("classic"==H){u.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var N=R.select("circle")}else"furious"==H&&(u.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),N=R.select("rect"),u.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),R.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",B(a,c))}));u.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var F=R.select("text.nv-legend-text");R.on("mouseover",function(a,c){D.legendMouseover(a,c)}).on("mouseout",function(a,c){D.legendMouseout(a,c)}).on("click",function(a,c){D.legendClick(a,c);c=R.data();I&&("classic"==H?J?(c.forEach(function(a){a.disabled=!0}),
a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1})):"furious"==H&&(G?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):G||(a.disabled=!a.disabled,a.userDisabled=a.disabled,c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1}))),D.stateChange({disabled:c.map(function(a){return!!a.disabled}),
disengaged:c.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){"furious"==H&&G||(D.legendDblclick(a,c),I&&(c=R.data(),c.forEach(function(a){a.disabled=!0;"furious"==H&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==H&&(a.userDisabled=a.disabled),D.stateChange({disabled:c.map(function(a){return!!a.disabled})})))});R.classed("nv-disabled",function(a){return a.userDisabled});R.exit().remove();F.attr("fill",B).text(function(a){return q(h(a))});switch(H){case "furious":var y=
23;break;case "classic":y=20}if(w){var L=[];R.each(function(a,c){q(h(a))&&q(h(a)).length>k?(c=q(h(a)).substring(0,k),c=d3.select(this).select("text").text(c+"..."),d3.select(this).append("svg:title").text(q(h(a)))):c=d3.select(this).select("text");try{var f=c.node().getComputedTextLength();if(0>=f)throw Error();}catch(ra){f=e.utils.calcApproxTextWidth(c)}L.push(f+A)});var Q=0,K=0;for(u=[];K<n&&Q<L.length;)u[Q]=L[Q],K+=L[Q++];for(0===Q&&(Q=1);K>n&&1<Q;){u=[];Q--;for(K=0;K<L.length;K++)L[K]>(u[K%Q]||
0)&&(u[K%Q]=L[K]);K=u.reduce(function(a,c,e,f){return a+c})}for(var t=[],l=n=0;n<Q;n++)t[n]=l,l+=u[n];R.attr("transform",function(a,c){return"translate("+t[c%Q]+","+(5+Math.floor(c/Q)*y)+")"});E?a.attr("transform","translate("+(f-c.right-K)+","+c.top+")"):a.attr("transform","translate(0,"+c.top+")");p=c.top+c.bottom+Math.ceil(L.length/Q)*y}else{var P=5,aa=5,X=0,T;R.attr("transform",function(a,e){a=d3.select(this).select("text").node().getComputedTextLength()+A;T=aa;f<c.left+c.right+T+a&&(aa=T=5,P+=
y);aa+=a;aa>X&&(X=aa);return"translate("+T+","+P+")"});a.attr("transform","translate("+(f-c.right-X)+","+c.top+")");p=c.top+c.bottom+P+15}"furious"==H&&N.attr("width",function(a,c){return F[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);N.style("fill",M).style("stroke",function(a,c){return a.color||v(a,c)})});return a}var c={top:5,right:0,bottom:5,left:0},f=400,p=20,h=function(a){return a.key},q=function(a){return a},v=e.utils.getColor(),k=20,w=!0,A=28,E=!0,I=!0,J=
!1,G=!1,D=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),H="classic";a.dispatch=D;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},key:{get:function(){return h},set:function(a){h=a}},keyFormatter:{get:function(){return q},set:function(a){q=a}},align:{get:function(){return w},set:function(a){w=a}},rightAlign:{get:function(){return E},
set:function(a){E=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},padding:{get:function(){return A},set:function(a){A=a}},updateState:{get:function(){return I},set:function(a){I=a}},radioButtonMode:{get:function(){return J},set:function(a){J=a}},expanded:{get:function(){return G},set:function(a){G=a}},vers:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBar=function(){function a(R){R.each(function(a){S.reset();q=d3.select(this);var F=e.utils.availableWidth(f,q,c),y=e.utils.availableHeight(p,q,c);e.utils.initSVG(q);v.domain(H||d3.extent(a[0].values.map(w).concat(E)));J?v.range(B||[.5*F/a[0].values.length,F*(a[0].values.length-.5)/a[0].values.length]):
v.range(B||[0,F]);k.domain(P||d3.extent(a[0].values.map(A).concat(I))).range(M||[y,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var L=q.selectAll("g.nv-wrap.nv-historicalBar-"+h).data([a[0].values]),R=L.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+
h),K=R.append("defs");R=R.append("g");var t=L.select("g");R.append("g").attr("class","nv-bars");L.attr("transform","translate("+c.left+","+c.top+")");q.on("click",function(a,c){u.chartClick({data:a,index:c,pos:d3.event,id:h})});K.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");L.select("#nv-chart-clip-path-"+h+" rect").attr("width",F).attr("height",y);t.attr("clip-path",G?"url(#nv-chart-clip-path-"+h+")":"");y=L.select(".nv-bars").selectAll(".nv-bar").data(function(a){return a},
function(a,c){return w(a,c)});y.exit().remove();y.enter().append("rect").attr("x",0).attr("y",function(a,c){return e.utils.NaNtoZero(k(Math.max(0,A(a,c))))}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.abs(k(A(a,c))-k(0)))}).attr("transform",function(c,e){return"translate("+(v(w(c,e))-F/a[0].values.length*.45)+",0)"}).on("mouseover",function(a,c){n&&(d3.select(this).classed("hover",!0),u.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mouseout",function(a,
c){n&&(d3.select(this).classed("hover",!1),u.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")}))}).on("mousemove",function(a,c){n&&u.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){n&&(u.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation())}).on("dblclick",function(a,c){n&&(u.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});
y.attr("fill",function(a,c){return D(a,c)}).attr("class",function(a,c,e){return(0>A(a,c)?"nv-bar negative":"nv-bar positive")+" nv-bar-"+e+"-"+c}).watchTransition(S,"bars").attr("transform",function(c,e){return"translate("+(v(w(c,e))-F/a[0].values.length*.45)+",0)"}).attr("width",F/a[0].values.length*.9);y.watchTransition(S,"bars").attr("y",function(a,c){a=0>A(a,c)?k(0):1>k(0)-k(A(a,c))?k(0)-1:k(A(a,c));return e.utils.NaNtoZero(a)}).attr("height",function(a,c){return e.utils.NaNtoZero(Math.max(Math.abs(k(A(a,
c))-k(0)),1))})});S.renderEnd("historicalBar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=null,p=null,h=Math.floor(1E4*Math.random()),q=null,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},E=[],I=[0],J=!1,G=!0,D=e.utils.defaultColor(),H,P,B,M,u=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),n=!0,S=e.utils.renderWatch(u,0);a.highlightPoint=function(a,c){q.select(".nv-bars .nv-bar-0-"+
a).classed("hover",c)};a.clearHighlights=function(){q.select(".nv-bars .nv-bar.hover").classed("hover",!1)};a.dispatch=u;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},forceX:{get:function(){return E},set:function(a){E=a}},forceY:{get:function(){return I},set:function(a){I=a}},padData:{get:function(){return J},set:function(a){J=a}},x:{get:function(){return w},set:function(a){w=
a}},y:{get:function(){return A},set:function(a){A=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return H},set:function(a){H=a}},yDomain:{get:function(){return P},set:function(a){P=a}},xRange:{get:function(){return B},set:function(a){B=a}},yRange:{get:function(){return M},set:function(a){M=a}},clipEdge:{get:function(){return G},set:function(a){G=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return n},
set:function(a){n=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.historicalBarChart=function(a){function c(a){a.each(function(k){y.reset();y.models(f);D&&y.models(p);H&&y.models(h);var K=d3.select(this);e.utils.initSVG(K);
var t=e.utils.availableWidth(I,K,w),l=e.utils.availableHeight(J,K,w);c.update=function(){K.transition().duration(F).call(c)};c.container=this;n.disabled=k.map(function(a){return!!a.disabled});if(!S)for(R in S={},n)S[R]=n[R]instanceof Array?n[R].slice(0):n[R];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)K.selectAll(".nv-noData").remove();else return e.utils.noData(c,K),c;M=f.xScale();u=f.yScale();var L=K.selectAll("g.nv-wrap.nv-historicalBarChart").data([k]);var R=L.enter().append("g").attr("class",
"nvd3 nv-wrap nv-historicalBarChart").append("g");var Q=L.select("g");R.append("g").attr("class","nv-x nv-axis");R.append("g").attr("class","nv-y nv-axis");R.append("g").attr("class","nv-barsWrap");R.append("g").attr("class","nv-legendWrap");R.append("g").attr("class","nv-interactive");G?(q.width(t),Q.select(".nv-legendWrap").datum(k).call(q),A||q.height()===w.top||(w.top=q.height(),l=e.utils.availableHeight(J,K,w)),L.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")")):Q.select(".nv-legendWrap").selectAll("*").remove();
L.attr("transform","translate("+w.left+","+w.top+")");P&&Q.select(".nv-y.nv-axis").attr("transform","translate("+t+",0)");B&&(v.width(t).height(l).margin({left:w.left,top:w.top}).svgContainer(K).xScale(M),L.select(".nv-interactive").call(v));f.width(t).height(l).color(k.map(function(a,c){return a.color||E(a,c)}).filter(function(a,c){return!k[c].disabled}));Q.select(".nv-barsWrap").datum(k.filter(function(a){return!a.disabled})).transition().call(f);D&&(p.scale(M)._ticks(e.utils.calcTicksX(t/100,k)).tickSize(-l,
0),Q.select(".nv-x.nv-axis").attr("transform","translate(0,"+u.range()[0]+")"),Q.select(".nv-x.nv-axis").transition().call(p));H&&(h.scale(u)._ticks(e.utils.calcTicksY(l/36,k)).tickSize(-t,0),Q.select(".nv-y.nv-axis").transition().call(h));v.dispatch.on("elementMousemove",function(a){f.clearHighlights();var l,n,t,u=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,k){n=e.interactiveBisect(h.values,a.pointXValue,c.x());f.highlightPoint(n,!0);k=h.values[n];void 0!==k&&
(void 0===l&&(l=k),void 0===t&&(t=c.xScale()(c.x()(k,n))),u.push({key:h.key,value:c.y()(k,n),color:E(h,h.seriesIndex),data:h.values[n]}))});var q=p.tickFormat()(c.x()(l,n));v.tooltip.valueFormatter(function(a,c){return h.tickFormat()(a)}).data({value:q,index:n,series:u})();v.renderGuideLine(t)});v.dispatch.on("elementMouseout",function(a){N.tooltipHide();f.clearHighlights()});q.dispatch.on("legendClick",function(e,f){e.disabled=!e.disabled;k.filter(function(a){return!a.disabled}).length||k.map(function(a){a.disabled=
!1;L.selectAll(".nv-series").classed("disabled",!1);return a});n.disabled=k.map(function(a){return!!a.disabled});N.stateChange(n);a.transition().call(c)});q.dispatch.on("legendDblclick",function(a){k.forEach(function(a){a.disabled=!0});a.disabled=!1;n.disabled=k.map(function(a){return!!a.disabled});N.stateChange(n);c.update()});N.on("changeState",function(a){"undefined"!==typeof a.disabled&&(k.forEach(function(c,e){c.disabled=a.disabled[e]}),n.disabled=a.disabled);c.update()})});y.renderEnd("historicalBarChart immediate");
return c}var f=a||e.models.historicalBar(),p=e.models.axis(),h=e.models.axis(),q=e.models.legend(),v=e.interactiveGuideline(),k=e.models.tooltip(),w={top:30,right:90,bottom:50,left:90},A=null,E=e.utils.defaultColor(),I=null,J=null,G=!1,D=!0,H=!0,P=!1,B=!1,M,u,n={},S=null,R=null,N=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),F=250;p.orient("bottom").tickPadding(7);h.orient(P?"right":"left");k.duration(0).headerEnabled(!1).valueFormatter(function(a,c){return h.tickFormat()(a,c)}).headerFormatter(function(a,
c){return p.tickFormat()(a,c)});var y=e.utils.renderWatch(N,0);f.dispatch.on("elementMouseover.tooltip",function(a){a.series={key:c.x()(a.data),value:c.y()(a.data),color:a.color};k.data(a).hidden(!1)});f.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});f.dispatch.on("elementMousemove.tooltip",function(a){k()});c.dispatch=N;c.bars=f;c.legend=q;c.xAxis=p;c.yAxis=h;c.interactiveLayer=v;c.tooltip=k;c.options=e.utils.optionsFunc.bind(c);c._options=Object.create({},{width:{get:function(){return I},
set:function(a){I=a}},height:{get:function(){return J},set:function(a){J=a}},showLegend:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return D},set:function(a){D=a}},showYAxis:{get:function(){return H},set:function(a){H=a}},defaultState:{get:function(){return S},set:function(a){S=a}},noData:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(A=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==
a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a);q.color(E);f.color(E)}},duration:{get:function(){return F},set:function(a){F=a;y.reset(F);h.duration(F);p.duration(F)}},rightAlignYAxis:{get:function(){return P},set:function(a){P=a;h.orient(a?"right":"left")}},useInteractiveGuideline:{get:function(){return B},set:function(a){B=a;!0===a&&c.interactive(!1)}}});e.utils.inheritOptions(c,f);e.utils.initOptions(c);return c};
e.models.ohlcBarChart=function(){var a=e.models.historicalBarChart(e.models.ohlcBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+
a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.candlestickBarChart=function(){var a=e.models.historicalBarChart(e.models.candlestickBar());a.useInteractiveGuideline(!0);a.interactiveLayer.tooltip.contentGenerator(function(c){var e=c.series[0].data;return'<h3 style="color: #'+(e.open<e.close?"2ca02c":"d62728")+'">'+c.value+"</h3><table><tr><td>open:</td><td>"+a.yAxis.tickFormat()(e.open)+"</td></tr><tr><td>close:</td><td>"+a.yAxis.tickFormat()(e.close)+"</td></tr><tr><td>high</td><td>"+
a.yAxis.tickFormat()(e.high)+"</td></tr><tr><td>low:</td><td>"+a.yAxis.tickFormat()(e.low)+"</td></tr></table>"});return a};e.models.legend=function(){function a(P){function B(a,c){if("furious"!=H)return"#000";if(G)return a.disengaged?"#000":"#fff";if(!G)return a.color||(a.color=v(a,c)),a.disabled?a.color:"#fff"}function M(a,c){return G&&"furious"==H?a.disengaged?"#eee":a.color||v(a,c):a.color||v(a,c)}function u(a,c){return G&&"furious"==H?1:a.disabled?0:1}P.each(function(a){var n=f-c.left-c.right,
v=d3.select(this);e.utils.initSVG(v);var N=v.selectAll("g.nv-legend").data([a]);a=N.enter().append("g").attr("class","nvd3 nv-legend").append("g");v=N.select("g");E?N.attr("transform","translate("+-c.right+","+c.top+")"):N.attr("transform","translate("+c.left+","+c.top+")");var F=v.selectAll(".nv-series").data(function(a){return"furious"!=H?a:a.filter(function(a){return G?!0:!a.disengaged})});N=F.enter().append("g").attr("class","nv-series");switch(H){case "furious":var y=23;break;case "classic":y=
20}if("classic"==H){N.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5);var L=F.select(".nv-legend-symbol")}else"furious"==H&&(N.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),L=F.select(".nv-legend-symbol"),N.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform",
"translate(-10,-8)scale(0.5)"),F.select(".nv-check-box").each(function(a,c){d3.select(this).selectAll("path").attr("stroke",B(a,c))}));N.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var Q=F.select("text.nv-legend-text");F.on("mouseover",function(a,c){D.legendMouseover(a,c)}).on("mouseout",function(a,c){D.legendMouseout(a,c)}).on("click",function(a,c){D.legendClick(a,c);c=F.data();I&&("classic"==H?J?(c.forEach(function(a){a.disabled=!0}),
a.disabled=!1):(a.disabled=!a.disabled,c.every(function(a){return a.disabled})&&c.forEach(function(a){a.disabled=!1})):"furious"==H&&(G?(a.disengaged=!a.disengaged,a.userDisabled=void 0==a.userDisabled?!!a.disabled:a.userDisabled,a.disabled=a.disengaged||a.userDisabled):G||(a.disabled=!a.disabled,a.userDisabled=a.disabled,c.filter(function(a){return!a.disengaged}).every(function(a){return a.userDisabled})&&c.forEach(function(a){a.disabled=a.userDisabled=!1}))),D.stateChange({disabled:c.map(function(a){return!!a.disabled}),
disengaged:c.map(function(a){return!!a.disengaged})}))}).on("dblclick",function(a,c){"furious"==H&&G||(D.legendDblclick(a,c),I&&(c=F.data(),c.forEach(function(a){a.disabled=!0;"furious"==H&&(a.userDisabled=a.disabled)}),a.disabled=!1,"furious"==H&&(a.userDisabled=a.disabled),D.stateChange({disabled:c.map(function(a){return!!a.disabled})})))});F.classed("nv-disabled",function(a){return a.userDisabled});F.exit().remove();Q.attr("fill",B).text(function(a){return q(h(a))});var K=0;if(w){var t=[];F.each(function(a,
c){q(h(a))&&q(h(a)).length>k?(c=q(h(a)).substring(0,k),c=d3.select(this).select("text").text(c+"..."),d3.select(this).append("svg:title").text(q(h(a)))):c=d3.select(this).select("text");try{var f=c.node().getComputedTextLength();if(0>=f)throw Error();}catch(ca){f=e.utils.calcApproxTextWidth(c)}t.push(f+A)});var l=0;N=[];for(K=0;K<n&&l<t.length;)N[l]=t[l],K+=t[l++];for(0===l&&(l=1);K>n&&1<l;){N=[];l--;for(var P=0;P<t.length;P++)t[P]>(N[P%l]||0)&&(N[P%l]=t[P]);K=N.reduce(function(a,c,e,f){return a+
c})}var aa=[];for(P=n=0;n<l;n++)aa[n]=P,P+=N[n];F.attr("transform",function(a,c){return"translate("+aa[c%l]+","+(5+Math.floor(c/l)*y)+")"});E?v.attr("transform","translate("+(f-c.right-K)+","+c.top+")"):v.attr("transform","translate(0,"+c.top+")");p=c.top+c.bottom+Math.ceil(t.length/l)*y}else{var X=5,T=5,r=0,U;F.attr("transform",function(a,e){a=d3.select(this).select("text").node().getComputedTextLength()+A;U=T;f<c.left+c.right+U+a&&(T=U=5,X+=y);T+=a;T>r&&(r=T);K<U+r&&(K=U+r);return"translate("+U+
","+X+")"});v.attr("transform","translate("+(f-c.right-r)+","+c.top+")");p=c.top+c.bottom+X+15}"furious"==H&&(L.attr("width",function(a,c){return Q[0][c].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),a.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),v.select(".nv-legend-bg").transition().duration(300).attr("x",-y).attr("width",K+y-12).attr("height",p+10).attr("y",-c.top-10).attr("opacity",G?1:0));L.style("fill",M).style("fill-opacity",
u).style("stroke",M)});return a}var c={top:5,right:0,bottom:5,left:0},f=400,p=20,h=function(a){return a.key},q=function(a){return a},v=e.utils.getColor(),k=20,w=!0,A=32,E=!0,I=!0,J=!1,G=!1,D=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),H="classic";a.dispatch=D;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},key:{get:function(){return h},
set:function(a){h=a}},keyFormatter:{get:function(){return q},set:function(a){q=a}},align:{get:function(){return w},set:function(a){w=a}},maxKeyLength:{get:function(){return k},set:function(a){k=a}},rightAlign:{get:function(){return E},set:function(a){E=a}},padding:{get:function(){return A},set:function(a){A=a}},updateState:{get:function(){return I},set:function(a){I=a}},radioButtonMode:{get:function(){return J},set:function(a){J=a}},expanded:{get:function(){return G},set:function(a){G=a}},vers:{get:function(){return H},
set:function(a){H=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.line=function(){function a(n){u.reset();u.models(c);n.each(function(a){q=d3.select(this);var n=e.utils.availableWidth(p,q,f),N=e.utils.availableHeight(h,q,f);
e.utils.initSVG(q);J=c.xScale();G=c.yScale();B=B||J;M=M||G;a=q.selectAll("g.nv-wrap.nv-line").data([a]);var F=a.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),y=F.append("defs"),L=F.append("g");F=a.select("g");L.append("g").attr("class","nv-groups");L.append("g").attr("class","nv-scatterWrap");a.attr("transform","translate("+f.left+","+f.top+")");c.width(n).height(N);L=a.select(".nv-scatterWrap");L.call(c);y.append("clipPath").attr("id","nv-edge-clip-"+c.id()).append("rect");a.select("#nv-edge-clip-"+
c.id()+" rect").attr("width",n).attr("height",0<N?N:0);F.attr("clip-path",I?"url(#nv-edge-clip-"+c.id()+")":"");L.attr("clip-path",I?"url(#nv-edge-clip-"+c.id()+")":"");n=a.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});n.enter().append("g").style("stroke-opacity",1E-6).style("stroke-width",function(a){return a.strokeWidth||1.5}).style("fill-opacity",1E-6);n.exit().remove();n.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return v(a,c)}).style("stroke",function(a,c){return v(a,c)});n.watchTransition(u,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(a){return a.fillOpacity||.5});N=n.selectAll("path.nv-area").data(function(a){return E(a)?[a]:[]});N.enter().append("path").attr("class","nv-area").attr("d",function(a){return d3.svg.area().interpolate(D).defined(A).x(function(a,c){return e.utils.NaNtoZero(B(k(a,c)))}).y0(function(a,
c){return e.utils.NaNtoZero(M(w(a,c)))}).y1(function(a,c){return M(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,[a.values])});n.exit().selectAll("path.nv-area").remove();N.watchTransition(u,"line: areaPaths").attr("d",function(a){return d3.svg.area().interpolate(D).defined(A).x(function(a,c){return e.utils.NaNtoZero(J(k(a,c)))}).y0(function(a,c){return e.utils.NaNtoZero(G(w(a,c)))}).y1(function(a,c){return G(0>=G.domain()[0]?0<=G.domain()[1]?0:G.domain()[1]:G.domain()[0])}).apply(this,
[a.values])});n=n.selectAll("path.nv-line").data(function(a){return[a.values]});n.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(D).defined(A).x(function(a,c){return e.utils.NaNtoZero(B(k(a,c)))}).y(function(a,c){return e.utils.NaNtoZero(M(w(a,c)))}));n.watchTransition(u,"line: linePaths").attr("d",d3.svg.line().interpolate(D).defined(A).x(function(a,c){return e.utils.NaNtoZero(J(k(a,c)))}).y(function(a,c){return e.utils.NaNtoZero(G(w(a,c)))}));B=J.copy();M=G.copy()});
u.renderEnd("line immediate");return a}var c=e.models.scatter(),f={top:0,right:0,bottom:0,left:0},p=960,h=500,q=null,v=e.utils.defaultColor(),k=function(a){return a.x},w=function(a){return a.y},A=function(a,c){return!isNaN(w(a,c))&&null!==w(a,c)},E=function(a){return a.area},I=!1,J,G,D="linear",H=250,P=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");c.pointSize(16).pointDomain([16,256]);var B,M,u=e.utils.renderWatch(P,H);a.dispatch=P;a.scatter=c;c.dispatch.on("elementClick",
function(){P.elementClick.apply(this,arguments)});c.dispatch.on("elementMouseover",function(){P.elementMouseover.apply(this,arguments)});c.dispatch.on("elementMouseout",function(){P.elementMouseout.apply(this,arguments)});a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return h},set:function(a){h=a}},defined:{get:function(){return A},set:function(a){A=a}},interpolate:{get:function(){return D},set:function(a){D=
a}},clipEdge:{get:function(){return I},set:function(a){I=a}},margin:{get:function(){return f},set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}},duration:{get:function(){return H},set:function(a){H=a;u.reset(H);c.duration(H)}},isArea:{get:function(){return E},set:function(a){E=d3.functor(a)}},x:{get:function(){return k},set:function(a){k=a;c.x(a)}},y:{get:function(){return w},
set:function(a){w=a;c.y(a)}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a);c.color(v)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineChart=function(){function a(l){Q.reset();Q.models(c);H&&Q.models(f);P&&Q.models(p);l.each(function(l){function v(){H&&ca.select(".nv-focus .nv-x.nv-axis").transition().duration(L).call(f)}function F(){P&&ca.select(".nv-focus .nv-y.nv-axis").transition().duration(L).call(p)}function T(a){ca.select(".nv-focus .nv-linesWrap").datum(l.filter(function(a){return!a.disabled}).map(function(e,
f){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,f){return c.x()(e,f)>=a[0]&&c.x()(e,f)<=a[1]}),disableTooltip:e.disableTooltip}})).transition().duration(L).call(c);v();F()}var r=d3.select(this);e.utils.initSVG(r);var U=e.utils.availableWidth(I,r,w),V=e.utils.availableHeight(J,r,w)-(S?k.height():0);a.update=function(){0===L?r.call(a):r.transition().duration(L).call(a)};a.container=this;R.setter(t(l),a.update).getter(K(l)).update();R.disabled=l.map(function(a){return!!a.disabled});
if(!N)for(Q in N={},R)N[Q]=R[Q]instanceof Array?R[Q].slice(0):R[Q];if(l&&l.length&&l.filter(function(a){return a.values.length}).length)r.selectAll(".nv-noData").remove();else return e.utils.noData(a,r),a;k.dispatch.on("onBrush",function(a){T(a)});u=c.xScale();n=c.yScale();var Q=r.selectAll("g.nv-wrap.nv-lineChart").data([l]);var Fa=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),ca=Q.select("g");Fa.append("g").attr("class","nv-legendWrap");var Z=Fa.append("g").attr("class",
"nv-focus");Z.append("g").attr("class","nv-background").append("rect");Z.append("g").attr("class","nv-x nv-axis");Z.append("g").attr("class","nv-y nv-axis");Z.append("g").attr("class","nv-linesWrap");Z.append("g").attr("class","nv-interactive");Fa.append("g").attr("class","nv-focusWrap");G?(h.width(U),ca.select(".nv-legendWrap").datum(l).call(h),"bottom"===D?Q.select(".nv-legendWrap").attr("transform","translate(0,"+V+")"):"top"===D&&(A||h.height()===w.top||(w.top=h.height(),V=e.utils.availableHeight(J,
r,w)-(S?k.height():0)),Q.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")"))):ca.select(".nv-legendWrap").selectAll("*").remove();Q.attr("transform","translate("+w.left+","+w.top+")");B&&ca.select(".nv-y.nv-axis").attr("transform","translate("+U+",0)");M&&(q.width(U).height(V).margin({left:w.left,top:w.top}).svgContainer(r).xScale(u),Q.select(".nv-interactive").call(q));ca.select(".nv-focus .nv-background rect").attr("width",U).attr("height",V);c.width(U).height(V).color(l.map(function(a,
c){return a.color||E(a,c)}).filter(function(a,c){return!l[c].disabled}));Q=ca.select(".nv-linesWrap").datum(l.filter(function(a){return!a.disabled}));H&&f.scale(u)._ticks(e.utils.calcTicksX(U/100,l)).tickSize(-V,0);P&&p.scale(n)._ticks(e.utils.calcTicksY(V/36,l)).tickSize(-U,0);ca.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+V+")");S?(k.width(U),ca.select(".nv-focusWrap").attr("transform","translate(0,"+(V+w.bottom+k.margin().top)+")").datum(l.filter(function(a){return!a.disabled})).call(k),
U=k.brush.empty()?k.xDomain():k.brush.extent(),null!==U&&T(U)):(Q.call(c),v(),F());h.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];y.stateChange(R);a.update()});q.dispatch.on("elementMousemove",function(f){c.clearHighlights();var h,n,r,t=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled&&!a.disableTooltip}).forEach(function(l,p){var q=S?k.brush.empty()?k.xScale().domain():k.brush.extent():u.domain(),v=l.values.filter(function(a,e){return q[0]<=q[1]?c.x()(a,e)>=q[0]&&c.x()(a,
e)<=q[1]:c.x()(a,e)>=q[1]&&c.x()(a,e)<=q[0]});n=e.interactiveBisect(v,f.pointXValue,c.x());v=v[n];var y=a.y()(v,n);null!==y&&c.highlightPoint(p,n,!0);void 0!==v&&(void 0===h&&(h=v),void 0===r&&(r=a.xScale()(a.x()(v,n))),t.push({key:l.key,value:y,color:E(l,l.seriesIndex),data:v}))});if(2<t.length){var v=a.yScale().invert(f.mouseY),y=.03*Math.abs(a.yScale().domain()[0]-a.yScale().domain()[1]);v=e.nearestValueIndex(t.map(function(a){return a.value}),v,y);null!==v&&(t[v].highlight=!0)}v=function(a,c){return null==
a?"N/A":p.tickFormat()(a)};q.tooltip.valueFormatter(q.tooltip.valueFormatter()||v).data({value:a.x()(h,n),index:n,series:t})();q.renderGuideLine(r)});q.dispatch.on("elementClick",function(f){var h,n=[];l.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(c){var l=e.interactiveBisect(c.values,f.pointXValue,a.x()),k=c.values[l];if("undefined"!==typeof k){"undefined"===typeof h&&(h=a.xScale()(a.x()(k,l)));var r=a.yScale()(a.y()(k,l));n.push({point:k,pointIndex:l,pos:[h,r],seriesIndex:c.seriesIndex,
series:c})}});c.dispatch.elementClick(n)});q.dispatch.on("elementMouseout",function(a){c.clearHighlights()});y.on("changeState",function(c){"undefined"!==typeof c.disabled&&l.length===c.disabled.length&&(l.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);a.update()})});Q.renderEnd("lineChart immediate");return a}var c=e.models.line(),f=e.models.axis(),p=e.models.axis(),h=e.models.legend(),q=e.interactiveGuideline(),v=e.models.tooltip(),k=e.models.focus(e.models.line()),w={top:30,
right:20,bottom:50,left:60},A=null,E=e.utils.defaultColor(),I=null,J=null,G=!0,D="top",H=!0,P=!0,B=!1,M=!1,u,n,S=!1,R=e.utils.state(),N=null,F=null,y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),L=250;f.orient("bottom").tickPadding(7);p.orient(B?"right":"left");c.clipEdge(!0).duration(0);v.valueFormatter(function(a,c){return p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});q.tooltip.valueFormatter(function(a,c){return p.tickFormat()(a,
c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});var Q=e.utils.renderWatch(y,L),K=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},t=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(a){a.series.disableTooltip||v.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});a.dispatch=y;a.lines=c;a.legend=h;a.focus=k;a.xAxis=
f;a.x2Axis=k.xAxis;a.yAxis=p;a.y2Axis=k.yAxis;a.interactiveLayer=q;a.tooltip=v;a.state=R;a.dispatch=y;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return I},set:function(a){I=a}},height:{get:function(){return J},set:function(a){J=a}},showLegend:{get:function(){return G},set:function(a){G=a}},legendPosition:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return P},set:function(a){P=
a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return F},set:function(a){F=a}},focusEnable:{get:function(){return S},set:function(a){S=a}},focusHeight:{get:function(){return k.height()},set:function(a){k.height(a)}},focusShowAxisX:{get:function(){return k.showXAxis()},set:function(a){k.showXAxis(a)}},focusShowAxisY:{get:function(){return k.showYAxis()},set:function(a){k.showYAxis(a)}},brushExtent:{get:function(){return k.brushExtent()},set:function(a){k.brushExtent(a)}},
focusMargin:{get:function(){return k.margin},set:function(a){void 0!==a.top&&(A=w.top=a.top);k.margin.right=void 0!==a.right?a.right:k.margin.right;k.margin.bottom=void 0!==a.bottom?a.bottom:k.margin.bottom;k.margin.left=void 0!==a.left?a.left:k.margin.left}},margin:{get:function(){return w},set:function(a){w.top=void 0!==a.top?a.top:w.top;w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},duration:{get:function(){return L},
set:function(a){L=a;Q.reset(L);c.duration(L);k.duration(L);f.duration(L);p.duration(L)}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a);h.color(E);c.color(E);k.color(E)}},interpolate:{get:function(){return c.interpolate()},set:function(a){c.interpolate(a);k.interpolate(a)}},xTickFormat:{get:function(){return f.tickFormat()},set:function(a){f.tickFormat(a);k.xTickFormat(a)}},yTickFormat:{get:function(){return p.tickFormat()},set:function(a){p.tickFormat(a);k.yTickFormat(a)}},
x:{get:function(){return c.x()},set:function(a){c.x(a);k.x(a)}},y:{get:function(){return c.y()},set:function(a){c.y(a);k.y(a)}},rightAlignYAxis:{get:function(){return B},set:function(a){B=a;p.orient(B?"right":"left")}},useInteractiveGuideline:{get:function(){return M},set:function(a){if(M=a)c.interactive(!1),c.useVoronoi(!1)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.lineWithFocusChart=function(){return e.models.lineChart().margin({bottom:30}).focusEnable(!0)};e.models.linePlusBarChart=
function(){function a(r){r.each(function(r){function G(){J.empty()||J.extent(K);Ha.data([J.empty()?l.domain():K]).each(function(a,c){c=l(a[0])-l.range()[0];var e=l.range()[1]-l(a[1]);d3.select(this).select(".left").attr("width",0>c?0:c);d3.select(this).select(".right").attr("x",l(a[1])).attr("width",0>e?0:e)})}function da(){K=J.empty()?null:J.extent();Q=J.empty()?l.domain():J.extent();U.brush({extent:Q,brush:J});G();p.width(ta).height(ha).color(r.map(function(a,c){return a.color||S(a,c)}).filter(function(a,
c){return!r[c].disabled&&r[c].bar}));c.width(ta).height(ha).color(r.map(function(a,c){return a.color||S(a,c)}).filter(function(a,c){return!r[c].disabled&&!r[c].bar}));var a=ea.select(".nv-focus .nv-barsWrap").datum(pa.length?pa.map(function(a,c){return{key:a.key,values:a.values.filter(function(a,c){return p.x()(a,c)>=Q[0]&&p.x()(a,c)<=Q[1]})}}):[{values:[]}]),f=ea.select(".nv-focus .nv-linesWrap").datum(ia(Ia)?[{values:[]}]:Ia.filter(function(a){return!a.disabled}).map(function(a,e){return{area:a.area,
fillOpacity:a.fillOpacity,strokeWidth:a.strokeWidth,key:a.key,values:a.values.filter(function(a,e){return c.x()(a,e)>=Q[0]&&c.x()(a,e)<=Q[1]})}}));t=pa.length&&!ma?p.xScale():c.xScale();q.scale(t)._ticks(e.utils.calcTicksX(ta/100,r)).tickSize(-ha,0);q.domain([Math.ceil(Q[0]),Math.floor(Q[1])]);ea.select(".nv-x.nv-axis").transition().duration(V).call(q);a.transition().duration(V).call(p);f.transition().duration(V).call(c);ea.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+Z.range()[0]+
")");k.scale(Z)._ticks(e.utils.calcTicksY(ha/36,r)).tickSize(-ta,0);w.scale(aa)._ticks(e.utils.calcTicksY(ha/36,r));ma?w.tickSize(Ia.length?0:-ta,0):w.tickSize(pa.length?0:-ta,0);f=pa.length?1:0;var h=Ia.length&&!ia(Ia)?1:0;a=ma?h:f;f=ma?f:h;ea.select(".nv-focus .nv-y1.nv-axis").style("opacity",a);ea.select(".nv-focus .nv-y2.nv-axis").style("opacity",f).attr("transform","translate("+t.range()[1]+",0)");ea.select(".nv-focus .nv-y1.nv-axis").transition().duration(V).call(k);ea.select(".nv-focus .nv-y2.nv-axis").transition().duration(V).call(w)}
var va=d3.select(this);e.utils.initSVG(va);var ta=e.utils.availableWidth(B,va,D),ha=e.utils.availableHeight(M,va,D)-(N?L:0),ua=L-P.top-P.bottom;a.update=function(){va.transition().duration(V).call(a)};a.container=this;ra.setter(za(r),a.update).getter(ya(r)).update();ra.disabled=r.map(function(a){return!!a.disabled});if(!Fa)for(qa in Fa={},ra)Fa[qa]=ra[qa]instanceof Array?ra[qa].slice(0):ra[qa];if(r&&r.length&&r.filter(function(a){return a.values.length}).length)va.selectAll(".nv-noData").remove();
else return e.utils.noData(a,va),a;var pa=r.filter(function(a){return!a.disabled&&a.bar}),Ia=r.filter(function(a){return!a.bar});t=pa.length&&!ma?p.xScale():c.xScale();l=v.scale();Z=ma?c.yScale():p.yScale();aa=ma?p.yScale():c.yScale();X=ma?f.yScale():h.yScale();T=ma?h.yScale():f.yScale();var qa=r.filter(function(a){return!a.disabled&&(ma?!a.bar:a.bar)}).map(function(a){return a.values.map(function(a,c){return{x:u(a,c),y:n(a,c)}})});var Ba=r.filter(function(a){return!a.disabled&&(ma?a.bar:!a.bar)}).map(function(a){return a.values.map(function(a,
c){return{x:u(a,c),y:n(a,c)}})});t.range([0,ta]);l.domain(d3.extent(d3.merge(qa.concat(Ba)),function(a){return a.x})).range([0,ta]);qa=va.selectAll("g.nv-wrap.nv-linePlusBar").data([r]);Ba=qa.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g");var ea=qa.select("g");Ba.append("g").attr("class","nv-legendWrap");var Ga=Ba.append("g").attr("class","nv-focus");Ga.append("g").attr("class","nv-x nv-axis");Ga.append("g").attr("class","nv-y1 nv-axis");Ga.append("g").attr("class","nv-y2 nv-axis");
Ga.append("g").attr("class","nv-barsWrap");Ga.append("g").attr("class","nv-linesWrap");Ba=Ba.append("g").attr("class","nv-context");Ba.append("g").attr("class","nv-x nv-axis");Ba.append("g").attr("class","nv-y1 nv-axis");Ba.append("g").attr("class","nv-y2 nv-axis");Ba.append("g").attr("class","nv-barsWrap");Ba.append("g").attr("class","nv-linesWrap");Ba.append("g").attr("class","nv-brushBackground");Ba.append("g").attr("class","nv-x nv-brush");R?(Ba=I.align()?ta/2:ta,Ga=I.align()?Ba:0,I.width(Ba),
ea.select(".nv-legendWrap").datum(r.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=ma?a.originalKey+(a.bar?na:ca):a.originalKey+(a.bar?ca:na);return a})).call(I),H||I.height()===D.top||(D.top=I.height(),ha=e.utils.availableHeight(M,va,D)-L),ea.select(".nv-legendWrap").attr("transform","translate("+Ga+","+-D.top+")")):ea.select(".nv-legendWrap").selectAll("*").remove();qa.attr("transform","translate("+D.left+","+D.top+")");ea.select(".nv-context").style("display",N?
"initial":"none");h.width(ta).height(ua).color(r.map(function(a,c){return a.color||S(a,c)}).filter(function(a,c){return!r[c].disabled&&r[c].bar}));f.width(ta).height(ua).color(r.map(function(a,c){return a.color||S(a,c)}).filter(function(a,c){return!r[c].disabled&&!r[c].bar}));qa=ea.select(".nv-context .nv-barsWrap").datum(pa.length?pa:[{values:[]}]);Ba=ea.select(".nv-context .nv-linesWrap").datum(ia(Ia)?[{values:[]}]:Ia.filter(function(a){return!a.disabled}));ea.select(".nv-context").attr("transform",
"translate(0,"+(ha+D.bottom+P.top)+")");qa.transition().call(h);Ba.transition().call(f);y&&(v._ticks(e.utils.calcTicksX(ta/100,r)).tickSize(-ua,0),ea.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+X.range()[0]+")"),ea.select(".nv-context .nv-x.nv-axis").transition().call(v));F&&(A.scale(X)._ticks(ua/36).tickSize(-ta,0),E.scale(T)._ticks(ua/36).tickSize(pa.length?0:-ta,0),ea.select(".nv-context .nv-y3.nv-axis").style("opacity",pa.length?1:0).attr("transform","translate(0,"+l.range()[0]+
")"),ea.select(".nv-context .nv-y2.nv-axis").style("opacity",Ia.length?1:0).attr("transform","translate("+l.range()[1]+",0)"),ea.select(".nv-context .nv-y1.nv-axis").transition().call(A),ea.select(".nv-context .nv-y2.nv-axis").transition().call(E));J.x(l).on("brush",da);K&&J.extent(K);var Ha=ea.select(".nv-brushBackground").selectAll("g").data([K||J.extent()]);qa=Ha.enter().append("g");qa.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",ua);qa.append("rect").attr("class",
"right").attr("x",0).attr("y",0).attr("height",ua);qa=ea.select(".nv-x.nv-brush").call(J);qa.selectAll("rect").attr("height",ua);qa.selectAll(".resize").append("path").attr("d",function(a){var c=(a=+("e"==a))?1:-1,e=ua/3;return"M"+.5*c+","+e+"A6,6 0 0 "+a+" "+6.5*c+","+(e+6)+"V"+(2*e-6)+"A6,6 0 0 "+a+" "+.5*c+","+2*e+"ZM"+2.5*c+","+(e+8)+"V"+(2*e-8)+"M"+4.5*c+","+(e+8)+"V"+(2*e-8)});I.dispatch.on("stateChange",function(c){for(var e in c)ra[e]=c[e];U.stateChange(ra);a.update()});U.on("changeState",
function(c){"undefined"!==typeof c.disabled&&(r.forEach(function(a,e){a.disabled=c.disabled[e]}),ra.disabled=c.disabled);a.update()});da()});return a}var c=e.models.line(),f=e.models.line(),p=e.models.historicalBar(),h=e.models.historicalBar(),q=e.models.axis(),v=e.models.axis(),k=e.models.axis(),w=e.models.axis(),A=e.models.axis(),E=e.models.axis(),I=e.models.legend(),J=d3.svg.brush(),G=e.models.tooltip(),D={top:30,right:30,bottom:30,left:60},H=null,P={top:0,right:30,bottom:20,left:60},B=null,M=
null,u=function(a){return a.x},n=function(a){return a.y},S=e.utils.defaultColor(),R=!0,N=!0,F=!1,y=!0,L=50,Q,K=null,t,l,Z,aa,X,T,r=null,U=d3.dispatch("brush","stateChange","changeState"),V=0,ra=e.utils.state(),Fa=null,ca=" (left axis)",na=" (right axis)",ma=!1;c.clipEdge(!0);f.interactive(!1);f.pointActive(function(a){return!1});q.orient("bottom").tickPadding(5);k.orient("left");w.orient("right");v.orient("bottom").tickPadding(5);A.orient("left");E.orient("right");G.headerEnabled(!0).headerFormatter(function(a,
c){return q.tickFormat()(a,c)});var ya=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},za=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},ia=function(a){return a.every(function(a){return a.disabled})};c.dispatch.on("elementMouseover.tooltip",function(a){G.duration(100).valueFormatter(function(a,c){return(ma?{main:k,focus:A}:{main:w,focus:E}).main.tickFormat()(a,c)}).data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",
function(a){G.hidden(!0)});p.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={value:a.y()(c.data),color:c.color};G.duration(0).valueFormatter(function(a,c){return(ma?{main:w,focus:E}:{main:k,focus:A}).main.tickFormat()(a,c)}).data(c).hidden(!1)});p.dispatch.on("elementMouseout.tooltip",function(a){G.hidden(!0)});p.dispatch.on("elementMousemove.tooltip",function(a){G()});a.dispatch=U;a.legend=I;a.lines=c;a.lines2=f;a.bars=p;a.bars2=h;a.xAxis=q;a.x2Axis=v;a.y1Axis=
k;a.y2Axis=w;a.y3Axis=A;a.y4Axis=E;a.tooltip=G;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return B},set:function(a){B=a}},height:{get:function(){return M},set:function(a){M=a}},showLegend:{get:function(){return R},set:function(a){R=a}},brushExtent:{get:function(){return K},set:function(a){K=a}},noData:{get:function(){return r},set:function(a){r=a}},focusEnable:{get:function(){return N},set:function(a){N=a}},focusHeight:{get:function(){return L},set:function(a){L=
a}},focusShowAxisX:{get:function(){return y},set:function(a){y=a}},focusShowAxisY:{get:function(){return F},set:function(a){F=a}},legendLeftAxisHint:{get:function(){return ca},set:function(a){ca=a}},legendRightAxisHint:{get:function(){return na},set:function(a){na=a}},margin:{get:function(){return D},set:function(a){void 0!==a.top&&(H=D.top=a.top);D.right=void 0!==a.right?a.right:D.right;D.bottom=void 0!==a.bottom?a.bottom:D.bottom;D.left=void 0!==a.left?a.left:D.left}},focusMargin:{get:function(){return P},
set:function(a){P.top=void 0!==a.top?a.top:P.top;P.right=void 0!==a.right?a.right:P.right;P.bottom=void 0!==a.bottom?a.bottom:P.bottom;P.left=void 0!==a.left?a.left:P.left}},duration:{get:function(){return V},set:function(a){V=a}},color:{get:function(){return S},set:function(a){S=e.utils.getColor(a);I.color(S)}},x:{get:function(){return u},set:function(a){u=a;c.x(a);f.x(a);p.x(a);h.x(a)}},y:{get:function(){return n},set:function(a){n=a;c.y(a);f.y(a);p.y(a);h.y(a)}},switchYAxisOrder:{get:function(){return ma},
set:function(a){if(ma!==a){var c=k;k=w;w=c;c=A;A=E;E=c}ma=a;k.orient("left");w.orient("right");A.orient("left");E.orient("right")}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiBar=function(){function a(t){Q.reset();t.each(function(a){var l=f-c.left-c.right,t=p-c.top-c.bottom;k=d3.select(this);e.utils.initSVG(k);var X=0;H&&a.length&&(H=[{values:a[0].values.map(function(a){return{x:a.x,y:0,series:a.series,size:.01}})}]);if(J){var T=d3.layout.stack().offset(G).values(function(a){return a.values}).y(A)(!a.length&&
H?H:a);T.forEach(function(c,e){c.nonStackable?(a[e].nonStackableSeries=X++,T[e]=a[e]):0<e&&T[e-1].nonStackable&&T[e].values.map(function(a,c){a.y0-=T[e-1].values[c].y;a.y1=a.y0+a.y})});a=T}a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});J&&0<a.length&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(c,l){a[l].nonStackable||(c=c.values[e],c.size=Math.abs(c.y),0>c.y?(c.y1=h,h-=c.size):(c.y1=c.size+f,f+=c.size))})});var r=u&&n?[]:a.map(function(a,c){return a.values.map(function(a,
e){return{x:w(a,e),y:A(a,e),y0:a.y0,y1:a.y1,idx:c}})});h.domain(u||d3.merge(r).map(function(a){return a.x})).rangeBands(S||[0,l],N);q.domain(n||d3.extent(d3.merge(r).map(function(c){var e=c.y;J&&!a[c.idx].nonStackable&&(e=0<c.y?c.y1:c.y1+c.y);return e}).concat(E))).range(R||[t,0]);h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]-.01*h.domain()[0],h.domain()[1]+.01*h.domain()[1]]):h.domain([-1,1]));q.domain()[0]===q.domain()[1]&&(q.domain()[0]?q.domain([q.domain()[0]+.01*q.domain()[0],
q.domain()[1]-.01*q.domain()[1]]):q.domain([-1,1]));L=L||q;r=k.selectAll("g.nv-wrap.nv-multibar").data([a]);var U=r.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),V=U.append("defs");U=U.append("g");var ra=r.select("g");U.append("g").attr("class","nv-groups");r.attr("transform","translate("+c.left+","+c.top+")");V.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");r.select("#nv-edge-clip-"+v+" rect").attr("width",l).attr("height",t);ra.attr("clip-path",I?"url(#nv-edge-clip-"+
v+")":"");l=r.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});l.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);t=Q.transition(l.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,M)).attr("y",function(c,e,f){e=L(0)||0;J&&a[c.series]&&!a[c.series].nonStackable&&(e=L(c.y0));return e}).attr("height",0).remove();t.delay&&t.delay(function(a,c){return M/(K+1)*c-c});l.attr("class",function(a,c){return"nv-group nv-series-"+
c}).classed("hover",function(a){return a.hover}).style("fill",function(a,c){return D(a,c)}).style("stroke",function(a,c){return D(a,c)});l.style("stroke-opacity",1).style("fill-opacity",F);l=l.selectAll("rect.nv-bar").data(function(c){return H&&!a.length?H.values:c.values});l.exit().remove();l.enter().append("rect").attr("class",function(a,c){return 0>A(a,c)?"nv-bar negative":"nv-bar positive"}).attr("x",function(c,e,f){return J&&!a[f].nonStackable?0:f*h.rangeBand()/a.length}).attr("y",function(c,
e,f){return L(J&&!a[f].nonStackable?c.y0:0)||0}).attr("height",0).attr("width",function(c,e,f){return h.rangeBand()/(J&&!a[f].nonStackable?1:a.length)}).attr("transform",function(a,c){return"translate("+h(w(a,c))+",0)"});l.style("fill",function(a,c,e){return D(a,e,c)}).style("stroke",function(a,c,e){return D(a,e,c)}).on("mouseover",function(a,c){d3.select(this).classed("hover",!0);y.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",
!1);y.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){y.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",function(a,c){y.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){y.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});l.attr("class",function(a,c){return 0>A(a,
c)?"nv-bar negative":"nv-bar positive"}).attr("transform",function(a,c){return"translate("+h(w(a,c))+",0)"});P&&(B||(B=a.map(function(){return!0})),l.style("fill",function(a,c,e){return d3.rgb(P(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}).style("stroke",function(a,c,e){return d3.rgb(P(a,c)).darker(B.map(function(a,c){return c}).filter(function(a,c){return!B[c]})[e]).toString()}));l=l.watchTransition(Q,"multibar",Math.min(250,M)).delay(function(c,
e){return e*M/a[0].values.length});J?l.attr("y",function(c,e,f){return a[f].nonStackable?0>A(c,e)?q(0):-1>q(0)-q(A(c,e))?q(0)-1:q(A(c,e))||0:q(c.y1)}).attr("height",function(c,e,f){return a[f].nonStackable?Math.max(Math.abs(q(A(c,e))-q(0)),0)||0:Math.max(Math.abs(q(c.y+c.y0)-q(c.y0)),0)}).attr("x",function(c,e,f){e=0;a[f].nonStackable&&(e=c.series*h.rangeBand()/a.length,a.length!==X&&(e=a[f].nonStackableSeries*h.rangeBand()/(2*X)));return e}).attr("width",function(c,e,f){return a[f].nonStackable?
(c=h.rangeBand()/X,a.length!==X&&(c=h.rangeBand()/(2*X)),c):h.rangeBand()}):l.attr("x",function(c,e){return c.series*h.rangeBand()/a.length}).attr("width",h.rangeBand()/a.length).attr("y",function(a,c){return 0>A(a,c)?q(0):1>q(0)-q(A(a,c))?q(0)-1:q(A(a,c))||0}).attr("height",function(a,c){return Math.max(Math.abs(q(A(a,c))-q(0)),1)||0});h.copy();L=q.copy();a[0]&&a[0].values&&(K=a[0].values.length)});Q.renderEnd("multibar immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,p=500,h=d3.scale.ordinal(),
q=d3.scale.linear(),v=Math.floor(1E4*Math.random()),k=null,w=function(a){return a.x},A=function(a){return a.y},E=[0],I=!0,J=!1,G="zero",D=e.utils.defaultColor(),H=!1,P=null,B,M=500,u,n,S,R,N=.1,F=.75,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),L,Q=e.utils.renderWatch(y,M),K=0;a.dispatch=y;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},
set:function(a){p=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return A},set:function(a){A=a}},xScale:{get:function(){return h},set:function(a){h=a}},yScale:{get:function(){return q},set:function(a){q=a}},xDomain:{get:function(){return u},set:function(a){u=a}},yDomain:{get:function(){return n},set:function(a){n=a}},xRange:{get:function(){return S},set:function(a){S=a}},yRange:{get:function(){return R},set:function(a){R=a}},forceY:{get:function(){return E},set:function(a){E=
a}},stacked:{get:function(){return J},set:function(a){J=a}},stackOffset:{get:function(){return G},set:function(a){G=a}},clipEdge:{get:function(){return I},set:function(a){I=a}},disabled:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return v},set:function(a){v=a}},hideable:{get:function(){return H},set:function(a){H=a}},groupSpacing:{get:function(){return N},set:function(a){N=a}},fillOpacity:{get:function(){return F},set:function(a){F=a}},margin:{get:function(){return c},set:function(a){c.top=
void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return M},set:function(a){M=a;Q.reset(M)}},color:{get:function(){return D},set:function(a){D=e.utils.getColor(a)}},barColor:{get:function(){return P},set:function(a){P=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarChart=function(){function a(r){Z.reset();Z.models(c);P&&Z.models(f);B&&Z.models(p);
r.each(function(r){var U=d3.select(this);e.utils.initSVG(U);var Q=e.utils.availableWidth(E,U,w),Z=e.utils.availableHeight(I,U,w);a.update=function(){0===t?U.call(a):U.transition().duration(t).call(a)};a.container=this;y.setter(T(r),a.update).getter(X(r)).update();y.disabled=r.map(function(a){return!!a.disabled});if(!L)for(ca in L={},y)L[ca]=y[ca]instanceof Array?y[ca].slice(0):y[ca];if(r&&r.length&&r.filter(function(a){return a.values.length}).length)U.selectAll(".nv-noData").remove();else return e.utils.noData(a,
U),a;N=c.xScale();F=c.yScale();var ca=U.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([r]);var na=ca.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),ma=ca.select("g");na.append("g").attr("class","nv-x nv-axis");na.append("g").attr("class","nv-y nv-axis");na.append("g").attr("class","nv-barsWrap");na.append("g").attr("class","nv-legendWrap");na.append("g").attr("class","nv-controlsWrap");na.append("g").attr("class","nv-interactive");H?(q.width(Q-(G?180:0)),ma.select(".nv-legendWrap").datum(r).call(q),
A||q.height()===w.top||(w.top=q.height(),Z=e.utils.availableHeight(I,U,w)),ma.select(".nv-legendWrap").attr("transform","translate("+(G?180:0)+","+-w.top+")")):ma.select(".nv-legendWrap").selectAll("*").remove();if(G){var ya=[{key:D.grouped||"Grouped",disabled:c.stacked()},{key:D.stacked||"Stacked",disabled:!c.stacked()}];v.width(G?180:0).color(["#444","#444","#444"]);ma.select(".nv-controlsWrap").datum(ya).attr("transform","translate(0,"+-w.top+")").call(v)}else ma.select(".nv-controlsWrap").selectAll("*").remove();
ca.attr("transform","translate("+w.left+","+w.top+")");M&&ma.select(".nv-y.nv-axis").attr("transform","translate("+Q+",0)");c.disabled(r.map(function(a){return a.disabled})).width(Q).height(Z).color(r.map(function(a,c){return a.color||J(a,c)}).filter(function(a,c){return!r[c].disabled}));ma.select(".nv-barsWrap").datum(r.filter(function(a){return!a.disabled})).call(c);if(P){f.scale(N)._ticks(e.utils.calcTicksX(Q/100,r)).tickSize(-Z,0);ma.select(".nv-x.nv-axis").attr("transform","translate(0,"+F.range()[0]+
")");ma.select(".nv-x.nv-axis").call(f);na=ma.select(".nv-x.nv-axis > g").selectAll("g");na.selectAll("line, text").style("opacity",1);if(n){na.selectAll("text").attr("transform",function(a,c,e){return"translate(0,"+(0==e%2?5:17)+")"});var za=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;ma.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(a,c){return"translate(0,"+(0===c||0!==za%2?17:5)+")"})}S&&ma.selectAll(".tick text").call(e.utils.wrapTicks,a.xAxis.rangeBand());
u&&na.filter(function(a,c){return 0!==c%Math.ceil(r[0].values.length/(Q/100))}).selectAll("text, line").style("opacity",0);R&&na.selectAll(".tick text").attr("transform","rotate("+R+" 0,0)").style("text-anchor",0<R?"start":"end");ma.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}B&&(p.scale(F)._ticks(e.utils.calcTicksY(Z/36,r)).tickSize(-Q,0),ma.select(".nv-y.nv-axis").call(p));l&&(h.width(Q).height(Z).margin({left:w.left,top:w.top}).svgContainer(U).xScale(N),ca.select(".nv-interactive").call(h));
q.dispatch.on("stateChange",function(c){for(var e in c)y[e]=c[e];K.stateChange(y);a.update()});v.dispatch.on("legendClick",function(e,f){if(e.disabled){ya=ya.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":case D.grouped:c.stacked(!1);break;case "Stacked":case D.stacked:c.stacked(!0)}y.stacked=c.stacked();K.stateChange(y);a.update()}});K.on("changeState",function(e){"undefined"!==typeof e.disabled&&(r.forEach(function(a,c){a.disabled=e.disabled[c]}),y.disabled=
e.disabled);"undefined"!==typeof e.stacked&&(c.stacked(e.stacked),aa=y.stacked=e.stacked);a.update()});l?(h.dispatch.on("elementMousemove",function(c){if(void 0!=c.pointXValue){var e,f,l,n,k=[];r.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(h,r){f=N.domain().indexOf(c.pointXValue);r=h.values[f];void 0!==r&&(n=r.x,void 0===e&&(e=r),void 0===l&&(l=c.mouseX),k.push({key:h.key,value:a.y()(r,f),color:J(h,h.seriesIndex),data:h.values[f]}))});h.tooltip.data({value:n,index:f,
series:k})();h.renderGuideLine(l)}}),h.dispatch.on("elementMouseout",function(a){h.tooltip.hidden(!0)})):(c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};k.data(c).hidden(!1)}),c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)}),c.dispatch.on("elementMousemove.tooltip",function(a){k()}))});Z.renderEnd("multibarchart immediate");return a}var c=e.models.multiBar(),f=e.models.axis(),p=e.models.axis(),
h=e.interactiveGuideline(),q=e.models.legend(),v=e.models.legend(),k=e.models.tooltip(),w={top:30,right:20,bottom:50,left:60},A=null,E=null,I=null,J=e.utils.defaultColor(),G=!0,D={},H=!0,P=!0,B=!0,M=!1,u=!0,n=!1,S=!1,R=0,N,F,y=e.utils.state(),L=null,Q=null,K=d3.dispatch("stateChange","changeState","renderEnd"),t=250,l=!1;y.stacked=!1;c.stacked(!1);f.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(a){return a});p.orient(M?"right":"left").tickFormat(d3.format(",.1f"));k.duration(0).valueFormatter(function(a,
c){return p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.valueFormatter(function(a,c){return null==a?"N/A":p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});h.tooltip.duration(0).valueFormatter(function(a,c){return p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,
c)});v.updateState(!1);var Z=e.utils.renderWatch(K),aa=!1,X=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),stacked:aa}}},T=function(a){return function(c){void 0!==c.stacked&&(aa=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=K;a.multibar=c;a.legend=q;a.controls=v;a.xAxis=f;a.yAxis=p;a.state=y;a.tooltip=k;a.interactiveLayer=h;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},
set:function(a){E=a}},height:{get:function(){return I},set:function(a){I=a}},showLegend:{get:function(){return H},set:function(a){H=a}},showControls:{get:function(){return G},set:function(a){G=a}},controlLabels:{get:function(){return D},set:function(a){D=a}},showXAxis:{get:function(){return P},set:function(a){P=a}},showYAxis:{get:function(){return B},set:function(a){B=a}},defaultState:{get:function(){return L},set:function(a){L=a}},noData:{get:function(){return Q},set:function(a){Q=a}},reduceXTicks:{get:function(){return u},
set:function(a){u=a}},rotateLabels:{get:function(){return R},set:function(a){R=a}},staggerLabels:{get:function(){return n},set:function(a){n=a}},wrapLabels:{get:function(){return S},set:function(a){S=!!a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(A=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},duration:{get:function(){return t},set:function(a){t=a;c.duration(t);f.duration(t);p.duration(t);
Z.reset(t)}},color:{get:function(){return J},set:function(a){J=e.utils.getColor(a);q.color(J)}},rightAlignYAxis:{get:function(){return M},set:function(a){M=a;p.orient(M?"right":"left")}},useInteractiveGuideline:{get:function(){return l},set:function(a){l=a}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);q.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiBarHorizontal=function(){function a(h){K.reset();
h.each(function(a){var h=f-c.left-c.right,l=p-c.top-c.bottom;q=d3.select(this);e.utils.initSVG(q);H&&(a=d3.layout.stack().offset("zero").values(function(a){return a.values}).y(A)(a));a.forEach(function(a,c){a.values.forEach(function(e){e.series=c;e.key=a.key})});H&&a[0].values.map(function(c,e){var f=0,h=0;a.map(function(a){a=a.values[e];a.size=Math.abs(a.y);0>a.y?(a.y1=h-a.size,h-=a.size):(a.y1=f,f+=a.size)})});var t=S&&R?[]:a.map(function(a){return a.values.map(function(a,c){return{x:w(a,c),y:A(a,
c),y0:a.y0,y1:a.y1}})});v.domain(S||d3.merge(t).map(function(a){return a.x})).rangeBands(N||[0,l],M);k.domain(R||d3.extent(d3.merge(t).map(function(a){return H?0<a.y?a.y1+a.y:a.y1:a.y}).concat(I)));P&&!H?k.range(F||[0>k.domain()[0]?B:0,h-(0<k.domain()[1]?B:0)]):k.range(F||[0,h]);Q=Q||d3.scale.linear().domain(k.domain()).range([k(0),k(0)]);h=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([a]);l=h.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal");l.append("defs");
l=l.append("g");h.select("g");l.append("g").attr("class","nv-groups");h.attr("transform","translate("+c.left+","+c.top+")");h=h.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a,c){return c});h.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);h.exit().watchTransition(K,"multibarhorizontal: exit groups").style("stroke-opacity",1E-6).style("fill-opacity",1E-6).remove();h.attr("class",function(a,c){return"nv-group nv-series-"+c}).classed("hover",
function(a){return a.hover}).style("fill",function(a,c){return J(a,c)}).style("stroke",function(a,c){return J(a,c)});h.watchTransition(K,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",u);h=h.selectAll("g.nv-bar").data(function(a){return a.values});h.exit().remove();l=h.enter().append("g").attr("transform",function(c,e,f){return"translate("+Q(H?c.y0:0)+","+(H?0:f*v.rangeBand()/a.length+v(w(c,e)))+")"});l.append("rect").attr("width",0).attr("height",v.rangeBand()/(H?1:
a.length));h.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);L.elementMouseover({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);L.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mouseout",function(a,c){L.elementMouseout({data:a,index:c,color:d3.select(this).style("fill")})}).on("mousemove",function(a,c){L.elementMousemove({data:a,index:c,color:d3.select(this).style("fill")})}).on("click",
function(a,c){L.elementClick({data:a,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this});d3.event.stopPropagation()}).on("dblclick",function(a,c){L.elementDblClick({data:a,index:c,color:d3.select(this).style("fill")});d3.event.stopPropagation()});E(a[0],0)&&(l.append("polyline"),h.select("polyline").attr("fill","none").attr("points",function(c,e){c=E(c,e);e=.8*v.rangeBand()/(2*(H?1:a.length));c=c.length?c:[-Math.abs(c),Math.abs(c)];c=c.map(function(a){return k(a)-k(0)});return[[c[0],
-e],[c[0],e],[c[0],0],[c[1],0],[c[1],-e],[c[1],e]].map(function(a){return a.join(",")}).join(" ")}).attr("transform",function(c,e){var f=v.rangeBand()/(2*(H?1:a.length));return"translate("+(0>A(c,e)?0:k(A(c,e))-k(0))+", "+f+")"}));l.append("text");P&&!H?(h.select("text").attr("text-anchor",function(a,c){return 0>A(a,c)?"end":"start"}).attr("y",v.rangeBand()/(2*a.length)).attr("dy",".32em").text(function(a,c){var e=n(A(a,c));a=E(a,c);return void 0===a?e:a.length?e+"+"+n(Math.abs(a[1]))+"-"+n(Math.abs(a[0])):
e+"\u00b1"+n(Math.abs(a))}),h.watchTransition(K,"multibarhorizontal: bars").select("text").attr("x",function(a,c){return 0>A(a,c)?-4:k(A(a,c))-k(0)+4})):h.selectAll("text").text("");h.selectAll("text.nv-bar-label").text("");h.attr("class",function(a,c){return 0>A(a,c)?"nv-bar negative":"nv-bar positive"});G&&(D||(D=a.map(function(){return!0})),h.style("fill",function(a,c,e){return d3.rgb(G(a,c)).darker(D.map(function(a,c){return c}).filter(function(a,c){return!D[c]})[e]).toString()}).style("stroke",
function(a,c,e){return d3.rgb(G(a,c)).darker(D.map(function(a,c){return c}).filter(function(a,c){return!D[c]})[e]).toString()}));H?h.watchTransition(K,"multibarhorizontal: bars").attr("transform",function(a,c){return"translate("+k(a.y1)+","+v(w(a,c))+")"}).select("rect").attr("width",function(a,c){return Math.abs(k(A(a,c)+a.y0)-k(a.y0))||0}).attr("height",v.rangeBand()):h.watchTransition(K,"multibarhorizontal: bars").attr("transform",function(c,e){return"translate("+(0>A(c,e)?k(A(c,e)):k(0))+","+
(c.series*v.rangeBand()/a.length+v(w(c,e)))+")"}).select("rect").attr("height",v.rangeBand()/a.length).attr("width",function(a,c){return Math.max(Math.abs(k(A(a,c))-k(0)),1)||0});v.copy();Q=k.copy()});K.renderEnd("multibarHorizontal immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,p=500,h=Math.floor(1E4*Math.random()),q=null,v=d3.scale.ordinal(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},E=function(a){return a.yErr},I=[0],J=e.utils.defaultColor(),G=null,
D,H=!1,P=!1,B=60,M=.1,u=.75,n=d3.format(",.2f"),S,R,N,F,y=250,L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),Q,K=e.utils.renderWatch(L,y);a.dispatch=L;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return A},set:function(a){A=
a}},yErr:{get:function(){return E},set:function(a){E=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return S},set:function(a){S=a}},yDomain:{get:function(){return R},set:function(a){R=a}},xRange:{get:function(){return N},set:function(a){N=a}},yRange:{get:function(){return F},set:function(a){F=a}},forceY:{get:function(){return I},set:function(a){I=a}},stacked:{get:function(){return H},set:function(a){H=a}},showValues:{get:function(){return P},
set:function(a){P=a}},disabled:{get:function(){return D},set:function(a){D=a}},id:{get:function(){return h},set:function(a){h=a}},valueFormat:{get:function(){return n},set:function(a){n=a}},valuePadding:{get:function(){return B},set:function(a){B=a}},groupSpacing:{get:function(){return M},set:function(a){M=a}},fillOpacity:{get:function(){return u},set:function(a){u=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=
void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},duration:{get:function(){return y},set:function(a){y=a;K.reset(y)}},color:{get:function(){return J},set:function(a){J=e.utils.getColor(a)}},barColor:{get:function(){return G},set:function(a){G=a?e.utils.getColor(a):null}}});e.utils.initOptions(a);return a};e.models.multiBarHorizontalChart=function(){function a(v){Q.reset();Q.models(c);H&&Q.models(f);P&&Q.models(p);v.each(function(t){var l=d3.select(this);e.utils.initSVG(l);
var v=e.utils.availableWidth(A,l,k),K=e.utils.availableHeight(E,l,k);a.update=function(){l.transition().duration(F).call(a)};a.container=this;B=c.stacked();n.setter(L(t),a.update).getter(y(t)).update();n.disabled=t.map(function(a){return!!a.disabled});if(!S)for(Q in S={},n)S[Q]=n[Q]instanceof Array?n[Q].slice(0):n[Q];if(t&&t.length&&t.filter(function(a){return a.values.length}).length)l.selectAll(".nv-noData").remove();else return e.utils.noData(a,l),a;M=c.xScale();u=c.yScale().clamp(!0);var Q=l.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([t]);
var T=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),r=Q.select("g");T.append("g").attr("class","nv-x nv-axis");T.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");T.append("g").attr("class","nv-barsWrap");T.append("g").attr("class","nv-legendWrap");T.append("g").attr("class","nv-controlsWrap");D?(h.width(v-(J?180:0)),r.select(".nv-legendWrap").datum(t).call(h),w||h.height()===k.top||(k.top=h.height(),K=e.utils.availableHeight(E,
l,k)),r.select(".nv-legendWrap").attr("transform","translate("+(J?180:0)+","+-k.top+")")):r.select(".nv-legendWrap").selectAll("*").remove();if(J){var U=[{key:G.grouped||"Grouped",disabled:c.stacked()},{key:G.stacked||"Stacked",disabled:!c.stacked()}];q.width(J?180:0).color(["#444","#444","#444"]);r.select(".nv-controlsWrap").datum(U).attr("transform","translate(0,"+-k.top+")").call(q)}else r.select(".nv-controlsWrap").selectAll("*").remove();Q.attr("transform","translate("+k.left+","+k.top+")");
c.disabled(t.map(function(a){return a.disabled})).width(v).height(K).color(t.map(function(a,c){return a.color||I(a,c)}).filter(function(a,c){return!t[c].disabled}));r.select(".nv-barsWrap").datum(t.filter(function(a){return!a.disabled})).transition().call(c);H&&(f.scale(M)._ticks(e.utils.calcTicksX(K/24,t)).tickSize(-v,0),r.select(".nv-x.nv-axis").call(f),r.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));P&&(p.scale(u)._ticks(e.utils.calcTicksY(v/100,t)).tickSize(-K,0),r.select(".nv-y.nv-axis").attr("transform",
"translate(0,"+K+")"),r.select(".nv-y.nv-axis").call(p));r.select(".nv-zeroLine line").attr("x1",u(0)).attr("x2",u(0)).attr("y1",0).attr("y2",-K);h.dispatch.on("stateChange",function(c){for(var e in c)n[e]=c[e];N.stateChange(n);a.update()});q.dispatch.on("legendClick",function(e,f){if(e.disabled){U=U.map(function(a){a.disabled=!0;return a});e.disabled=!1;switch(e.key){case "Grouped":case G.grouped:c.stacked(!1);break;case "Stacked":case G.stacked:c.stacked(!0)}n.stacked=c.stacked();N.stateChange(n);
B=c.stacked();a.update()}});N.on("changeState",function(e){"undefined"!==typeof e.disabled&&(t.forEach(function(a,c){a.disabled=e.disabled[c]}),n.disabled=e.disabled);"undefined"!==typeof e.stacked&&(c.stacked(e.stacked),B=n.stacked=e.stacked);a.update()})});Q.renderEnd("multibar horizontal chart immediate");return a}var c=e.models.multiBarHorizontal(),f=e.models.axis(),p=e.models.axis(),h=e.models.legend().height(30),q=e.models.legend().height(30),v=e.models.tooltip(),k={top:30,right:20,bottom:50,
left:60},w=null,A=null,E=null,I=e.utils.defaultColor(),J=!0,G={},D=!0,H=!0,P=!0,B=!1,M,u,n=e.utils.state(),S=null,R=null,N=d3.dispatch("stateChange","changeState","renderEnd"),F=250;n.stacked=!1;c.stacked(B);f.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(a){return a});p.orient("bottom").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(a,c){return p.tickFormat()(a,c)}).headerFormatter(function(a,c){return f.tickFormat()(a,c)});q.updateState(!1);var y=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),
stacked:B}}},L=function(a){return function(c){void 0!==c.stacked&&(B=c.stacked);void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Q=e.utils.renderWatch(N,F);c.dispatch.on("elementMouseover.tooltip",function(c){c.value=a.x()(c.data);c.series={key:c.data.key,value:a.y()(c.data),color:c.color};v.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){v.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){v()});a.dispatch=N;a.multibar=c;a.legend=h;a.controls=
q;a.xAxis=f;a.yAxis=p;a.state=n;a.tooltip=v;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return E},set:function(a){E=a}},showLegend:{get:function(){return D},set:function(a){D=a}},showControls:{get:function(){return J},set:function(a){J=a}},controlLabels:{get:function(){return G},set:function(a){G=a}},showXAxis:{get:function(){return H},set:function(a){H=a}},showYAxis:{get:function(){return P},set:function(a){P=
a}},defaultState:{get:function(){return S},set:function(a){S=a}},noData:{get:function(){return R},set:function(a){R=a}},margin:{get:function(){return k},set:function(a){void 0!==a.top&&(w=k.top=a.top);k.right=void 0!==a.right?a.right:k.right;k.bottom=void 0!==a.bottom?a.bottom:k.bottom;k.left=void 0!==a.left?a.left:k.left}},duration:{get:function(){return F},set:function(a){F=a;Q.reset(F);c.duration(F);f.duration(F);p.duration(F)}},color:{get:function(){return I},set:function(a){I=e.utils.getColor(a);
h.color(I)}},barColor:{get:function(){return c.barColor},set:function(a){c.barColor(a);h.color(function(a,c){return d3.rgb("#ccc").darker(1.5*c).toString()})}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.multiChart=function(){function a(k){k.each(function(k){function B(a){var c=2===k[a.seriesIndex].yAxis?Z:l;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};X.duration(0).headerFormatter(function(a,c){return t.tickFormat()(a,c)}).valueFormatter(function(a,
e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function G(a){var c=2===k[a.seriesIndex].yAxis?Z:l;a.value=a.point.x;a.series={value:a.point.y,color:a.point.color,key:a.series.key};X.duration(100).headerFormatter(function(a,c){return t.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function T(a){var c=2===k[a.seriesIndex].yAxis?Z:l;a.point.x=Q.x()(a.point);a.point.y=Q.y()(a.point);X.duration(0).headerFormatter(function(a,c){return t.tickFormat()(a,
c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function U(a){var c=2===k[a.data.series].yAxis?Z:l;a.value=y.x()(a.data);a.series={value:y.y()(a.data),color:a.color,key:a.data.key};X.duration(0).headerFormatter(function(a,c){return t.tickFormat()(a,c)}).valueFormatter(function(a,e){return c.tickFormat()(a,e)}).data(a).hidden(!1)}function V(){for(var a=0,c=r.length;a<c;a++){var e=r[a];try{e.clearHighlights()}catch(Jb){}}}function ya(a,c,e){for(var f=0,h=r.length;f<
h;f++){var l=r[f];try{l.highlightPoint(a,c,e)}catch(kc){}}}var za=d3.select(this);e.utils.initSVG(za);a.update=function(){za.transition().call(a)};a.container=this;var ia=e.utils.availableWidth(h,za,c),da=e.utils.availableHeight(q,za,c),ha=k.filter(function(a){return"line"==a.type&&1==a.yAxis}),Aa=k.filter(function(a){return"line"==a.type&&2==a.yAxis}),xa=k.filter(function(a){return"scatter"==a.type&&1==a.yAxis}),va=k.filter(function(a){return"scatter"==a.type&&2==a.yAxis}),ta=k.filter(function(a){return"bar"==
a.type&&1==a.yAxis}),Ka=k.filter(function(a){return"bar"==a.type&&2==a.yAxis}),ua=k.filter(function(a){return"area"==a.type&&1==a.yAxis}),pa=k.filter(function(a){return"area"==a.type&&2==a.yAxis});if(k&&k.length&&k.filter(function(a){return a.values.length}).length)za.selectAll(".nv-noData").remove();else return e.utils.noData(a,za),a;var Ia=k.filter(function(a){return!a.disabled&&1==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:E(a),y:I(a)}})}),qa=k.filter(function(a){return!a.disabled&&
2==a.yAxis}).map(function(a){return a.values.map(function(a,c){return{x:E(a),y:I(a)}})});M.domain(d3.extent(d3.merge(Ia.concat(qa)),function(a){return a.x})).range([0,ia]);var Ba=za.selectAll("g.wrap.multiChart").data([k]),ea=Ba.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");ea.append("g").attr("class","nv-x nv-axis");ea.append("g").attr("class","nv-y1 nv-axis");ea.append("g").attr("class","nv-y2 nv-axis");ea.append("g").attr("class","stack1Wrap");ea.append("g").attr("class",
"stack2Wrap");ea.append("g").attr("class","bars1Wrap");ea.append("g").attr("class","bars2Wrap");ea.append("g").attr("class","scatters1Wrap");ea.append("g").attr("class","scatters2Wrap");ea.append("g").attr("class","lines1Wrap");ea.append("g").attr("class","lines2Wrap");ea.append("g").attr("class","legendWrap");ea.append("g").attr("class","nv-interactive");ea=Ba.select("g");var Ga=k.map(function(a,c){return k[c].color||p(a,c)});if(v){var Ha=aa.align()?ia/2:ia,lb=aa.align()?Ha:0;aa.width(Ha);aa.color(Ga);
ea.select(".legendWrap").datum(k.map(function(a){a.originalKey=void 0===a.originalKey?a.key:a.originalKey;a.key=a.originalKey+(1==a.yAxis?"":P);return a})).call(aa);f||aa.height()===c.top||(c.top=aa.height(),da=e.utils.availableHeight(q,za,c));ea.select(".legendWrap").attr("transform","translate("+lb+","+-c.top+")")}else ea.select(".legendWrap").selectAll("*").remove();S.width(ia).height(da).interpolate(J).color(Ga.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"line"==k[c].type}));R.width(ia).height(da).interpolate(J).color(Ga.filter(function(a,
c){return!k[c].disabled&&2==k[c].yAxis&&"line"==k[c].type}));N.width(ia).height(da).color(Ga.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"scatter"==k[c].type}));F.width(ia).height(da).color(Ga.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"scatter"==k[c].type}));y.width(ia).height(da).color(Ga.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"bar"==k[c].type}));L.width(ia).height(da).color(Ga.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"bar"==k[c].type}));
Q.width(ia).height(da).interpolate(J).color(Ga.filter(function(a,c){return!k[c].disabled&&1==k[c].yAxis&&"area"==k[c].type}));K.width(ia).height(da).interpolate(J).color(Ga.filter(function(a,c){return!k[c].disabled&&2==k[c].yAxis&&"area"==k[c].type}));ea.attr("transform","translate("+c.left+","+c.top+")");Ga=ea.select(".lines1Wrap").datum(ha.filter(function(a){return!a.disabled}));Ha=ea.select(".scatters1Wrap").datum(xa.filter(function(a){return!a.disabled}));lb=ea.select(".bars1Wrap").datum(ta.filter(function(a){return!a.disabled}));
var La=ea.select(".stack1Wrap").datum(ua.filter(function(a){return!a.disabled})),wb=ea.select(".lines2Wrap").datum(Aa.filter(function(a){return!a.disabled})),cb=ea.select(".scatters2Wrap").datum(va.filter(function(a){return!a.disabled})),bc=ea.select(".bars2Wrap").datum(Ka.filter(function(a){return!a.disabled})),cc=ea.select(".stack2Wrap").datum(pa.filter(function(a){return!a.disabled})),dc=ua.length?ua.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,
y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[],Ib=pa.length?pa.map(function(a){return a.values}).reduce(function(a,c){return a.map(function(a,e){return{x:a.x,y:a.y+c[e].y}})}).concat([{x:0,y:0}]):[];u.domain(w||d3.extent(d3.merge(Ia).concat(dc),function(a){return a.y})).range([0,da]);n.domain(A||d3.extent(d3.merge(qa).concat(Ib),function(a){return a.y})).range([0,da]);S.yDomain(u.domain());N.yDomain(u.domain());y.yDomain(u.domain());Q.yDomain(u.domain());R.yDomain(n.domain());F.yDomain(n.domain());L.yDomain(n.domain());
K.yDomain(n.domain());ua.length&&d3.transition(La).call(Q);pa.length&&d3.transition(cc).call(K);ta.length&&d3.transition(lb).call(y);Ka.length&&d3.transition(bc).call(L);ha.length&&d3.transition(Ga).call(S);Aa.length&&d3.transition(wb).call(R);xa.length&&d3.transition(Ha).call(N);va.length&&d3.transition(cb).call(F);t._ticks(e.utils.calcTicksX(ia/100,k)).tickSize(-da,0);ea.select(".nv-x.nv-axis").attr("transform","translate(0,"+da+")");d3.transition(ea.select(".nv-x.nv-axis")).call(t);l._ticks(e.utils.calcTicksY(da/
36,k)).tickSize(-ia,0);d3.transition(ea.select(".nv-y1.nv-axis")).call(l);Z._ticks(e.utils.calcTicksY(da/36,k)).tickSize(-ia,0);d3.transition(ea.select(".nv-y2.nv-axis")).call(Z);ea.select(".nv-y1.nv-axis").classed("nv-disabled",Ia.length?!1:!0).attr("transform","translate("+M.range()[0]+",0)");ea.select(".nv-y2.nv-axis").classed("nv-disabled",qa.length?!1:!0).attr("transform","translate("+M.range()[1]+",0)");aa.dispatch.on("stateChange",function(c){a.update()});H&&(D.width(ia).height(da).margin({left:c.left,
top:c.top}).svgContainer(za).xScale(M),Ba.select(".nv-interactive").call(D));H?(D.dispatch.on("elementMousemove",function(c){V();var f,h,n,r=[];k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,u){var q=M.domain(),t=k.values.filter(function(c,e){return a.x()(c,e)>=q[0]&&a.x()(c,e)<=q[1]});h=e.interactiveBisect(t,c.pointXValue,a.x());t=t[h];var v=a.y()(t,h);null!==v&&ya(u,h,!0);void 0!==t&&(void 0===f&&(f=t),void 0===n&&(n=M(a.x()(t,h))),r.push({key:k.key,value:v,color:p(k,
k.seriesIndex),data:t,yAxis:2==k.yAxis?Z:l}))});var u=function(a,c){c=r[c].yAxis;return null==a?"N/A":c.tickFormat()(a)};D.tooltip.headerFormatter(function(a,c){return t.tickFormat()(a,c)}).valueFormatter(D.tooltip.valueFormatter()||u).data({value:a.x()(f,h),index:h,series:r})();D.renderGuideLine(n)}),D.dispatch.on("elementMouseout",function(a){V()})):(S.dispatch.on("elementMouseover.tooltip",B),R.dispatch.on("elementMouseover.tooltip",B),S.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),
R.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),N.dispatch.on("elementMouseover.tooltip",G),F.dispatch.on("elementMouseover.tooltip",G),N.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),F.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),Q.dispatch.on("elementMouseover.tooltip",T),K.dispatch.on("elementMouseover.tooltip",T),Q.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),K.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),
y.dispatch.on("elementMouseover.tooltip",U),L.dispatch.on("elementMouseover.tooltip",U),y.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),L.dispatch.on("elementMouseout.tooltip",function(a){X.hidden(!0)}),y.dispatch.on("elementMousemove.tooltip",function(a){X()}),L.dispatch.on("elementMousemove.tooltip",function(a){X()}))});return a}var c={top:30,right:20,bottom:50,left:60},f=null,p=e.utils.defaultColor(),h=null,q=null,v=!0,k=null,w,A,E=function(a){return a.x},I=function(a){return a.y},
J="linear",G=!0,D=e.interactiveGuideline(),H=!1,P=" (right axis)",B=250,M=d3.scale.linear(),u=d3.scale.linear(),n=d3.scale.linear(),S=e.models.line().yScale(u).duration(B),R=e.models.line().yScale(n).duration(B),N=e.models.scatter().yScale(u).duration(B),F=e.models.scatter().yScale(n).duration(B),y=e.models.multiBar().stacked(!1).yScale(u).duration(B),L=e.models.multiBar().stacked(!1).yScale(n).duration(B),Q=e.models.stackedArea().yScale(u).duration(B),K=e.models.stackedArea().yScale(n).duration(B),
t=e.models.axis().scale(M).orient("bottom").tickPadding(5).duration(B),l=e.models.axis().scale(u).orient("left").duration(B),Z=e.models.axis().scale(n).orient("right").duration(B),aa=e.models.legend().height(30),X=e.models.tooltip(),T=d3.dispatch(),r=[S,R,N,F,y,L,Q,K];a.dispatch=T;a.legend=aa;a.lines1=S;a.lines2=R;a.scatters1=N;a.scatters2=F;a.bars1=y;a.bars2=L;a.stack1=Q;a.stack2=K;a.xAxis=t;a.yAxis1=l;a.yAxis2=Z;a.tooltip=X;a.interactiveLayer=D;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return q},set:function(a){q=a}},showLegend:{get:function(){return v},set:function(a){v=a}},yDomain1:{get:function(){return w},set:function(a){w=a}},yDomain2:{get:function(){return A},set:function(a){A=a}},noData:{get:function(){return k},set:function(a){k=a}},interpolate:{get:function(){return J},set:function(a){J=a}},legendRightAxisHint:{get:function(){return P},set:function(a){P=a}},margin:{get:function(){return c},set:function(a){void 0!==
a.top&&(f=c.top=a.top);c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return p},set:function(a){p=e.utils.getColor(a)}},x:{get:function(){return E},set:function(a){E=a;S.x(a);R.x(a);N.x(a);F.x(a);y.x(a);L.x(a);Q.x(a);K.x(a)}},y:{get:function(){return I},set:function(a){I=a;S.y(a);R.y(a);N.y(a);F.y(a);Q.y(a);K.y(a);y.y(a);L.y(a)}},useVoronoi:{get:function(){return G},set:function(a){G=a;S.useVoronoi(a);
R.useVoronoi(a);Q.useVoronoi(a);K.useVoronoi(a)}},useInteractiveGuideline:{get:function(){return H},set:function(a){if(H=a)S.interactive(!1),S.useVoronoi(!1),R.interactive(!1),R.useVoronoi(!1),Q.interactive(!1),Q.useVoronoi(!1),K.interactive(!1),K.useVoronoi(!1),N.interactive(!1),F.interactive(!1)}},duration:{get:function(){return B},set:function(a){B=a;[S,R,Q,K,N,F,t,l,Z].forEach(function(a){a.duration(B)})}}});e.utils.initOptions(a);return a};e.models.ohlcBar=function(){function a(u){u.each(function(a){q=
d3.select(this);var u=e.utils.availableWidth(f,q,c),y=e.utils.availableHeight(p,q,c);e.utils.initSVG(q);var t=u/a[0].values.length*.9;v.domain(n||d3.extent(a[0].values.map(w).concat(D)));P?v.range(R||[.5*u/a[0].values.length,u*(a[0].values.length-.5)/a[0].values.length]):v.range(R||[5+t/2,u-t/2-5]);k.domain(S||[d3.min(a[0].values.map(G).concat(H)),d3.max(a[0].values.map(J).concat(H))]).range(N||[y,0]);v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+
.01*v.domain()[1]]):v.domain([-1,1]));k.domain()[0]===k.domain()[1]&&(k.domain()[0]?k.domain([k.domain()[0]+.01*k.domain()[0],k.domain()[1]-.01*k.domain()[1]]):k.domain([-1,1]));var l=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([a[0].values]),L=l.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),aa=L.append("defs");L=L.append("g");var X=l.select("g");L.append("g").attr("class","nv-ticks");l.attr("transform","translate("+c.left+","+c.top+")");q.on("click",function(a,c){F.chartClick({data:a,
index:c,pos:d3.event,id:h})});aa.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");l.select("#nv-chart-clip-path-"+h+" rect").attr("width",u).attr("height",y);X.attr("clip-path",B?"url(#nv-chart-clip-path-"+h+")":"");y=l.select(".nv-ticks").selectAll(".nv-tick").data(function(a){return a});y.exit().remove();y.enter().append("path").attr("class",function(a,c,e){return(E(a,c)>I(a,c)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+e+"-"+c}).attr("d",function(a,c){return"m0,0l0,"+
(k(E(a,c))-k(J(a,c)))+"l"+-t/2+",0l"+t/2+",0l0,"+(k(G(a,c))-k(E(a,c)))+"l0,"+(k(I(a,c))-k(G(a,c)))+"l"+t/2+",0l"+-t/2+",0z"}).attr("transform",function(a,c){return"translate("+v(w(a,c))+","+k(J(a,c))+")"}).attr("fill",function(a,c){return M[0]}).attr("stroke",function(a,c){return M[0]}).attr("x",0).attr("y",function(a,c){return k(Math.max(0,A(a,c)))}).attr("height",function(a,c){return Math.abs(k(A(a,c))-k(0))});y.attr("class",function(a,c,e){return(E(a,c)>I(a,c)?"nv-tick negative":"nv-tick positive")+
" nv-tick-"+e+"-"+c});d3.transition(y).attr("transform",function(a,c){return"translate("+v(w(a,c))+","+k(J(a,c))+")"}).attr("d",function(c,e){var f=u/a[0].values.length*.9;return"m0,0l0,"+(k(E(c,e))-k(J(c,e)))+"l"+-f/2+",0l"+f/2+",0l0,"+(k(G(c,e))-k(E(c,e)))+"l0,"+(k(I(c,e))-k(G(c,e)))+"l"+f/2+",0l"+-f/2+",0z"})});return a}var c={top:0,right:0,bottom:0,left:0},f=null,p=null,h=Math.floor(1E4*Math.random()),q=null,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},
E=function(a){return a.open},I=function(a){return a.close},J=function(a){return a.high},G=function(a){return a.low},D=[],H=[],P=!1,B=!0,M=e.utils.defaultColor(),u=!1,n,S,R,N,F=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");a.highlightPoint=function(c,e){a.clearHighlights();q.select(".nv-ohlcBar .nv-tick-0-"+c).classed("hover",e)};a.clearHighlights=function(){q.select(".nv-ohlcBar .nv-tick.hover").classed("hover",
!1)};a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},xScale:{get:function(){return v},set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},xDomain:{get:function(){return n},set:function(a){n=a}},yDomain:{get:function(){return S},set:function(a){S=a}},xRange:{get:function(){return R},set:function(a){R=a}},yRange:{get:function(){return N},
set:function(a){N=a}},forceX:{get:function(){return D},set:function(a){D=a}},forceY:{get:function(){return H},set:function(a){H=a}},padData:{get:function(){return P},set:function(a){P=a}},clipEdge:{get:function(){return B},set:function(a){B=a}},id:{get:function(){return h},set:function(a){h=a}},interactive:{get:function(){return u},set:function(a){u=a}},x:{get:function(){return w},set:function(a){w=a}},y:{get:function(){return A},set:function(a){A=a}},open:{get:function(){return E()},set:function(a){E=
a}},close:{get:function(){return I()},set:function(a){I=a}},high:{get:function(){return J},set:function(a){J=a}},low:{get:function(){return G},set:function(a){G=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!=a.top?a.top:c.top;c.right=void 0!=a.right?a.right:c.right;c.bottom=void 0!=a.bottom?a.bottom:c.bottom;c.left=void 0!=a.left?a.left:c.left}},color:{get:function(){return M},set:function(a){M=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.parallelCoordinates=
function(){function a(L){y.reset();L.each(function(a){function y(a){return R(E.map(function(c){if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key]))||Fa){var e=k[c.key].domain(),f=k[c.key].range(),h=e[0]-(e[1]-e[0])/9;0>B.indexOf(c.key)&&(e=d3.scale.linear().domain([h,e[1]]).range([q-12,f[1]]),k[c.key].brush.y(e),B.push(c.key));if(isNaN(a.values[c.key])||isNaN(parseFloat(a.values[c.key])))return[v(c.key),k[c.key](h)]}void 0!==ia&&(0<B.length||Fa?(ia.style("display","inline"),da.style("display",
"inline")):(ia.style("display","none"),da.style("display","none")));return[v(c.key),k[c.key](a.values[c.key])]}))}function t(a){D.forEach(function(c){var e=k[c.dimension].brush.y().domain();c.hasOnlyNaN&&(c.extent[1]=(k[c.dimension].domain()[1]-e[0])*(c.extent[1]-c.extent[0])/(ra[c.dimension]-c.extent[0])+e[0]);c.hasNaN&&(c.extent[0]=e[0]);a&&k[c.dimension].brush.extent(c.extent)});S.select(".nv-brushBackground").each(function(a){d3.select(this).call(k[a.key].brush)}).selectAll("rect").attr("x",-8).attr("width",
16);X()}function l(){!1===J&&(J=!0,t(!0))}function L(){ha=I.filter(function(a){return!k[a].brush.empty()});Aa=ha.map(function(a){return k[a].brush.extent()});D=[];ha.forEach(function(a,c){D[c]={dimension:a,extent:Aa[c],hasNaN:!1,hasOnlyNaN:!1}});H=[];u.style("display",function(a){var c=ha.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&Aa[e][0]==k[c].brush.y().domain()[0]?!0:Aa[e][0]<=a.values[c]&&a.values[c]<=Aa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&H.push(a);
return c?null:"none"});X();F.brush({filters:D,active:H})}function Q(){var a=0<ha.length?!0:!1;D.forEach(function(a){a.extent[0]===k[a.dimension].brush.y().domain()[0]&&0<=B.indexOf(a.dimension)&&(a.hasNaN=!0);a.extent[1]<k[a.dimension].domain()[0]&&(a.hasOnlyNaN=!0)});F.brushEnd(H,a)}function X(){S.select(".nv-axis").each(function(a,c){c=D.filter(function(c){return c.dimension==a.key});ca[a.key]=k[a.key].domain();0!=c.length&&J&&(ca[a.key]=[],c[0].extent[1]>k[a.key].domain()[0]&&(ca[a.key]=[c[0].extent[1]]),
c[0].extent[0]>=k[a.key].domain()[0]&&ca[a.key].push(c[0].extent[0]));d3.select(this).call(N.scale(k[a.key]).tickFormat(a.format).tickValues(ca[a.key]))})}function T(a){var c=P[a];return null==c?v(a):c}var r=d3.select(this);h=e.utils.availableWidth(f,r,c);q=e.utils.availableHeight(p,r,c);e.utils.initSVG(r);if(void 0===a[0].values){var U=[];a.forEach(function(a){var c={};Object.keys(a).forEach(function(e){"name"!==e&&(c[e]=a[e])});U.push({key:a.name,values:c})});a=U}var V=a.map(function(a){return a.values});
0===H.length&&(H=a);I=A.sort(function(a,c){return a.currentPosition-c.currentPosition}).map(function(a){return a.key});E=A.filter(function(a){return!a.disabled});v.rangePoints([0,h],1).domain(E.map(function(a){return a.key}));var ra={},Fa=!1,ca=[];I.forEach(function(a){var c=d3.extent(V,function(c){return+c[a]}),e=c[0];c=c[1];var f=!1;if(isNaN(e)||isNaN(c))f=!0,c=e=0;e===c&&(--e,c+=1);var h=D.filter(function(c){return c.dimension==a});0!==h.length&&(f?(e=k[a].domain()[0],c=k[a].domain()[1]):!h[0].hasOnlyNaN&&
J?(e=e>h[0].extent[0]?h[0].extent[0]:e,c=c<h[0].extent[1]?h[0].extent[1]:c):h[0].hasNaN&&(c=c<h[0].extent[1]?h[0].extent[1]:c,ra[a]=k[a].domain()[1],Fa=!0));k[a]=d3.scale.linear().domain([e,c]).range([.9*(q-12),0]);B=[];k[a].brush=d3.svg.brush().y(k[a]).on("brushstart",l).on("brush",L).on("brushend",Q)});r=r.selectAll("g.nv-wrap.nv-parallelCoordinates").data([a]);var na=r.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),ma=r.select("g");na.append("g").attr("class",
"nv-parallelCoordinates background");na.append("g").attr("class","nv-parallelCoordinates foreground");na.append("g").attr("class","nv-parallelCoordinates missingValuesline");r.attr("transform","translate("+c.left+","+c.top+")");R.interpolate("cardinal").tension(M);N.orient("left");na=d3.behavior.drag().on("dragstart",function(a){P[a.key]=this.parentNode.__origin__=v(a.key);n.attr("visibility","hidden")}).on("drag",function(a){P[a.key]=Math.min(h,Math.max(0,this.parentNode.__origin__+=d3.event.x));
u.attr("d",y);E.sort(function(a,c){return T(a.key)-T(c.key)});E.forEach(function(a,c){return a.currentPosition=c});v.domain(E.map(function(a){return a.key}));S.attr("transform",function(a){return"translate("+T(a.key)+")"})}).on("dragend",function(a,c){delete this.parentNode.__origin__;delete P[a.key];d3.select(this.parentNode).attr("transform","translate("+v(a.key)+")");u.attr("d",y);n.attr("d",y).attr("visibility",null);F.dimensionsOrder(E)});var ya=v.range()[1]-v.range()[0];ya=isNaN(ya)?v.range()[0]:
ya;if(!isNaN(ya)){var za=[0+ya/2,q-12,h-ya/2,q-12];var ia=r.select(".missingValuesline").selectAll("line").data([za]);ia.enter().append("line");ia.exit().remove();ia.attr("x1",function(a){return a[0]}).attr("y1",function(a){return a[1]}).attr("x2",function(a){return a[2]}).attr("y2",function(a){return a[3]});var da=r.select(".missingValuesline").selectAll("text").data([w]);da.append("text").data([w]);da.enter().append("text");da.exit().remove();da.attr("y",q).attr("x",h-92-ya/2).text(function(a){return a})}n=
r.select(".background").selectAll("path").data(a);n.enter().append("path");n.exit().remove();n.attr("d",y);u=r.select(".foreground").selectAll("path").data(a);u.enter().append("path");u.exit().remove();u.attr("d",y).style("stroke-width",function(a,c){isNaN(a.strokeWidth)&&(a.strokeWidth=1);return a.strokeWidth}).attr("stroke",function(a,c){return a.color||G(a,c)});u.on("mouseover",function(a,c){d3.select(this).classed("hover",!0).style("stroke-width",a.strokeWidth+2+"px").style("stroke-opacity",1);
F.elementMouseover({label:a.name,color:a.color||G(a,c),values:a.values,dimensions:E})});u.on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("stroke-width",a.strokeWidth+"px").style("stroke-opacity",.7);F.elementMouseout({label:a.name,index:c})});u.on("mousemove",function(a,c){F.elementMousemove()});u.on("click",function(a){F.elementClick({id:a.id})});S=ma.selectAll(".dimension").data(E);a=S.enter().append("g").attr("class","nv-parallelCoordinates dimension");S.attr("transform",
function(a){return"translate("+v(a.key)+",0)"});a.append("g").attr("class","nv-axis");a.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(a,c){F.elementMouseover({label:a.tooltip||a.key,color:a.color})}).on("mouseout",function(a,c){F.elementMouseout({label:a.tooltip})}).on("mousemove",function(a,c){F.elementMousemove()}).call(na);a.append("g").attr("class","nv-brushBackground");S.exit().remove();S.select(".nv-label").text(function(a){return a.key});
t(J);var ha=I.filter(function(a){return!k[a].brush.empty()}),Aa=ha.map(function(a){return k[a].brush.extent()});a=H.slice(0);H=[];u.style("display",function(a){var c=ha.every(function(c,e){return(isNaN(a.values[c])||isNaN(parseFloat(a.values[c])))&&Aa[e][0]==k[c].brush.y().domain()[0]?!0:Aa[e][0]<=a.values[c]&&a.values[c]<=Aa[e][1]&&!isNaN(parseFloat(a.values[c]))});c&&H.push(a);return c?null:"none"});(0<D.length||!e.utils.arrayEquals(H,a))&&F.activeChanged(H)});return a}var c={top:30,right:0,bottom:10,
left:0},f=null,p=null,h=null,q=null,v=d3.scale.ordinal(),k={},w="undefined values",A=[],E=[],I=[],J=!0,G=e.utils.defaultColor(),D=[],H=[],P=[],B=[],M=1,u,n,S,R=d3.svg.line(),N=d3.svg.axis(),F=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),y=e.utils.renderWatch(F);a.dispatch=F;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},
set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},dimensionData:{get:function(){return A},set:function(a){A=a}},displayBrush:{get:function(){return J},set:function(a){J=a}},filters:{get:function(){return D},set:function(a){D=a}},active:{get:function(){return H},set:function(a){H=a}},lineTension:{get:function(){return M},set:function(a){M=a}},undefinedValuesLabel:{get:function(){return w},set:function(a){w=a}},dimensions:{get:function(){return A.map(function(a){return a.key})},
set:function(a){e.deprecated("dimensions","use dimensionData instead");0===A.length?a.forEach(function(a){A.push({key:a})}):a.forEach(function(a,c){A[c].key=a})}},dimensionNames:{get:function(){return A.map(function(a){return a.key})},set:function(a){e.deprecated("dimensionNames","use dimensionData instead");I=[];0===A.length?a.forEach(function(a){A.push({key:a})}):a.forEach(function(a,c){A[c].key=a})}},dimensionFormats:{get:function(){return A.map(function(a){return a.format})},set:function(a){e.deprecated("dimensionFormats",
"use dimensionData instead");0===A.length?a.forEach(function(a){A.push({format:a})}):a.forEach(function(a,c){A[c].format=a})}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a)}}});e.utils.initOptions(a);return a};e.models.parallelCoordinatesChart=function(){function a(n){B.reset();
B.models(c);n.each(function(n){var p=d3.select(this);e.utils.initSVG(p);var B=e.utils.availableWidth(v,p,h),F=e.utils.availableHeight(k,p,h);a.update=function(){p.call(a)};a.container=this;E.setter(u(I),a.update).getter(M(I)).update();E.disabled=I.map(function(a){return!!a.disabled});I=I.map(function(a){a.disabled=!!a.disabled;return a});I.forEach(function(a,c){a.originalPosition=isNaN(a.originalPosition)?c:a.originalPosition;a.currentPosition=isNaN(a.currentPosition)?c:a.currentPosition});if(!G)for(y in G=
{},E)G[y]=E[y]instanceof Array?E[y].slice(0):E[y];if(n&&n.length)p.selectAll(".nv-noData").remove();else return e.utils.noData(a,p),a;var y=p.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([n]);var A=y.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),D=y.select("g");A.append("g").attr("class","nv-parallelCoordinatesWrap");A.append("g").attr("class","nv-legendWrap");D.select("rect").attr("width",B).attr("height",0<F?F:0);w?(f.width(B).color(function(a){return"rgb(188,190,192)"}),
D.select(".nv-legendWrap").datum(I.sort(function(a,c){return a.originalPosition-c.originalPosition})).call(f),q||f.height()===h.top||(h.top=f.height(),F=e.utils.availableHeight(k,p,h)),y.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-h.top+")")):D.select(".nv-legendWrap").selectAll("*").remove();y.attr("transform","translate("+h.left+","+h.top+")");c.width(B).height(F).dimensionData(I).displayBrush(J);D.select(".nv-parallelCoordinatesWrap ").datum(n).transition().call(c);c.dispatch.on("brushEnd",
function(a,c){c?(J=!0,P.brushEnd(a)):J=!1});f.dispatch.on("stateChange",function(c){for(var e in c)E[e]=c[e];P.stateChange(E);a.update()});c.dispatch.on("dimensionsOrder",function(a){I.sort(function(a,c){return a.currentPosition-c.currentPosition});var c=!1;I.forEach(function(a,e){a.currentPosition=e;a.currentPosition!==a.originalPosition&&(c=!0)});P.dimensionsOrder(I,c)});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&(I.forEach(function(a,e){a.disabled=c.disabled[e]}),E.disabled=
c.disabled);a.update()})});B.renderEnd("parraleleCoordinateChart immediate");return a}var c=e.models.parallelCoordinates(),f=e.models.legend(),p=e.models.tooltip();e.models.tooltip();var h={top:0,right:0,bottom:0,left:0},q=null,v=null,k=null,w=!0,A=e.utils.defaultColor(),E=e.utils.state(),I=[],J=!0,G=null,D=null,H="undefined",P=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),B=e.utils.renderWatch(P),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
u=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};p.contentGenerator(function(a){var c='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td><strong>'+a.key+"</strong></td></tr></thead>";0!==a.series.length&&(c+='<tbody><tr><td height ="10px"></td></tr>',a.series.forEach(function(a){c=c+'<tr><td class="legend-color-guide"><div style="background-color:'+a.color+'"></div></td><td class="key">'+
a.key+'</td><td class="value">'+a.value+"</td></tr>"}),c+="</tbody>");return c+="</table>"});c.dispatch.on("elementMouseover.tooltip",function(a){var c={key:a.label,color:a.color,series:[]};a.values&&(Object.keys(a.values).forEach(function(e){var f=a.dimensions.filter(function(a){return a.key===e})[0];if(f){var h=isNaN(a.values[e])||isNaN(parseFloat(a.values[e]))?H:f.format(a.values[e]);c.series.push({idx:f.currentPosition,key:e,value:h,color:f.color})}}),c.series.sort(function(a,c){return a.idx-
c.idx}));p.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(){p()});a.dispatch=P;a.parallelCoordinates=c;a.legend=f;a.tooltip=p;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return k},set:function(a){k=a}},showLegend:{get:function(){return w},set:function(a){w=a}},defaultState:{get:function(){return G},set:function(a){G=
a}},dimensionData:{get:function(){return I},set:function(a){I=a}},displayBrush:{get:function(){return J},set:function(a){J=a}},noData:{get:function(){return D},set:function(a){D=a}},nanValue:{get:function(){return H},set:function(a){H=a}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(q=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}},color:{get:function(){return A},set:function(a){A=e.utils.getColor(a);
f.color(A);c.color(A)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.pie=function(){function a(l){t.reset();l.each(function(a){var l=f-c.left-c.right,X=p-c.top-c.bottom,T=Math.min(l,X)/2,r=[],U=[];k=d3.select(this);if(0===y.length)for(var V=T-T/5,ra=N*T,Z=0;Z<a[0].length;Z++)r.push(V),U.push(ra);else P?(r=y.map(function(a){return(a.outer-a.outer/5)*T}),U=y.map(function(a){return(a.inner-a.inner/5)*T}),N=d3.min(y.map(function(a){return a.inner-a.inner/5}))):(r=y.map(function(a){return a.outer*
T}),U=y.map(function(a){return a.inner*T}),N=d3.min(y.map(function(a){return a.inner})));e.utils.initSVG(k);V=k.selectAll(".nv-wrap.nv-pie").data(a);Z=V.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+v).append("g");var ca=V.select("g");ra=Z.append("g").attr("class","nv-pie");Z.append("g").attr("class","nv-pieLabels");V.attr("transform","translate("+c.left+","+c.top+")");ca.select(".nv-pie").attr("transform","translate("+l/2+","+X/2+")");ca.select(".nv-pieLabels").attr("transform",
"translate("+l/2+","+X/2+")");k.on("click",function(a,c){L.chartClick({data:a,index:c,pos:d3.event,id:v})});Q=[];K=[];for(Z=0;Z<a[0].length;Z++){ca=d3.svg.arc().outerRadius(r[Z]);var na=d3.svg.arc().outerRadius(r[Z]+5);!1!==u&&(ca.startAngle(u),na.startAngle(u));!1!==S&&(ca.endAngle(S),na.endAngle(S));D&&(ca.innerRadius(U[Z]),na.innerRadius(U[Z]));ca.cornerRadius&&R&&(ca.cornerRadius(R),na.cornerRadius(R));Q.push(ca);K.push(na)}U=d3.layout.pie().sort(null).value(function(a){return a.disabled?0:q(a)});
U.padAngle&&n&&U.padAngle(n);D&&H&&(ra.append("text").attr("class","nv-pie-title"),V.select(".nv-pie-title").style("text-anchor","middle").text(function(a){return H}).style("font-size",Math.min(l,X)*N*2/(H.length+2)+"px").attr("dy","0.35em").attr("transform",function(a,c){return"translate(0, "+B+")"}));l=V.select(".nv-pie").selectAll(".nv-slice").data(U);X=V.select(".nv-pieLabels").selectAll(".nv-label").data(U);l.exit().remove();X.exit().remove();U=l.enter().append("g");U.attr("class","nv-slice");
U.on("mouseover",function(a,c){d3.select(this).classed("hover",!0);P&&d3.select(this).select("path").transition().duration(70).attr("d",K[c]);L.elementMouseover({data:a.data,index:c,color:d3.select(this).style("fill"),percent:(a.endAngle-a.startAngle)/(2*Math.PI)})});U.on("mouseout",function(a,c){d3.select(this).classed("hover",!1);P&&d3.select(this).select("path").transition().duration(50).attr("d",Q[c]);L.elementMouseout({data:a.data,index:c})});U.on("mousemove",function(a,c){L.elementMousemove({data:a.data,
index:c})});U.on("click",function(a,c){L.elementClick({data:a.data,index:c,color:d3.select(this).style("fill"),event:d3.event,element:this})});U.on("dblclick",function(a,c){L.elementDblClick({data:a.data,index:c,color:d3.select(this).style("fill")})});l.attr("fill",function(a,c){return w(a.data,c)});l.attr("stroke",function(a,c){return w(a.data,c)});U.append("path").each(function(a){this._current=a});l.select("path").transition().duration(F).attr("d",function(a,c){return Q[c](a)}).attrTween("d",function(a,
c){a.endAngle=isNaN(a.endAngle)?0:a.endAngle;a.startAngle=isNaN(a.startAngle)?0:a.startAngle;D||(a.innerRadius=0);var e=d3.interpolate(this._current,a);this._current=e(0);return function(a){return Q[c](e(a))}});if(E){var ma=[];for(Z=0;Z<a[0].length;Z++)ma.push(Q[Z]),I?D&&(ma[Z]=d3.svg.arc().outerRadius(Q[Z].outerRadius()),!1!==u&&ma[Z].startAngle(u),!1!==S&&ma[Z].endAngle(S)):D||ma[Z].innerRadius(0);X.enter().append("g").classed("nv-label",!0).each(function(a,c){c=d3.select(this);c.attr("transform",
function(a,c){if(M){a.outerRadius=r[c]+10;a.innerRadius=r[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI);e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ma[c].centroid(a)+") rotate("+e+")"}a.outerRadius=T+10;a.innerRadius=T+15;return"translate("+ma[c].centroid(a)+")"});c.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);c.append("text").style("text-anchor",M?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});
var ya={},za=function(a){return 140*Math.floor(a[0]/140)+","+14*Math.floor(a[1]/14)};X.watchTransition(t,"pie labels").attr("transform",function(a,c){if(M){a.outerRadius=r[c]+10;a.innerRadius=r[c]+15;var e=(a.startAngle+a.endAngle)/2*(180/Math.PI);e=(a.startAngle+a.endAngle)/2<Math.PI?e-90:e+90;return"translate("+ma[c].centroid(a)+") rotate("+e+")"}a.outerRadius=T+10;a.innerRadius=T+15;c=ma[c].centroid(a);e=(a.endAngle-a.startAngle)/(2*Math.PI);a.value&&e>=G&&(a=za(c),ya[a]&&(c[1]-=14),ya[za(c)]=
!0);return"translate("+c+")"});X.select(".nv-label text").style("text-anchor",function(a,c){return M?(a.startAngle+a.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(a,c){var e=(a.endAngle-a.startAngle)/(2*Math.PI),f="";if(!a.value||e<G)return"";if("function"===typeof J)f=J(a,c,{key:h(a.data),value:q(a.data),percent:A(e)});else switch(J){case "key":f=h(a.data);break;case "value":f=A(q(a.data));break;case "percent":f=d3.format("%")(e)}return f})}});t.renderEnd("pie immediate");return a}var c=
{top:0,right:0,bottom:0,left:0},f=500,p=500,h=function(a){return a.x},q=function(a){return a.y},v=Math.floor(1E4*Math.random()),k=null,w=e.utils.defaultColor(),A=d3.format(",.2f"),E=!0,I=!1,J="key",G=.02,D=!1,H=!1,P=!0,B=0,M=!1,u=!1,n=!1,S=!1,R=0,N=.5,F=250,y=[],L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),Q=[],K=[],t=e.utils.renderWatch(L);a.dispatch=L;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{arcsRadius:{get:function(){return y},set:function(a){y=a}},width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},showLabels:{get:function(){return E},set:function(a){E=a}},title:{get:function(){return H},set:function(a){H=a}},titleOffset:{get:function(){return B},set:function(a){B=a}},labelThreshold:{get:function(){return G},set:function(a){G=a}},valueFormat:{get:function(){return A},set:function(a){A=a}},x:{get:function(){return h},set:function(a){h=
a}},id:{get:function(){return v},set:function(a){v=a}},endAngle:{get:function(){return S},set:function(a){S=a}},startAngle:{get:function(){return u},set:function(a){u=a}},padAngle:{get:function(){return n},set:function(a){n=a}},cornerRadius:{get:function(){return R},set:function(a){R=a}},donutRatio:{get:function(){return N},set:function(a){N=a}},labelsOutside:{get:function(){return I},set:function(a){I=a}},labelSunbeamLayout:{get:function(){return M},set:function(a){M=a}},donut:{get:function(){return D},
set:function(a){D=a}},growOnHover:{get:function(){return P},set:function(a){P=a}},pieLabelsOutside:{get:function(){return I},set:function(a){I=a;e.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return I},set:function(a){I=a;e.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return A},set:function(a){A=a;e.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return c},set:function(a){c.top=
"undefined"!=typeof a.top?a.top:c.top;c.right="undefined"!=typeof a.right?a.right:c.right;c.bottom="undefined"!=typeof a.bottom?a.bottom:c.bottom;c.left="undefined"!=typeof a.left?a.left:c.left}},duration:{get:function(){return F},set:function(a){F=a;t.reset(F)}},y:{get:function(){return q},set:function(a){q=d3.functor(a)}},color:{get:function(){return w},set:function(a){w=e.utils.getColor(a)}},labelType:{get:function(){return J},set:function(a){J=a||"key"}}});e.utils.initOptions(a);return a};e.models.pieChart=
function(){function a(n){B.reset();B.models(c);n.each(function(n){var p=d3.select(this);e.utils.initSVG(p);var B=e.utils.availableWidth(v,p,h),w=e.utils.availableHeight(k,p,h);a.update=function(){p.transition().call(a)};a.container=this;J.setter(u(n),a.update).getter(M(n)).update();J.disabled=n.map(function(a){return!!a.disabled});if(!G)for(y in G={},J)G[y]=J[y]instanceof Array?J[y].slice(0):J[y];if(n&&n.length)p.selectAll(".nv-noData").remove();else return e.utils.noData(a,p),a;var y=p.selectAll("g.nv-wrap.nv-pieChart").data([n]);
var I=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),D=y.select("g");I.append("g").attr("class","nv-pieWrap");I.append("g").attr("class","nv-legendWrap");A?"top"===E?(f.width(B).key(c.x()),y.select(".nv-legendWrap").datum(n).call(f),q||f.height()===h.top||(h.top=f.height(),w=e.utils.availableHeight(k,p,h)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-h.top+")")):"right"===E&&(I=e.models.legend().width(),B/2<I&&(I=B/2),f.height(w).key(c.x()),f.width(I),B-=
f.width(),y.select(".nv-legendWrap").datum(n).call(f).attr("transform","translate("+B+",0)")):D.select(".nv-legendWrap").selectAll("*").remove();y.attr("transform","translate("+h.left+","+h.top+")");c.width(B).height(w);B=D.select(".nv-pieWrap").datum([n]);d3.transition(B).call(c);f.dispatch.on("stateChange",function(c){for(var e in c)J[e]=c[e];P.stateChange(J);a.update()});P.on("changeState",function(c){"undefined"!==typeof c.disabled&&(n.forEach(function(a,e){a.disabled=c.disabled[e]}),J.disabled=
c.disabled);a.update()})});B.renderEnd("pieChart immediate");return a}var c=e.models.pie(),f=e.models.legend(),p=e.models.tooltip(),h={top:30,right:20,bottom:20,left:20},q=null,v=null,k=null,w=!1,A=!0,E="top",I=e.utils.defaultColor(),J=e.utils.state(),G=null,D=null,H=250,P=d3.dispatch("stateChange","changeState","renderEnd");p.duration(0).headerEnabled(!1).valueFormatter(function(a,e){return c.valueFormat()(a,e)});var B=e.utils.renderWatch(P),M=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},
u=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};c.dispatch.on("elementMouseover.tooltip",function(c){c.series={key:a.x()(c.data),value:a.y()(c.data),color:c.color,percent:c.percent};w||(delete c.percent,delete c.series.percent);p.data(c).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){p.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){p()});a.legend=f;a.dispatch=P;a.pie=c;a.tooltip=p;a.options=e.utils.optionsFunc.bind(a);
a._options=Object.create({},{width:{get:function(){return v},set:function(a){v=a}},height:{get:function(){return k},set:function(a){k=a}},noData:{get:function(){return D},set:function(a){D=a}},showTooltipPercent:{get:function(){return w},set:function(a){w=a}},showLegend:{get:function(){return A},set:function(a){A=a}},legendPosition:{get:function(){return E},set:function(a){E=a}},defaultState:{get:function(){return G},set:function(a){G=a}},color:{get:function(){return I},set:function(a){I=a;f.color(I);
c.color(I)}},duration:{get:function(){return H},set:function(a){H=a;B.reset(H);c.duration(H)}},margin:{get:function(){return h},set:function(a){void 0!==a.top&&(q=h.top=a.top);h.right=void 0!==a.right?a.right:h.right;h.bottom=void 0!==a.bottom?a.bottom:h.bottom;h.left=void 0!==a.left?a.left:h.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sankey=function(){function a(){J.forEach(function(a){a.sourceLinks=[];a.targetLinks=[]});G.forEach(function(a){var c=a.source,e=
a.target;"number"===typeof c&&(c=a.source=J[a.source]);"number"===typeof e&&(e=a.target=J[a.target]);c.sourceLinks.push(a);e.targetLinks.push(a)})}function c(){J.forEach(function(a){a.value=Math.max(d3.sum(a.sourceLinks,k),d3.sum(a.targetLinks,k))})}function f(){for(var a=J,c,e=0;a.length&&e<J.length;)c=[],a.forEach(function(a){a.x=e;a.dx=A;a.sourceLinks.forEach(function(a){0>c.indexOf(a.target)&&c.push(a.target)})}),a=c,++e;D&&p(e);h((I[0]-A)/(e-1))}function p(a){J.forEach(function(c){c.sourceLinks.length||
(c.x=a-1)})}function h(a){J.forEach(function(c){c.x*=a})}function q(a){function c(a){function c(a){return(a.source.y+a.sy+a.dy/2)*a.value}p.forEach(function(e,f){e.forEach(function(e){if(e.targetLinks.length){var f=d3.sum(e.targetLinks,c)/d3.sum(e.targetLinks,k);e.y+=(f-P(e))*a}})})}function e(a){function c(a){return(a.target.y+a.ty+a.dy/2)*a.value}p.slice().reverse().forEach(function(e){e.forEach(function(e){if(e.sourceLinks.length){var f=d3.sum(e.sourceLinks,c)/d3.sum(e.sourceLinks,k);e.y+=(f-P(e))*
a}})})}function f(){p.forEach(function(a){var c=0;var e=a.length,f;a.sort(h);for(f=0;f<e;++f){var k=a[f];c-=k.y;0<c&&(k.y+=c);c=k.y+k.dy+E}c=c-E-I[1];if(0<c)for(c=k.y-=c,f=e-2;0<=f;--f)k=a[f],c=k.y+k.dy+E-c,0<c&&(k.y-=c),c=k.y})}function h(a,c){return a.y-c.y}var p=d3.nest().key(function(a){return a.x}).sortKeys(d3.ascending).entries(J).map(function(a){return a.values});(function(){var a=d3.min(p,function(a){return(I[1]-(a.length-1)*E)/d3.sum(a,k)});p.forEach(function(c){c.forEach(function(c,e){c.y=
e;c.dy=c.value*a})});G.forEach(function(c){c.dy=c.value*a})})();f();v();for(var q=1;0<a;--a)e(q*=.99),f(),v(),c(q),f(),v()}function v(){function a(a,c){return a.source.y-c.source.y}function c(a,c){return a.target.y-c.target.y}J.forEach(function(e){e.sourceLinks.sort(c);e.targetLinks.sort(a)});J.forEach(function(a){var c=0,e=0;a.sourceLinks.forEach(function(a){a.sy=c;c+=a.dy});a.targetLinks.forEach(function(a){a.ty=e;e+=a.dy})})}function k(a){return a.value}var w={},A=24,E=8,I=[1,1],J=[],G=[],D=!0,
H=function(){function a(a){var e=a.source.x+a.source.dx,f=a.target.x,h=d3.interpolateNumber(e,f),k=h(c);h=h(1-c);var p=a.source.y+a.sy+a.dy/2;a=a.target.y+a.ty+a.dy/2;return"M"+e+","+p+"C"+k+","+p+" "+h+","+a+" "+f+","+a}var c=.5;a.curvature=function(e){if(!arguments.length)return c;c=+e;return a};return a},P=function(a){return a.y+a.dy/2};w.options=e.utils.optionsFunc.bind(w);w._options=Object.create({},{nodeWidth:{get:function(){return A},set:function(a){A=+a}},nodePadding:{get:function(){return E},
set:function(a){E=a}},nodes:{get:function(){return J},set:function(a){J=a}},links:{get:function(){return G},set:function(a){G=a}},size:{get:function(){return I},set:function(a){I=a}},sinksRight:{get:function(){return D},set:function(a){D=a}},layout:{get:function(){a();c();f();q(32)},set:function(e){a();c();f();q(e)}},relayout:{get:function(){v()},set:function(a){}},center:{get:function(){return P()},set:function(a){"function"===typeof a&&(P=a)}},link:{get:function(){return H()},set:function(a){"function"===
typeof a&&(H=a);return H()}}});e.utils.initOptions(w);return w};e.models.sankeyChart=function(){function a(c){c.each(function(a){var e={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},
{source:3,target:5,value:186}]},k=!1,B=!1;0<=("object"===typeof a.nodes&&a.nodes.length)&&0<=("object"===typeof a.links&&a.links.length)&&(k=!0);a.nodes&&0<a.nodes.length&&a.links&&0<a.links.length&&(B=!0);if(!k)return console.error("NVD3 Sankey chart error:","invalid data format for",a),console.info("Valid data format is: ",e,JSON.stringify(e)),P(c,"Error loading chart, data is invalid"),!1;if(!B)return P(c,"No data available"),!1;e=c.append("svg").attr("width",p).attr("height",h).append("g").attr("class",
"nvd3 nv-wrap nv-sankeyChart");f.nodeWidth(q).nodePadding(v).size([p,h]);var A=f.link();f.nodes(a.nodes).links(a.links).layout(32).center(w);var I=e.append("g").selectAll(".link").data(a.links).enter().append("path").attr("class","link").attr("d",A).style("stroke-width",function(a){return Math.max(1,a.dy)}).sort(function(a,c){return c.dy-a.dy});I.append("title").text(J);a=e.append("g").selectAll(".node").data(a.nodes).enter().append("g").attr("class","node").attr("transform",function(a){return"translate("+
a.x+","+a.y+")"}).call(d3.behavior.drag().origin(function(a){return a}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",function(a){d3.select(this).attr("transform","translate("+a.x+","+(a.y=Math.max(0,Math.min(h-a.dy,d3.event.y)))+")");f.relayout();I.attr("d",A)}));a.append("rect").attr("height",function(a){return a.dy}).attr("width",f.nodeWidth()).style("fill",G).style("stroke",D).append("title").text(H);a.append("text").attr("x",-6).attr("y",function(a){return a.dy/2}).attr("dy",
".35em").attr("text-anchor","end").attr("transform",null).text(function(a){return a.name}).filter(function(a){return a.x<p/2}).attr("x",6+f.nodeWidth()).attr("text-anchor","start")});return a}var c={top:5,right:0,bottom:5,left:0},f=e.models.sankey(),p=600,h=400,q=36,v=40,k="units",w=void 0,A=d3.format(",.0f"),E=function(a){return A(a)+" "+k},I=d3.scale.category20(),J=function(a){return a.source.name+" \u2192 "+a.target.name+"\n"+E(a.value)},G=function(a){return a.color=I(a.name.replace(/ .*/,""))},
D=function(a){return d3.rgb(a.color).darker(2)},H=function(a){return a.name+"\n"+E(a.value)},P=function(a,c){a.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(c)};a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{units:{get:function(){return k},set:function(a){k=a}},width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return h},set:function(a){h=a}},format:{get:function(){return E},set:function(a){E=
a}},linkTitle:{get:function(){return J},set:function(a){J=a}},nodeWidth:{get:function(){return q},set:function(a){q=a}},nodePadding:{get:function(){return v},set:function(a){v=a}},center:{get:function(){return w},set:function(a){w=a}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},nodeStyle:{get:function(){return{}},set:function(a){G=void 0!==
a.fillColor?a.fillColor:G;D=void 0!==a.strokeColor?a.strokeColor:D;H=void 0!==a.title?a.title:H}}});e.utils.initOptions(a);return a};e.models.scatter=function(){function a(a){delete xa[a[0].series+":"+a[1]]}function c(a){var c=a[0].series+":"+a[1];var e=xa[c]=xa[c]||{};var f=!1;for(c=1;c<arguments.length;c+=2){var h=arguments[c];var k=arguments[c+1](a[0],a[1]);e[h]===k&&e.hasOwnProperty(h)||(e[h]=k,f=!0)}return f}function f(V){ha.reset();V.each(function(V){function va(){da=!1;if(!n)return!1;if(!0===
U){var a=d3.merge(V.map(function(a,c){return a.values.map(function(a,f){var h=G(a,f),k=D(a,f);return[e.utils.NaNtoZero(E(h))+1E-4*Math.random(),e.utils.NaNtoZero(I(k))+1E-4*Math.random(),c,f,a]}).filter(function(a,c){return S(a[4],c)})}));if(0==a.length)return!1;3>a.length&&(a.push([E.range()[0]-20,I.range()[0]-20,null,null]),a.push([E.range()[1]+20,I.range()[1]+20,null,null]),a.push([E.range()[0]-20,I.range()[0]+20,null,null]),a.push([E.range()[1]+20,I.range()[1]-20,null,null]));var c=d3.geom.polygon([[-10,
-10],[-10,q+10],[h+10,q+10],[h+10,-10]]),f=d3.geom.voronoi(a).map(function(e,f){return{data:c.clip(e),series:a[f][2],point:a[f][3]}});Ha.select(".nv-point-paths").selectAll("path").remove();f=Ha.select(".nv-point-paths").selectAll("path").data(f);var k=f.enter().append("svg:path").attr("d",function(a){return a&&a.data&&0!==a.data.length?"M"+a.data.join(",")+"Z":"M 0 0"}).attr("id",function(a,c){return"nv-path-"+c}).attr("clip-path",function(a,c){return"url(#nv-clip-"+w+"-"+c+")"});L&&k.style("fill",
d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));y&&(Ha.select(".nv-point-clips").selectAll("*").remove(),Ha.select(".nv-point-clips").selectAll("clipPath").data(a).enter().append("svg:clipPath").attr("id",function(a,c){return"nv-clip-"+w+"-"+c}).append("svg:circle").attr("cx",function(a){return a[0]}).attr("cy",function(a){return a[1]}).attr("r",Q));var l=function(a,c,e){if(da)return 0;var f=V[c.series];if(void 0!==f){var h=f.values[c.point];
h.color=v(f,c.series);h.x=G(h);h.y=D(h);var k=A.node().getBoundingClientRect(),l=window.pageYOffset||document.documentElement.scrollTop,n=window.pageXOffset||document.documentElement.scrollLeft;k={left:E(G(h,c.point))+k.left+n+p.left+10,top:I(D(h,c.point))+k.top+l+p.top+10};e({point:h,series:f,pos:k,relativePos:[E(G(h,c.point))+p.left,I(D(h,c.point))+p.top],seriesIndex:c.series,pointIndex:c.point,event:d3.event,element:a})}};f.on("click",function(a){l(this,a,r.elementClick)}).on("dblclick",function(a){l(this,
a,r.elementDblClick)}).on("mouseover",function(a){l(this,a,r.elementMouseover)}).on("mouseout",function(a,c){l(this,a,r.elementMouseout)})}else Ha.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(a,c){if(da||!V[a.series])return 0;var e=V[a.series],f=e.values[c];r.elementClick({point:f,series:e,pos:[E(G(f,c))+p.left,I(D(f,c))+p.top],relativePos:[E(G(f,c))+p.left,I(D(f,c))+p.top],seriesIndex:a.series,pointIndex:c,event:d3.event,element:this})}).on("dblclick",function(a,
c){if(da||!V[a.series])return 0;var e=V[a.series],f=e.values[c];r.elementDblClick({point:f,series:e,pos:[E(G(f,c))+p.left,I(D(f,c))+p.top],relativePos:[E(G(f,c))+p.left,I(D(f,c))+p.top],seriesIndex:a.series,pointIndex:c})}).on("mouseover",function(a,c){if(da||!V[a.series])return 0;var e=V[a.series],f=e.values[c];r.elementMouseover({point:f,series:e,pos:[E(G(f,c))+p.left,I(D(f,c))+p.top],relativePos:[E(G(f,c))+p.left,I(D(f,c))+p.top],seriesIndex:a.series,pointIndex:c,color:v(a,c)})}).on("mouseout",
function(a,c){if(da||!V[a.series])return 0;var e=V[a.series],f=e.values[c];r.elementMouseout({point:f,series:e,pos:[E(G(f,c))+p.left,I(D(f,c))+p.top],relativePos:[E(G(f,c))+p.left,I(D(f,c))+p.top],seriesIndex:a.series,pointIndex:c,color:v(a,c)})})}A=d3.select(this);var ua=e.utils.availableWidth(h,A,p),pa=e.utils.availableHeight(q,A,p);e.utils.initSVG(A);V.forEach(function(a,c){a.values.forEach(function(a){a.series=c})});var Ia=f.yScale().name===d3.scale.log().name?!0:!1,qa=K&&t&&aa?[]:d3.merge(V.map(function(a){return a.values.map(function(a,
c){return{x:G(a,c),y:D(a,c),size:H(a,c)}})}));E.domain(K||d3.extent(qa.map(function(a){return a.x}).concat(B)));R&&V[0]?E.range(l||[(ua*N+ua)/(2*V[0].values.length),ua-ua*(1+N)/(2*V[0].values.length)]):E.range(l||[0,ua]);if(Ia){var Ba=d3.min(qa.map(function(a){if(0!==a.y)return a.y}));I.clamp(!0).domain(t||d3.extent(qa.map(function(a){return 0!==a.y?a.y:.1*Ba}).concat(M))).range(Z||[pa,0])}else I.domain(t||d3.extent(qa.map(function(a){return a.y}).concat(M))).range(Z||[pa,0]);J.domain(aa||d3.extent(qa.map(function(a){return a.size}).concat(u))).range(X||
Aa);T=E.domain()[0]===E.domain()[1]||I.domain()[0]===I.domain()[1];E.domain()[0]===E.domain()[1]&&(E.domain()[0]?E.domain([E.domain()[0]-.01*E.domain()[0],E.domain()[1]+.01*E.domain()[1]]):E.domain([-1,1]));I.domain()[0]===I.domain()[1]&&(I.domain()[0]?I.domain([I.domain()[0]-.01*I.domain()[0],I.domain()[1]+.01*I.domain()[1]]):I.domain([-1,1]));isNaN(E.domain()[0])&&E.domain([-1,1]);isNaN(I.domain()[0])&&I.domain([-1,1]);ca=ca||E;na=na||I;ma=ma||J;var ea=E(1)!==ca(1)||I(1)!==na(1)||J(1)!==ma(1);ya=
ya||h;za=za||q;var ta=ya!==h||za!==q,Ha=A.selectAll("g.nv-wrap.nv-scatter").data([V]);Ia=Ha.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+w);qa=Ia.append("defs");var xa=Ia.append("g"),La=Ha.select("g");Ha.classed("nv-single-point",T);xa.append("g").attr("class","nv-groups");xa.append("g").attr("class","nv-point-paths");Ia.append("g").attr("class","nv-point-clips");Ha.attr("transform","translate("+p.left+","+p.top+")");qa.append("clipPath").attr("id","nv-edge-clip-"+w).append("rect").attr("transform",
"translate( -10, -10)");Ha.select("#nv-edge-clip-"+w+" rect").attr("width",ua+20).attr("height",0<pa?pa+20:0);La.attr("clip-path",F?"url(#nv-edge-clip-"+w+")":"");da=!0;ua=Ha.select(".nv-groups").selectAll(".nv-group").data(function(a){return a},function(a){return a.key});ua.enter().append("g").style("stroke-opacity",1E-6).style("fill-opacity",1E-6);ua.exit().remove();ua.attr("class",function(a,c){return(a.classed||"")+" nv-group nv-series-"+c}).classed("nv-noninteractive",!n).classed("hover",function(a){return a.hover});
ua.watchTransition(ha,"scatter: groups").style("fill",function(a,c){return v(a,c)}).style("stroke",function(a,c){return a.pointBorderColor||k||v(a,c)}).style("stroke-opacity",1).style("fill-opacity",.5);pa=ua.selectAll("path.nv-point").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return S(a[0],c)})});pa.enter().append("path").attr("class",function(a){return"nv-point nv-point-"+a[1]}).style("fill",function(a){return a.color}).style("stroke",function(a){return a.color}).attr("transform",
function(a){return"translate("+e.utils.NaNtoZero(ca(G(a[0],a[1])))+","+e.utils.NaNtoZero(na(D(a[0],a[1])))+")"}).attr("d",e.utils.symbol().type(function(a){return P(a[0])}).size(function(a){return J(H(a[0],a[1]))}));pa.exit().each(a).remove();ua.exit().selectAll("path.nv-point").watchTransition(ha,"scatter exit").attr("transform",function(a){return"translate("+e.utils.NaNtoZero(E(G(a[0],a[1])))+","+e.utils.NaNtoZero(I(D(a[0],a[1])))+")"}).remove();pa.filter(function(a){return ea||ta||c(a,"x",G,"y",
D)}).watchTransition(ha,"scatter points").attr("transform",function(a){return"translate("+e.utils.NaNtoZero(E(G(a[0],a[1])))+","+e.utils.NaNtoZero(I(D(a[0],a[1])))+")"});pa.filter(function(a){return ea||ta||c(a,"shape",P,"size",H)}).watchTransition(ha,"scatter points").attr("d",e.utils.symbol().type(function(a){return P(a[0])}).size(function(a){return J(H(a[0],a[1]))}));Fa&&(pa=ua.selectAll(".nv-label").data(function(a){return a.values.map(function(a,c){return[a,c]}).filter(function(a,c){return S(a[0],
c)})}),pa.enter().append("text").style("fill",function(a,c){return a.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(ca(G(a[0],a[1])))+Math.sqrt(J(H(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(na(D(a[0],a[1])))+")"}).text(function(a,c){return a[0].label}),pa.exit().remove(),ua.exit().selectAll("path.nv-label").watchTransition(ha,"scatter exit").attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(E(G(a[0],
a[1])))+Math.sqrt(J(H(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(I(D(a[0],a[1])))+")"}).remove(),pa.each(function(a){d3.select(this).classed("nv-label",!0).classed("nv-label-"+a[1],!1).classed("hover",!1)}),pa.watchTransition(ha,"scatter labels").attr("transform",function(a){return"translate("+(e.utils.NaNtoZero(E(G(a[0],a[1])))+Math.sqrt(J(H(a[0],a[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(I(D(a[0],a[1])))+")"}));ra?(clearTimeout(ia),ia=setTimeout(va,ra)):va();ca=E.copy();na=I.copy();ma=J.copy();
ya=h;za=q});ha.renderEnd("scatter immediate");return f}var p={top:0,right:0,bottom:0,left:0},h=null,q=null,v=e.utils.defaultColor(),k=null,w=Math.floor(1E5*Math.random()),A=null,E=d3.scale.linear(),I=d3.scale.linear(),J=d3.scale.linear(),G=function(a){return a.x},D=function(a){return a.y},H=function(a){return a.size||1},P=function(a){return a.shape||"circle"},B=[],M=[],u=[],n=!0,S=function(a){return!a.notActive},R=!1,N=.1,F=!1,y=!0,L=!1,Q=function(){return 25},K=null,t=null,l=null,Z=null,aa=null,
X=null,T=!1,r=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),U=!0,V=250,ra=300,Fa=!1,ca,na,ma,ya,za,ia,da=!1,ha=e.utils.renderWatch(r,V),Aa=[16,256],xa={};f.dispatch=r;f.options=e.utils.optionsFunc.bind(f);f._calls=new function(){this.clearHighlights=function(){e.dom.write(function(){A.selectAll(".nv-point.hover").classed("hover",!1)});return null};this.highlightPoint=function(a,c,f){e.dom.write(function(){A.select(".nv-groups").selectAll(".nv-series-"+
a).selectAll(".nv-point-"+c).classed("hover",f)})}};r.on("elementMouseover.point",function(a){n&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!0)});r.on("elementMouseout.point",function(a){n&&f._calls.highlightPoint(a.seriesIndex,a.pointIndex,!1)});f._options=Object.create({},{width:{get:function(){return h},set:function(a){h=a}},height:{get:function(){return q},set:function(a){q=a}},xScale:{get:function(){return E},set:function(a){E=a}},yScale:{get:function(){return I},set:function(a){I=a}},
pointScale:{get:function(){return J},set:function(a){J=a}},xDomain:{get:function(){return K},set:function(a){K=a}},yDomain:{get:function(){return t},set:function(a){t=a}},pointDomain:{get:function(){return aa},set:function(a){aa=a}},xRange:{get:function(){return l},set:function(a){l=a}},yRange:{get:function(){return Z},set:function(a){Z=a}},pointRange:{get:function(){return X},set:function(a){X=a}},forceX:{get:function(){return B},set:function(a){B=a}},forceY:{get:function(){return M},set:function(a){M=
a}},forcePoint:{get:function(){return u},set:function(a){u=a}},interactive:{get:function(){return n},set:function(a){n=a}},pointActive:{get:function(){return S},set:function(a){S=a}},padDataOuter:{get:function(){return N},set:function(a){N=a}},padData:{get:function(){return R},set:function(a){R=a}},clipEdge:{get:function(){return F},set:function(a){F=a}},clipVoronoi:{get:function(){return y},set:function(a){y=a}},clipRadius:{get:function(){return Q},set:function(a){Q=a}},showVoronoi:{get:function(){return L},
set:function(a){L=a}},id:{get:function(){return w},set:function(a){w=a}},interactiveUpdateDelay:{get:function(){return ra},set:function(a){ra=a}},showLabels:{get:function(){return Fa},set:function(a){Fa=a}},pointBorderColor:{get:function(){return k},set:function(a){k=a}},x:{get:function(){return G},set:function(a){G=d3.functor(a)}},y:{get:function(){return D},set:function(a){D=d3.functor(a)}},pointSize:{get:function(){return H},set:function(a){H=d3.functor(a)}},pointShape:{get:function(){return P},
set:function(a){P=d3.functor(a)}},margin:{get:function(){return p},set:function(a){p.top=void 0!==a.top?a.top:p.top;p.right=void 0!==a.right?a.right:p.right;p.bottom=void 0!==a.bottom?a.bottom:p.bottom;p.left=void 0!==a.left?a.left:p.left}},duration:{get:function(){return V},set:function(a){V=a;ha.reset(V)}},color:{get:function(){return v},set:function(a){v=e.utils.getColor(a)}},useVoronoi:{get:function(){return U},set:function(a){U=a;!1===U&&(y=!1)}}});e.utils.initOptions(f);return f};e.models.scatterChart=
function(){function a(y){K.reset();K.models(c);u&&K.models(f);n&&K.models(p);P&&K.models(q);B&&K.models(v);y.each(function(y){J=d3.select(this);e.utils.initSVG(J);var aa=e.utils.availableWidth(E,J,w),T=e.utils.availableHeight(I,J,w);a.update=function(){0===L?J.call(a):J.transition().duration(L).call(a)};a.container=this;R.setter(l(y),a.update).getter(t(y)).update();R.disabled=y.map(function(a){return!!a.disabled});if(!N)for(U in N={},R)N[U]=R[U]instanceof Array?R[U].slice(0):R[U];if(y&&y.length&&
y.filter(function(a){return a.values.length}).length)J.selectAll(".nv-noData").remove();else return e.utils.noData(a,J),K.renderEnd("scatter immediate"),a;D=c.xScale();H=c.yScale();var r=J.selectAll("g.nv-wrap.nv-scatterChart").data([y]);var U=r.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+c.id()).append("g");var V=r.select("g");U.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");U.append("g").attr("class","nv-x nv-axis");U.append("g").attr("class",
"nv-y nv-axis");U.append("g").attr("class","nv-scatterWrap");U.append("g").attr("class","nv-regressionLinesWrap");U.append("g").attr("class","nv-distWrap");U.append("g").attr("class","nv-legendWrap");S&&V.select(".nv-y.nv-axis").attr("transform","translate("+aa+",0)");M?(h.width(aa),r.select(".nv-legendWrap").datum(y).call(h),A||h.height()===w.top||(w.top=h.height(),T=e.utils.availableHeight(I,J,w)),r.select(".nv-legendWrap").attr("transform","translate(0,"+-w.top+")")):V.select(".nv-legendWrap").selectAll("*").remove();
r.attr("transform","translate("+w.left+","+w.top+")");c.width(aa).height(T).color(y.map(function(a,c){a.color=a.color||G(a,c);return a.color}).filter(function(a,c){return!y[c].disabled})).showLabels(Q);r.select(".nv-scatterWrap").datum(y.filter(function(a){return!a.disabled})).call(c);r.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+c.id()+")");r=r.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(a){return a});r.enter().append("g").attr("class","nv-regLines");
r=r.selectAll(".nv-regLine").data(function(a){return[a]});r.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);r.filter(function(a){return a.intercept&&a.slope}).watchTransition(K,"scatterPlusLineChart: regline").attr("x1",D.range()[0]).attr("x2",D.range()[1]).attr("y1",function(a,c){return H(D.domain()[0]*a.slope+a.intercept)}).attr("y2",function(a,c){return H(D.domain()[1]*a.slope+a.intercept)}).style("stroke",function(a,c,e){return G(a,e)}).style("stroke-opacity",function(a,
c){return a.disabled||"undefined"===typeof a.slope||"undefined"===typeof a.intercept?0:1});u&&(f.scale(D)._ticks(e.utils.calcTicksX(aa/100,y)).tickSize(-T,0),V.select(".nv-x.nv-axis").attr("transform","translate(0,"+H.range()[0]+")").call(f));n&&(p.scale(H)._ticks(e.utils.calcTicksY(T/36,y)).tickSize(-aa,0),V.select(".nv-y.nv-axis").call(p));P&&(q.getData(c.x()).scale(D).width(aa).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled})),U.select(".nv-distWrap").append("g").attr("class",
"nv-distributionX"),V.select(".nv-distributionX").attr("transform","translate(0,"+H.range()[0]+")").datum(y.filter(function(a){return!a.disabled})).call(q));B&&(v.getData(c.y()).scale(H).width(T).color(y.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!y[c].disabled})),U.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),V.select(".nv-distributionY").attr("transform","translate("+(S?aa:-v.size())+",0)").datum(y.filter(function(a){return!a.disabled})).call(v));
h.dispatch.on("stateChange",function(c){for(var e in c)R[e]=c[e];F.stateChange(R);a.update()});F.on("changeState",function(c){"undefined"!==typeof c.disabled&&(y.forEach(function(a,e){a.disabled=c.disabled[e]}),R.disabled=c.disabled);a.update()});c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0);J.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",0);J.select(".nv-chart-"+c.id()+" .nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",
v.size())});c.dispatch.on("elementMouseover.tooltip",function(a){J.select(".nv-series-"+a.seriesIndex+" .nv-distx-"+a.pointIndex).attr("y1",a.relativePos[1]-T);J.select(".nv-series-"+a.seriesIndex+" .nv-disty-"+a.pointIndex).attr("x2",a.relativePos[0]+q.size());k.data(a).hidden(!1)});D.copy();H.copy()});K.renderEnd("scatter with line immediate");return a}var c=e.models.scatter(),f=e.models.axis(),p=e.models.axis(),h=e.models.legend(),q=e.models.distribution(),v=e.models.distribution(),k=e.models.tooltip(),
w={top:30,right:20,bottom:50,left:75},A=null,E=null,I=null,J=null,G=e.utils.defaultColor(),D=c.xScale(),H=c.yScale(),P=!1,B=!1,M=!0,u=!0,n=!0,S=!1,R=e.utils.state(),N=null,F=d3.dispatch("stateChange","changeState","renderEnd"),y=null,L=250,Q=!1;c.xScale(D).yScale(H);f.orient("bottom").tickPadding(10);p.orient(S?"right":"left").tickPadding(10);q.axis("x");v.axis("y");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return p.tickFormat()(a,c)});var K=e.utils.renderWatch(F,
L),t=function(a){return function(){return{active:a.map(function(a){return!a.disabled})}}},l=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}};a.dispatch=F;a.scatter=c;a.legend=h;a.xAxis=f;a.yAxis=p;a.distX=q;a.distY=v;a.tooltip=k;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return E},set:function(a){E=a}},height:{get:function(){return I},set:function(a){I=a}},container:{get:function(){return J},set:function(a){J=
a}},showDistX:{get:function(){return P},set:function(a){P=a}},showDistY:{get:function(){return B},set:function(a){B=a}},showLegend:{get:function(){return M},set:function(a){M=a}},showXAxis:{get:function(){return u},set:function(a){u=a}},showYAxis:{get:function(){return n},set:function(a){n=a}},defaultState:{get:function(){return N},set:function(a){N=a}},noData:{get:function(){return y},set:function(a){y=a}},duration:{get:function(){return L},set:function(a){L=a}},showLabels:{get:function(){return Q},
set:function(a){Q=a}},margin:{get:function(){return w},set:function(a){void 0!==a.top&&(A=w.top=a.top);w.right=void 0!==a.right?a.right:w.right;w.bottom=void 0!==a.bottom?a.bottom:w.bottom;w.left=void 0!==a.left?a.left:w.left}},rightAlignYAxis:{get:function(){return S},set:function(a){S=a;p.orient(a?"right":"left")}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a);h.color(G);q.color(G);v.color(G)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.sparkline=
function(){function a(q){M.reset();q.each(function(a){var n=f-c.left-c.right,q=p-c.top-c.bottom;h=d3.select(this);e.utils.initSVG(h);v.domain(I||d3.extent(a,w)).range(G||[0,n]);k.domain(J||d3.extent(a,A)).range(D||[q,0]);a=h.selectAll("g.nv-wrap.nv-sparkline").data([a]);a.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g");a.select("g");a.attr("transform","translate("+c.left+","+c.top+")");n=a.selectAll("path").data(function(a){return[a]});n.enter().append("path");n.exit().remove();
n.style("stroke",function(a,c){return a.color||E(a,c)}).attr("d",d3.svg.line().x(function(a,c){return v(w(a,c))}).y(function(a,c){return k(A(a,c))}));a=a.selectAll("circle.nv-point").data(function(a){function c(c){if(-1!=c){var e=a[c];e.pointIndex=c;return e}return null}var e=a.map(function(a,c){return A(a,c)}),f=c(e.lastIndexOf(k.domain()[1])),h=c(e.indexOf(k.domain()[0]));e=c(e.length-1);return[H?h:null,H?f:null,P?e:null].filter(function(a){return null!=a})});a.enter().append("circle");a.exit().remove();
a.attr("cx",function(a,c){return v(w(a,a.pointIndex))}).attr("cy",function(a,c){return k(A(a,a.pointIndex))}).attr("r",2).attr("class",function(a,c){return w(a,a.pointIndex)==v.domain()[1]?"nv-point nv-currentValue":A(a,a.pointIndex)==k.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})});M.renderEnd("sparkline immediate");return a}var c={top:2,right:0,bottom:2,left:0},f=400,p=32,h=null,q=!0,v=d3.scale.linear(),k=d3.scale.linear(),w=function(a){return a.x},A=function(a){return a.y},E=e.utils.getColor(["#000"]),
I,J,G,D,H=!0,P=!0,B=d3.dispatch("renderEnd"),M=e.utils.renderWatch(B);a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},xDomain:{get:function(){return I},set:function(a){I=a}},yDomain:{get:function(){return J},set:function(a){J=a}},xRange:{get:function(){return G},set:function(a){G=a}},yRange:{get:function(){return D},set:function(a){D=a}},xScale:{get:function(){return v},
set:function(a){v=a}},yScale:{get:function(){return k},set:function(a){k=a}},animate:{get:function(){return q},set:function(a){q=a}},showMinMaxPoints:{get:function(){return H},set:function(a){H=a}},showCurrentPoint:{get:function(){return P},set:function(a){P=a}},x:{get:function(){return w},set:function(a){w=d3.functor(a)}},y:{get:function(){return A},set:function(a){A=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:
c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return E},set:function(a){E=e.utils.getColor(a)}}});a.dispatch=B;e.utils.initOptions(a);return a};e.models.sparklinePlus=function(){function a(B){P.reset();P.models(c);B.each(function(B){function u(){if(!w){var a=L.selectAll(".nv-hoverValue").data(k),e=a.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);a.exit().transition().duration(250).style("stroke-opacity",
0).style("fill-opacity",0).remove();a.attr("transform",function(a){return"translate("+q(c.x()(B[a],a))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);k.length&&(e.append("line").attr("x1",0).attr("y1",-f.top).attr("x2",0).attr("y2",H),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-f.top).attr("text-anchor","end").attr("dy",".9em"),L.select(".nv-hoverValue .nv-xValue").text(A(c.x()(B[k[0]],k[0]))),e.append("text").attr("class","nv-yValue").attr("x",
6).attr("y",-f.top).attr("text-anchor","start").attr("dy",".9em"),L.select(".nv-hoverValue .nv-yValue").text(E(c.y()(B[k[0]],k[0]))))}}var n=d3.select(this);e.utils.initSVG(n);var D=e.utils.availableWidth(p,n,f),H=e.utils.availableHeight(h,n,f);a.update=function(){n.call(a)};a.container=this;if(B&&B.length)n.selectAll(".nv-noData").remove();else return e.utils.noData(a,n),a;var N=c.y()(B[B.length-1],B.length-1);q=c.xScale();v=c.yScale();var F=n.selectAll("g.nv-wrap.nv-sparklineplus").data([B]),y=
F.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),L=F.select("g");y.append("g").attr("class","nv-sparklineWrap");y.append("g").attr("class","nv-valueWrap");y.append("g").attr("class","nv-hoverArea");F.attr("transform","translate("+f.left+","+f.top+")");F=L.select(".nv-sparklineWrap");c.width(D).height(H);F.call(c);I&&(F=L.select(".nv-valueWrap").selectAll(".nv-currentValue").data([N]),F.enter().append("text").attr("class","nv-currentValue").attr("dx",G?-8:8).attr("dy",
".9em").style("text-anchor",G?"end":"start"),F.attr("x",D+(G?f.right:0)).attr("y",J?function(a){return v(a)}:0).style("fill",c.color()(B[B.length-1],B.length-1)).text(E(N)));y.select(".nv-hoverArea").append("rect").on("mousemove",function(){if(!w){var a=d3.mouse(this)[0]-f.left;a=Math.round(q.invert(a));for(var e=Math.abs(c.x()(B[0],0)-a),h=0,l=0;l<B.length;l++)Math.abs(c.x()(B[l],l)-a)<e&&(e=Math.abs(c.x()(B[l],l)-a),h=l);k=[h];u()}}).on("click",function(){w=!w}).on("mouseout",function(){k=[];u()});
L.select(".nv-hoverArea rect").attr("transform",function(a){return"translate("+-f.left+","+-f.top+")"}).attr("width",D+f.left+f.right).attr("height",H+f.top)});P.renderEnd("sparklinePlus immediate");return a}var c=e.models.sparkline(),f={top:15,right:100,bottom:10,left:50},p=null,h=null,q,v,k=[],w=!1,A=d3.format(",r"),E=d3.format(",.2f"),I=!0,J=!0,G=!1,D=null,H=d3.dispatch("renderEnd"),P=e.utils.renderWatch(H);a.dispatch=H;a.sparkline=c;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},
{width:{get:function(){return p},set:function(a){p=a}},height:{get:function(){return h},set:function(a){h=a}},xTickFormat:{get:function(){return A},set:function(a){A=a}},yTickFormat:{get:function(){return E},set:function(a){E=a}},showLastValue:{get:function(){return I},set:function(a){I=a}},alignValue:{get:function(){return J},set:function(a){J=a}},rightAlignValue:{get:function(){return G},set:function(a){G=a}},noData:{get:function(){return D},set:function(a){D=a}},margin:{get:function(){return f},
set:function(a){f.top=void 0!==a.top?a.top:f.top;f.right=void 0!==a.right?a.right:f.right;f.bottom=void 0!==a.bottom?a.bottom:f.bottom;f.left=void 0!==a.left?a.left:f.left}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.stackedArea=function(){function a(E){n.reset();n.models(B);E.each(function(E){var N=f-c.left-c.right,F=p-c.top-c.bottom;v=d3.select(this);e.utils.initSVG(v);H=B.xScale();P=B.yScale();var y=E;E.forEach(function(a,c){a.seriesIndex=c;a.values=a.values.map(function(a,
e){a.index=e;a.seriesIndex=c;return a})});E=E.filter(function(a){return!a.disabled});E=d3.layout.stack().order(J).offset(I).values(function(a){return a.values}).x(k).y(w).out(function(a,c,e){a.display={y:e,y0:c}})(E);var L=v.selectAll("g.nv-wrap.nv-stackedarea").data([E]),M=L.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),K=M.append("defs");M=M.append("g");var t=L.select("g");M.append("g").attr("class","nv-areaWrap");M.append("g").attr("class","nv-scatterWrap");L.attr("transform",
"translate("+c.left+","+c.top+")");0==B.forceY().length&&B.forceY().push(0);B.width(N).height(F).x(k).y(function(a){if(void 0!==a.display)return a.display.y+a.display.y0}).color(E.map(function(a,c){a.color=a.color||h(a,a.seriesIndex);return a.color}));t.select(".nv-scatterWrap").datum(E).call(B);K.append("clipPath").attr("id","nv-edge-clip-"+q).append("rect");L.select("#nv-edge-clip-"+q+" rect").attr("width",N).attr("height",F);t.attr("clip-path",D?"url(#nv-edge-clip-"+q+")":"");var l=d3.svg.area().defined(A).x(function(a,
c){return H(k(a,c))}).y0(function(a){return P(a.display.y0)}).y1(function(a){return P(a.display.y+a.display.y0)}).interpolate(G),S=d3.svg.area().defined(A).x(function(a,c){return H(k(a,c))}).y0(function(a){return P(a.display.y0)}).y1(function(a){return P(a.display.y0)});N=t.select(".nv-areaWrap").selectAll("path.nv-area").data(function(a){return a});N.enter().append("path").attr("class",function(a,c){return"nv-area nv-area-"+c}).attr("d",function(a,c){return S(a.values,a.seriesIndex)}).on("mouseover",
function(a,c){d3.select(this).classed("hover",!0);u.areaMouseover({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1);u.areaMouseout({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})}).on("click",function(a,c){d3.select(this).classed("hover",!1);u.areaClick({point:a,series:a.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:a.seriesIndex})});N.exit().remove();N.style("fill",
function(a,c){return a.color||h(a,a.seriesIndex)}).style("stroke",function(a,c){return a.color||h(a,a.seriesIndex)});N.watchTransition(n,"stackedArea path").attr("d",function(a,c){return l(a.values,c)});B.dispatch.on("elementMouseover.area",function(a){t.select(".nv-chart-"+q+" .nv-area-"+a.seriesIndex).classed("hover",!0)});B.dispatch.on("elementMouseout.area",function(a){t.select(".nv-chart-"+q+" .nv-area-"+a.seriesIndex).classed("hover",!1)});a.d3_stackedOffset_stackPercent=function(a){var c=a.length,
e=a[0].length,f,h,k,l=[];for(h=0;h<e;++h){for(k=f=0;f<y.length;f++)k+=w(y[f].values[h]);if(k)for(f=0;f<c;f++)a[f][h][1]/=k;else for(f=0;f<c;f++)a[f][h][1]=0}for(h=0;h<e;++h)l[h]=0;return l}});n.renderEnd("stackedArea immediate");return a}var c={top:0,right:0,bottom:0,left:0},f=960,p=500,h=e.utils.defaultColor(),q=Math.floor(1E5*Math.random()),v=null,k=function(a){return a.x},w=function(a){return a.y},A=function(a,c){return!isNaN(w(a,c))&&null!==w(a,c)},E="stack",I="zero",J="default",G="linear",D=
!1,H,P,B=e.models.scatter(),M=250,u=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");B.pointSize(2.2).pointDomain([2.2,2.2]);var n=e.utils.renderWatch(u,M);a.dispatch=u;a.scatter=B;B.dispatch.on("elementClick",function(){u.elementClick.apply(this,arguments)});B.dispatch.on("elementMouseover",function(){u.elementMouseover.apply(this,arguments)});B.dispatch.on("elementMouseout",function(){u.elementMouseout.apply(this,arguments)});
a.interpolate=function(c){if(!arguments.length)return G;G=c;return a};a.duration=function(c){if(!arguments.length)return M;M=c;n.reset(M);B.duration(M);return a};a.dispatch=u;a.scatter=B;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return f},set:function(a){f=a}},height:{get:function(){return p},set:function(a){p=a}},defined:{get:function(){return A},set:function(a){A=a}},clipEdge:{get:function(){return D},set:function(a){D=a}},offset:{get:function(){return I},
set:function(a){I=a}},order:{get:function(){return J},set:function(a){J=a}},interpolate:{get:function(){return G},set:function(a){G=a}},x:{get:function(){return k},set:function(a){k=d3.functor(a)}},y:{get:function(){return w},set:function(a){w=d3.functor(a)}},margin:{get:function(){return c},set:function(a){c.top=void 0!==a.top?a.top:c.top;c.right=void 0!==a.right?a.right:c.right;c.bottom=void 0!==a.bottom?a.bottom:c.bottom;c.left=void 0!==a.left?a.left:c.left}},color:{get:function(){return h},set:function(a){h=
e.utils.getColor(a)}},style:{get:function(){return E},set:function(c){E=c;switch(E){case "stack":a.offset("zero");a.order("default");break;case "stream":a.offset("wiggle");a.order("inside-out");break;case "stream-center":a.offset("silhouette");a.order("inside-out");break;case "expand":a.offset("expand");a.order("default");break;case "stack_percent":a.offset(a.d3_stackedOffset_stackPercent),a.order("default")}}},duration:{get:function(){return M},set:function(a){M=a;n.reset(M);B.duration(M)}}});e.utils.inheritOptions(a,
B);e.utils.initOptions(a);return a};e.models.stackedAreaChart=function(){function a(k){U.reset();U.models(c);B&&U.models(f);M&&U.models(p);k.each(function(k){function K(){B&&va.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+ha+")").transition().duration(X).call(f)}function U(){if(M){if("expand"===c.style()||"stack_percent"===c.style()){var a=p.tickFormat();T&&a===Fa||(T=a);p.tickFormat(Fa)}else T&&(p.tickFormat(T),T=null);va.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(p)}}
function ca(a){va.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}).map(function(e,f){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,f){return c.x()(e,f)>=a[0]&&c.x()(e,f)<=a[1]}),disableTooltip:e.disableTooltip}})).transition().duration(X).call(c);K();U()}var ia=d3.select(this);e.utils.initSVG(ia);var da=e.utils.availableWidth(I,ia,A),ha=e.utils.availableHeight(J,ia,A)-(n?w.height():0);a.update=function(){ia.transition().duration(X).call(a)};
a.container=this;L.setter(ra(k),a.update).getter(V(k)).update();L.disabled=k.map(function(a){return!!a.disabled});if(!Q)for(na in Q={},L)Q[na]=L[na]instanceof Array?L[na].slice(0):L[na];if(k&&k.length&&k.filter(function(a){return a.values.length}).length)ia.selectAll(".nv-noData").remove();else return e.utils.noData(a,ia),a;F=c.xScale();y=c.yScale();var na=ia.selectAll("g.nv-wrap.nv-stackedAreaChart").data([k]);var xa=na.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),
va=na.select("g");xa.append("g").attr("class","nv-legendWrap");xa.append("g").attr("class","nv-controlsWrap");var ta=xa.append("g").attr("class","nv-focus");ta.append("g").attr("class","nv-background").append("rect");ta.append("g").attr("class","nv-x nv-axis");ta.append("g").attr("class","nv-y nv-axis");ta.append("g").attr("class","nv-stackedWrap");ta.append("g").attr("class","nv-interactive");xa.append("g").attr("class","nv-focusWrap");H?(xa=D&&"top"===P?da-l:da,h.width(xa),va.select(".nv-legendWrap").datum(k).call(h),
"bottom"===P?(xa=(B?12:0)+10,A.bottom=Math.max(h.height()+xa,A.bottom),ha=e.utils.availableHeight(J,ia,A)-(n?w.height():0),xa=ha+xa,va.select(".nv-legendWrap").attr("transform","translate(0,"+xa+")")):"top"===P&&(E||A.top==h.height()||(A.top=h.height(),ha=e.utils.availableHeight(J,ia,A)-(n?w.height():0)),va.select(".nv-legendWrap").attr("transform","translate("+(da-xa)+","+-A.top+")"))):va.select(".nv-legendWrap").selectAll("*").remove();if(D){var Ka=[{key:aa.stacked||"Stacked",metaKey:"Stacked",
disabled:"stack"!=c.style(),style:"stack"},{key:aa.stream||"Stream",metaKey:"Stream",disabled:"stream"!=c.style(),style:"stream"},{key:aa.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=c.style(),style:"expand"},{key:aa.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=c.style(),style:"stack_percent"}];l=Z.length/3*260;Ka=Ka.filter(function(a){return-1!==Z.indexOf(a.metaKey)});q.width(l).color(["#444","#444","#444"]);va.select(".nv-controlsWrap").datum(Ka).call(q);
xa=Math.max(q.height(),H&&"top"===P?h.height():0);A.top!=xa&&(A.top=xa,ha=e.utils.availableHeight(J,ia,A)-(n?w.height():0));va.select(".nv-controlsWrap").attr("transform","translate(0,"+-A.top+")")}else va.select(".nv-controlsWrap").selectAll("*").remove();na.attr("transform","translate("+A.left+","+A.top+")");u&&va.select(".nv-y.nv-axis").attr("transform","translate("+da+",0)");S&&(v.width(da).height(ha).margin({left:A.left,top:A.top}).svgContainer(ia).xScale(F),na.select(".nv-interactive").call(v));
va.select(".nv-focus .nv-background rect").attr("width",da).attr("height",ha);c.width(da).height(ha).color(k.map(function(a,c){return a.color||G(a,c)}).filter(function(a,c){return!k[c].disabled}));na=va.select(".nv-focus .nv-stackedWrap").datum(k.filter(function(a){return!a.disabled}));B&&f.scale(F)._ticks(e.utils.calcTicksX(da/100,k)).tickSize(-ha,0);M&&(xa="wiggle"===c.offset()?0:e.utils.calcTicksY(ha/36,k),p.scale(y)._ticks(xa).tickSize(-da,0));n?(w.width(da),va.select(".nv-focusWrap").attr("transform",
"translate(0,"+(ha+A.bottom+w.margin().top)+")").datum(k.filter(function(a){return!a.disabled})).call(w),da=w.brush.empty()?w.xDomain():w.brush.extent(),null!==da&&ca(da)):(na.transition().call(c),K(),U());c.dispatch.on("areaClick.toggle",function(c){1===k.filter(function(a){return!a.disabled}).length?k.forEach(function(a){a.disabled=!1}):k.forEach(function(a,e){a.disabled=e!=c.seriesIndex});L.disabled=k.map(function(a){return!!a.disabled});t.stateChange(L);a.update()});h.dispatch.on("stateChange",
function(c){for(var e in c)L[e]=c[e];t.stateChange(L);a.update()});q.dispatch.on("legendClick",function(e,f){e.disabled&&(Ka=Ka.map(function(a){a.disabled=!0;return a}),e.disabled=!1,c.style(e.style),L.style=c.style(),t.stateChange(L),a.update())});v.dispatch.on("elementMousemove",function(f){c.clearHighlights();var h,l,n,p=[],q=0,t=!0;k.filter(function(a,c){a.seriesIndex=c;return!a.disabled}).forEach(function(k,r){l=e.interactiveBisect(k.values,f.pointXValue,a.x());var u=k.values[l];null!=a.y()(u,
l)&&c.highlightPoint(r,l,!0);"undefined"!==typeof u&&("undefined"===typeof h&&(h=u),"undefined"===typeof n&&(n=a.xScale()(a.x()(u,l))),r="expand"==c.style()?u.display.y:a.y()(u,l),p.push({key:k.key,value:r,color:G(k,k.seriesIndex),point:u}),R&&"expand"!=c.style()&&null!=r&&(q+=r,t=!1))});p.reverse();if(2<p.length){var u=a.yScale().invert(f.mouseY),w=null;p.forEach(function(a,c){u=Math.abs(u);var e=Math.abs(a.point.display.y0);a=Math.abs(a.point.display.y);u>=e&&u<=a+e&&(w=c)});null!=w&&(p[w].highlight=
!0)}R&&"expand"!=c.style()&&2<=p.length&&!t&&p.push({key:N,value:q,total:!0});var y=a.x()(h,l),A=v.tooltip.valueFormatter();"expand"===c.style()||"stack_percent"===c.style()?(r||(r=A),A=d3.format(".1%")):r&&(A=r,r=null);v.tooltip.valueFormatter(A).data({value:y,series:p})();v.renderGuideLine(n)});v.dispatch.on("elementMouseout",function(a){c.clearHighlights()});w.dispatch.on("onBrush",function(a){ca(a)});t.on("changeState",function(e){"undefined"!==typeof e.disabled&&k.length===e.disabled.length&&
(k.forEach(function(a,c){a.disabled=e.disabled[c]}),L.disabled=e.disabled);"undefined"!==typeof e.style&&c.style(e.style);a.update()})});U.renderEnd("stacked Area chart immediate");return a}var c=e.models.stackedArea(),f=e.models.axis(),p=e.models.axis(),h=e.models.legend(),q=e.models.legend(),v=e.interactiveGuideline(),k=e.models.tooltip(),w=e.models.focus(e.models.stackedArea()),A={top:10,right:25,bottom:50,left:60},E=null,I=null,J=null,G=e.utils.defaultColor(),D=!0,H=!0,P="top",B=!0,M=!0,u=!1,
n=!1,S=!1,R=!0,N="TOTAL",F,y,L=e.utils.state(),Q=null,K=null,t=d3.dispatch("stateChange","changeState","renderEnd"),l=250,Z=["Stacked","Stream","Expanded"],aa={},X=250;L.style=c.style();f.orient("bottom").tickPadding(7);p.orient(u?"right":"left");k.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return p.tickFormat()(a,c)});v.tooltip.headerFormatter(function(a,c){return f.tickFormat()(a,c)}).valueFormatter(function(a,c){return null==a?"N/A":p.tickFormat()(a,
c)});var T=null,r=null;q.updateState(!1);var U=e.utils.renderWatch(t);c.style();var V=function(a){return function(){return{active:a.map(function(a){return!a.disabled}),style:c.style()}}},ra=function(a){return function(c){void 0!==c.active&&a.forEach(function(a,e){a.disabled=!c.active[e]})}},Fa=d3.format("%");c.dispatch.on("elementMouseover.tooltip",function(a){a.point.x=c.x()(a.point);a.point.y=c.y()(a.point);k.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){k.hidden(!0)});
a.dispatch=t;a.stacked=c;a.legend=h;a.controls=q;a.xAxis=f;a.x2Axis=w.xAxis;a.yAxis=p;a.y2Axis=w.yAxis;a.interactiveLayer=v;a.tooltip=k;a.focus=w;a.dispatch=t;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{width:{get:function(){return I},set:function(a){I=a}},height:{get:function(){return J},set:function(a){J=a}},showLegend:{get:function(){return H},set:function(a){H=a}},legendPosition:{get:function(){return P},set:function(a){P=a}},showXAxis:{get:function(){return B},set:function(a){B=
a}},showYAxis:{get:function(){return M},set:function(a){M=a}},defaultState:{get:function(){return Q},set:function(a){Q=a}},noData:{get:function(){return K},set:function(a){K=a}},showControls:{get:function(){return D},set:function(a){D=a}},controlLabels:{get:function(){return aa},set:function(a){aa=a}},controlOptions:{get:function(){return Z},set:function(a){Z=a}},showTotalInTooltip:{get:function(){return R},set:function(a){R=a}},totalLabel:{get:function(){return N},set:function(a){N=a}},focusEnable:{get:function(){return n},
set:function(a){n=a}},focusHeight:{get:function(){return w.height()},set:function(a){w.height(a)}},brushExtent:{get:function(){return w.brushExtent()},set:function(a){w.brushExtent(a)}},margin:{get:function(){return A},set:function(a){void 0!==a.top&&(E=A.top=a.top);A.right=void 0!==a.right?a.right:A.right;A.bottom=void 0!==a.bottom?a.bottom:A.bottom;A.left=void 0!==a.left?a.left:A.left}},focusMargin:{get:function(){return w.margin},set:function(a){w.margin.top=void 0!==a.top?a.top:w.margin.top;w.margin.right=
void 0!==a.right?a.right:w.margin.right;w.margin.bottom=void 0!==a.bottom?a.bottom:w.margin.bottom;w.margin.left=void 0!==a.left?a.left:w.margin.left}},duration:{get:function(){return X},set:function(a){X=a;U.reset(X);c.duration(X);f.duration(X);p.duration(X)}},color:{get:function(){return G},set:function(a){G=e.utils.getColor(a);h.color(G);c.color(G);w.color(G)}},x:{get:function(){return c.x()},set:function(a){c.x(a);w.x(a)}},y:{get:function(){return c.y()},set:function(a){c.y(a);w.y(a)}},rightAlignYAxis:{get:function(){return u},
set:function(a){u=a;p.orient(u?"right":"left")}},useInteractiveGuideline:{get:function(){return S},set:function(e){S=!!e;a.interactive(!e);a.useVoronoi(!e);c.scatter.interactive(!e)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.models.stackedAreaWithFocusChart=function(){return e.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)};e.models.sunburst=function(){function a(a){var c=Math.max(0,Math.min(2*Math.PI,F(a.x)));a=Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)));return(c+
a)/2*(180/Math.PI)-90}function c(a){var c=Math.max(0,Math.min(2*Math.PI,F(a.x)));return(Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)))-c)/(2*Math.PI)}function f(a){var c=Math.max(0,Math.min(2*Math.PI,F(a.x)));return Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)))-c>M}function p(a,c){var e=d3.interpolate(F.domain(),[Q.x,Q.x+Q.dx]),f=d3.interpolate(y.domain(),[Q.y,1]),h=d3.interpolate(y.range(),[Q.y?20:0,l]);return 0===c?function(){return aa(a)}:function(c){F.domain(e(c));y.domain(f(c)).range(h(c));return aa(a)}}
function h(a){var c=d3.interpolate({x:a.x0,dx:a.dx0,y:a.y0,dy:a.dy0},a);return function(e){e=c(e);a.x0=e.x;a.dx0=e.dx;a.y0=e.y;a.dy0=e.dy;return aa(e)}}function q(a){a.forEach(function(a){var c=n(a);(c=Z[c])?(a.dx0=c.dx,a.x0=c.x,a.dy0=c.dy,a.y0=c.y):(a.dx0=a.dx,a.x0=a.x,a.dy0=a.dy,a.y0=a.y);c=n(a);Z[c]||(Z[c]={});c=Z[c];c.dx=a.dx;c.x=a.x;c.dy=a.dy;c.y=a.y})}function v(c){var e=D.selectAll("text"),h=D.selectAll("path");e.transition().attr("opacity",0);Q=c;h.transition().duration(R).attrTween("d",p).each("end",
function(e){e.x>=c.x&&e.x<c.x+c.dx&&e.depth>=c.depth&&d3.select(this.parentNode).select("text").transition().duration(R).text(function(a){return B(a)}).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(){var f=this.getBBox().width;if(0===e.depth)return"translate("+f/2*-1+",0)";if(e.depth===c.depth)return"translate("+(y(e.y)+5)+",0)";var h=a(e),k=90<a(e)?180:0;return 0===k?"rotate("+h+")translate("+(y(e.y)+5)+",0)":"rotate("+h+")translate("+(y(e.y)+f+5)+",0)rotate("+k+")"})})}
function k(p){X.reset();p.each(function(k){D=d3.select(this);K=e.utils.availableWidth(A,D,w);t=e.utils.availableHeight(E,D,w);l=Math.min(K,t)/2;y.range([0,l]);var p=D.select("g.nvd3.nv-wrap.nv-sunburst");p[0][0]?p.attr("transform","translate("+(K/2+w.left+w.right)+","+(t/2+w.top+w.bottom)+")"):p=D.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+G).attr("transform","translate("+(K/2+w.left+w.right)+","+(t/2+w.top+w.bottom)+")");D.on("click",function(a,c){N.chartClick({data:a,index:c,
pos:d3.event,id:G})});L.value(J[I]||J.count);k=L.nodes(k[0]).reverse();q(k);p=p.selectAll(".arc-container").data(k,n);p.enter().append("g").attr("class","arc-container").append("path").attr("d",aa).style("fill",function(a){return a.color?a.color:S?H((a.children?a:a.parent).name):H(a.name)}).style("stroke","#FFF").on("click",function(a,c){v(a);N.elementClick({data:a,index:c})}).on("mouseover",function(a,e){d3.select(this).classed("hover",!0).style("opacity",.8);N.elementMouseover({data:a,color:d3.select(this).style("fill"),
percent:c(a)})}).on("mouseout",function(a,c){d3.select(this).classed("hover",!1).style("opacity",1);N.elementMouseout({data:a})}).on("mousemove",function(a,c){N.elementMousemove({data:a})});p.each(function(a){d3.select(this).select("path").transition().duration(R).attrTween("d",h)});P&&(p.selectAll("text").remove(),p.append("text").text(function(a){return B(a)}).transition().duration(R).attr("opacity",function(a){return f(a)?1:0}).attr("transform",function(c){var e=this.getBBox().width;if(0===c.depth)return"rotate(0)translate("+
e/2*-1+",0)";var f=a(c),h=90<a(c)?180:0;return 0===h?"rotate("+f+")translate("+(y(c.y)+5)+",0)":"rotate("+f+")translate("+(y(c.y)+e+5)+",0)rotate("+h+")"}));v(k[k.length-1]);p.exit().transition().duration(R).attr("opacity",0).each("end",function(a){a=n(a);Z[a]=void 0}).remove()});X.renderEnd("sunburst immediate");return k}var w={top:0,right:0,bottom:0,left:0},A=600,E=600,I="count",J={count:function(a){return 1},value:function(a){return a.value||a.size},size:function(a){return a.value||a.size}},G=
Math.floor(1E4*Math.random()),D=null,H=e.utils.defaultColor(),P=!1,B=function(a){return"count"===I?a.name+" #"+a.value:a.name+" "+(a.value||a.size)},M=.02,u=function(a,c){return a.name>c.name},n=function(a,c){return a.name},S=!0,R=500,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),F=d3.scale.linear().range([0,2*Math.PI]),y=d3.scale.sqrt(),L=d3.layout.partition().sort(u),Q,K,t,l,Z={},aa=d3.svg.arc().startAngle(function(a){return Math.max(0,
Math.min(2*Math.PI,F(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,F(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,y(a.y))}).outerRadius(function(a){return Math.max(0,y(a.y+a.dy))}),X=e.utils.renderWatch(N);k.dispatch=N;k.options=e.utils.optionsFunc.bind(k);k._options=Object.create({},{width:{get:function(){return A},set:function(a){A=a}},height:{get:function(){return E},set:function(a){E=a}},mode:{get:function(){return I},set:function(a){I=a}},id:{get:function(){return G},
set:function(a){G=a}},duration:{get:function(){return R},set:function(a){R=a}},groupColorByParent:{get:function(){return S},set:function(a){S=!!a}},showLabels:{get:function(){return P},set:function(a){P=!!a}},labelFormat:{get:function(){return B},set:function(a){B=a}},labelThreshold:{get:function(){return M},set:function(a){M=a}},sort:{get:function(){return u},set:function(a){u=a}},key:{get:function(){return n},set:function(a){n=a}},margin:{get:function(){return w},set:function(a){w.top=void 0!=a.top?
a.top:w.top;w.right=void 0!=a.right?a.right:w.right;w.bottom=void 0!=a.bottom?a.bottom:w.bottom;w.left=void 0!=a.left?a.left:w.left}},color:{get:function(){return H},set:function(a){H=e.utils.getColor(a)}}});e.utils.initOptions(k);return k};e.models.sunburstChart=function(){function a(f){E.reset();E.models(c);f.each(function(f){var h=d3.select(this);e.utils.initSVG(h);var k=e.utils.availableWidth(null,h,p),q=e.utils.availableHeight(null,h,p);a.update=function(){0===w?h.call(a):h.transition().duration(w).call(a)};
a.container=h;if(f&&f.length)h.selectAll(".nv-noData").remove();else return e.utils.noData(a,h),a;c.width(k).height(q).margin(p);h.call(c)});E.renderEnd("sunburstChart immediate");return a}var c=e.models.sunburst(),f=e.models.tooltip(),p={top:30,right:20,bottom:20,left:20},h=e.utils.defaultColor(),q=!1,v=null,k=null,w=250,A=d3.dispatch("stateChange","changeState","renderEnd"),E=e.utils.renderWatch(A);f.duration(0).headerEnabled(!1).valueFormatter(function(a){return a});c.dispatch.on("elementMouseover.tooltip",
function(a){a.series={key:a.data.name,value:a.data.value||a.data.size,color:a.color,percent:a.percent};q||(delete a.percent,delete a.series.percent);f.data(a).hidden(!1)});c.dispatch.on("elementMouseout.tooltip",function(a){f.hidden(!0)});c.dispatch.on("elementMousemove.tooltip",function(a){f()});a.dispatch=A;a.sunburst=c;a.tooltip=f;a.options=e.utils.optionsFunc.bind(a);a._options=Object.create({},{noData:{get:function(){return k},set:function(a){k=a}},defaultState:{get:function(){return v},set:function(a){v=
a}},showTooltipPercent:{get:function(){return q},set:function(a){q=a}},color:{get:function(){return h},set:function(a){h=a;c.color(h)}},duration:{get:function(){return w},set:function(a){w=a;E.reset(w);c.duration(w)}},margin:{get:function(){return p},set:function(a){p.top=void 0!==a.top?a.top:p.top;p.right=void 0!==a.right?a.right:p.right;p.bottom=void 0!==a.bottom?a.bottom:p.bottom;p.left=void 0!==a.left?a.left:p.left;c.margin(p)}}});e.utils.inheritOptions(a,c);e.utils.initOptions(a);return a};e.version=
"1.8.5"})();
(function(e,a){var c=0;e.widget("s3.timeplot",{options:{ajaxURL:null,autoSubmit:1E3,burnDown:!1,emptyMessage:"No data available",thousandSeparator:" ",thousandGrouping:"3",precision:null,defaultChartType:"linechart",defaultChartAxis:"totals"},_create:function(){this.id=c;c+=1},_init:function(){var a=e(this.element),c=this.options;this.widget_id=a.attr("id");this.input=a.find('input[type="hidden"][name="tp-data"]').first();this.svg=this.data=null;a=a.find(".tp-chart");this.chart=a.length?a.first():
null;this.currentChart={type:null,chart:null,container:null};c.numberFormatter=function(a){var e=c.precision;if(null===a||"undefined"==typeof a)return"-";e=e||0==e?a.toFixed(e):a.toString();e=e.split(".");a=e[0];e=1<e.length?"."+e[1]:"";a=a.replace(new RegExp("\\B(?=(\\d{"+c.thousandGrouping+"})+(?!\\d))","g"),c.thousandSeparator);return a+e};this.refresh()},_destroy:function(){var a=this.element;this._unbindEvents();this.svg&&(this.svg.remove(),this.svg=null,a.find(".tp-chart").empty());this.data=
null;e.Widget.prototype.destroy.call(this)},refresh:function(){var a=this.element;this._unbindEvents();this._renderChart();this._renderChartOptions();this.options.autoSubmit?a.find(".tp-submit").hide():a.find(".tp-submit").show();this._bindEvents();a.find(".tp-throbber").hide()},_renderChartOptions:function(){var a=e(this.element),c=a.find(".tp-chart-controls").first().empty();if(!this.data.e){var h=a.attr("id");a=e('<div class="pt-chart-opts">');var q=h+"-bchart-totals";h+="-lchart-totals";e(a).append(e('<span id="'+
h+'" class="tp-chart-icon tp-lchart"/><span class="tp-chart-label">Line Chart</span>'));e(a).append(e('<span id="'+q+'" class="tp-chart-icon tp-bchart"/><span class="tp-chart-label">Bar Chart</span>'));e(c).append(a)}},_renderChart:function(a){var c=this.chart;if(c){var e=this.options,f=this.currentChart,v=null,k=null;a?(v=a.type,k=a.axis):(f&&(v=f.type,k=f.axis),v&&k||(v=e.defaultChartType,k=e.defaultChartAxis));f.type==v&&f.axis==k||this._removeChart();a=this.element;e=a.find(".tp-empty");f=this.data;
null===f&&(f=JSON.parse(this.input.val()));f||(f={e:!0});this.data=f;if(f.e)this._removeChart(),a.find(".tp-empty").show();else switch(e.hide(),c.show(),k){case "totals":switch(v){case "barchart":this._renderBarChart(c,f.f,f.p);break;default:this._renderLineChart(c,f.f,f.p)}}}},_removeChart:function(){var a=this.chart;a&&(a.empty().hide(),a=this.currentChart,a.container=null,a.chart=null,a.type=null,a.axis=null,e(window).off("resize.tp"))},_renderBarChart:function(a,c,h){var f=[];for(c=0;c<h.length;c++){var p=
h[c];f.push({start:(new Date(p.t[0])).getTime(),value:p.v[0]})}h=this.currentChart;if(h.chart){var k=h.container;var w=h.chart;k.datum([{key:"reportChart",values:f}]).transition().duration(500).call(w)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),k=d3.select(e(a).get(0)).append("svg").attr("class","nv"),w=nv.models.discreteBarChart().x(function(a){return a.start}).y(function(a){return a.value}).color(["silver"]).staggerLabels(!0).showValues(!0).forceY([0,
1]),w.tooltip.enabled(!1),a=this.options.numberFormatter,w.valueFormat(a),w.yAxis.tickFormat(a),w.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){k.datum([{key:"reportChart",values:f}]).transition().duration(500).call(w);e(window).off("resize.tp").on("resize.tp",function(a){w.update(a)});return w}),h.container=k,h.chart=w,h.type="barchart",h.axis="totals"},_renderLineChart:function(a,c,h){var f=[],p={},k=0,w=1==c.length,A;for(A=0;A<c.length;A++){var E=
c[A][0];p.hasOwnProperty(E)&&(k=p[E]+1);(p[E]=k)&&(E+=" ["+(k+1)+"]");var I={key:E,label:c[A][0],area:w},J=[];for(E=0;E<h.length;E++){var G=h[E];J.push({start:(new Date(G.t[0])).getTime(),value:G.v[A]})}I.values=J;f.push(I)}c=this.currentChart;if(c.chart){var D=c.container;var H=c.chart;D.datum(f).transition().duration(250).call(H)}else e(a).closest(".tp-chart-contents").show().css({width:"96%"}),e(a).css({height:"360px"}),D=d3.select(e(a).get(0)).append("svg").attr("class","nv"),H=nv.models.lineChart().x(function(a){return a.start}).y(function(a){return a.value}).margin({right:50}).duration(250).showLegend(!0).useInteractiveGuideline(!0).forceY([0,
1]),H.yAxis.tickFormat(this.options.numberFormatter),H.xAxis.tickFormat(function(a){return(new Date(a)).toLocaleDateString()}),nv.addGraph(function(){D.datum(f).transition().duration(500).call(H);e(window).off("resize.tp").on("resize.tp",function(a){H.update(a)});return H}),c.container=D,c.chart=H,c.type="linechart",c.axis="totals"},reload:function(c,p,h){h="undefined"!=typeof h?h:!0;"undefined"==typeof p&&(p=this._getFilters());var f=this,v=!1;e(this.element).find(".tp-throbber").show();if(c||p)v=
this._updateAjaxURL(c,p);v||h?(c=this.options.ajaxURL,p=e.ajaxS3,e.searchS3!==a&&(p=e.searchS3),p({url:c,type:"GET",dataType:"json",success:function(a){f.input.val(JSON.stringify(a));f.data=a;f.refresh()},error:function(a,c,e){console.log("UNAUTHORIZED"==e?i18n.gis_requires_login:a.responseText)}})):f.refresh()},_getOptions:function(){var a="#"+e(this.element).attr("id"),c=e(a+"-time").val(),h=a=null,q=null;"custom"!=c&&(c=c.split("|"),3==c.length&&(a=c[0],h=c[1],q=c[2]));return{start:a,end:h,slots:q}},
_getFilters:function(){var a=e("#"+this.widget_id+"-filters");try{return a.length?S3.search.getCurrentFilters(a.first()):null}catch(p){return null}},_updateAjaxURL:function(a,c){var f=this.options.ajaxURL;if(!f)return!1;var p=f.split("?");if(1<p.length){var v=p[1];var k=v.split("&")}else v="",k=[];var w=[];f=!1;if(a)for(var A in a)v=a[A],v=A+"="+v,f||-1!=e.inArray(v,k)||(f=!0),w.push(v);A={};var E={},I;if(c){var J=function(a){var c,e,f=[];["contains","anyof","belongs","eq"].forEach(function(h){c=
new RegExp("__"+h+"$","g");a.match(c)?e=c:f.push(h)});e&&f.forEach(function(c){E[a.replace(e,"__"+c)]=!0})};v=0;for(I=c.length;v<I;v++){var G=c[v];var D=G[0];G=G[1];J(D);null===G?A[D]||(E[D]=!0):(E[D]&&(E[D]=!1),G=D+"="+encodeURIComponent(G),A[D]?A[D].push(G):A[D]=[G])}}v=0;for(I=k.length;v<I;v++)G=k[v].split("="),1<G.length&&(D=decodeURIComponent(G[0]),G=decodeURIComponent(G[1]),E[D]?f=!0:A[D]?f||-1!=e.inArray(D+"="+G,A[D])||(f=!0):a&&a.hasOwnProperty(D)||w.push(k[v]));for(D in A)for(v=0,I=A[D].length;v<
I;v++)f||-1!=e.inArray(A[D][v],k)||(f=!0),w.push(A[D][v]);a=w.join("&");c=p[0];a&&(c=c+"?"+a);this.options.ajaxURL=c;return f},_parseDate:function(a){return d3.time.format("%Y-%m-%dT%H:%M:%S+00:00").parse(a)},_bindEvents:function(){var a=this,c="#"+this.widget_id;e(c+"-options legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-filters legend").click(function(){e(this).siblings().toggle();e(this).children().toggle()});e(c+"-time").on("change.autosubmit",function(){e(c+
"-tp-form").trigger("optionChanged")});if(this.options.autoSubmit){var h=this.options.autoSubmit;e(c+"-tp-form").on("optionChanged",function(){var c=e(this);if(!c.data("noAutoSubmit")){var f=c.data("autoSubmitTimeout");f&&clearTimeout(f);f=setTimeout(function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)},h);c.data("autoSubmitTimeout",f)}})}else e(c+"-tp-form input.tp-submit").on("click.timeplot",function(){var c=a._getOptions(),e=a._getFilters();a.reload(c,e,!1)});e(c+"-lchart-totals").click(function(){a._renderChart({type:"linechart",
axis:"totals"})});e(c+"-bchart-totals").click(function(){a._renderChart({type:"barchart",axis:"totals"})})},_unbindEvents:function(){var a="#"+this.widget_id;e(window).off("resize.timeplot");e(a+"-tp-form").off("optionChanged");e(a+"-tp-form input.tp-submit").off("click.timeplot");e(a+"-time").unbind("change.autosubmit");e(a+"-options legend").unbind("click");e(a+"-filters legend").unbind("click");e(a+"-lchart-totals,"+a+"-bchart-totals").unbind("click")}})})(jQuery);
