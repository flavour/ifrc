/*
 2019 (c) Sahana Software Foundation
 @license MIT

 requires jQuery 1.9.1+
 requires jQuery UI 1.10 widget factory
*/
(function(a,e){var d=0;a.widget("s3.consentQuestion",{options:{},_create:function(){this.id=d;d+=1;this.eventNamespace=".consentQuestion"},_init:function(){var b=a(this.element);this.input=a("#"+b.attr("id")+"-response");this.refresh()},_destroy:function(){a.Widget.prototype.destroy.call(this)},refresh:function(){this._unbindEvents();this._bindEvents()},_deserialize:function(){var a=this.input.val(),c={};if(a)try{c=JSON.parse(a)}catch(f){}return c},_serialize:function(){var b=a(this.element),c=this._deserialize();
a(".consent-checkbox",b).each(function(){var b=a(this).data("code");b=c[b];b!==e&&(b[1]=a(this).prop("checked"))});this.input.val(JSON.stringify(c))},_bindEvents:function(){var b=this;a(this.element).on("change"+this.eventNamespace,".consent-checkbox",function(){b._serialize()});return!0},_unbindEvents:function(){a(this.element).off(this.eventNamespace);return!0}})})(jQuery);
